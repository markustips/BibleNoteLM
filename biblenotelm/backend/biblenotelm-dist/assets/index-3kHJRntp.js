(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();function eS(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Lp={exports:{}},qc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Y_;function WI(){if(Y_)return qc;Y_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,i,a){var l=null;if(a!==void 0&&(l=""+a),i.key!==void 0&&(l=""+i.key),"key"in i){a={};for(var d in i)d!=="key"&&(a[d]=i[d])}else a=i;return i=a.ref,{$$typeof:n,type:r,key:l,ref:i!==void 0?i:null,props:a}}return qc.Fragment=e,qc.jsx=t,qc.jsxs=t,qc}var K_;function QI(){return K_||(K_=1,Lp.exports=WI()),Lp.exports}var h=QI(),Vp={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function ZI(){if(X_)return je;X_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),T=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=T&&z[T]||z["@@iterator"],typeof z=="function"?z:null)}var I={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,N={};function U(z,ie,pe){this.props=z,this.context=ie,this.refs=N,this.updater=pe||I}U.prototype.isReactComponent={},U.prototype.setState=function(z,ie){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ie,"setState")},U.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function B(){}B.prototype=U.prototype;function F(z,ie,pe){this.props=z,this.context=ie,this.refs=N,this.updater=pe||I}var Q=F.prototype=new B;Q.constructor=F,D(Q,U.prototype),Q.isPureReactComponent=!0;var J=Array.isArray;function re(){}var k={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function R(z,ie,pe){var ve=pe.ref;return{$$typeof:n,type:z,key:ie,ref:ve!==void 0?ve:null,props:pe}}function L(z,ie){return R(z.type,ie,z.props)}function O(z){return typeof z=="object"&&z!==null&&z.$$typeof===n}function H(z){var ie={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(pe){return ie[pe]})}var V=/\/+/g;function Ae(z,ie){return typeof z=="object"&&z!==null&&z.key!=null?H(""+z.key):ie.toString(36)}function $e(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(re,re):(z.status="pending",z.then(function(ie){z.status==="pending"&&(z.status="fulfilled",z.value=ie)},function(ie){z.status==="pending"&&(z.status="rejected",z.reason=ie)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function G(z,ie,pe,ve,ke){var Le=typeof z;(Le==="undefined"||Le==="boolean")&&(z=null);var de=!1;if(z===null)de=!0;else switch(Le){case"bigint":case"string":case"number":de=!0;break;case"object":switch(z.$$typeof){case n:case e:de=!0;break;case v:return de=z._init,G(de(z._payload),ie,pe,ve,ke)}}if(de)return ke=ke(z),de=ve===""?"."+Ae(z,0):ve,J(ke)?(pe="",de!=null&&(pe=de.replace(V,"$&/")+"/"),G(ke,ie,pe,"",function(jt){return jt})):ke!=null&&(O(ke)&&(ke=L(ke,pe+(ke.key==null||z&&z.key===ke.key?"":(""+ke.key).replace(V,"$&/")+"/")+de)),ie.push(ke)),1;de=0;var ge=ve===""?".":ve+":";if(J(z))for(var De=0;De<z.length;De++)ve=z[De],Le=ge+Ae(ve,De),de+=G(ve,ie,pe,Le,ke);else if(De=S(z),typeof De=="function")for(z=De.call(z),De=0;!(ve=z.next()).done;)ve=ve.value,Le=ge+Ae(ve,De++),de+=G(ve,ie,pe,Le,ke);else if(Le==="object"){if(typeof z.then=="function")return G($e(z),ie,pe,ve,ke);throw ie=String(z),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return de}function ae(z,ie,pe){if(z==null)return z;var ve=[],ke=0;return G(z,ve,"","",function(Le){return ie.call(pe,Le,ke++)}),ve}function _e(z){if(z._status===-1){var ie=z._result;ie=ie(),ie.then(function(pe){(z._status===0||z._status===-1)&&(z._status=1,z._result=pe)},function(pe){(z._status===0||z._status===-1)&&(z._status=2,z._result=pe)}),z._status===-1&&(z._status=0,z._result=ie)}if(z._status===1)return z._result.default;throw z._result}var he=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},qe={map:ae,forEach:function(z,ie,pe){ae(z,function(){ie.apply(this,arguments)},pe)},count:function(z){var ie=0;return ae(z,function(){ie++}),ie},toArray:function(z){return ae(z,function(ie){return ie})||[]},only:function(z){if(!O(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return je.Activity=b,je.Children=qe,je.Component=U,je.Fragment=t,je.Profiler=i,je.PureComponent=F,je.StrictMode=r,je.Suspense=f,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,je.__COMPILER_RUNTIME={__proto__:null,c:function(z){return k.H.useMemoCache(z)}},je.cache=function(z){return function(){return z.apply(null,arguments)}},je.cacheSignal=function(){return null},je.cloneElement=function(z,ie,pe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ve=D({},z.props),ke=z.key;if(ie!=null)for(Le in ie.key!==void 0&&(ke=""+ie.key),ie)!M.call(ie,Le)||Le==="key"||Le==="__self"||Le==="__source"||Le==="ref"&&ie.ref===void 0||(ve[Le]=ie[Le]);var Le=arguments.length-2;if(Le===1)ve.children=pe;else if(1<Le){for(var de=Array(Le),ge=0;ge<Le;ge++)de[ge]=arguments[ge+2];ve.children=de}return R(z.type,ke,ve)},je.createContext=function(z){return z={$$typeof:l,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:a,_context:z},z},je.createElement=function(z,ie,pe){var ve,ke={},Le=null;if(ie!=null)for(ve in ie.key!==void 0&&(Le=""+ie.key),ie)M.call(ie,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(ke[ve]=ie[ve]);var de=arguments.length-2;if(de===1)ke.children=pe;else if(1<de){for(var ge=Array(de),De=0;De<de;De++)ge[De]=arguments[De+2];ke.children=ge}if(z&&z.defaultProps)for(ve in de=z.defaultProps,de)ke[ve]===void 0&&(ke[ve]=de[ve]);return R(z,Le,ke)},je.createRef=function(){return{current:null}},je.forwardRef=function(z){return{$$typeof:d,render:z}},je.isValidElement=O,je.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:_e}},je.memo=function(z,ie){return{$$typeof:m,type:z,compare:ie===void 0?null:ie}},je.startTransition=function(z){var ie=k.T,pe={};k.T=pe;try{var ve=z(),ke=k.S;ke!==null&&ke(pe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(re,he)}catch(Le){he(Le)}finally{ie!==null&&pe.types!==null&&(ie.types=pe.types),k.T=ie}},je.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},je.use=function(z){return k.H.use(z)},je.useActionState=function(z,ie,pe){return k.H.useActionState(z,ie,pe)},je.useCallback=function(z,ie){return k.H.useCallback(z,ie)},je.useContext=function(z){return k.H.useContext(z)},je.useDebugValue=function(){},je.useDeferredValue=function(z,ie){return k.H.useDeferredValue(z,ie)},je.useEffect=function(z,ie){return k.H.useEffect(z,ie)},je.useEffectEvent=function(z){return k.H.useEffectEvent(z)},je.useId=function(){return k.H.useId()},je.useImperativeHandle=function(z,ie,pe){return k.H.useImperativeHandle(z,ie,pe)},je.useInsertionEffect=function(z,ie){return k.H.useInsertionEffect(z,ie)},je.useLayoutEffect=function(z,ie){return k.H.useLayoutEffect(z,ie)},je.useMemo=function(z,ie){return k.H.useMemo(z,ie)},je.useOptimistic=function(z,ie){return k.H.useOptimistic(z,ie)},je.useReducer=function(z,ie,pe){return k.H.useReducer(z,ie,pe)},je.useRef=function(z){return k.H.useRef(z)},je.useState=function(z){return k.H.useState(z)},je.useSyncExternalStore=function(z,ie,pe){return k.H.useSyncExternalStore(z,ie,pe)},je.useTransition=function(){return k.H.useTransition()},je.version="19.2.3",je}var W_;function oy(){return W_||(W_=1,Vp.exports=ZI()),Vp.exports}var j=oy();const $c=eS(j);var Up={exports:{}},Bc={},Op={exports:{}},jp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Q_;function eR(){return Q_||(Q_=1,(function(n){function e(G,ae){var _e=G.length;G.push(ae);e:for(;0<_e;){var he=_e-1>>>1,qe=G[he];if(0<i(qe,ae))G[he]=ae,G[_e]=qe,_e=he;else break e}}function t(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var ae=G[0],_e=G.pop();if(_e!==ae){G[0]=_e;e:for(var he=0,qe=G.length,z=qe>>>1;he<z;){var ie=2*(he+1)-1,pe=G[ie],ve=ie+1,ke=G[ve];if(0>i(pe,_e))ve<qe&&0>i(ke,pe)?(G[he]=ke,G[ve]=_e,he=ve):(G[he]=pe,G[ie]=_e,he=ie);else if(ve<qe&&0>i(ke,_e))G[he]=ke,G[ve]=_e,he=ve;else break e}}return ae}function i(G,ae){var _e=G.sortIndex-ae.sortIndex;return _e!==0?_e:G.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var f=[],m=[],v=1,b=null,T=3,S=!1,I=!1,D=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function Q(G){for(var ae=t(m);ae!==null;){if(ae.callback===null)r(m);else if(ae.startTime<=G)r(m),ae.sortIndex=ae.expirationTime,e(f,ae);else break;ae=t(m)}}function J(G){if(D=!1,Q(G),!I)if(t(f)!==null)I=!0,re||(re=!0,H());else{var ae=t(m);ae!==null&&$e(J,ae.startTime-G)}}var re=!1,k=-1,M=5,R=-1;function L(){return N?!0:!(n.unstable_now()-R<M)}function O(){if(N=!1,re){var G=n.unstable_now();R=G;var ae=!0;try{e:{I=!1,D&&(D=!1,B(k),k=-1),S=!0;var _e=T;try{t:{for(Q(G),b=t(f);b!==null&&!(b.expirationTime>G&&L());){var he=b.callback;if(typeof he=="function"){b.callback=null,T=b.priorityLevel;var qe=he(b.expirationTime<=G);if(G=n.unstable_now(),typeof qe=="function"){b.callback=qe,Q(G),ae=!0;break t}b===t(f)&&r(f),Q(G)}else r(f);b=t(f)}if(b!==null)ae=!0;else{var z=t(m);z!==null&&$e(J,z.startTime-G),ae=!1}}break e}finally{b=null,T=_e,S=!1}ae=void 0}}finally{ae?H():re=!1}}}var H;if(typeof F=="function")H=function(){F(O)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,Ae=V.port2;V.port1.onmessage=O,H=function(){Ae.postMessage(null)}}else H=function(){U(O,0)};function $e(G,ae){k=U(function(){G(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(G){switch(T){case 1:case 2:case 3:var ae=3;break;default:ae=T}var _e=T;T=ae;try{return G()}finally{T=_e}},n.unstable_requestPaint=function(){N=!0},n.unstable_runWithPriority=function(G,ae){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var _e=T;T=G;try{return ae()}finally{T=_e}},n.unstable_scheduleCallback=function(G,ae,_e){var he=n.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?he+_e:he):_e=he,G){case 1:var qe=-1;break;case 2:qe=250;break;case 5:qe=1073741823;break;case 4:qe=1e4;break;default:qe=5e3}return qe=_e+qe,G={id:v++,callback:ae,priorityLevel:G,startTime:_e,expirationTime:qe,sortIndex:-1},_e>he?(G.sortIndex=_e,e(m,G),t(f)===null&&G===t(m)&&(D?(B(k),k=-1):D=!0,$e(J,_e-he))):(G.sortIndex=qe,e(f,G),I||S||(I=!0,re||(re=!0,H()))),G},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(G){var ae=T;return function(){var _e=T;T=ae;try{return G.apply(this,arguments)}finally{T=_e}}}})(jp)),jp}var Z_;function tR(){return Z_||(Z_=1,Op.exports=eR()),Op.exports}var Fp={exports:{}},Tn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function nR(){if(eb)return Tn;eb=1;var n=oy();function e(f){var m="https://react.dev/errors/"+f;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+f+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function a(f,m,v){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:b==null?null:""+b,children:f,containerInfo:m,implementation:v}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,m){if(f==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Tn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Tn.createPortal=function(f,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return a(f,m,null,v)},Tn.flushSync=function(f){var m=l.T,v=r.p;try{if(l.T=null,r.p=2,f)return f()}finally{l.T=m,r.p=v,r.d.f()}},Tn.preconnect=function(f,m){typeof f=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,r.d.C(f,m))},Tn.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},Tn.preinit=function(f,m){if(typeof f=="string"&&m&&typeof m.as=="string"){var v=m.as,b=d(v,m.crossOrigin),T=typeof m.integrity=="string"?m.integrity:void 0,S=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?r.d.S(f,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:b,integrity:T,fetchPriority:S}):v==="script"&&r.d.X(f,{crossOrigin:b,integrity:T,fetchPriority:S,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Tn.preinitModule=function(f,m){if(typeof f=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=d(m.as,m.crossOrigin);r.d.M(f,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&r.d.M(f)},Tn.preload=function(f,m){if(typeof f=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,b=d(v,m.crossOrigin);r.d.L(f,v,{crossOrigin:b,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Tn.preloadModule=function(f,m){if(typeof f=="string")if(m){var v=d(m.as,m.crossOrigin);r.d.m(f,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else r.d.m(f)},Tn.requestFormReset=function(f){r.d.r(f)},Tn.unstable_batchedUpdates=function(f,m){return f(m)},Tn.useFormState=function(f,m,v){return l.H.useFormState(f,m,v)},Tn.useFormStatus=function(){return l.H.useHostTransitionStatus()},Tn.version="19.2.3",Tn}var tb;function rR(){if(tb)return Fp.exports;tb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Fp.exports=nR(),Fp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function sR(){if(nb)return Bc;nb=1;var n=tR(),e=oy(),t=rR();function r(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,c=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(c=o.return),s=o.return;while(s)}return o.tag===3?c:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(r(188))}function m(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(r(188));return o!==s?null:s}for(var c=s,u=o;;){var x=c.return;if(x===null)break;var _=x.alternate;if(_===null){if(u=x.return,u!==null){c=u;continue}break}if(x.child===_.child){for(_=x.child;_;){if(_===c)return f(x),s;if(_===u)return f(x),o;_=_.sibling}throw Error(r(188))}if(c.return!==u.return)c=x,u=_;else{for(var w=!1,C=x.child;C;){if(C===c){w=!0,c=x,u=_;break}if(C===u){w=!0,u=x,c=_;break}C=C.sibling}if(!w){for(C=_.child;C;){if(C===c){w=!0,c=_,u=x;break}if(C===u){w=!0,u=_,c=x;break}C=C.sibling}if(!w)throw Error(r(189))}}if(c.alternate!==u)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:o}function v(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=v(s),o!==null)return o;s=s.sibling}return null}var b=Object.assign,T=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),I=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),re=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=O&&s[O]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function Ae(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case U:return"Profiler";case N:return"StrictMode";case J:return"Suspense";case re:return"SuspenseList";case R:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case I:return"Portal";case F:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case Q:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case k:return o=s.displayName||null,o!==null?o:Ae(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Ae(s(o))}catch{}}return null}var $e=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},he=[],qe=-1;function z(s){return{current:s}}function ie(s){0>qe||(s.current=he[qe],he[qe]=null,qe--)}function pe(s,o){qe++,he[qe]=s.current,s.current=o}var ve=z(null),ke=z(null),Le=z(null),de=z(null);function ge(s,o){switch(pe(Le,o),pe(ke,s),pe(ve,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?y_(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=y_(o),s=v_(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ie(ve),pe(ve,s)}function De(){ie(ve),ie(ke),ie(Le)}function jt(s){s.memoizedState!==null&&pe(de,s);var o=ve.current,c=v_(o,s.type);o!==c&&(pe(ke,s),pe(ve,c))}function Gt(s){ke.current===s&&(ie(ve),ie(ke)),de.current===s&&(ie(de),Uc._currentValue=_e)}var ks,Qr;function Pn(s){if(ks===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);ks=o&&o[1]||"",Qr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ks+s+Qr}var Zr=!1;function Kn(s,o){if(!s||Zr)return"";Zr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var ee=ne}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(ne){ee=ne}s.call(ce.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),w=_[0],C=_[1];if(w&&C){var q=w.split(`
`),Z=C.split(`
`);for(x=u=0;u<q.length&&!q[u].includes("DetermineComponentFrameRoot");)u++;for(;x<Z.length&&!Z[x].includes("DetermineComponentFrameRoot");)x++;if(u===q.length||x===Z.length)for(u=q.length-1,x=Z.length-1;1<=u&&0<=x&&q[u]!==Z[x];)x--;for(;1<=u&&0<=x;u--,x--)if(q[u]!==Z[x]){if(u!==1||x!==1)do if(u--,x--,0>x||q[u]!==Z[x]){var se=`
`+q[u].replace(" at new "," at ");return s.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",s.displayName)),se}while(1<=u&&0<=x);break}}}finally{Zr=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?Pn(c):""}function Pr(s,o){switch(s.tag){case 26:case 27:case 5:return Pn(s.type);case 16:return Pn("Lazy");case 13:return s.child!==o&&o!==null?Pn("Suspense Fallback"):Pn("Suspense");case 19:return Pn("SuspenseList");case 0:case 15:return Kn(s.type,!1);case 11:return Kn(s.type.render,!1);case 1:return Kn(s.type,!0);case 31:return Pn("Activity");default:return""}}function Ln(s){try{var o="",c=null;do o+=Pr(s,c),c=s,s=s.return;while(s);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Rt=Object.prototype.hasOwnProperty,kt=n.unstable_scheduleCallback,es=n.unstable_cancelCallback,Bl=n.unstable_shouldYield,yi=n.unstable_requestPaint,st=n.unstable_now,fr=n.unstable_getCurrentPriorityLevel,Xn=n.unstable_ImmediatePriority,Lr=n.unstable_UserBlockingPriority,ts=n.unstable_NormalPriority,vi=n.unstable_LowPriority,Ds=n.unstable_IdlePriority,xi=n.log,bo=n.unstable_setDisableYieldValue,Vn=null,ut=null;function ln(s){if(typeof xi=="function"&&bo(s),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Vn,s)}catch{}}var dt=Math.clz32?Math.clz32:pa,ma=Math.log,_i=Math.LN2;function pa(s){return s>>>=0,s===0?32:31-(ma(s)/_i|0)|0}var mr=256,Ms=262144,Lt=4194304;function pr(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Wn(s,o,c){var u=s.pendingLanes;if(u===0)return 0;var x=0,_=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var C=u&134217727;return C!==0?(u=C&~_,u!==0?x=pr(u):(w&=C,w!==0?x=pr(w):c||(c=C&~s,c!==0&&(x=pr(c))))):(C=u&~_,C!==0?x=pr(C):w!==0?x=pr(w):c||(c=u&~s,c!==0&&(x=pr(c)))),x===0?0:o!==0&&o!==x&&(o&_)===0&&(_=x&-x,c=o&-o,_>=c||_===32&&(c&4194048)!==0)?o:x}function _n(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function ga(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ps(){var s=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),s}function Qn(s){for(var o=[],c=0;31>c;c++)o.push(s);return o}function ns(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Hl(s,o,c,u,x,_){var w=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var C=s.entanglements,q=s.expirationTimes,Z=s.hiddenUpdates;for(c=w&~c;0<c;){var se=31-dt(c),ce=1<<se;C[se]=0,q[se]=-1;var ee=Z[se];if(ee!==null)for(Z[se]=null,se=0;se<ee.length;se++){var ne=ee[se];ne!==null&&(ne.lane&=-536870913)}c&=~ce}u!==0&&Ls(s,u,0),_!==0&&x===0&&s.tag!==0&&(s.suspendedLanes|=_&~(w&~o))}function Ls(s,o,c){s.pendingLanes|=o,s.suspendedLanes&=~o;var u=31-dt(o);s.entangledLanes|=o,s.entanglements[u]=s.entanglements[u]|1073741824|c&261930}function bi(s,o){var c=s.entangledLanes|=o;for(s=s.entanglements;c;){var u=31-dt(c),x=1<<u;x&o|s[u]&o&&(s[u]|=o),c&=~x}}function rs(s,o){var c=o&-o;return c=(c&42)!==0?1:Vs(c),(c&(s.suspendedLanes|o))!==0?0:c}function Vs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Zn(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ya(){var s=ae.p;return s!==0?s:(s=window.event,s===void 0?32:q_(s.type))}function er(s,o){var c=ae.p;try{return ae.p=s,o()}finally{ae.p=c}}var Un=Math.random().toString(36).slice(2),Dt="__reactFiber$"+Un,K="__reactProps$"+Un,fe="__reactContainer$"+Un,ye="__reactEvents$"+Un,Ee="__reactListeners$"+Un,Ie="__reactHandles$"+Un,Oe="__reactResources$"+Un,vt="__reactMarker$"+Un;function Us(s){delete s[Dt],delete s[K],delete s[ye],delete s[Ee],delete s[Ie]}function bn(s){var o=s[Dt];if(o)return o;for(var c=s.parentNode;c;){if(o=c[fe]||c[Dt]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(s=S_(s);s!==null;){if(c=s[Dt])return c;s=S_(s)}return o}s=c,c=s.parentNode}return null}function On(s){if(s=s[Dt]||s[fe]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function cn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(r(33))}function tr(s){var o=s[Oe];return o||(o=s[Oe]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Vt(s){s[vt]=!0}var Gl=new Set,zl={};function ss(s,o){is(s,o),is(s+"Capture",o)}function is(s,o){for(zl[s]=o,s=0;s<o.length;s++)Gl.add(o[s])}var $l=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Jl={},Yl={};function Mu(s){return Rt.call(Yl,s)?!0:Rt.call(Jl,s)?!1:$l.test(s)?Yl[s]=!0:(Jl[s]=!0,!1)}function va(s,o,c){if(Mu(o))if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+c)}}function nr(s,o,c){if(c===null)s.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+c)}}function zt(s,o,c,u){if(u===null)s.removeAttribute(c);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(o,c,""+u)}}function rn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ti(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Kl(s,o,c){var u=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var x=u.get,_=u.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return x.call(this)},set:function(w){c=""+w,_.call(this,w)}}),Object.defineProperty(s,o,{enumerable:u.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function pt(s){if(!s._valueTracker){var o=Ti(s)?"checked":"value";s._valueTracker=Kl(s,o,""+s[o])}}function To(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var c=o.getValue(),u="";return s&&(u=Ti(s)?s.checked?"true":"false":s.value),s=u,s!==c?(o.setValue(s),!0):!1}function os(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Eo=/[\n"\\]/g;function jn(s){return s.replace(Eo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function xa(s,o,c,u,x,_,w,C){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),o!=null?w==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+rn(o)):s.value!==""+rn(o)&&(s.value=""+rn(o)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),o!=null?Xl(s,w,rn(o)):c!=null?Xl(s,w,rn(c)):u!=null&&s.removeAttribute("value"),x==null&&_!=null&&(s.defaultChecked=!!_),x!=null&&(s.checked=x&&typeof x!="function"&&typeof x!="symbol"),C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?s.name=""+rn(C):s.removeAttribute("name")}function Pu(s,o,c,u,x,_,w,C){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(s.type=_),o!=null||c!=null){if(!(_!=="submit"&&_!=="reset"||o!=null)){pt(s);return}c=c!=null?""+rn(c):"",o=o!=null?""+rn(o):c,C||o===s.value||(s.value=o),s.defaultValue=o}u=u??x,u=typeof u!="function"&&typeof u!="symbol"&&!!u,s.checked=C?s.checked:!!u,s.defaultChecked=!!u,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),pt(s)}function Xl(s,o,c){o==="number"&&os(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ei(s,o,c,u){if(s=s.options,o){o={};for(var x=0;x<c.length;x++)o["$"+c[x]]=!0;for(c=0;c<s.length;c++)x=o.hasOwnProperty("$"+s[c].value),s[c].selected!==x&&(s[c].selected=x),x&&u&&(s[c].defaultSelected=!0)}else{for(c=""+rn(c),o=null,x=0;x<s.length;x++){if(s[x].value===c){s[x].selected=!0,u&&(s[x].defaultSelected=!0);return}o!==null||s[x].disabled||(o=s[x])}o!==null&&(o.selected=!0)}}function Lu(s,o,c){if(o!=null&&(o=""+rn(o),o!==s.value&&(s.value=o),c==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=c!=null?""+rn(c):""}function wi(s,o,c,u){if(o==null){if(u!=null){if(c!=null)throw Error(r(92));if($e(u)){if(1<u.length)throw Error(r(93));u=u[0]}c=u}c==null&&(c=""),o=c}c=rn(o),s.defaultValue=c,u=s.textContent,u===c&&u!==""&&u!==null&&(s.value=u),pt(s)}function Fn(s,o){if(o){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=o;return}}s.textContent=o}var Vu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wl(s,o,c){var u=o.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?u?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":u?s.setProperty(o,c):typeof c!="number"||c===0||Vu.has(o)?o==="float"?s.cssFloat=c:s[o]=(""+c).trim():s[o]=c+"px"}function Ql(s,o,c){if(o!=null&&typeof o!="object")throw Error(r(62));if(s=s.style,c!=null){for(var u in c)!c.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?s.setProperty(u,""):u==="float"?s.cssFloat="":s[u]="");for(var x in o)u=o[x],o.hasOwnProperty(x)&&c[x]!==u&&Wl(s,x,u)}else for(var _ in o)o.hasOwnProperty(_)&&Wl(s,_,o[_])}function _a(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Si=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ba(s){return Si.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Vr(){}var Zl=null;function gr(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ai=null,as=null;function wo(s){var o=On(s);if(o&&(s=o.stateNode)){var c=s[K]||null;e:switch(s=o.stateNode,o.type){case"input":if(xa(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),o=c.name,c.type==="radio"&&o!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+jn(""+o)+'"][type="radio"]'),o=0;o<c.length;o++){var u=c[o];if(u!==s&&u.form===s.form){var x=u[K]||null;if(!x)throw Error(r(90));xa(u,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(o=0;o<c.length;o++)u=c[o],u.form===s.form&&To(u)}break e;case"textarea":Lu(s,c.value,c.defaultValue);break e;case"select":o=c.value,o!=null&&Ei(s,!!c.multiple,o,!1)}}}var Ta=!1;function Ni(s,o,c){if(Ta)return s(o,c);Ta=!0;try{var u=s(o);return u}finally{if(Ta=!1,(Ai!==null||as!==null)&&(Rd(),Ai&&(o=Ai,s=as,as=Ai=null,wo(o),s)))for(o=0;o<s.length;o++)wo(s[o])}}function Ur(s,o){var c=s.stateNode;if(c===null)return null;var u=c[K]||null;if(u===null)return null;c=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(s=s.type,u=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!u;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,o,typeof c));return c}var yr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),So=!1;if(yr)try{var xt={};Object.defineProperty(xt,"passive",{get:function(){So=!0}}),window.addEventListener("test",xt,xt),window.removeEventListener("test",xt,xt)}catch{So=!1}var ls=null,ec=null,Ao=null;function tc(){if(Ao)return Ao;var s,o=ec,c=o.length,u,x="value"in ls?ls.value:ls.textContent,_=x.length;for(s=0;s<c&&o[s]===x[s];s++);var w=c-s;for(u=1;u<=w&&o[c-u]===x[_-u];u++);return Ao=x.slice(s,1<u?1-u:void 0)}function No(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Os(){return!0}function Or(){return!1}function un(s){function o(c,u,x,_,w){this._reactName=c,this._targetInst=x,this.type=u,this.nativeEvent=_,this.target=w,this.currentTarget=null;for(var C in s)s.hasOwnProperty(C)&&(c=s[C],this[C]=c?c(_):_[C]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Os:Or,this.isPropagationStopped=Or,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Os)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Os)},persist:function(){},isPersistent:Os}),o}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=un(js),Ci=b({},js,{view:0,detail:0}),nc=un(Ci),Ii,Ea,us,wa=b({},Ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ri,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==us&&(us&&s.type==="mousemove"?(Ii=s.screenX-us.screenX,Ea=s.screenY-us.screenY):Ea=Ii=0,us=s),Ii)},movementY:function(s){return"movementY"in s?s.movementY:Ea}}),rc=un(wa),Co=b({},wa,{dataTransfer:0}),Ou=un(Co),ju=b({},Ci,{relatedTarget:0}),Io=un(ju),sc=b({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),Fu=un(sc),Sa=b({},js,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),qu=un(Sa),Bu=b({},js,{data:0}),ds=un(Bu),Hu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=zu[s])?!!o[s]:!1}function Ri(){return $u}var In=b({},Ci,{key:function(s){if(s.key){var o=Hu[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=No(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Gu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ri,charCode:function(s){return s.type==="keypress"?No(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?No(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Ju=un(In),Yu=b({},wa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fs=un(Yu),y=b({},Ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ri}),E=un(y),A=b({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),P=un(A),X=b({},wa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),te=un(X),me=b({},js,{newState:0,oldState:0}),Be=un(me),Ft=[9,13,27,32],ht=yr&&"CompositionEvent"in window,Ct=null;yr&&"documentMode"in document&&(Ct=document.documentMode);var vr=yr&&"TextEvent"in window&&!Ct,hs=yr&&(!ht||Ct&&8<Ct&&11>=Ct),jr=" ",Fr=!1;function Ro(s,o){switch(s){case"keyup":return Ft.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Aa(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Na=!1;function b1(s,o){switch(s){case"compositionend":return Aa(o);case"keypress":return o.which!==32?null:(Fr=!0,jr);case"textInput":return s=o.data,s===jr&&Fr?null:s;default:return null}}function T1(s,o){if(Na)return s==="compositionend"||!ht&&Ro(s,o)?(s=tc(),Ao=ec=ls=null,Na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return hs&&o.locale!=="ko"?null:o.data;default:return null}}var E1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function C0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!E1[s.type]:o==="textarea"}function I0(s,o,c,u){Ai?as?as.push(u):as=[u]:Ai=u,o=Ud(o,"onChange"),0<o.length&&(c=new cs("onChange","change",null,c,u),s.push({event:c,listeners:o}))}var ic=null,oc=null;function w1(s){d_(s,0)}function Ku(s){var o=cn(s);if(To(o))return s}function R0(s,o){if(s==="change")return o}var k0=!1;if(yr){var Bf;if(yr){var Hf="oninput"in document;if(!Hf){var D0=document.createElement("div");D0.setAttribute("oninput","return;"),Hf=typeof D0.oninput=="function"}Bf=Hf}else Bf=!1;k0=Bf&&(!document.documentMode||9<document.documentMode)}function M0(){ic&&(ic.detachEvent("onpropertychange",P0),oc=ic=null)}function P0(s){if(s.propertyName==="value"&&Ku(oc)){var o=[];I0(o,oc,s,gr(s)),Ni(w1,o)}}function S1(s,o,c){s==="focusin"?(M0(),ic=o,oc=c,ic.attachEvent("onpropertychange",P0)):s==="focusout"&&M0()}function A1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ku(oc)}function N1(s,o){if(s==="click")return Ku(o)}function C1(s,o){if(s==="input"||s==="change")return Ku(o)}function I1(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var rr=typeof Object.is=="function"?Object.is:I1;function ac(s,o){if(rr(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var c=Object.keys(s),u=Object.keys(o);if(c.length!==u.length)return!1;for(u=0;u<c.length;u++){var x=c[u];if(!Rt.call(o,x)||!rr(s[x],o[x]))return!1}return!0}function L0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function V0(s,o){var c=L0(s);s=0;for(var u;c;){if(c.nodeType===3){if(u=s+c.textContent.length,s<=o&&u>=o)return{node:c,offset:o-s};s=u}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=L0(c)}}function U0(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?U0(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function O0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=os(s.document);o instanceof s.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)s=o.contentWindow;else break;o=os(s.document)}return o}function Gf(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var R1=yr&&"documentMode"in document&&11>=document.documentMode,Ca=null,zf=null,lc=null,$f=!1;function j0(s,o,c){var u=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;$f||Ca==null||Ca!==os(u)||(u=Ca,"selectionStart"in u&&Gf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),lc&&ac(lc,u)||(lc=u,u=Ud(zf,"onSelect"),0<u.length&&(o=new cs("onSelect","select",null,o,c),s.push({event:o,listeners:u}),o.target=Ca)))}function ko(s,o){var c={};return c[s.toLowerCase()]=o.toLowerCase(),c["Webkit"+s]="webkit"+o,c["Moz"+s]="moz"+o,c}var Ia={animationend:ko("Animation","AnimationEnd"),animationiteration:ko("Animation","AnimationIteration"),animationstart:ko("Animation","AnimationStart"),transitionrun:ko("Transition","TransitionRun"),transitionstart:ko("Transition","TransitionStart"),transitioncancel:ko("Transition","TransitionCancel"),transitionend:ko("Transition","TransitionEnd")},Jf={},F0={};yr&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete Ia.animationend.animation,delete Ia.animationiteration.animation,delete Ia.animationstart.animation),"TransitionEvent"in window||delete Ia.transitionend.transition);function Do(s){if(Jf[s])return Jf[s];if(!Ia[s])return s;var o=Ia[s],c;for(c in o)if(o.hasOwnProperty(c)&&c in F0)return Jf[s]=o[c];return s}var q0=Do("animationend"),B0=Do("animationiteration"),H0=Do("animationstart"),k1=Do("transitionrun"),D1=Do("transitionstart"),M1=Do("transitioncancel"),G0=Do("transitionend"),z0=new Map,Yf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Yf.push("scrollEnd");function qr(s,o){z0.set(s,o),ss(o,[s])}var Xu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},xr=[],Ra=0,Kf=0;function Wu(){for(var s=Ra,o=Kf=Ra=0;o<s;){var c=xr[o];xr[o++]=null;var u=xr[o];xr[o++]=null;var x=xr[o];xr[o++]=null;var _=xr[o];if(xr[o++]=null,u!==null&&x!==null){var w=u.pending;w===null?x.next=x:(x.next=w.next,w.next=x),u.pending=x}_!==0&&$0(c,x,_)}}function Qu(s,o,c,u){xr[Ra++]=s,xr[Ra++]=o,xr[Ra++]=c,xr[Ra++]=u,Kf|=u,s.lanes|=u,s=s.alternate,s!==null&&(s.lanes|=u)}function Xf(s,o,c,u){return Qu(s,o,c,u),Zu(s)}function Mo(s,o){return Qu(s,null,null,o),Zu(s)}function $0(s,o,c){s.lanes|=c;var u=s.alternate;u!==null&&(u.lanes|=c);for(var x=!1,_=s.return;_!==null;)_.childLanes|=c,u=_.alternate,u!==null&&(u.childLanes|=c),_.tag===22&&(s=_.stateNode,s===null||s._visibility&1||(x=!0)),s=_,_=_.return;return s.tag===3?(_=s.stateNode,x&&o!==null&&(x=31-dt(c),s=_.hiddenUpdates,u=s[x],u===null?s[x]=[o]:u.push(o),o.lane=c|536870912),_):null}function Zu(s){if(50<Rc)throw Rc=0,ip=null,Error(r(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var ka={};function P1(s,o,c,u){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,o,c,u){return new P1(s,o,c,u)}function Wf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function qs(s,o){var c=s.alternate;return c===null?(c=sr(s.tag,o,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=o,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,o=s.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function J0(s,o){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,o=c.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ed(s,o,c,u,x,_){var w=0;if(u=s,typeof s=="function")Wf(s)&&(w=1);else if(typeof s=="string")w=jI(s,c,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case R:return s=sr(31,c,o,x),s.elementType=R,s.lanes=_,s;case D:return Po(c.children,x,_,o);case N:w=8,x|=24;break;case U:return s=sr(12,c,o,x|2),s.elementType=U,s.lanes=_,s;case J:return s=sr(13,c,o,x),s.elementType=J,s.lanes=_,s;case re:return s=sr(19,c,o,x),s.elementType=re,s.lanes=_,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case F:w=10;break e;case B:w=9;break e;case Q:w=11;break e;case k:w=14;break e;case M:w=16,u=null;break e}w=29,c=Error(r(130,s===null?"null":typeof s,"")),u=null}return o=sr(w,c,o,x),o.elementType=s,o.type=u,o.lanes=_,o}function Po(s,o,c,u){return s=sr(7,s,u,o),s.lanes=c,s}function Qf(s,o,c){return s=sr(6,s,null,o),s.lanes=c,s}function Y0(s){var o=sr(18,null,null,0);return o.stateNode=s,o}function Zf(s,o,c){return o=sr(4,s.children!==null?s.children:[],s.key,o),o.lanes=c,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var K0=new WeakMap;function _r(s,o){if(typeof s=="object"&&s!==null){var c=K0.get(s);return c!==void 0?c:(o={value:s,source:o,stack:Ln(o)},K0.set(s,o),o)}return{value:s,source:o,stack:Ln(o)}}var Da=[],Ma=0,td=null,cc=0,br=[],Tr=0,ki=null,fs=1,ms="";function Bs(s,o){Da[Ma++]=cc,Da[Ma++]=td,td=s,cc=o}function X0(s,o,c){br[Tr++]=fs,br[Tr++]=ms,br[Tr++]=ki,ki=s;var u=fs;s=ms;var x=32-dt(u)-1;u&=~(1<<x),c+=1;var _=32-dt(o)+x;if(30<_){var w=x-x%5;_=(u&(1<<w)-1).toString(32),u>>=w,x-=w,fs=1<<32-dt(o)+x|c<<x|u,ms=_+s}else fs=1<<_|c<<x|u,ms=s}function em(s){s.return!==null&&(Bs(s,1),X0(s,1,0))}function tm(s){for(;s===td;)td=Da[--Ma],Da[Ma]=null,cc=Da[--Ma],Da[Ma]=null;for(;s===ki;)ki=br[--Tr],br[Tr]=null,ms=br[--Tr],br[Tr]=null,fs=br[--Tr],br[Tr]=null}function W0(s,o){br[Tr++]=fs,br[Tr++]=ms,br[Tr++]=ki,fs=o.id,ms=o.overflow,ki=s}var dn=null,At=null,tt=!1,Di=null,Er=!1,nm=Error(r(519));function Mi(s){var o=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw uc(_r(o,s)),nm}function Q0(s){var o=s.stateNode,c=s.type,u=s.memoizedProps;switch(o[Dt]=s,o[K]=u,c){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(c=0;c<Dc.length;c++)Ye(Dc[c],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),Pu(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),wi(o,u.value,u.defaultValue,u.children)}c=u.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||o.textContent===""+c||u.suppressHydrationWarning===!0||p_(o.textContent,c)?(u.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),u.onScroll!=null&&Ye("scroll",o),u.onScrollEnd!=null&&Ye("scrollend",o),u.onClick!=null&&(o.onclick=Vr),o=!0):o=!1,o||Mi(s,!0)}function Z0(s){for(dn=s.return;dn;)switch(dn.tag){case 5:case 31:case 13:Er=!1;return;case 27:case 3:Er=!0;return;default:dn=dn.return}}function Pa(s){if(s!==dn)return!1;if(!tt)return Z0(s),tt=!0,!1;var o=s.tag,c;if((c=o!==3&&o!==27)&&((c=o===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||_p(s.type,s.memoizedProps)),c=!c),c&&At&&Mi(s),Z0(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));At=w_(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));At=w_(s)}else o===27?(o=At,Ji(s.type)?(s=Sp,Sp=null,At=s):At=o):At=dn?Sr(s.stateNode.nextSibling):null;return!0}function Lo(){At=dn=null,tt=!1}function rm(){var s=Di;return s!==null&&(Gn===null?Gn=s:Gn.push.apply(Gn,s),Di=null),s}function uc(s){Di===null?Di=[s]:Di.push(s)}var sm=z(null),Vo=null,Hs=null;function Pi(s,o,c){pe(sm,o._currentValue),o._currentValue=c}function Gs(s){s._currentValue=sm.current,ie(sm)}function im(s,o,c){for(;s!==null;){var u=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),s===c)break;s=s.return}}function om(s,o,c,u){var x=s.child;for(x!==null&&(x.return=s);x!==null;){var _=x.dependencies;if(_!==null){var w=x.child;_=_.firstContext;e:for(;_!==null;){var C=_;_=x;for(var q=0;q<o.length;q++)if(C.context===o[q]){_.lanes|=c,C=_.alternate,C!==null&&(C.lanes|=c),im(_.return,c,s),u||(w=null);break e}_=C.next}}else if(x.tag===18){if(w=x.return,w===null)throw Error(r(341));w.lanes|=c,_=w.alternate,_!==null&&(_.lanes|=c),im(w,c,s),w=null}else w=x.child;if(w!==null)w.return=x;else for(w=x;w!==null;){if(w===s){w=null;break}if(x=w.sibling,x!==null){x.return=w.return,w=x;break}w=w.return}x=w}}function La(s,o,c,u){s=null;for(var x=o,_=!1;x!==null;){if(!_){if((x.flags&524288)!==0)_=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var w=x.alternate;if(w===null)throw Error(r(387));if(w=w.memoizedProps,w!==null){var C=x.type;rr(x.pendingProps.value,w.value)||(s!==null?s.push(C):s=[C])}}else if(x===de.current){if(w=x.alternate,w===null)throw Error(r(387));w.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(s!==null?s.push(Uc):s=[Uc])}x=x.return}s!==null&&om(o,s,c,u),o.flags|=262144}function nd(s){for(s=s.firstContext;s!==null;){if(!rr(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Uo(s){Vo=s,Hs=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function hn(s){return ev(Vo,s)}function rd(s,o){return Vo===null&&Uo(s),ev(s,o)}function ev(s,o){var c=o._currentValue;if(o={context:o,memoizedValue:c,next:null},Hs===null){if(s===null)throw Error(r(308));Hs=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Hs=Hs.next=o;return c}var L1=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(c,u){s.push(u)}};this.abort=function(){o.aborted=!0,s.forEach(function(c){return c()})}},V1=n.unstable_scheduleCallback,U1=n.unstable_NormalPriority,$t={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function am(){return{controller:new L1,data:new Map,refCount:0}}function dc(s){s.refCount--,s.refCount===0&&V1(U1,function(){s.controller.abort()})}var hc=null,lm=0,Va=0,Ua=null;function O1(s,o){if(hc===null){var c=hc=[];lm=0,Va=dp(),Ua={status:"pending",value:void 0,then:function(u){c.push(u)}}}return lm++,o.then(tv,tv),o}function tv(){if(--lm===0&&hc!==null){Ua!==null&&(Ua.status="fulfilled");var s=hc;hc=null,Va=0,Ua=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function j1(s,o){var c=[],u={status:"pending",value:null,reason:null,then:function(x){c.push(x)}};return s.then(function(){u.status="fulfilled",u.value=o;for(var x=0;x<c.length;x++)(0,c[x])(o)},function(x){for(u.status="rejected",u.reason=x,x=0;x<c.length;x++)(0,c[x])(void 0)}),u}var nv=G.S;G.S=function(s,o){jx=st(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&O1(s,o),nv!==null&&nv(s,o)};var Oo=z(null);function cm(){var s=Oo.current;return s!==null?s:Et.pooledCache}function sd(s,o){o===null?pe(Oo,Oo.current):pe(Oo,o.pool)}function rv(){var s=cm();return s===null?null:{parent:$t._currentValue,pool:s}}var Oa=Error(r(460)),um=Error(r(474)),id=Error(r(542)),od={then:function(){}};function sv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function iv(s,o,c){switch(c=s[c],c===void 0?s.push(o):c!==o&&(o.then(Vr,Vr),o=c),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,av(s),s;default:if(typeof o.status=="string")o.then(Vr,Vr);else{if(s=Et,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=o,s.status="pending",s.then(function(u){if(o.status==="pending"){var x=o;x.status="fulfilled",x.value=u}},function(u){if(o.status==="pending"){var x=o;x.status="rejected",x.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,av(s),s}throw Fo=o,Oa}}function jo(s){try{var o=s._init;return o(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Fo=c,Oa):c}}var Fo=null;function ov(){if(Fo===null)throw Error(r(459));var s=Fo;return Fo=null,s}function av(s){if(s===Oa||s===id)throw Error(r(483))}var ja=null,fc=0;function ad(s){var o=fc;return fc+=1,ja===null&&(ja=[]),iv(ja,s,o)}function mc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function ld(s,o){throw o.$$typeof===T?Error(r(525)):(s=Object.prototype.toString.call(o),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function lv(s){function o(Y,$){if(s){var W=Y.deletions;W===null?(Y.deletions=[$],Y.flags|=16):W.push($)}}function c(Y,$){if(!s)return null;for(;$!==null;)o(Y,$),$=$.sibling;return null}function u(Y){for(var $=new Map;Y!==null;)Y.key!==null?$.set(Y.key,Y):$.set(Y.index,Y),Y=Y.sibling;return $}function x(Y,$){return Y=qs(Y,$),Y.index=0,Y.sibling=null,Y}function _(Y,$,W){return Y.index=W,s?(W=Y.alternate,W!==null?(W=W.index,W<$?(Y.flags|=67108866,$):W):(Y.flags|=67108866,$)):(Y.flags|=1048576,$)}function w(Y){return s&&Y.alternate===null&&(Y.flags|=67108866),Y}function C(Y,$,W,oe){return $===null||$.tag!==6?($=Qf(W,Y.mode,oe),$.return=Y,$):($=x($,W),$.return=Y,$)}function q(Y,$,W,oe){var Ne=W.type;return Ne===D?se(Y,$,W.props.children,oe,W.key):$!==null&&($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===M&&jo(Ne)===$.type)?($=x($,W.props),mc($,W),$.return=Y,$):($=ed(W.type,W.key,W.props,null,Y.mode,oe),mc($,W),$.return=Y,$)}function Z(Y,$,W,oe){return $===null||$.tag!==4||$.stateNode.containerInfo!==W.containerInfo||$.stateNode.implementation!==W.implementation?($=Zf(W,Y.mode,oe),$.return=Y,$):($=x($,W.children||[]),$.return=Y,$)}function se(Y,$,W,oe,Ne){return $===null||$.tag!==7?($=Po(W,Y.mode,oe,Ne),$.return=Y,$):($=x($,W),$.return=Y,$)}function ce(Y,$,W){if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return $=Qf(""+$,Y.mode,W),$.return=Y,$;if(typeof $=="object"&&$!==null){switch($.$$typeof){case S:return W=ed($.type,$.key,$.props,null,Y.mode,W),mc(W,$),W.return=Y,W;case I:return $=Zf($,Y.mode,W),$.return=Y,$;case M:return $=jo($),ce(Y,$,W)}if($e($)||H($))return $=Po($,Y.mode,W,null),$.return=Y,$;if(typeof $.then=="function")return ce(Y,ad($),W);if($.$$typeof===F)return ce(Y,rd(Y,$),W);ld(Y,$)}return null}function ee(Y,$,W,oe){var Ne=$!==null?$.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ne!==null?null:C(Y,$,""+W,oe);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case S:return W.key===Ne?q(Y,$,W,oe):null;case I:return W.key===Ne?Z(Y,$,W,oe):null;case M:return W=jo(W),ee(Y,$,W,oe)}if($e(W)||H(W))return Ne!==null?null:se(Y,$,W,oe,null);if(typeof W.then=="function")return ee(Y,$,ad(W),oe);if(W.$$typeof===F)return ee(Y,$,rd(Y,W),oe);ld(Y,W)}return null}function ne(Y,$,W,oe,Ne){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return Y=Y.get(W)||null,C($,Y,""+oe,Ne);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case S:return Y=Y.get(oe.key===null?W:oe.key)||null,q($,Y,oe,Ne);case I:return Y=Y.get(oe.key===null?W:oe.key)||null,Z($,Y,oe,Ne);case M:return oe=jo(oe),ne(Y,$,W,oe,Ne)}if($e(oe)||H(oe))return Y=Y.get(W)||null,se($,Y,oe,Ne,null);if(typeof oe.then=="function")return ne(Y,$,W,ad(oe),Ne);if(oe.$$typeof===F)return ne(Y,$,W,rd($,oe),Ne);ld($,oe)}return null}function we(Y,$,W,oe){for(var Ne=null,at=null,Se=$,Ge=$=0,Xe=null;Se!==null&&Ge<W.length;Ge++){Se.index>Ge?(Xe=Se,Se=null):Xe=Se.sibling;var lt=ee(Y,Se,W[Ge],oe);if(lt===null){Se===null&&(Se=Xe);break}s&&Se&&lt.alternate===null&&o(Y,Se),$=_(lt,$,Ge),at===null?Ne=lt:at.sibling=lt,at=lt,Se=Xe}if(Ge===W.length)return c(Y,Se),tt&&Bs(Y,Ge),Ne;if(Se===null){for(;Ge<W.length;Ge++)Se=ce(Y,W[Ge],oe),Se!==null&&($=_(Se,$,Ge),at===null?Ne=Se:at.sibling=Se,at=Se);return tt&&Bs(Y,Ge),Ne}for(Se=u(Se);Ge<W.length;Ge++)Xe=ne(Se,Y,Ge,W[Ge],oe),Xe!==null&&(s&&Xe.alternate!==null&&Se.delete(Xe.key===null?Ge:Xe.key),$=_(Xe,$,Ge),at===null?Ne=Xe:at.sibling=Xe,at=Xe);return s&&Se.forEach(function(Qi){return o(Y,Qi)}),tt&&Bs(Y,Ge),Ne}function Re(Y,$,W,oe){if(W==null)throw Error(r(151));for(var Ne=null,at=null,Se=$,Ge=$=0,Xe=null,lt=W.next();Se!==null&&!lt.done;Ge++,lt=W.next()){Se.index>Ge?(Xe=Se,Se=null):Xe=Se.sibling;var Qi=ee(Y,Se,lt.value,oe);if(Qi===null){Se===null&&(Se=Xe);break}s&&Se&&Qi.alternate===null&&o(Y,Se),$=_(Qi,$,Ge),at===null?Ne=Qi:at.sibling=Qi,at=Qi,Se=Xe}if(lt.done)return c(Y,Se),tt&&Bs(Y,Ge),Ne;if(Se===null){for(;!lt.done;Ge++,lt=W.next())lt=ce(Y,lt.value,oe),lt!==null&&($=_(lt,$,Ge),at===null?Ne=lt:at.sibling=lt,at=lt);return tt&&Bs(Y,Ge),Ne}for(Se=u(Se);!lt.done;Ge++,lt=W.next())lt=ne(Se,Y,Ge,lt.value,oe),lt!==null&&(s&&lt.alternate!==null&&Se.delete(lt.key===null?Ge:lt.key),$=_(lt,$,Ge),at===null?Ne=lt:at.sibling=lt,at=lt);return s&&Se.forEach(function(XI){return o(Y,XI)}),tt&&Bs(Y,Ge),Ne}function Tt(Y,$,W,oe){if(typeof W=="object"&&W!==null&&W.type===D&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case S:e:{for(var Ne=W.key;$!==null;){if($.key===Ne){if(Ne=W.type,Ne===D){if($.tag===7){c(Y,$.sibling),oe=x($,W.props.children),oe.return=Y,Y=oe;break e}}else if($.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===M&&jo(Ne)===$.type){c(Y,$.sibling),oe=x($,W.props),mc(oe,W),oe.return=Y,Y=oe;break e}c(Y,$);break}else o(Y,$);$=$.sibling}W.type===D?(oe=Po(W.props.children,Y.mode,oe,W.key),oe.return=Y,Y=oe):(oe=ed(W.type,W.key,W.props,null,Y.mode,oe),mc(oe,W),oe.return=Y,Y=oe)}return w(Y);case I:e:{for(Ne=W.key;$!==null;){if($.key===Ne)if($.tag===4&&$.stateNode.containerInfo===W.containerInfo&&$.stateNode.implementation===W.implementation){c(Y,$.sibling),oe=x($,W.children||[]),oe.return=Y,Y=oe;break e}else{c(Y,$);break}else o(Y,$);$=$.sibling}oe=Zf(W,Y.mode,oe),oe.return=Y,Y=oe}return w(Y);case M:return W=jo(W),Tt(Y,$,W,oe)}if($e(W))return we(Y,$,W,oe);if(H(W)){if(Ne=H(W),typeof Ne!="function")throw Error(r(150));return W=Ne.call(W),Re(Y,$,W,oe)}if(typeof W.then=="function")return Tt(Y,$,ad(W),oe);if(W.$$typeof===F)return Tt(Y,$,rd(Y,W),oe);ld(Y,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,$!==null&&$.tag===6?(c(Y,$.sibling),oe=x($,W),oe.return=Y,Y=oe):(c(Y,$),oe=Qf(W,Y.mode,oe),oe.return=Y,Y=oe),w(Y)):c(Y,$)}return function(Y,$,W,oe){try{fc=0;var Ne=Tt(Y,$,W,oe);return ja=null,Ne}catch(Se){if(Se===Oa||Se===id)throw Se;var at=sr(29,Se,null,Y.mode);return at.lanes=oe,at.return=Y,at}finally{}}}var qo=lv(!0),cv=lv(!1),Li=!1;function dm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Vi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ui(s,o,c){var u=s.updateQueue;if(u===null)return null;if(u=u.shared,(ft&2)!==0){var x=u.pending;return x===null?o.next=o:(o.next=x.next,x.next=o),u.pending=o,o=Zu(s),$0(s,null,c),o}return Qu(s,u,o,c),Zu(s)}function pc(s,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194048)!==0)){var u=o.lanes;u&=s.pendingLanes,c|=u,o.lanes=c,bi(s,c)}}function fm(s,o){var c=s.updateQueue,u=s.alternate;if(u!==null&&(u=u.updateQueue,c===u)){var x=null,_=null;if(c=c.firstBaseUpdate,c!==null){do{var w={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};_===null?x=_=w:_=_.next=w,c=c.next}while(c!==null);_===null?x=_=o:_=_.next=o}else x=_=o;c={baseState:u.baseState,firstBaseUpdate:x,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=o:s.next=o,c.lastBaseUpdate=o}var mm=!1;function gc(){if(mm){var s=Ua;if(s!==null)throw s}}function yc(s,o,c,u){mm=!1;var x=s.updateQueue;Li=!1;var _=x.firstBaseUpdate,w=x.lastBaseUpdate,C=x.shared.pending;if(C!==null){x.shared.pending=null;var q=C,Z=q.next;q.next=null,w===null?_=Z:w.next=Z,w=q;var se=s.alternate;se!==null&&(se=se.updateQueue,C=se.lastBaseUpdate,C!==w&&(C===null?se.firstBaseUpdate=Z:C.next=Z,se.lastBaseUpdate=q))}if(_!==null){var ce=x.baseState;w=0,se=Z=q=null,C=_;do{var ee=C.lane&-536870913,ne=ee!==C.lane;if(ne?(Ke&ee)===ee:(u&ee)===ee){ee!==0&&ee===Va&&(mm=!0),se!==null&&(se=se.next={lane:0,tag:C.tag,payload:C.payload,callback:null,next:null});e:{var we=s,Re=C;ee=o;var Tt=c;switch(Re.tag){case 1:if(we=Re.payload,typeof we=="function"){ce=we.call(Tt,ce,ee);break e}ce=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Re.payload,ee=typeof we=="function"?we.call(Tt,ce,ee):we,ee==null)break e;ce=b({},ce,ee);break e;case 2:Li=!0}}ee=C.callback,ee!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=x.callbacks,ne===null?x.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:C.tag,payload:C.payload,callback:C.callback,next:null},se===null?(Z=se=ne,q=ce):se=se.next=ne,w|=ee;if(C=C.next,C===null){if(C=x.shared.pending,C===null)break;ne=C,C=ne.next,ne.next=null,x.lastBaseUpdate=ne,x.shared.pending=null}}while(!0);se===null&&(q=ce),x.baseState=q,x.firstBaseUpdate=Z,x.lastBaseUpdate=se,_===null&&(x.shared.lanes=0),Bi|=w,s.lanes=w,s.memoizedState=ce}}function uv(s,o){if(typeof s!="function")throw Error(r(191,s));s.call(o)}function dv(s,o){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)uv(c[s],o)}var Fa=z(null),cd=z(0);function hv(s,o){s=Zs,pe(cd,s),pe(Fa,o),Zs=s|o.baseLanes}function pm(){pe(cd,Zs),pe(Fa,Fa.current)}function gm(){Zs=cd.current,ie(Fa),ie(cd)}var ir=z(null),wr=null;function Oi(s){var o=s.alternate;pe(qt,qt.current&1),pe(ir,s),wr===null&&(o===null||Fa.current!==null||o.memoizedState!==null)&&(wr=s)}function ym(s){pe(qt,qt.current),pe(ir,s),wr===null&&(wr=s)}function fv(s){s.tag===22?(pe(qt,qt.current),pe(ir,s),wr===null&&(wr=s)):ji()}function ji(){pe(qt,qt.current),pe(ir,ir.current)}function or(s){ie(ir),wr===s&&(wr=null),ie(qt)}var qt=z(0);function ud(s){for(var o=s;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Ep(c)||wp(c)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var zs=0,He=null,_t=null,Jt=null,dd=!1,qa=!1,Bo=!1,hd=0,vc=0,Ba=null,F1=0;function Ut(){throw Error(r(321))}function vm(s,o){if(o===null)return!1;for(var c=0;c<o.length&&c<s.length;c++)if(!rr(s[c],o[c]))return!1;return!0}function xm(s,o,c,u,x,_){return zs=_,He=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=s===null||s.memoizedState===null?Xv:Pm,Bo=!1,_=c(u,x),Bo=!1,qa&&(_=pv(o,c,u,x)),mv(s),_}function mv(s){G.H=bc;var o=_t!==null&&_t.next!==null;if(zs=0,Jt=_t=He=null,dd=!1,vc=0,Ba=null,o)throw Error(r(300));s===null||Yt||(s=s.dependencies,s!==null&&nd(s)&&(Yt=!0))}function pv(s,o,c,u){He=s;var x=0;do{if(qa&&(Ba=null),vc=0,qa=!1,25<=x)throw Error(r(301));if(x+=1,Jt=_t=null,s.updateQueue!=null){var _=s.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}G.H=Wv,_=o(c,u)}while(qa);return _}function q1(){var s=G.H,o=s.useState()[0];return o=typeof o.then=="function"?xc(o):o,s=s.useState()[0],(_t!==null?_t.memoizedState:null)!==s&&(He.flags|=1024),o}function _m(){var s=hd!==0;return hd=0,s}function bm(s,o,c){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~c}function Tm(s){if(dd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}dd=!1}zs=0,Jt=_t=He=null,qa=!1,vc=hd=0,Ba=null}function Rn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?He.memoizedState=Jt=s:Jt=Jt.next=s,Jt}function Bt(){if(_t===null){var s=He.alternate;s=s!==null?s.memoizedState:null}else s=_t.next;var o=Jt===null?He.memoizedState:Jt.next;if(o!==null)Jt=o,_t=s;else{if(s===null)throw He.alternate===null?Error(r(467)):Error(r(310));_t=s,s={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Jt===null?He.memoizedState=Jt=s:Jt=Jt.next=s}return Jt}function fd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xc(s){var o=vc;return vc+=1,Ba===null&&(Ba=[]),s=iv(Ba,s,o),o=He,(Jt===null?o.memoizedState:Jt.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?Xv:Pm),s}function md(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return xc(s);if(s.$$typeof===F)return hn(s)}throw Error(r(438,String(s)))}function Em(s){var o=null,c=He.updateQueue;if(c!==null&&(o=c.memoCache),o==null){var u=He.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(x){return x.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),c===null&&(c=fd(),He.updateQueue=c),c.memoCache=o,c=o.data[o.index],c===void 0)for(c=o.data[o.index]=Array(s),u=0;u<s;u++)c[u]=L;return o.index++,c}function $s(s,o){return typeof o=="function"?o(s):o}function pd(s){var o=Bt();return wm(o,_t,s)}function wm(s,o,c){var u=s.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=c;var x=s.baseQueue,_=u.pending;if(_!==null){if(x!==null){var w=x.next;x.next=_.next,_.next=w}o.baseQueue=x=_,u.pending=null}if(_=s.baseState,x===null)s.memoizedState=_;else{o=x.next;var C=w=null,q=null,Z=o,se=!1;do{var ce=Z.lane&-536870913;if(ce!==Z.lane?(Ke&ce)===ce:(zs&ce)===ce){var ee=Z.revertLane;if(ee===0)q!==null&&(q=q.next={lane:0,revertLane:0,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),ce===Va&&(se=!0);else if((zs&ee)===ee){Z=Z.next,ee===Va&&(se=!0);continue}else ce={lane:0,revertLane:Z.revertLane,gesture:null,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(C=q=ce,w=_):q=q.next=ce,He.lanes|=ee,Bi|=ee;ce=Z.action,Bo&&c(_,ce),_=Z.hasEagerState?Z.eagerState:c(_,ce)}else ee={lane:ce,revertLane:Z.revertLane,gesture:Z.gesture,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},q===null?(C=q=ee,w=_):q=q.next=ee,He.lanes|=ce,Bi|=ce;Z=Z.next}while(Z!==null&&Z!==o);if(q===null?w=_:q.next=C,!rr(_,s.memoizedState)&&(Yt=!0,se&&(c=Ua,c!==null)))throw c;s.memoizedState=_,s.baseState=w,s.baseQueue=q,u.lastRenderedState=_}return x===null&&(u.lanes=0),[s.memoizedState,u.dispatch]}function Sm(s){var o=Bt(),c=o.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var u=c.dispatch,x=c.pending,_=o.memoizedState;if(x!==null){c.pending=null;var w=x=x.next;do _=s(_,w.action),w=w.next;while(w!==x);rr(_,o.memoizedState)||(Yt=!0),o.memoizedState=_,o.baseQueue===null&&(o.baseState=_),c.lastRenderedState=_}return[_,u]}function gv(s,o,c){var u=He,x=Bt(),_=tt;if(_){if(c===void 0)throw Error(r(407));c=c()}else c=o();var w=!rr((_t||x).memoizedState,c);if(w&&(x.memoizedState=c,Yt=!0),x=x.queue,Cm(xv.bind(null,u,x,s),[s]),x.getSnapshot!==o||w||Jt!==null&&Jt.memoizedState.tag&1){if(u.flags|=2048,Ha(9,{destroy:void 0},vv.bind(null,u,x,c,o),null),Et===null)throw Error(r(349));_||(zs&127)!==0||yv(u,o,c)}return c}function yv(s,o,c){s.flags|=16384,s={getSnapshot:o,value:c},o=He.updateQueue,o===null?(o=fd(),He.updateQueue=o,o.stores=[s]):(c=o.stores,c===null?o.stores=[s]:c.push(s))}function vv(s,o,c,u){o.value=c,o.getSnapshot=u,_v(o)&&bv(s)}function xv(s,o,c){return c(function(){_v(o)&&bv(s)})}function _v(s){var o=s.getSnapshot;s=s.value;try{var c=o();return!rr(s,c)}catch{return!0}}function bv(s){var o=Mo(s,2);o!==null&&zn(o,s,2)}function Am(s){var o=Rn();if(typeof s=="function"){var c=s;if(s=c(),Bo){ln(!0);try{c()}finally{ln(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:s},o}function Tv(s,o,c,u){return s.baseState=c,wm(s,_t,typeof u=="function"?u:$s)}function B1(s,o,c,u,x){if(vd(s))throw Error(r(485));if(s=o.action,s!==null){var _={payload:x,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){_.listeners.push(w)}};G.T!==null?c(!0):_.isTransition=!1,u(_),c=o.pending,c===null?(_.next=o.pending=_,Ev(o,_)):(_.next=c.next,o.pending=c.next=_)}}function Ev(s,o){var c=o.action,u=o.payload,x=s.state;if(o.isTransition){var _=G.T,w={};G.T=w;try{var C=c(x,u),q=G.S;q!==null&&q(w,C),wv(s,o,C)}catch(Z){Nm(s,o,Z)}finally{_!==null&&w.types!==null&&(_.types=w.types),G.T=_}}else try{_=c(x,u),wv(s,o,_)}catch(Z){Nm(s,o,Z)}}function wv(s,o,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(u){Sv(s,o,u)},function(u){return Nm(s,o,u)}):Sv(s,o,c)}function Sv(s,o,c){o.status="fulfilled",o.value=c,Av(o),s.state=c,o=s.pending,o!==null&&(c=o.next,c===o?s.pending=null:(c=c.next,o.next=c,Ev(s,c)))}function Nm(s,o,c){var u=s.pending;if(s.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=c,Av(o),o=o.next;while(o!==u)}s.action=null}function Av(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Nv(s,o){return o}function Cv(s,o){if(tt){var c=Et.formState;if(c!==null){e:{var u=He;if(tt){if(At){t:{for(var x=At,_=Er;x.nodeType!==8;){if(!_){x=null;break t}if(x=Sr(x.nextSibling),x===null){x=null;break t}}_=x.data,x=_==="F!"||_==="F"?x:null}if(x){At=Sr(x.nextSibling),u=x.data==="F!";break e}}Mi(u)}u=!1}u&&(o=c[0])}}return c=Rn(),c.memoizedState=c.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nv,lastRenderedState:o},c.queue=u,c=Jv.bind(null,He,u),u.dispatch=c,u=Am(!1),_=Mm.bind(null,He,!1,u.queue),u=Rn(),x={state:o,dispatch:null,action:s,pending:null},u.queue=x,c=B1.bind(null,He,x,_,c),x.dispatch=c,u.memoizedState=s,[o,c,!1]}function Iv(s){var o=Bt();return Rv(o,_t,s)}function Rv(s,o,c){if(o=wm(s,o,Nv)[0],s=pd($s)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=xc(o)}catch(w){throw w===Oa?id:w}else u=o;o=Bt();var x=o.queue,_=x.dispatch;return c!==o.memoizedState&&(He.flags|=2048,Ha(9,{destroy:void 0},H1.bind(null,x,c),null)),[u,_,s]}function H1(s,o){s.action=o}function kv(s){var o=Bt(),c=_t;if(c!==null)return Rv(o,c,s);Bt(),o=o.memoizedState,c=Bt();var u=c.queue.dispatch;return c.memoizedState=s,[o,u,!1]}function Ha(s,o,c,u){return s={tag:s,create:c,deps:u,inst:o,next:null},o=He.updateQueue,o===null&&(o=fd(),He.updateQueue=o),c=o.lastEffect,c===null?o.lastEffect=s.next=s:(u=c.next,c.next=s,s.next=u,o.lastEffect=s),s}function Dv(){return Bt().memoizedState}function gd(s,o,c,u){var x=Rn();He.flags|=s,x.memoizedState=Ha(1|o,{destroy:void 0},c,u===void 0?null:u)}function yd(s,o,c,u){var x=Bt();u=u===void 0?null:u;var _=x.memoizedState.inst;_t!==null&&u!==null&&vm(u,_t.memoizedState.deps)?x.memoizedState=Ha(o,_,c,u):(He.flags|=s,x.memoizedState=Ha(1|o,_,c,u))}function Mv(s,o){gd(8390656,8,s,o)}function Cm(s,o){yd(2048,8,s,o)}function G1(s){He.flags|=4;var o=He.updateQueue;if(o===null)o=fd(),He.updateQueue=o,o.events=[s];else{var c=o.events;c===null?o.events=[s]:c.push(s)}}function Pv(s){var o=Bt().memoizedState;return G1({ref:o,nextImpl:s}),function(){if((ft&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}function Lv(s,o){return yd(4,2,s,o)}function Vv(s,o){return yd(4,4,s,o)}function Uv(s,o){if(typeof o=="function"){s=s();var c=o(s);return function(){typeof c=="function"?c():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Ov(s,o,c){c=c!=null?c.concat([s]):null,yd(4,4,Uv.bind(null,o,s),c)}function Im(){}function jv(s,o){var c=Bt();o=o===void 0?null:o;var u=c.memoizedState;return o!==null&&vm(o,u[1])?u[0]:(c.memoizedState=[s,o],s)}function Fv(s,o){var c=Bt();o=o===void 0?null:o;var u=c.memoizedState;if(o!==null&&vm(o,u[1]))return u[0];if(u=s(),Bo){ln(!0);try{s()}finally{ln(!1)}}return c.memoizedState=[u,o],u}function Rm(s,o,c){return c===void 0||(zs&1073741824)!==0&&(Ke&261930)===0?s.memoizedState=o:(s.memoizedState=c,s=qx(),He.lanes|=s,Bi|=s,c)}function qv(s,o,c,u){return rr(c,o)?c:Fa.current!==null?(s=Rm(s,c,u),rr(s,o)||(Yt=!0),s):(zs&42)===0||(zs&1073741824)!==0&&(Ke&261930)===0?(Yt=!0,s.memoizedState=c):(s=qx(),He.lanes|=s,Bi|=s,o)}function Bv(s,o,c,u,x){var _=ae.p;ae.p=_!==0&&8>_?_:8;var w=G.T,C={};G.T=C,Mm(s,!1,o,c);try{var q=x(),Z=G.S;if(Z!==null&&Z(C,q),q!==null&&typeof q=="object"&&typeof q.then=="function"){var se=j1(q,u);_c(s,o,se,cr(s))}else _c(s,o,u,cr(s))}catch(ce){_c(s,o,{then:function(){},status:"rejected",reason:ce},cr())}finally{ae.p=_,w!==null&&C.types!==null&&(w.types=C.types),G.T=w}}function z1(){}function km(s,o,c,u){if(s.tag!==5)throw Error(r(476));var x=Hv(s).queue;Bv(s,x,o,_e,c===null?z1:function(){return Gv(s),c(u)})}function Hv(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:_e},next:null};var c={};return o.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:$s,lastRenderedState:c},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function Gv(s){var o=Hv(s);o.next===null&&(o=s.alternate.memoizedState),_c(s,o.next.queue,{},cr())}function Dm(){return hn(Uc)}function zv(){return Bt().memoizedState}function $v(){return Bt().memoizedState}function $1(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var c=cr();s=Vi(c);var u=Ui(o,s,c);u!==null&&(zn(u,o,c),pc(u,o,c)),o={cache:am()},s.payload=o;return}o=o.return}}function J1(s,o,c){var u=cr();c={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},vd(s)?Yv(o,c):(c=Xf(s,o,c,u),c!==null&&(zn(c,s,u),Kv(c,o,u)))}function Jv(s,o,c){var u=cr();_c(s,o,c,u)}function _c(s,o,c,u){var x={lane:u,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(vd(s))Yv(o,x);else{var _=s.alternate;if(s.lanes===0&&(_===null||_.lanes===0)&&(_=o.lastRenderedReducer,_!==null))try{var w=o.lastRenderedState,C=_(w,c);if(x.hasEagerState=!0,x.eagerState=C,rr(C,w))return Qu(s,o,x,0),Et===null&&Wu(),!1}catch{}finally{}if(c=Xf(s,o,x,u),c!==null)return zn(c,s,u),Kv(c,o,u),!0}return!1}function Mm(s,o,c,u){if(u={lane:2,revertLane:dp(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},vd(s)){if(o)throw Error(r(479))}else o=Xf(s,c,u,2),o!==null&&zn(o,s,2)}function vd(s){var o=s.alternate;return s===He||o!==null&&o===He}function Yv(s,o){qa=dd=!0;var c=s.pending;c===null?o.next=o:(o.next=c.next,c.next=o),s.pending=o}function Kv(s,o,c){if((c&4194048)!==0){var u=o.lanes;u&=s.pendingLanes,c|=u,o.lanes=c,bi(s,c)}}var bc={readContext:hn,use:md,useCallback:Ut,useContext:Ut,useEffect:Ut,useImperativeHandle:Ut,useLayoutEffect:Ut,useInsertionEffect:Ut,useMemo:Ut,useReducer:Ut,useRef:Ut,useState:Ut,useDebugValue:Ut,useDeferredValue:Ut,useTransition:Ut,useSyncExternalStore:Ut,useId:Ut,useHostTransitionStatus:Ut,useFormState:Ut,useActionState:Ut,useOptimistic:Ut,useMemoCache:Ut,useCacheRefresh:Ut};bc.useEffectEvent=Ut;var Xv={readContext:hn,use:md,useCallback:function(s,o){return Rn().memoizedState=[s,o===void 0?null:o],s},useContext:hn,useEffect:Mv,useImperativeHandle:function(s,o,c){c=c!=null?c.concat([s]):null,gd(4194308,4,Uv.bind(null,o,s),c)},useLayoutEffect:function(s,o){return gd(4194308,4,s,o)},useInsertionEffect:function(s,o){gd(4,2,s,o)},useMemo:function(s,o){var c=Rn();o=o===void 0?null:o;var u=s();if(Bo){ln(!0);try{s()}finally{ln(!1)}}return c.memoizedState=[u,o],u},useReducer:function(s,o,c){var u=Rn();if(c!==void 0){var x=c(o);if(Bo){ln(!0);try{c(o)}finally{ln(!1)}}}else x=o;return u.memoizedState=u.baseState=x,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:x},u.queue=s,s=s.dispatch=J1.bind(null,He,s),[u.memoizedState,s]},useRef:function(s){var o=Rn();return s={current:s},o.memoizedState=s},useState:function(s){s=Am(s);var o=s.queue,c=Jv.bind(null,He,o);return o.dispatch=c,[s.memoizedState,c]},useDebugValue:Im,useDeferredValue:function(s,o){var c=Rn();return Rm(c,s,o)},useTransition:function(){var s=Am(!1);return s=Bv.bind(null,He,s.queue,!0,!1),Rn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,c){var u=He,x=Rn();if(tt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=o(),Et===null)throw Error(r(349));(Ke&127)!==0||yv(u,o,c)}x.memoizedState=c;var _={value:c,getSnapshot:o};return x.queue=_,Mv(xv.bind(null,u,_,s),[s]),u.flags|=2048,Ha(9,{destroy:void 0},vv.bind(null,u,_,c,o),null),c},useId:function(){var s=Rn(),o=Et.identifierPrefix;if(tt){var c=ms,u=fs;c=(u&~(1<<32-dt(u)-1)).toString(32)+c,o="_"+o+"R_"+c,c=hd++,0<c&&(o+="H"+c.toString(32)),o+="_"}else c=F1++,o="_"+o+"r_"+c.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:Dm,useFormState:Cv,useActionState:Cv,useOptimistic:function(s){var o=Rn();o.memoizedState=o.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=c,o=Mm.bind(null,He,!0,c),c.dispatch=o,[s,o]},useMemoCache:Em,useCacheRefresh:function(){return Rn().memoizedState=$1.bind(null,He)},useEffectEvent:function(s){var o=Rn(),c={impl:s};return o.memoizedState=c,function(){if((ft&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},Pm={readContext:hn,use:md,useCallback:jv,useContext:hn,useEffect:Cm,useImperativeHandle:Ov,useInsertionEffect:Lv,useLayoutEffect:Vv,useMemo:Fv,useReducer:pd,useRef:Dv,useState:function(){return pd($s)},useDebugValue:Im,useDeferredValue:function(s,o){var c=Bt();return qv(c,_t.memoizedState,s,o)},useTransition:function(){var s=pd($s)[0],o=Bt().memoizedState;return[typeof s=="boolean"?s:xc(s),o]},useSyncExternalStore:gv,useId:zv,useHostTransitionStatus:Dm,useFormState:Iv,useActionState:Iv,useOptimistic:function(s,o){var c=Bt();return Tv(c,_t,s,o)},useMemoCache:Em,useCacheRefresh:$v};Pm.useEffectEvent=Pv;var Wv={readContext:hn,use:md,useCallback:jv,useContext:hn,useEffect:Cm,useImperativeHandle:Ov,useInsertionEffect:Lv,useLayoutEffect:Vv,useMemo:Fv,useReducer:Sm,useRef:Dv,useState:function(){return Sm($s)},useDebugValue:Im,useDeferredValue:function(s,o){var c=Bt();return _t===null?Rm(c,s,o):qv(c,_t.memoizedState,s,o)},useTransition:function(){var s=Sm($s)[0],o=Bt().memoizedState;return[typeof s=="boolean"?s:xc(s),o]},useSyncExternalStore:gv,useId:zv,useHostTransitionStatus:Dm,useFormState:kv,useActionState:kv,useOptimistic:function(s,o){var c=Bt();return _t!==null?Tv(c,_t,s,o):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:Em,useCacheRefresh:$v};Wv.useEffectEvent=Pv;function Lm(s,o,c,u){o=s.memoizedState,c=c(u,o),c=c==null?o:b({},o,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Vm={enqueueSetState:function(s,o,c){s=s._reactInternals;var u=cr(),x=Vi(u);x.payload=o,c!=null&&(x.callback=c),o=Ui(s,x,u),o!==null&&(zn(o,s,u),pc(o,s,u))},enqueueReplaceState:function(s,o,c){s=s._reactInternals;var u=cr(),x=Vi(u);x.tag=1,x.payload=o,c!=null&&(x.callback=c),o=Ui(s,x,u),o!==null&&(zn(o,s,u),pc(o,s,u))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var c=cr(),u=Vi(c);u.tag=2,o!=null&&(u.callback=o),o=Ui(s,u,c),o!==null&&(zn(o,s,c),pc(o,s,c))}};function Qv(s,o,c,u,x,_,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(u,_,w):o.prototype&&o.prototype.isPureReactComponent?!ac(c,u)||!ac(x,_):!0}function Zv(s,o,c,u){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,u),o.state!==s&&Vm.enqueueReplaceState(o,o.state,null)}function Ho(s,o){var c=o;if("ref"in o){c={};for(var u in o)u!=="ref"&&(c[u]=o[u])}if(s=s.defaultProps){c===o&&(c=b({},c));for(var x in s)c[x]===void 0&&(c[x]=s[x])}return c}function ex(s){Xu(s)}function tx(s){console.error(s)}function nx(s){Xu(s)}function xd(s,o){try{var c=s.onUncaughtError;c(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function rx(s,o,c){try{var u=s.onCaughtError;u(c.value,{componentStack:c.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Um(s,o,c){return c=Vi(c),c.tag=3,c.payload={element:null},c.callback=function(){xd(s,o)},c}function sx(s){return s=Vi(s),s.tag=3,s}function ix(s,o,c,u){var x=c.type.getDerivedStateFromError;if(typeof x=="function"){var _=u.value;s.payload=function(){return x(_)},s.callback=function(){rx(o,c,u)}}var w=c.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){rx(o,c,u),typeof x!="function"&&(Hi===null?Hi=new Set([this]):Hi.add(this));var C=u.stack;this.componentDidCatch(u.value,{componentStack:C!==null?C:""})})}function Y1(s,o,c,u,x){if(c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=c.alternate,o!==null&&La(o,c,x,!0),c=ir.current,c!==null){switch(c.tag){case 31:case 13:return wr===null?kd():c.alternate===null&&Ot===0&&(Ot=3),c.flags&=-257,c.flags|=65536,c.lanes=x,u===od?c.flags|=16384:(o=c.updateQueue,o===null?c.updateQueue=new Set([u]):o.add(u),lp(s,u,x)),!1;case 22:return c.flags|=65536,u===od?c.flags|=16384:(o=c.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},c.updateQueue=o):(c=o.retryQueue,c===null?o.retryQueue=new Set([u]):c.add(u)),lp(s,u,x)),!1}throw Error(r(435,c.tag))}return lp(s,u,x),kd(),!1}if(tt)return o=ir.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=x,u!==nm&&(s=Error(r(422),{cause:u}),uc(_r(s,c)))):(u!==nm&&(o=Error(r(423),{cause:u}),uc(_r(o,c))),s=s.current.alternate,s.flags|=65536,x&=-x,s.lanes|=x,u=_r(u,c),x=Um(s.stateNode,u,x),fm(s,x),Ot!==4&&(Ot=2)),!1;var _=Error(r(520),{cause:u});if(_=_r(_,c),Ic===null?Ic=[_]:Ic.push(_),Ot!==4&&(Ot=2),o===null)return!0;u=_r(u,c),c=o;do{switch(c.tag){case 3:return c.flags|=65536,s=x&-x,c.lanes|=s,s=Um(c.stateNode,u,s),fm(c,s),!1;case 1:if(o=c.type,_=c.stateNode,(c.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Hi===null||!Hi.has(_))))return c.flags|=65536,x&=-x,c.lanes|=x,x=sx(x),ix(x,s,c,u),fm(c,x),!1}c=c.return}while(c!==null);return!1}var Om=Error(r(461)),Yt=!1;function fn(s,o,c,u){o.child=s===null?cv(o,null,c,u):qo(o,s.child,c,u)}function ox(s,o,c,u,x){c=c.render;var _=o.ref;if("ref"in u){var w={};for(var C in u)C!=="ref"&&(w[C]=u[C])}else w=u;return Uo(o),u=xm(s,o,c,w,_,x),C=_m(),s!==null&&!Yt?(bm(s,o,x),Js(s,o,x)):(tt&&C&&em(o),o.flags|=1,fn(s,o,u,x),o.child)}function ax(s,o,c,u,x){if(s===null){var _=c.type;return typeof _=="function"&&!Wf(_)&&_.defaultProps===void 0&&c.compare===null?(o.tag=15,o.type=_,lx(s,o,_,u,x)):(s=ed(c.type,null,u,o,o.mode,x),s.ref=o.ref,s.return=o,o.child=s)}if(_=s.child,!$m(s,x)){var w=_.memoizedProps;if(c=c.compare,c=c!==null?c:ac,c(w,u)&&s.ref===o.ref)return Js(s,o,x)}return o.flags|=1,s=qs(_,u),s.ref=o.ref,s.return=o,o.child=s}function lx(s,o,c,u,x){if(s!==null){var _=s.memoizedProps;if(ac(_,u)&&s.ref===o.ref)if(Yt=!1,o.pendingProps=u=_,$m(s,x))(s.flags&131072)!==0&&(Yt=!0);else return o.lanes=s.lanes,Js(s,o,x)}return jm(s,o,c,u,x)}function cx(s,o,c,u){var x=u.children,_=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(_=_!==null?_.baseLanes|c:c,s!==null){for(u=o.child=s.child,x=0;u!==null;)x=x|u.lanes|u.childLanes,u=u.sibling;u=x&~_}else u=0,o.child=null;return ux(s,o,_,c,u)}if((c&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&sd(o,_!==null?_.cachePool:null),_!==null?hv(o,_):pm(),fv(o);else return u=o.lanes=536870912,ux(s,o,_!==null?_.baseLanes|c:c,c,u)}else _!==null?(sd(o,_.cachePool),hv(o,_),ji(),o.memoizedState=null):(s!==null&&sd(o,null),pm(),ji());return fn(s,o,x,c),o.child}function Tc(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function ux(s,o,c,u,x){var _=cm();return _=_===null?null:{parent:$t._currentValue,pool:_},o.memoizedState={baseLanes:c,cachePool:_},s!==null&&sd(o,null),pm(),fv(o),s!==null&&La(s,o,u,!0),o.childLanes=x,null}function _d(s,o){return o=Td({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function dx(s,o,c){return qo(o,s.child,null,c),s=_d(o,o.pendingProps),s.flags|=2,or(o),o.memoizedState=null,s}function K1(s,o,c){var u=o.pendingProps,x=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(tt){if(u.mode==="hidden")return s=_d(o,u),o.lanes=536870912,Tc(null,s);if(ym(o),(s=At)?(s=E_(s,Er),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ki!==null?{id:fs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},c=Y0(s),c.return=o,o.child=c,dn=o,At=null)):s=null,s===null)throw Mi(o);return o.lanes=536870912,null}return _d(o,u)}var _=s.memoizedState;if(_!==null){var w=_.dehydrated;if(ym(o),x)if(o.flags&256)o.flags&=-257,o=dx(s,o,c);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(r(558));else if(Yt||La(s,o,c,!1),x=(c&s.childLanes)!==0,Yt||x){if(u=Et,u!==null&&(w=rs(u,c),w!==0&&w!==_.retryLane))throw _.retryLane=w,Mo(s,w),zn(u,s,w),Om;kd(),o=dx(s,o,c)}else s=_.treeContext,At=Sr(w.nextSibling),dn=o,tt=!0,Di=null,Er=!1,s!==null&&W0(o,s),o=_d(o,u),o.flags|=4096;return o}return s=qs(s.child,{mode:u.mode,children:u.children}),s.ref=o.ref,o.child=s,s.return=o,s}function bd(s,o){var c=o.ref;if(c===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(o.flags|=4194816)}}function jm(s,o,c,u,x){return Uo(o),c=xm(s,o,c,u,void 0,x),u=_m(),s!==null&&!Yt?(bm(s,o,x),Js(s,o,x)):(tt&&u&&em(o),o.flags|=1,fn(s,o,c,x),o.child)}function hx(s,o,c,u,x,_){return Uo(o),o.updateQueue=null,c=pv(o,u,c,x),mv(s),u=_m(),s!==null&&!Yt?(bm(s,o,_),Js(s,o,_)):(tt&&u&&em(o),o.flags|=1,fn(s,o,c,_),o.child)}function fx(s,o,c,u,x){if(Uo(o),o.stateNode===null){var _=ka,w=c.contextType;typeof w=="object"&&w!==null&&(_=hn(w)),_=new c(u,_),o.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Vm,o.stateNode=_,_._reactInternals=o,_=o.stateNode,_.props=u,_.state=o.memoizedState,_.refs={},dm(o),w=c.contextType,_.context=typeof w=="object"&&w!==null?hn(w):ka,_.state=o.memoizedState,w=c.getDerivedStateFromProps,typeof w=="function"&&(Lm(o,c,w,u),_.state=o.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(w=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),w!==_.state&&Vm.enqueueReplaceState(_,_.state,null),yc(o,u,_,x),gc(),_.state=o.memoizedState),typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(s===null){_=o.stateNode;var C=o.memoizedProps,q=Ho(c,C);_.props=q;var Z=_.context,se=c.contextType;w=ka,typeof se=="object"&&se!==null&&(w=hn(se));var ce=c.getDerivedStateFromProps;se=typeof ce=="function"||typeof _.getSnapshotBeforeUpdate=="function",C=o.pendingProps!==C,se||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(C||Z!==w)&&Zv(o,_,u,w),Li=!1;var ee=o.memoizedState;_.state=ee,yc(o,u,_,x),gc(),Z=o.memoizedState,C||ee!==Z||Li?(typeof ce=="function"&&(Lm(o,c,ce,u),Z=o.memoizedState),(q=Li||Qv(o,c,q,u,ee,Z,w))?(se||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(o.flags|=4194308)):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=Z),_.props=u,_.state=Z,_.context=w,u=q):(typeof _.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{_=o.stateNode,hm(s,o),w=o.memoizedProps,se=Ho(c,w),_.props=se,ce=o.pendingProps,ee=_.context,Z=c.contextType,q=ka,typeof Z=="object"&&Z!==null&&(q=hn(Z)),C=c.getDerivedStateFromProps,(Z=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==ce||ee!==q)&&Zv(o,_,u,q),Li=!1,ee=o.memoizedState,_.state=ee,yc(o,u,_,x),gc();var ne=o.memoizedState;w!==ce||ee!==ne||Li||s!==null&&s.dependencies!==null&&nd(s.dependencies)?(typeof C=="function"&&(Lm(o,c,C,u),ne=o.memoizedState),(se=Li||Qv(o,c,se,u,ee,ne,q)||s!==null&&s.dependencies!==null&&nd(s.dependencies))?(Z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,ne,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,ne,q)),typeof _.componentDidUpdate=="function"&&(o.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=ne),_.props=u,_.state=ne,_.context=q,u=se):(typeof _.componentDidUpdate!="function"||w===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),u=!1)}return _=u,bd(s,o),u=(o.flags&128)!==0,_||u?(_=o.stateNode,c=u&&typeof c.getDerivedStateFromError!="function"?null:_.render(),o.flags|=1,s!==null&&u?(o.child=qo(o,s.child,null,x),o.child=qo(o,null,c,x)):fn(s,o,c,x),o.memoizedState=_.state,s=o.child):s=Js(s,o,x),s}function mx(s,o,c,u){return Lo(),o.flags|=256,fn(s,o,c,u),o.child}var Fm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qm(s){return{baseLanes:s,cachePool:rv()}}function Bm(s,o,c){return s=s!==null?s.childLanes&~c:0,o&&(s|=lr),s}function px(s,o,c){var u=o.pendingProps,x=!1,_=(o.flags&128)!==0,w;if((w=_)||(w=s!==null&&s.memoizedState===null?!1:(qt.current&2)!==0),w&&(x=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,s===null){if(tt){if(x?Oi(o):ji(),(s=At)?(s=E_(s,Er),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:ki!==null?{id:fs,overflow:ms}:null,retryLane:536870912,hydrationErrors:null},c=Y0(s),c.return=o,o.child=c,dn=o,At=null)):s=null,s===null)throw Mi(o);return wp(s)?o.lanes=32:o.lanes=536870912,null}var C=u.children;return u=u.fallback,x?(ji(),x=o.mode,C=Td({mode:"hidden",children:C},x),u=Po(u,x,c,null),C.return=o,u.return=o,C.sibling=u,o.child=C,u=o.child,u.memoizedState=qm(c),u.childLanes=Bm(s,w,c),o.memoizedState=Fm,Tc(null,u)):(Oi(o),Hm(o,C))}var q=s.memoizedState;if(q!==null&&(C=q.dehydrated,C!==null)){if(_)o.flags&256?(Oi(o),o.flags&=-257,o=Gm(s,o,c)):o.memoizedState!==null?(ji(),o.child=s.child,o.flags|=128,o=null):(ji(),C=u.fallback,x=o.mode,u=Td({mode:"visible",children:u.children},x),C=Po(C,x,c,null),C.flags|=2,u.return=o,C.return=o,u.sibling=C,o.child=u,qo(o,s.child,null,c),u=o.child,u.memoizedState=qm(c),u.childLanes=Bm(s,w,c),o.memoizedState=Fm,o=Tc(null,u));else if(Oi(o),wp(C)){if(w=C.nextSibling&&C.nextSibling.dataset,w)var Z=w.dgst;w=Z,u=Error(r(419)),u.stack="",u.digest=w,uc({value:u,source:null,stack:null}),o=Gm(s,o,c)}else if(Yt||La(s,o,c,!1),w=(c&s.childLanes)!==0,Yt||w){if(w=Et,w!==null&&(u=rs(w,c),u!==0&&u!==q.retryLane))throw q.retryLane=u,Mo(s,u),zn(w,s,u),Om;Ep(C)||kd(),o=Gm(s,o,c)}else Ep(C)?(o.flags|=192,o.child=s.child,o=null):(s=q.treeContext,At=Sr(C.nextSibling),dn=o,tt=!0,Di=null,Er=!1,s!==null&&W0(o,s),o=Hm(o,u.children),o.flags|=4096);return o}return x?(ji(),C=u.fallback,x=o.mode,q=s.child,Z=q.sibling,u=qs(q,{mode:"hidden",children:u.children}),u.subtreeFlags=q.subtreeFlags&65011712,Z!==null?C=qs(Z,C):(C=Po(C,x,c,null),C.flags|=2),C.return=o,u.return=o,u.sibling=C,o.child=u,Tc(null,u),u=o.child,C=s.child.memoizedState,C===null?C=qm(c):(x=C.cachePool,x!==null?(q=$t._currentValue,x=x.parent!==q?{parent:q,pool:q}:x):x=rv(),C={baseLanes:C.baseLanes|c,cachePool:x}),u.memoizedState=C,u.childLanes=Bm(s,w,c),o.memoizedState=Fm,Tc(s.child,u)):(Oi(o),c=s.child,s=c.sibling,c=qs(c,{mode:"visible",children:u.children}),c.return=o,c.sibling=null,s!==null&&(w=o.deletions,w===null?(o.deletions=[s],o.flags|=16):w.push(s)),o.child=c,o.memoizedState=null,c)}function Hm(s,o){return o=Td({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Td(s,o){return s=sr(22,s,null,o),s.lanes=0,s}function Gm(s,o,c){return qo(o,s.child,null,c),s=Hm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function gx(s,o,c){s.lanes|=o;var u=s.alternate;u!==null&&(u.lanes|=o),im(s.return,o,c)}function zm(s,o,c,u,x,_){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:c,tailMode:x,treeForkCount:_}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=u,w.tail=c,w.tailMode=x,w.treeForkCount=_)}function yx(s,o,c){var u=o.pendingProps,x=u.revealOrder,_=u.tail;u=u.children;var w=qt.current,C=(w&2)!==0;if(C?(w=w&1|2,o.flags|=128):w&=1,pe(qt,w),fn(s,o,u,c),u=tt?cc:0,!C&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&gx(s,c,o);else if(s.tag===19)gx(s,c,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(x){case"forwards":for(c=o.child,x=null;c!==null;)s=c.alternate,s!==null&&ud(s)===null&&(x=c),c=c.sibling;c=x,c===null?(x=o.child,o.child=null):(x=c.sibling,c.sibling=null),zm(o,!1,x,c,_,u);break;case"backwards":case"unstable_legacy-backwards":for(c=null,x=o.child,o.child=null;x!==null;){if(s=x.alternate,s!==null&&ud(s)===null){o.child=x;break}s=x.sibling,x.sibling=c,c=x,x=s}zm(o,!0,c,null,_,u);break;case"together":zm(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function Js(s,o,c){if(s!==null&&(o.dependencies=s.dependencies),Bi|=o.lanes,(c&o.childLanes)===0)if(s!==null){if(La(s,o,c,!1),(c&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(r(153));if(o.child!==null){for(s=o.child,c=qs(s,s.pendingProps),o.child=c,c.return=o;s.sibling!==null;)s=s.sibling,c=c.sibling=qs(s,s.pendingProps),c.return=o;c.sibling=null}return o.child}function $m(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&nd(s)))}function X1(s,o,c){switch(o.tag){case 3:ge(o,o.stateNode.containerInfo),Pi(o,$t,s.memoizedState.cache),Lo();break;case 27:case 5:jt(o);break;case 4:ge(o,o.stateNode.containerInfo);break;case 10:Pi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ym(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(Oi(o),o.flags|=128,null):(c&o.child.childLanes)!==0?px(s,o,c):(Oi(o),s=Js(s,o,c),s!==null?s.sibling:null);Oi(o);break;case 19:var x=(s.flags&128)!==0;if(u=(c&o.childLanes)!==0,u||(La(s,o,c,!1),u=(c&o.childLanes)!==0),x){if(u)return yx(s,o,c);o.flags|=128}if(x=o.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),pe(qt,qt.current),u)break;return null;case 22:return o.lanes=0,cx(s,o,c,o.pendingProps);case 24:Pi(o,$t,s.memoizedState.cache)}return Js(s,o,c)}function vx(s,o,c){if(s!==null)if(s.memoizedProps!==o.pendingProps)Yt=!0;else{if(!$m(s,c)&&(o.flags&128)===0)return Yt=!1,X1(s,o,c);Yt=(s.flags&131072)!==0}else Yt=!1,tt&&(o.flags&1048576)!==0&&X0(o,cc,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(s=jo(o.elementType),o.type=s,typeof s=="function")Wf(s)?(u=Ho(s,u),o.tag=1,o=fx(null,o,s,u,c)):(o.tag=0,o=jm(null,o,s,u,c));else{if(s!=null){var x=s.$$typeof;if(x===Q){o.tag=11,o=ox(null,o,s,u,c);break e}else if(x===k){o.tag=14,o=ax(null,o,s,u,c);break e}}throw o=Ae(s)||s,Error(r(306,o,""))}}return o;case 0:return jm(s,o,o.type,o.pendingProps,c);case 1:return u=o.type,x=Ho(u,o.pendingProps),fx(s,o,u,x,c);case 3:e:{if(ge(o,o.stateNode.containerInfo),s===null)throw Error(r(387));u=o.pendingProps;var _=o.memoizedState;x=_.element,hm(s,o),yc(o,u,null,c);var w=o.memoizedState;if(u=w.cache,Pi(o,$t,u),u!==_.cache&&om(o,[$t],c,!0),gc(),u=w.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=_,o.memoizedState=_,o.flags&256){o=mx(s,o,u,c);break e}else if(u!==x){x=_r(Error(r(424)),o),uc(x),o=mx(s,o,u,c);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(At=Sr(s.firstChild),dn=o,tt=!0,Di=null,Er=!0,c=cv(o,null,u,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Lo(),u===x){o=Js(s,o,c);break e}fn(s,o,u,c)}o=o.child}return o;case 26:return bd(s,o),s===null?(c=I_(o.type,null,o.pendingProps,null))?o.memoizedState=c:tt||(c=o.type,s=o.pendingProps,u=Od(Le.current).createElement(c),u[Dt]=o,u[K]=s,mn(u,c,s),Vt(u),o.stateNode=u):o.memoizedState=I_(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return jt(o),s===null&&tt&&(u=o.stateNode=A_(o.type,o.pendingProps,Le.current),dn=o,Er=!0,x=At,Ji(o.type)?(Sp=x,At=Sr(u.firstChild)):At=x),fn(s,o,o.pendingProps.children,c),bd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&tt&&((x=u=At)&&(u=AI(u,o.type,o.pendingProps,Er),u!==null?(o.stateNode=u,dn=o,At=Sr(u.firstChild),Er=!1,x=!0):x=!1),x||Mi(o)),jt(o),x=o.type,_=o.pendingProps,w=s!==null?s.memoizedProps:null,u=_.children,_p(x,_)?u=null:w!==null&&_p(x,w)&&(o.flags|=32),o.memoizedState!==null&&(x=xm(s,o,q1,null,null,c),Uc._currentValue=x),bd(s,o),fn(s,o,u,c),o.child;case 6:return s===null&&tt&&((s=c=At)&&(c=NI(c,o.pendingProps,Er),c!==null?(o.stateNode=c,dn=o,At=null,s=!0):s=!1),s||Mi(o)),null;case 13:return px(s,o,c);case 4:return ge(o,o.stateNode.containerInfo),u=o.pendingProps,s===null?o.child=qo(o,null,u,c):fn(s,o,u,c),o.child;case 11:return ox(s,o,o.type,o.pendingProps,c);case 7:return fn(s,o,o.pendingProps,c),o.child;case 8:return fn(s,o,o.pendingProps.children,c),o.child;case 12:return fn(s,o,o.pendingProps.children,c),o.child;case 10:return u=o.pendingProps,Pi(o,o.type,u.value),fn(s,o,u.children,c),o.child;case 9:return x=o.type._context,u=o.pendingProps.children,Uo(o),x=hn(x),u=u(x),o.flags|=1,fn(s,o,u,c),o.child;case 14:return ax(s,o,o.type,o.pendingProps,c);case 15:return lx(s,o,o.type,o.pendingProps,c);case 19:return yx(s,o,c);case 31:return K1(s,o,c);case 22:return cx(s,o,c,o.pendingProps);case 24:return Uo(o),u=hn($t),s===null?(x=cm(),x===null&&(x=Et,_=am(),x.pooledCache=_,_.refCount++,_!==null&&(x.pooledCacheLanes|=c),x=_),o.memoizedState={parent:u,cache:x},dm(o),Pi(o,$t,x)):((s.lanes&c)!==0&&(hm(s,o),yc(o,null,null,c),gc()),x=s.memoizedState,_=o.memoizedState,x.parent!==u?(x={parent:u,cache:u},o.memoizedState=x,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=x),Pi(o,$t,u)):(u=_.cache,Pi(o,$t,u),u!==x.cache&&om(o,[$t],c,!0))),fn(s,o,o.pendingProps.children,c),o.child;case 29:throw o.pendingProps}throw Error(r(156,o.tag))}function Ys(s){s.flags|=4}function Jm(s,o,c,u,x){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(x&335544128)===x)if(s.stateNode.complete)s.flags|=8192;else if(zx())s.flags|=8192;else throw Fo=od,um}else s.flags&=-16777217}function xx(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!P_(o))if(zx())s.flags|=8192;else throw Fo=od,um}function Ed(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Ps():536870912,s.lanes|=o,Ja|=o)}function Ec(s,o){if(!tt)switch(s.tailMode){case"hidden":o=s.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var u=null;c!==null;)c.alternate!==null&&(u=c),c=c.sibling;u===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:u.sibling=null}}function Nt(s){var o=s.alternate!==null&&s.alternate.child===s.child,c=0,u=0;if(o)for(var x=s.child;x!==null;)c|=x.lanes|x.childLanes,u|=x.subtreeFlags&65011712,u|=x.flags&65011712,x.return=s,x=x.sibling;else for(x=s.child;x!==null;)c|=x.lanes|x.childLanes,u|=x.subtreeFlags,u|=x.flags,x.return=s,x=x.sibling;return s.subtreeFlags|=u,s.childLanes=c,o}function W1(s,o,c){var u=o.pendingProps;switch(tm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(o),null;case 1:return Nt(o),null;case 3:return c=o.stateNode,u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Gs($t),De(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Pa(o)?Ys(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,rm())),Nt(o),null;case 26:var x=o.type,_=o.memoizedState;return s===null?(Ys(o),_!==null?(Nt(o),xx(o,_)):(Nt(o),Jm(o,x,null,u,c))):_?_!==s.memoizedState?(Ys(o),Nt(o),xx(o,_)):(Nt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==u&&Ys(o),Nt(o),Jm(o,x,s,u,c)),null;case 27:if(Gt(o),c=Le.current,x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&Ys(o);else{if(!u){if(o.stateNode===null)throw Error(r(166));return Nt(o),null}s=ve.current,Pa(o)?Q0(o):(s=A_(x,u,c),o.stateNode=s,Ys(o))}return Nt(o),null;case 5:if(Gt(o),x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==u&&Ys(o);else{if(!u){if(o.stateNode===null)throw Error(r(166));return Nt(o),null}if(_=ve.current,Pa(o))Q0(o);else{var w=Od(Le.current);switch(_){case 1:_=w.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:_=w.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":_=w.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":_=w.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":_=w.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?w.createElement("select",{is:u.is}):w.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?w.createElement(x,{is:u.is}):w.createElement(x)}}_[Dt]=o,_[K]=u;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)_.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=_;e:switch(mn(_,x,u),x){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ys(o)}}return Nt(o),Jm(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,c),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==u&&Ys(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(r(166));if(s=Le.current,Pa(o)){if(s=o.stateNode,c=o.memoizedProps,u=null,x=dn,x!==null)switch(x.tag){case 27:case 5:u=x.memoizedProps}s[Dt]=o,s=!!(s.nodeValue===c||u!==null&&u.suppressHydrationWarning===!0||p_(s.nodeValue,c)),s||Mi(o,!0)}else s=Od(s).createTextNode(u),s[Dt]=o,o.stateNode=s}return Nt(o),null;case 31:if(c=o.memoizedState,s===null||s.memoizedState!==null){if(u=Pa(o),c!==null){if(s===null){if(!u)throw Error(r(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(557));s[Dt]=o}else Lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Nt(o),s=!1}else c=rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return o.flags&256?(or(o),o):(or(o),null);if((o.flags&128)!==0)throw Error(r(558))}return Nt(o),null;case 13:if(u=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(x=Pa(o),u!==null&&u.dehydrated!==null){if(s===null){if(!x)throw Error(r(318));if(x=o.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Dt]=o}else Lo(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Nt(o),x=!1}else x=rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=x),x=!0;if(!x)return o.flags&256?(or(o),o):(or(o),null)}return or(o),(o.flags&128)!==0?(o.lanes=c,o):(c=u!==null,s=s!==null&&s.memoizedState!==null,c&&(u=o.child,x=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(x=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==x&&(u.flags|=2048)),c!==s&&c&&(o.child.flags|=8192),Ed(o,o.updateQueue),Nt(o),null);case 4:return De(),s===null&&pp(o.stateNode.containerInfo),Nt(o),null;case 10:return Gs(o.type),Nt(o),null;case 19:if(ie(qt),u=o.memoizedState,u===null)return Nt(o),null;if(x=(o.flags&128)!==0,_=u.rendering,_===null)if(x)Ec(u,!1);else{if(Ot!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(_=ud(s),_!==null){for(o.flags|=128,Ec(u,!1),s=_.updateQueue,o.updateQueue=s,Ed(o,s),o.subtreeFlags=0,s=c,c=o.child;c!==null;)J0(c,s),c=c.sibling;return pe(qt,qt.current&1|2),tt&&Bs(o,u.treeForkCount),o.child}s=s.sibling}u.tail!==null&&st()>Cd&&(o.flags|=128,x=!0,Ec(u,!1),o.lanes=4194304)}else{if(!x)if(s=ud(_),s!==null){if(o.flags|=128,x=!0,s=s.updateQueue,o.updateQueue=s,Ed(o,s),Ec(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!tt)return Nt(o),null}else 2*st()-u.renderingStartTime>Cd&&c!==536870912&&(o.flags|=128,x=!0,Ec(u,!1),o.lanes=4194304);u.isBackwards?(_.sibling=o.child,o.child=_):(s=u.last,s!==null?s.sibling=_:o.child=_,u.last=_)}return u.tail!==null?(s=u.tail,u.rendering=s,u.tail=s.sibling,u.renderingStartTime=st(),s.sibling=null,c=qt.current,pe(qt,x?c&1|2:c&1),tt&&Bs(o,u.treeForkCount),s):(Nt(o),null);case 22:case 23:return or(o),gm(),u=o.memoizedState!==null,s!==null?s.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(c&536870912)!==0&&(o.flags&128)===0&&(Nt(o),o.subtreeFlags&6&&(o.flags|=8192)):Nt(o),c=o.updateQueue,c!==null&&Ed(o,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==c&&(o.flags|=2048),s!==null&&ie(Oo),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Gs($t),Nt(o),null;case 25:return null;case 30:return null}throw Error(r(156,o.tag))}function Q1(s,o){switch(tm(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Gs($t),De(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Gt(o),null;case 31:if(o.memoizedState!==null){if(or(o),o.alternate===null)throw Error(r(340));Lo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(or(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(r(340));Lo()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return ie(qt),null;case 4:return De(),null;case 10:return Gs(o.type),null;case 22:case 23:return or(o),gm(),s!==null&&ie(Oo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Gs($t),null;case 25:return null;default:return null}}function _x(s,o){switch(tm(o),o.tag){case 3:Gs($t),De();break;case 26:case 27:case 5:Gt(o);break;case 4:De();break;case 31:o.memoizedState!==null&&or(o);break;case 13:or(o);break;case 19:ie(qt);break;case 10:Gs(o.type);break;case 22:case 23:or(o),gm(),s!==null&&ie(Oo);break;case 24:Gs($t)}}function wc(s,o){try{var c=o.updateQueue,u=c!==null?c.lastEffect:null;if(u!==null){var x=u.next;c=x;do{if((c.tag&s)===s){u=void 0;var _=c.create,w=c.inst;u=_(),w.destroy=u}c=c.next}while(c!==x)}}catch(C){yt(o,o.return,C)}}function Fi(s,o,c){try{var u=o.updateQueue,x=u!==null?u.lastEffect:null;if(x!==null){var _=x.next;u=_;do{if((u.tag&s)===s){var w=u.inst,C=w.destroy;if(C!==void 0){w.destroy=void 0,x=o;var q=c,Z=C;try{Z()}catch(se){yt(x,q,se)}}}u=u.next}while(u!==_)}}catch(se){yt(o,o.return,se)}}function bx(s){var o=s.updateQueue;if(o!==null){var c=s.stateNode;try{dv(o,c)}catch(u){yt(s,s.return,u)}}}function Tx(s,o,c){c.props=Ho(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(u){yt(s,o,u)}}function Sc(s,o){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var u=s.stateNode;break;case 30:u=s.stateNode;break;default:u=s.stateNode}typeof c=="function"?s.refCleanup=c(u):c.current=u}}catch(x){yt(s,o,x)}}function ps(s,o){var c=s.ref,u=s.refCleanup;if(c!==null)if(typeof u=="function")try{u()}catch(x){yt(s,o,x)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(x){yt(s,o,x)}else c.current=null}function Ex(s){var o=s.type,c=s.memoizedProps,u=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":c.autoFocus&&u.focus();break e;case"img":c.src?u.src=c.src:c.srcSet&&(u.srcset=c.srcSet)}}catch(x){yt(s,s.return,x)}}function Ym(s,o,c){try{var u=s.stateNode;_I(u,s.type,c,o),u[K]=o}catch(x){yt(s,s.return,x)}}function wx(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ji(s.type)||s.tag===4}function Km(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||wx(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ji(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Xm(s,o,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,o):(o=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,o.appendChild(s),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Vr));else if(u!==4&&(u===27&&Ji(s.type)&&(c=s.stateNode,o=null),s=s.child,s!==null))for(Xm(s,o,c),s=s.sibling;s!==null;)Xm(s,o,c),s=s.sibling}function wd(s,o,c){var u=s.tag;if(u===5||u===6)s=s.stateNode,o?c.insertBefore(s,o):c.appendChild(s);else if(u!==4&&(u===27&&Ji(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(wd(s,o,c),s=s.sibling;s!==null;)wd(s,o,c),s=s.sibling}function Sx(s){var o=s.stateNode,c=s.memoizedProps;try{for(var u=s.type,x=o.attributes;x.length;)o.removeAttributeNode(x[0]);mn(o,u,c),o[Dt]=s,o[K]=c}catch(_){yt(s,s.return,_)}}var Ks=!1,Kt=!1,Wm=!1,Ax=typeof WeakSet=="function"?WeakSet:Set,sn=null;function Z1(s,o){if(s=s.containerInfo,vp=zd,s=O0(s),Gf(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var u=c.getSelection&&c.getSelection();if(u&&u.rangeCount!==0){c=u.anchorNode;var x=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{c.nodeType,_.nodeType}catch{c=null;break e}var w=0,C=-1,q=-1,Z=0,se=0,ce=s,ee=null;t:for(;;){for(var ne;ce!==c||x!==0&&ce.nodeType!==3||(C=w+x),ce!==_||u!==0&&ce.nodeType!==3||(q=w+u),ce.nodeType===3&&(w+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)ee=ce,ce=ne;for(;;){if(ce===s)break t;if(ee===c&&++Z===x&&(C=w),ee===_&&++se===u&&(q=w),(ne=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ne}c=C===-1||q===-1?null:{start:C,end:q}}else c=null}c=c||{start:0,end:0}}else c=null;for(xp={focusedElem:s,selectionRange:c},zd=!1,sn=o;sn!==null;)if(o=sn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,sn=s;else for(;sn!==null;){switch(o=sn,_=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)x=s[c],x.ref.impl=x.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&_!==null){s=void 0,c=o,x=_.memoizedProps,_=_.memoizedState,u=c.stateNode;try{var we=Ho(c.type,x);s=u.getSnapshotBeforeUpdate(we,_),u.__reactInternalSnapshotBeforeUpdate=s}catch(Re){yt(c,c.return,Re)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,c=s.nodeType,c===9)Tp(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Tp(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=o.sibling,s!==null){s.return=o.return,sn=s;break}sn=o.return}}function Nx(s,o,c){var u=c.flags;switch(c.tag){case 0:case 11:case 15:Ws(s,c),u&4&&wc(5,c);break;case 1:if(Ws(s,c),u&4)if(s=c.stateNode,o===null)try{s.componentDidMount()}catch(w){yt(c,c.return,w)}else{var x=Ho(c.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(x,o,s.__reactInternalSnapshotBeforeUpdate)}catch(w){yt(c,c.return,w)}}u&64&&bx(c),u&512&&Sc(c,c.return);break;case 3:if(Ws(s,c),u&64&&(s=c.updateQueue,s!==null)){if(o=null,c.child!==null)switch(c.child.tag){case 27:case 5:o=c.child.stateNode;break;case 1:o=c.child.stateNode}try{dv(s,o)}catch(w){yt(c,c.return,w)}}break;case 27:o===null&&u&4&&Sx(c);case 26:case 5:Ws(s,c),o===null&&u&4&&Ex(c),u&512&&Sc(c,c.return);break;case 12:Ws(s,c);break;case 31:Ws(s,c),u&4&&Rx(s,c);break;case 13:Ws(s,c),u&4&&kx(s,c),u&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=lI.bind(null,c),CI(s,c))));break;case 22:if(u=c.memoizedState!==null||Ks,!u){o=o!==null&&o.memoizedState!==null||Kt,x=Ks;var _=Kt;Ks=u,(Kt=o)&&!_?Qs(s,c,(c.subtreeFlags&8772)!==0):Ws(s,c),Ks=x,Kt=_}break;case 30:break;default:Ws(s,c)}}function Cx(s){var o=s.alternate;o!==null&&(s.alternate=null,Cx(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Us(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var It=null,qn=!1;function Xs(s,o,c){for(c=c.child;c!==null;)Ix(s,o,c),c=c.sibling}function Ix(s,o,c){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Vn,c)}catch{}switch(c.tag){case 26:Kt||ps(c,o),Xs(s,o,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Kt||ps(c,o);var u=It,x=qn;Ji(c.type)&&(It=c.stateNode,qn=!1),Xs(s,o,c),Pc(c.stateNode),It=u,qn=x;break;case 5:Kt||ps(c,o);case 6:if(u=It,x=qn,It=null,Xs(s,o,c),It=u,qn=x,It!==null)if(qn)try{(It.nodeType===9?It.body:It.nodeName==="HTML"?It.ownerDocument.body:It).removeChild(c.stateNode)}catch(_){yt(c,o,_)}else try{It.removeChild(c.stateNode)}catch(_){yt(c,o,_)}break;case 18:It!==null&&(qn?(s=It,b_(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),tl(s)):b_(It,c.stateNode));break;case 4:u=It,x=qn,It=c.stateNode.containerInfo,qn=!0,Xs(s,o,c),It=u,qn=x;break;case 0:case 11:case 14:case 15:Fi(2,c,o),Kt||Fi(4,c,o),Xs(s,o,c);break;case 1:Kt||(ps(c,o),u=c.stateNode,typeof u.componentWillUnmount=="function"&&Tx(c,o,u)),Xs(s,o,c);break;case 21:Xs(s,o,c);break;case 22:Kt=(u=Kt)||c.memoizedState!==null,Xs(s,o,c),Kt=u;break;default:Xs(s,o,c)}}function Rx(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{tl(s)}catch(c){yt(o,o.return,c)}}}function kx(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{tl(s)}catch(c){yt(o,o.return,c)}}function eI(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Ax),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Ax),o;default:throw Error(r(435,s.tag))}}function Sd(s,o){var c=eI(s);o.forEach(function(u){if(!c.has(u)){c.add(u);var x=cI.bind(null,s,u);u.then(x,x)}})}function Bn(s,o){var c=o.deletions;if(c!==null)for(var u=0;u<c.length;u++){var x=c[u],_=s,w=o,C=w;e:for(;C!==null;){switch(C.tag){case 27:if(Ji(C.type)){It=C.stateNode,qn=!1;break e}break;case 5:It=C.stateNode,qn=!1;break e;case 3:case 4:It=C.stateNode.containerInfo,qn=!0;break e}C=C.return}if(It===null)throw Error(r(160));Ix(_,w,x),It=null,qn=!1,_=x.alternate,_!==null&&(_.return=null),x.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Dx(o,s),o=o.sibling}var Br=null;function Dx(s,o){var c=s.alternate,u=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Bn(o,s),Hn(s),u&4&&(Fi(3,s,s.return),wc(3,s),Fi(5,s,s.return));break;case 1:Bn(o,s),Hn(s),u&512&&(Kt||c===null||ps(c,c.return)),u&64&&Ks&&(s=s.updateQueue,s!==null&&(u=s.callbacks,u!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?u:c.concat(u))));break;case 26:var x=Br;if(Bn(o,s),Hn(s),u&512&&(Kt||c===null||ps(c,c.return)),u&4){var _=c!==null?c.memoizedState:null;if(u=s.memoizedState,c===null)if(u===null)if(s.stateNode===null){e:{u=s.type,c=s.memoizedProps,x=x.ownerDocument||x;t:switch(u){case"title":_=x.getElementsByTagName("title")[0],(!_||_[vt]||_[Dt]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=x.createElement(u),x.head.insertBefore(_,x.querySelector("head > title"))),mn(_,u,c),_[Dt]=s,Vt(_),u=_;break e;case"link":var w=D_("link","href",x).get(u+(c.href||""));if(w){for(var C=0;C<w.length;C++)if(_=w[C],_.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&_.getAttribute("rel")===(c.rel==null?null:c.rel)&&_.getAttribute("title")===(c.title==null?null:c.title)&&_.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){w.splice(C,1);break t}}_=x.createElement(u),mn(_,u,c),x.head.appendChild(_);break;case"meta":if(w=D_("meta","content",x).get(u+(c.content||""))){for(C=0;C<w.length;C++)if(_=w[C],_.getAttribute("content")===(c.content==null?null:""+c.content)&&_.getAttribute("name")===(c.name==null?null:c.name)&&_.getAttribute("property")===(c.property==null?null:c.property)&&_.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&_.getAttribute("charset")===(c.charSet==null?null:c.charSet)){w.splice(C,1);break t}}_=x.createElement(u),mn(_,u,c),x.head.appendChild(_);break;default:throw Error(r(468,u))}_[Dt]=s,Vt(_),u=_}s.stateNode=u}else M_(x,s.type,s.stateNode);else s.stateNode=k_(x,u,s.memoizedProps);else _!==u?(_===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):_.count--,u===null?M_(x,s.type,s.stateNode):k_(x,u,s.memoizedProps)):u===null&&s.stateNode!==null&&Ym(s,s.memoizedProps,c.memoizedProps)}break;case 27:Bn(o,s),Hn(s),u&512&&(Kt||c===null||ps(c,c.return)),c!==null&&u&4&&Ym(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Bn(o,s),Hn(s),u&512&&(Kt||c===null||ps(c,c.return)),s.flags&32){x=s.stateNode;try{Fn(x,"")}catch(we){yt(s,s.return,we)}}u&4&&s.stateNode!=null&&(x=s.memoizedProps,Ym(s,x,c!==null?c.memoizedProps:x)),u&1024&&(Wm=!0);break;case 6:if(Bn(o,s),Hn(s),u&4){if(s.stateNode===null)throw Error(r(162));u=s.memoizedProps,c=s.stateNode;try{c.nodeValue=u}catch(we){yt(s,s.return,we)}}break;case 3:if(qd=null,x=Br,Br=jd(o.containerInfo),Bn(o,s),Br=x,Hn(s),u&4&&c!==null&&c.memoizedState.isDehydrated)try{tl(o.containerInfo)}catch(we){yt(s,s.return,we)}Wm&&(Wm=!1,Mx(s));break;case 4:u=Br,Br=jd(s.stateNode.containerInfo),Bn(o,s),Hn(s),Br=u;break;case 12:Bn(o,s),Hn(s);break;case 31:Bn(o,s),Hn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sd(s,u)));break;case 13:Bn(o,s),Hn(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Nd=st()),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sd(s,u)));break;case 22:x=s.memoizedState!==null;var q=c!==null&&c.memoizedState!==null,Z=Ks,se=Kt;if(Ks=Z||x,Kt=se||q,Bn(o,s),Kt=se,Ks=Z,Hn(s),u&8192)e:for(o=s.stateNode,o._visibility=x?o._visibility&-2:o._visibility|1,x&&(c===null||q||Ks||Kt||Go(s)),c=null,o=s;;){if(o.tag===5||o.tag===26){if(c===null){q=c=o;try{if(_=q.stateNode,x)w=_.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{C=q.stateNode;var ce=q.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;C.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(we){yt(q,q.return,we)}}}else if(o.tag===6){if(c===null){q=o;try{q.stateNode.nodeValue=x?"":q.memoizedProps}catch(we){yt(q,q.return,we)}}}else if(o.tag===18){if(c===null){q=o;try{var ne=q.stateNode;x?T_(ne,!0):T_(q.stateNode,!1)}catch(we){yt(q,q.return,we)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;c===o&&(c=null),o=o.return}c===o&&(c=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=s.updateQueue,u!==null&&(c=u.retryQueue,c!==null&&(u.retryQueue=null,Sd(s,c))));break;case 19:Bn(o,s),Hn(s),u&4&&(u=s.updateQueue,u!==null&&(s.updateQueue=null,Sd(s,u)));break;case 30:break;case 21:break;default:Bn(o,s),Hn(s)}}function Hn(s){var o=s.flags;if(o&2){try{for(var c,u=s.return;u!==null;){if(wx(u)){c=u;break}u=u.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var x=c.stateNode,_=Km(s);wd(s,_,x);break;case 5:var w=c.stateNode;c.flags&32&&(Fn(w,""),c.flags&=-33);var C=Km(s);wd(s,C,w);break;case 3:case 4:var q=c.stateNode.containerInfo,Z=Km(s);Xm(s,Z,q);break;default:throw Error(r(161))}}catch(se){yt(s,s.return,se)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Mx(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Mx(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Ws(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Nx(s,o.alternate,o),o=o.sibling}function Go(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Fi(4,o,o.return),Go(o);break;case 1:ps(o,o.return);var c=o.stateNode;typeof c.componentWillUnmount=="function"&&Tx(o,o.return,c),Go(o);break;case 27:Pc(o.stateNode);case 26:case 5:ps(o,o.return),Go(o);break;case 22:o.memoizedState===null&&Go(o);break;case 30:Go(o);break;default:Go(o)}s=s.sibling}}function Qs(s,o,c){for(c=c&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,x=s,_=o,w=_.flags;switch(_.tag){case 0:case 11:case 15:Qs(x,_,c),wc(4,_);break;case 1:if(Qs(x,_,c),u=_,x=u.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Z){yt(u,u.return,Z)}if(u=_,x=u.updateQueue,x!==null){var C=u.stateNode;try{var q=x.shared.hiddenCallbacks;if(q!==null)for(x.shared.hiddenCallbacks=null,x=0;x<q.length;x++)uv(q[x],C)}catch(Z){yt(u,u.return,Z)}}c&&w&64&&bx(_),Sc(_,_.return);break;case 27:Sx(_);case 26:case 5:Qs(x,_,c),c&&u===null&&w&4&&Ex(_),Sc(_,_.return);break;case 12:Qs(x,_,c);break;case 31:Qs(x,_,c),c&&w&4&&Rx(x,_);break;case 13:Qs(x,_,c),c&&w&4&&kx(x,_);break;case 22:_.memoizedState===null&&Qs(x,_,c),Sc(_,_.return);break;case 30:break;default:Qs(x,_,c)}o=o.sibling}}function Qm(s,o){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&dc(c))}function Zm(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&dc(s))}function Hr(s,o,c,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Px(s,o,c,u),o=o.sibling}function Px(s,o,c,u){var x=o.flags;switch(o.tag){case 0:case 11:case 15:Hr(s,o,c,u),x&2048&&wc(9,o);break;case 1:Hr(s,o,c,u);break;case 3:Hr(s,o,c,u),x&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&dc(s)));break;case 12:if(x&2048){Hr(s,o,c,u),s=o.stateNode;try{var _=o.memoizedProps,w=_.id,C=_.onPostCommit;typeof C=="function"&&C(w,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(q){yt(o,o.return,q)}}else Hr(s,o,c,u);break;case 31:Hr(s,o,c,u);break;case 13:Hr(s,o,c,u);break;case 23:break;case 22:_=o.stateNode,w=o.alternate,o.memoizedState!==null?_._visibility&2?Hr(s,o,c,u):Ac(s,o):_._visibility&2?Hr(s,o,c,u):(_._visibility|=2,Ga(s,o,c,u,(o.subtreeFlags&10256)!==0||!1)),x&2048&&Qm(w,o);break;case 24:Hr(s,o,c,u),x&2048&&Zm(o.alternate,o);break;default:Hr(s,o,c,u)}}function Ga(s,o,c,u,x){for(x=x&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var _=s,w=o,C=c,q=u,Z=w.flags;switch(w.tag){case 0:case 11:case 15:Ga(_,w,C,q,x),wc(8,w);break;case 23:break;case 22:var se=w.stateNode;w.memoizedState!==null?se._visibility&2?Ga(_,w,C,q,x):Ac(_,w):(se._visibility|=2,Ga(_,w,C,q,x)),x&&Z&2048&&Qm(w.alternate,w);break;case 24:Ga(_,w,C,q,x),x&&Z&2048&&Zm(w.alternate,w);break;default:Ga(_,w,C,q,x)}o=o.sibling}}function Ac(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var c=s,u=o,x=u.flags;switch(u.tag){case 22:Ac(c,u),x&2048&&Qm(u.alternate,u);break;case 24:Ac(c,u),x&2048&&Zm(u.alternate,u);break;default:Ac(c,u)}o=o.sibling}}var Nc=8192;function za(s,o,c){if(s.subtreeFlags&Nc)for(s=s.child;s!==null;)Lx(s,o,c),s=s.sibling}function Lx(s,o,c){switch(s.tag){case 26:za(s,o,c),s.flags&Nc&&s.memoizedState!==null&&FI(c,Br,s.memoizedState,s.memoizedProps);break;case 5:za(s,o,c);break;case 3:case 4:var u=Br;Br=jd(s.stateNode.containerInfo),za(s,o,c),Br=u;break;case 22:s.memoizedState===null&&(u=s.alternate,u!==null&&u.memoizedState!==null?(u=Nc,Nc=16777216,za(s,o,c),Nc=u):za(s,o,c));break;default:za(s,o,c)}}function Vx(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Cc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var u=o[c];sn=u,Ox(u,s)}Vx(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ux(s),s=s.sibling}function Ux(s){switch(s.tag){case 0:case 11:case 15:Cc(s),s.flags&2048&&Fi(9,s,s.return);break;case 3:Cc(s);break;case 12:Cc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Ad(s)):Cc(s);break;default:Cc(s)}}function Ad(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var c=0;c<o.length;c++){var u=o[c];sn=u,Ox(u,s)}Vx(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Fi(8,o,o.return),Ad(o);break;case 22:c=o.stateNode,c._visibility&2&&(c._visibility&=-3,Ad(o));break;default:Ad(o)}s=s.sibling}}function Ox(s,o){for(;sn!==null;){var c=sn;switch(c.tag){case 0:case 11:case 15:Fi(8,c,o);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var u=c.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:dc(c.memoizedState.cache)}if(u=c.child,u!==null)u.return=c,sn=u;else e:for(c=s;sn!==null;){u=sn;var x=u.sibling,_=u.return;if(Cx(u),u===c){sn=null;break e}if(x!==null){x.return=_,sn=x;break e}sn=_}}}var tI={getCacheForType:function(s){var o=hn($t),c=o.data.get(s);return c===void 0&&(c=s(),o.data.set(s,c)),c},cacheSignal:function(){return hn($t).controller.signal}},nI=typeof WeakMap=="function"?WeakMap:Map,ft=0,Et=null,Je=null,Ke=0,gt=0,ar=null,qi=!1,$a=!1,ep=!1,Zs=0,Ot=0,Bi=0,zo=0,tp=0,lr=0,Ja=0,Ic=null,Gn=null,np=!1,Nd=0,jx=0,Cd=1/0,Id=null,Hi=null,en=0,Gi=null,Ya=null,ei=0,rp=0,sp=null,Fx=null,Rc=0,ip=null;function cr(){return(ft&2)!==0&&Ke!==0?Ke&-Ke:G.T!==null?dp():ya()}function qx(){if(lr===0)if((Ke&536870912)===0||tt){var s=Ms;Ms<<=1,(Ms&3932160)===0&&(Ms=262144),lr=s}else lr=536870912;return s=ir.current,s!==null&&(s.flags|=32),lr}function zn(s,o,c){(s===Et&&(gt===2||gt===9)||s.cancelPendingCommit!==null)&&(Ka(s,0),zi(s,Ke,lr,!1)),ns(s,c),((ft&2)===0||s!==Et)&&(s===Et&&((ft&2)===0&&(zo|=c),Ot===4&&zi(s,Ke,lr,!1)),gs(s))}function Bx(s,o,c){if((ft&6)!==0)throw Error(r(327));var u=!c&&(o&127)===0&&(o&s.expiredLanes)===0||_n(s,o),x=u?iI(s,o):ap(s,o,!0),_=u;do{if(x===0){$a&&!u&&zi(s,o,0,!1);break}else{if(c=s.current.alternate,_&&!rI(c)){x=ap(s,o,!1),_=!1;continue}if(x===2){if(_=o,s.errorRecoveryDisabledLanes&_)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var C=s;x=Ic;var q=C.current.memoizedState.isDehydrated;if(q&&(Ka(C,w).flags|=256),w=ap(C,w,!1),w!==2){if(ep&&!q){C.errorRecoveryDisabledLanes|=_,zo|=_,x=4;break e}_=Gn,Gn=x,_!==null&&(Gn===null?Gn=_:Gn.push.apply(Gn,_))}x=w}if(_=!1,x!==2)continue}}if(x===1){Ka(s,0),zi(s,o,0,!0);break}e:{switch(u=s,_=x,_){case 0:case 1:throw Error(r(345));case 4:if((o&4194048)!==o)break;case 6:zi(u,o,lr,!qi);break e;case 2:Gn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((o&62914560)===o&&(x=Nd+300-st(),10<x)){if(zi(u,o,lr,!qi),Wn(u,0,!0)!==0)break e;ei=o,u.timeoutHandle=x_(Hx.bind(null,u,c,Gn,Id,np,o,lr,zo,Ja,qi,_,"Throttled",-0,0),x);break e}Hx(u,c,Gn,Id,np,o,lr,zo,Ja,qi,_,null,-0,0)}}break}while(!0);gs(s)}function Hx(s,o,c,u,x,_,w,C,q,Z,se,ce,ee,ne){if(s.timeoutHandle=-1,ce=o.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vr},Lx(o,_,ce);var we=(_&62914560)===_?Nd-st():(_&4194048)===_?jx-st():0;if(we=qI(ce,we),we!==null){ei=_,s.cancelPendingCommit=we(Wx.bind(null,s,o,_,c,u,x,w,C,q,se,ce,null,ee,ne)),zi(s,_,w,!Z);return}}Wx(s,o,_,c,u,x,w,C,q)}function rI(s){for(var o=s;;){var c=o.tag;if((c===0||c===11||c===15)&&o.flags&16384&&(c=o.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var u=0;u<c.length;u++){var x=c[u],_=x.getSnapshot;x=x.value;try{if(!rr(_(),x))return!1}catch{return!1}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function zi(s,o,c,u){o&=~tp,o&=~zo,s.suspendedLanes|=o,s.pingedLanes&=~o,u&&(s.warmLanes|=o),u=s.expirationTimes;for(var x=o;0<x;){var _=31-dt(x),w=1<<_;u[_]=-1,x&=~w}c!==0&&Ls(s,c,o)}function Rd(){return(ft&6)===0?(kc(0),!1):!0}function op(){if(Je!==null){if(gt===0)var s=Je.return;else s=Je,Hs=Vo=null,Tm(s),ja=null,fc=0,s=Je;for(;s!==null;)_x(s.alternate,s),s=s.return;Je=null}}function Ka(s,o){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,EI(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),ei=0,op(),Et=s,Je=c=qs(s.current,null),Ke=o,gt=0,ar=null,qi=!1,$a=_n(s,o),ep=!1,Ja=lr=tp=zo=Bi=Ot=0,Gn=Ic=null,np=!1,(o&8)!==0&&(o|=o&32);var u=s.entangledLanes;if(u!==0)for(s=s.entanglements,u&=o;0<u;){var x=31-dt(u),_=1<<x;o|=s[x],u&=~_}return Zs=o,Wu(),c}function Gx(s,o){He=null,G.H=bc,o===Oa||o===id?(o=ov(),gt=3):o===um?(o=ov(),gt=4):gt=o===Om?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ar=o,Je===null&&(Ot=1,xd(s,_r(o,s.current)))}function zx(){var s=ir.current;return s===null?!0:(Ke&4194048)===Ke?wr===null:(Ke&62914560)===Ke||(Ke&536870912)!==0?s===wr:!1}function $x(){var s=G.H;return G.H=bc,s===null?bc:s}function Jx(){var s=G.A;return G.A=tI,s}function kd(){Ot=4,qi||(Ke&4194048)!==Ke&&ir.current!==null||($a=!0),(Bi&134217727)===0&&(zo&134217727)===0||Et===null||zi(Et,Ke,lr,!1)}function ap(s,o,c){var u=ft;ft|=2;var x=$x(),_=Jx();(Et!==s||Ke!==o)&&(Id=null,Ka(s,o)),o=!1;var w=Ot;e:do try{if(gt!==0&&Je!==null){var C=Je,q=ar;switch(gt){case 8:op(),w=6;break e;case 3:case 2:case 9:case 6:ir.current===null&&(o=!0);var Z=gt;if(gt=0,ar=null,Xa(s,C,q,Z),c&&$a){w=0;break e}break;default:Z=gt,gt=0,ar=null,Xa(s,C,q,Z)}}sI(),w=Ot;break}catch(se){Gx(s,se)}while(!0);return o&&s.shellSuspendCounter++,Hs=Vo=null,ft=u,G.H=x,G.A=_,Je===null&&(Et=null,Ke=0,Wu()),w}function sI(){for(;Je!==null;)Yx(Je)}function iI(s,o){var c=ft;ft|=2;var u=$x(),x=Jx();Et!==s||Ke!==o?(Id=null,Cd=st()+500,Ka(s,o)):$a=_n(s,o);e:do try{if(gt!==0&&Je!==null){o=Je;var _=ar;t:switch(gt){case 1:gt=0,ar=null,Xa(s,o,_,1);break;case 2:case 9:if(sv(_)){gt=0,ar=null,Kx(o);break}o=function(){gt!==2&&gt!==9||Et!==s||(gt=7),gs(s)},_.then(o,o);break e;case 3:gt=7;break e;case 4:gt=5;break e;case 7:sv(_)?(gt=0,ar=null,Kx(o)):(gt=0,ar=null,Xa(s,o,_,7));break;case 5:var w=null;switch(Je.tag){case 26:w=Je.memoizedState;case 5:case 27:var C=Je;if(w?P_(w):C.stateNode.complete){gt=0,ar=null;var q=C.sibling;if(q!==null)Je=q;else{var Z=C.return;Z!==null?(Je=Z,Dd(Z)):Je=null}break t}}gt=0,ar=null,Xa(s,o,_,5);break;case 6:gt=0,ar=null,Xa(s,o,_,6);break;case 8:op(),Ot=6;break e;default:throw Error(r(462))}}oI();break}catch(se){Gx(s,se)}while(!0);return Hs=Vo=null,G.H=u,G.A=x,ft=c,Je!==null?0:(Et=null,Ke=0,Wu(),Ot)}function oI(){for(;Je!==null&&!Bl();)Yx(Je)}function Yx(s){var o=vx(s.alternate,s,Zs);s.memoizedProps=s.pendingProps,o===null?Dd(s):Je=o}function Kx(s){var o=s,c=o.alternate;switch(o.tag){case 15:case 0:o=hx(c,o,o.pendingProps,o.type,void 0,Ke);break;case 11:o=hx(c,o,o.pendingProps,o.type.render,o.ref,Ke);break;case 5:Tm(o);default:_x(c,o),o=Je=J0(o,Zs),o=vx(c,o,Zs)}s.memoizedProps=s.pendingProps,o===null?Dd(s):Je=o}function Xa(s,o,c,u){Hs=Vo=null,Tm(o),ja=null,fc=0;var x=o.return;try{if(Y1(s,x,o,c,Ke)){Ot=1,xd(s,_r(c,s.current)),Je=null;return}}catch(_){if(x!==null)throw Je=x,_;Ot=1,xd(s,_r(c,s.current)),Je=null;return}o.flags&32768?(tt||u===1?s=!0:$a||(Ke&536870912)!==0?s=!1:(qi=s=!0,(u===2||u===9||u===3||u===6)&&(u=ir.current,u!==null&&u.tag===13&&(u.flags|=16384))),Xx(o,s)):Dd(o)}function Dd(s){var o=s;do{if((o.flags&32768)!==0){Xx(o,qi);return}s=o.return;var c=W1(o.alternate,o,Zs);if(c!==null){Je=c;return}if(o=o.sibling,o!==null){Je=o;return}Je=o=s}while(o!==null);Ot===0&&(Ot=5)}function Xx(s,o){do{var c=Q1(s.alternate,s);if(c!==null){c.flags&=32767,Je=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!o&&(s=s.sibling,s!==null)){Je=s;return}Je=s=c}while(s!==null);Ot=6,Je=null}function Wx(s,o,c,u,x,_,w,C,q){s.cancelPendingCommit=null;do Md();while(en!==0);if((ft&6)!==0)throw Error(r(327));if(o!==null){if(o===s.current)throw Error(r(177));if(_=o.lanes|o.childLanes,_|=Kf,Hl(s,c,_,w,C,q),s===Et&&(Je=Et=null,Ke=0),Ya=o,Gi=s,ei=c,rp=_,sp=x,Fx=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,uI(ts,function(){return n_(),null})):(s.callbackNode=null,s.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null,x=ae.p,ae.p=2,w=ft,ft|=4;try{Z1(s,o,c)}finally{ft=w,ae.p=x,G.T=u}}en=1,Qx(),Zx(),e_()}}function Qx(){if(en===1){en=0;var s=Gi,o=Ya,c=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var u=ae.p;ae.p=2;var x=ft;ft|=4;try{Dx(o,s);var _=xp,w=O0(s.containerInfo),C=_.focusedElem,q=_.selectionRange;if(w!==C&&C&&C.ownerDocument&&U0(C.ownerDocument.documentElement,C)){if(q!==null&&Gf(C)){var Z=q.start,se=q.end;if(se===void 0&&(se=Z),"selectionStart"in C)C.selectionStart=Z,C.selectionEnd=Math.min(se,C.value.length);else{var ce=C.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),we=C.textContent.length,Re=Math.min(q.start,we),Tt=q.end===void 0?Re:Math.min(q.end,we);!ne.extend&&Re>Tt&&(w=Tt,Tt=Re,Re=w);var Y=V0(C,Re),$=V0(C,Tt);if(Y&&$&&(ne.rangeCount!==1||ne.anchorNode!==Y.node||ne.anchorOffset!==Y.offset||ne.focusNode!==$.node||ne.focusOffset!==$.offset)){var W=ce.createRange();W.setStart(Y.node,Y.offset),ne.removeAllRanges(),Re>Tt?(ne.addRange(W),ne.extend($.node,$.offset)):(W.setEnd($.node,$.offset),ne.addRange(W))}}}}for(ce=[],ne=C;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof C.focus=="function"&&C.focus(),C=0;C<ce.length;C++){var oe=ce[C];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}zd=!!vp,xp=vp=null}finally{ft=x,ae.p=u,G.T=c}}s.current=o,en=2}}function Zx(){if(en===2){en=0;var s=Gi,o=Ya,c=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var u=ae.p;ae.p=2;var x=ft;ft|=4;try{Nx(s,o.alternate,o)}finally{ft=x,ae.p=u,G.T=c}}en=3}}function e_(){if(en===4||en===3){en=0,yi();var s=Gi,o=Ya,c=ei,u=Fx;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?en=5:(en=0,Ya=Gi=null,t_(s,s.pendingLanes));var x=s.pendingLanes;if(x===0&&(Hi=null),Zn(c),o=o.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Vn,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=G.T,x=ae.p,ae.p=2,G.T=null;try{for(var _=s.onRecoverableError,w=0;w<u.length;w++){var C=u[w];_(C.value,{componentStack:C.stack})}}finally{G.T=o,ae.p=x}}(ei&3)!==0&&Md(),gs(s),x=s.pendingLanes,(c&261930)!==0&&(x&42)!==0?s===ip?Rc++:(Rc=0,ip=s):Rc=0,kc(0)}}function t_(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,dc(o)))}function Md(){return Qx(),Zx(),e_(),n_()}function n_(){if(en!==5)return!1;var s=Gi,o=rp;rp=0;var c=Zn(ei),u=G.T,x=ae.p;try{ae.p=32>c?32:c,G.T=null,c=sp,sp=null;var _=Gi,w=ei;if(en=0,Ya=Gi=null,ei=0,(ft&6)!==0)throw Error(r(331));var C=ft;if(ft|=4,Ux(_.current),Px(_,_.current,w,c),ft=C,kc(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Vn,_)}catch{}return!0}finally{ae.p=x,G.T=u,t_(s,o)}}function r_(s,o,c){o=_r(c,o),o=Um(s.stateNode,o,2),s=Ui(s,o,2),s!==null&&(ns(s,2),gs(s))}function yt(s,o,c){if(s.tag===3)r_(s,s,c);else for(;o!==null;){if(o.tag===3){r_(o,s,c);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Hi===null||!Hi.has(u))){s=_r(c,s),c=sx(2),u=Ui(o,c,2),u!==null&&(ix(c,u,o,s),ns(u,2),gs(u));break}}o=o.return}}function lp(s,o,c){var u=s.pingCache;if(u===null){u=s.pingCache=new nI;var x=new Set;u.set(o,x)}else x=u.get(o),x===void 0&&(x=new Set,u.set(o,x));x.has(c)||(ep=!0,x.add(c),s=aI.bind(null,s,o,c),o.then(s,s))}function aI(s,o,c){var u=s.pingCache;u!==null&&u.delete(o),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,Et===s&&(Ke&c)===c&&(Ot===4||Ot===3&&(Ke&62914560)===Ke&&300>st()-Nd?(ft&2)===0&&Ka(s,0):tp|=c,Ja===Ke&&(Ja=0)),gs(s)}function s_(s,o){o===0&&(o=Ps()),s=Mo(s,o),s!==null&&(ns(s,o),gs(s))}function lI(s){var o=s.memoizedState,c=0;o!==null&&(c=o.retryLane),s_(s,c)}function cI(s,o){var c=0;switch(s.tag){case 31:case 13:var u=s.stateNode,x=s.memoizedState;x!==null&&(c=x.retryLane);break;case 19:u=s.stateNode;break;case 22:u=s.stateNode._retryCache;break;default:throw Error(r(314))}u!==null&&u.delete(o),s_(s,c)}function uI(s,o){return kt(s,o)}var Pd=null,Wa=null,cp=!1,Ld=!1,up=!1,$i=0;function gs(s){s!==Wa&&s.next===null&&(Wa===null?Pd=Wa=s:Wa=Wa.next=s),Ld=!0,cp||(cp=!0,hI())}function kc(s,o){if(!up&&Ld){up=!0;do for(var c=!1,u=Pd;u!==null;){if(s!==0){var x=u.pendingLanes;if(x===0)var _=0;else{var w=u.suspendedLanes,C=u.pingedLanes;_=(1<<31-dt(42|s)+1)-1,_&=x&~(w&~C),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(c=!0,l_(u,_))}else _=Ke,_=Wn(u,u===Et?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||_n(u,_)||(c=!0,l_(u,_));u=u.next}while(c);up=!1}}function dI(){i_()}function i_(){Ld=cp=!1;var s=0;$i!==0&&TI()&&(s=$i);for(var o=st(),c=null,u=Pd;u!==null;){var x=u.next,_=o_(u,o);_===0?(u.next=null,c===null?Pd=x:c.next=x,x===null&&(Wa=c)):(c=u,(s!==0||(_&3)!==0)&&(Ld=!0)),u=x}en!==0&&en!==5||kc(s),$i!==0&&($i=0)}function o_(s,o){for(var c=s.suspendedLanes,u=s.pingedLanes,x=s.expirationTimes,_=s.pendingLanes&-62914561;0<_;){var w=31-dt(_),C=1<<w,q=x[w];q===-1?((C&c)===0||(C&u)!==0)&&(x[w]=ga(C,o)):q<=o&&(s.expiredLanes|=C),_&=~C}if(o=Et,c=Ke,c=Wn(s,s===o?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u=s.callbackNode,c===0||s===o&&(gt===2||gt===9)||s.cancelPendingCommit!==null)return u!==null&&u!==null&&es(u),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||_n(s,c)){if(o=c&-c,o===s.callbackPriority)return o;switch(u!==null&&es(u),Zn(c)){case 2:case 8:c=Lr;break;case 32:c=ts;break;case 268435456:c=Ds;break;default:c=ts}return u=a_.bind(null,s),c=kt(c,u),s.callbackPriority=o,s.callbackNode=c,o}return u!==null&&u!==null&&es(u),s.callbackPriority=2,s.callbackNode=null,2}function a_(s,o){if(en!==0&&en!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Md()&&s.callbackNode!==c)return null;var u=Ke;return u=Wn(s,s===Et?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),u===0?null:(Bx(s,u,o),o_(s,st()),s.callbackNode!=null&&s.callbackNode===c?a_.bind(null,s):null)}function l_(s,o){if(Md())return null;Bx(s,o,!0)}function hI(){wI(function(){(ft&6)!==0?kt(Xn,dI):i_()})}function dp(){if($i===0){var s=Va;s===0&&(s=mr,mr<<=1,(mr&261888)===0&&(mr=256)),$i=s}return $i}function c_(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:ba(""+s)}function u_(s,o){var c=o.ownerDocument.createElement("input");return c.name=o.name,c.value=o.value,s.id&&c.setAttribute("form",s.id),o.parentNode.insertBefore(c,o),s=new FormData(s),c.parentNode.removeChild(c),s}function fI(s,o,c,u,x){if(o==="submit"&&c&&c.stateNode===x){var _=c_((x[K]||null).action),w=u.submitter;w&&(o=(o=w[K]||null)?c_(o.formAction):w.getAttribute("formAction"),o!==null&&(_=o,w=null));var C=new cs("action","action",null,u,x);s.push({event:C,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if($i!==0){var q=w?u_(x,w):new FormData(x);km(c,{pending:!0,data:q,method:x.method,action:_},null,q)}}else typeof _=="function"&&(C.preventDefault(),q=w?u_(x,w):new FormData(x),km(c,{pending:!0,data:q,method:x.method,action:_},_,q))},currentTarget:x}]})}}for(var hp=0;hp<Yf.length;hp++){var fp=Yf[hp],mI=fp.toLowerCase(),pI=fp[0].toUpperCase()+fp.slice(1);qr(mI,"on"+pI)}qr(q0,"onAnimationEnd"),qr(B0,"onAnimationIteration"),qr(H0,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(k1,"onTransitionRun"),qr(D1,"onTransitionStart"),qr(M1,"onTransitionCancel"),qr(G0,"onTransitionEnd"),is("onMouseEnter",["mouseout","mouseover"]),is("onMouseLeave",["mouseout","mouseover"]),is("onPointerEnter",["pointerout","pointerover"]),is("onPointerLeave",["pointerout","pointerover"]),ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ss("onBeforeInput",["compositionend","keypress","textInput","paste"]),ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gI=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Dc));function d_(s,o){o=(o&4)!==0;for(var c=0;c<s.length;c++){var u=s[c],x=u.event;u=u.listeners;e:{var _=void 0;if(o)for(var w=u.length-1;0<=w;w--){var C=u[w],q=C.instance,Z=C.currentTarget;if(C=C.listener,q!==_&&x.isPropagationStopped())break e;_=C,x.currentTarget=Z;try{_(x)}catch(se){Xu(se)}x.currentTarget=null,_=q}else for(w=0;w<u.length;w++){if(C=u[w],q=C.instance,Z=C.currentTarget,C=C.listener,q!==_&&x.isPropagationStopped())break e;_=C,x.currentTarget=Z;try{_(x)}catch(se){Xu(se)}x.currentTarget=null,_=q}}}}function Ye(s,o){var c=o[ye];c===void 0&&(c=o[ye]=new Set);var u=s+"__bubble";c.has(u)||(h_(o,s,2,!1),c.add(u))}function mp(s,o,c){var u=0;o&&(u|=4),h_(c,s,u,o)}var Vd="_reactListening"+Math.random().toString(36).slice(2);function pp(s){if(!s[Vd]){s[Vd]=!0,Gl.forEach(function(c){c!=="selectionchange"&&(gI.has(c)||mp(c,!1,s),mp(c,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Vd]||(o[Vd]=!0,mp("selectionchange",!1,o))}}function h_(s,o,c,u){switch(q_(o)){case 2:var x=GI;break;case 8:x=zI;break;default:x=Rp}c=x.bind(null,o,c,s),x=void 0,!So||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(x=!0),u?x!==void 0?s.addEventListener(o,c,{capture:!0,passive:x}):s.addEventListener(o,c,!0):x!==void 0?s.addEventListener(o,c,{passive:x}):s.addEventListener(o,c,!1)}function gp(s,o,c,u,x){var _=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var w=u.tag;if(w===3||w===4){var C=u.stateNode.containerInfo;if(C===x)break;if(w===4)for(w=u.return;w!==null;){var q=w.tag;if((q===3||q===4)&&w.stateNode.containerInfo===x)return;w=w.return}for(;C!==null;){if(w=bn(C),w===null)return;if(q=w.tag,q===5||q===6||q===26||q===27){u=_=w;continue e}C=C.parentNode}}u=u.return}Ni(function(){var Z=_,se=gr(c),ce=[];e:{var ee=z0.get(s);if(ee!==void 0){var ne=cs,we=s;switch(s){case"keypress":if(No(c)===0)break e;case"keydown":case"keyup":ne=Ju;break;case"focusin":we="focus",ne=Io;break;case"focusout":we="blur",ne=Io;break;case"beforeblur":case"afterblur":ne=Io;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=rc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=Ou;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=E;break;case q0:case B0:case H0:ne=Fu;break;case G0:ne=P;break;case"scroll":case"scrollend":ne=nc;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=qu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Fs;break;case"toggle":case"beforetoggle":ne=Be}var Re=(o&4)!==0,Tt=!Re&&(s==="scroll"||s==="scrollend"),Y=Re?ee!==null?ee+"Capture":null:ee;Re=[];for(var $=Z,W;$!==null;){var oe=$;if(W=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||W===null||Y===null||(oe=Ur($,Y),oe!=null&&Re.push(Mc($,oe,W))),Tt)break;$=$.return}0<Re.length&&(ee=new ne(ee,we,null,c,se),ce.push({event:ee,listeners:Re}))}}if((o&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",ee&&c!==Zl&&(we=c.relatedTarget||c.fromElement)&&(bn(we)||we[fe]))break e;if((ne||ee)&&(ee=se.window===se?se:(ee=se.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(we=c.relatedTarget||c.toElement,ne=Z,we=we?bn(we):null,we!==null&&(Tt=a(we),Re=we.tag,we!==Tt||Re!==5&&Re!==27&&Re!==6)&&(we=null)):(ne=null,we=Z),ne!==we)){if(Re=rc,oe="onMouseLeave",Y="onMouseEnter",$="mouse",(s==="pointerout"||s==="pointerover")&&(Re=Fs,oe="onPointerLeave",Y="onPointerEnter",$="pointer"),Tt=ne==null?ee:cn(ne),W=we==null?ee:cn(we),ee=new Re(oe,$+"leave",ne,c,se),ee.target=Tt,ee.relatedTarget=W,oe=null,bn(se)===Z&&(Re=new Re(Y,$+"enter",we,c,se),Re.target=W,Re.relatedTarget=Tt,oe=Re),Tt=oe,ne&&we)t:{for(Re=yI,Y=ne,$=we,W=0,oe=Y;oe;oe=Re(oe))W++;oe=0;for(var Ne=$;Ne;Ne=Re(Ne))oe++;for(;0<W-oe;)Y=Re(Y),W--;for(;0<oe-W;)$=Re($),oe--;for(;W--;){if(Y===$||$!==null&&Y===$.alternate){Re=Y;break t}Y=Re(Y),$=Re($)}Re=null}else Re=null;ne!==null&&f_(ce,ee,ne,Re,!1),we!==null&&Tt!==null&&f_(ce,Tt,we,Re,!0)}}e:{if(ee=Z?cn(Z):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var at=R0;else if(C0(ee))if(k0)at=C1;else{at=A1;var Se=S1}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?Z&&_a(Z.elementType)&&(at=R0):at=N1;if(at&&(at=at(s,Z))){I0(ce,at,c,se);break e}Se&&Se(s,ee,Z),s==="focusout"&&Z&&ee.type==="number"&&Z.memoizedProps.value!=null&&Xl(ee,"number",ee.value)}switch(Se=Z?cn(Z):window,s){case"focusin":(C0(Se)||Se.contentEditable==="true")&&(Ca=Se,zf=Z,lc=null);break;case"focusout":lc=zf=Ca=null;break;case"mousedown":$f=!0;break;case"contextmenu":case"mouseup":case"dragend":$f=!1,j0(ce,c,se);break;case"selectionchange":if(R1)break;case"keydown":case"keyup":j0(ce,c,se)}var Ge;if(ht)e:{switch(s){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else Na?Ro(s,c)&&(Xe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Xe="onCompositionStart");Xe&&(hs&&c.locale!=="ko"&&(Na||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&Na&&(Ge=tc()):(ls=se,ec="value"in ls?ls.value:ls.textContent,Na=!0)),Se=Ud(Z,Xe),0<Se.length&&(Xe=new ds(Xe,s,null,c,se),ce.push({event:Xe,listeners:Se}),Ge?Xe.data=Ge:(Ge=Aa(c),Ge!==null&&(Xe.data=Ge)))),(Ge=vr?b1(s,c):T1(s,c))&&(Xe=Ud(Z,"onBeforeInput"),0<Xe.length&&(Se=new ds("onBeforeInput","beforeinput",null,c,se),ce.push({event:Se,listeners:Xe}),Se.data=Ge)),fI(ce,s,Z,c,se)}d_(ce,o)})}function Mc(s,o,c){return{instance:s,listener:o,currentTarget:c}}function Ud(s,o){for(var c=o+"Capture",u=[];s!==null;){var x=s,_=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||_===null||(x=Ur(s,c),x!=null&&u.unshift(Mc(s,x,_)),x=Ur(s,o),x!=null&&u.push(Mc(s,x,_))),s.tag===3)return u;s=s.return}return[]}function yI(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function f_(s,o,c,u,x){for(var _=o._reactName,w=[];c!==null&&c!==u;){var C=c,q=C.alternate,Z=C.stateNode;if(C=C.tag,q!==null&&q===u)break;C!==5&&C!==26&&C!==27||Z===null||(q=Z,x?(Z=Ur(c,_),Z!=null&&w.unshift(Mc(c,Z,q))):x||(Z=Ur(c,_),Z!=null&&w.push(Mc(c,Z,q)))),c=c.return}w.length!==0&&s.push({event:o,listeners:w})}var vI=/\r\n?/g,xI=/\u0000|\uFFFD/g;function m_(s){return(typeof s=="string"?s:""+s).replace(vI,`
`).replace(xI,"")}function p_(s,o){return o=m_(o),m_(s)===o}function bt(s,o,c,u,x,_){switch(c){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Fn(s,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Fn(s,""+u);break;case"className":nr(s,"class",u);break;case"tabIndex":nr(s,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":nr(s,c,u);break;case"style":Ql(s,u,_);break;case"data":if(o!=="object"){nr(s,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||c!=="href")){s.removeAttribute(c);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=ba(""+u),s.setAttribute(c,u);break;case"action":case"formAction":if(typeof u=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(c==="formAction"?(o!=="input"&&bt(s,o,"name",x.name,x,null),bt(s,o,"formEncType",x.formEncType,x,null),bt(s,o,"formMethod",x.formMethod,x,null),bt(s,o,"formTarget",x.formTarget,x,null)):(bt(s,o,"encType",x.encType,x,null),bt(s,o,"method",x.method,x,null),bt(s,o,"target",x.target,x,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){s.removeAttribute(c);break}u=ba(""+u),s.setAttribute(c,u);break;case"onClick":u!=null&&(s.onclick=Vr);break;case"onScroll":u!=null&&Ye("scroll",s);break;case"onScrollEnd":u!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(c=u.__html,c!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":s.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){s.removeAttribute("xlink:href");break}c=ba(""+u),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""+u):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":u===!0?s.setAttribute(c,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?s.setAttribute(c,u):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?s.setAttribute(c,u):s.removeAttribute(c);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?s.removeAttribute(c):s.setAttribute(c,u);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),va(s,"popover",u);break;case"xlinkActuate":zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":zt(s,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":zt(s,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":zt(s,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":zt(s,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":va(s,"is",u);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Uu.get(c)||c,va(s,c,u))}}function yp(s,o,c,u,x,_){switch(c){case"style":Ql(s,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(r(61));if(c=u.__html,c!=null){if(x.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof u=="string"?Fn(s,u):(typeof u=="number"||typeof u=="bigint")&&Fn(s,""+u);break;case"onScroll":u!=null&&Ye("scroll",s);break;case"onScrollEnd":u!=null&&Ye("scrollend",s);break;case"onClick":u!=null&&(s.onclick=Vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zl.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(x=c.endsWith("Capture"),o=c.slice(2,x?c.length-7:void 0),_=s[K]||null,_=_!=null?_[c]:null,typeof _=="function"&&s.removeEventListener(o,_,x),typeof u=="function")){typeof _!="function"&&_!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(o,u,x);break e}c in s?s[c]=u:u===!0?s.setAttribute(c,""):va(s,c,u)}}}function mn(s,o,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var u=!1,x=!1,_;for(_ in c)if(c.hasOwnProperty(_)){var w=c[_];if(w!=null)switch(_){case"src":u=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:bt(s,o,_,w,c,null)}}x&&bt(s,o,"srcSet",c.srcSet,c,null),u&&bt(s,o,"src",c.src,c,null);return;case"input":Ye("invalid",s);var C=_=w=x=null,q=null,Z=null;for(u in c)if(c.hasOwnProperty(u)){var se=c[u];if(se!=null)switch(u){case"name":x=se;break;case"type":w=se;break;case"checked":q=se;break;case"defaultChecked":Z=se;break;case"value":_=se;break;case"defaultValue":C=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,o));break;default:bt(s,o,u,se,c,null)}}Pu(s,_,C,q,Z,w,x,!1);return;case"select":Ye("invalid",s),u=w=_=null;for(x in c)if(c.hasOwnProperty(x)&&(C=c[x],C!=null))switch(x){case"value":_=C;break;case"defaultValue":w=C;break;case"multiple":u=C;default:bt(s,o,x,C,c,null)}o=_,c=w,s.multiple=!!u,o!=null?Ei(s,!!u,o,!1):c!=null&&Ei(s,!!u,c,!0);return;case"textarea":Ye("invalid",s),_=x=u=null;for(w in c)if(c.hasOwnProperty(w)&&(C=c[w],C!=null))switch(w){case"value":u=C;break;case"defaultValue":x=C;break;case"children":_=C;break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(r(91));break;default:bt(s,o,w,C,c,null)}wi(s,u,x,_);return;case"option":for(q in c)if(c.hasOwnProperty(q)&&(u=c[q],u!=null))switch(q){case"selected":s.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:bt(s,o,q,u,c,null)}return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(u=0;u<Dc.length;u++)Ye(Dc[u],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in c)if(c.hasOwnProperty(Z)&&(u=c[Z],u!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,o));default:bt(s,o,Z,u,c,null)}return;default:if(_a(o)){for(se in c)c.hasOwnProperty(se)&&(u=c[se],u!==void 0&&yp(s,o,se,u,c,void 0));return}}for(C in c)c.hasOwnProperty(C)&&(u=c[C],u!=null&&bt(s,o,C,u,c,null))}function _I(s,o,c,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,_=null,w=null,C=null,q=null,Z=null,se=null;for(ne in c){var ce=c[ne];if(c.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":q=ce;default:u.hasOwnProperty(ne)||bt(s,o,ne,null,u,ce)}}for(var ee in u){var ne=u[ee];if(ce=c[ee],u.hasOwnProperty(ee)&&(ne!=null||ce!=null))switch(ee){case"type":_=ne;break;case"name":x=ne;break;case"checked":Z=ne;break;case"defaultChecked":se=ne;break;case"value":w=ne;break;case"defaultValue":C=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,o));break;default:ne!==ce&&bt(s,o,ee,ne,u,ce)}}xa(s,w,C,q,Z,se,_,x);return;case"select":ne=w=C=ee=null;for(_ in c)if(q=c[_],c.hasOwnProperty(_)&&q!=null)switch(_){case"value":break;case"multiple":ne=q;default:u.hasOwnProperty(_)||bt(s,o,_,null,u,q)}for(x in u)if(_=u[x],q=c[x],u.hasOwnProperty(x)&&(_!=null||q!=null))switch(x){case"value":ee=_;break;case"defaultValue":C=_;break;case"multiple":w=_;default:_!==q&&bt(s,o,x,_,u,q)}o=C,c=w,u=ne,ee!=null?Ei(s,!!c,ee,!1):!!u!=!!c&&(o!=null?Ei(s,!!c,o,!0):Ei(s,!!c,c?[]:"",!1));return;case"textarea":ne=ee=null;for(C in c)if(x=c[C],c.hasOwnProperty(C)&&x!=null&&!u.hasOwnProperty(C))switch(C){case"value":break;case"children":break;default:bt(s,o,C,null,u,x)}for(w in u)if(x=u[w],_=c[w],u.hasOwnProperty(w)&&(x!=null||_!=null))switch(w){case"value":ee=x;break;case"defaultValue":ne=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==_&&bt(s,o,w,x,u,_)}Lu(s,ee,ne);return;case"option":for(var we in c)if(ee=c[we],c.hasOwnProperty(we)&&ee!=null&&!u.hasOwnProperty(we))switch(we){case"selected":s.selected=!1;break;default:bt(s,o,we,null,u,ee)}for(q in u)if(ee=u[q],ne=c[q],u.hasOwnProperty(q)&&ee!==ne&&(ee!=null||ne!=null))switch(q){case"selected":s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:bt(s,o,q,ee,u,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Re in c)ee=c[Re],c.hasOwnProperty(Re)&&ee!=null&&!u.hasOwnProperty(Re)&&bt(s,o,Re,null,u,ee);for(Z in u)if(ee=u[Z],ne=c[Z],u.hasOwnProperty(Z)&&ee!==ne&&(ee!=null||ne!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,o));break;default:bt(s,o,Z,ee,u,ne)}return;default:if(_a(o)){for(var Tt in c)ee=c[Tt],c.hasOwnProperty(Tt)&&ee!==void 0&&!u.hasOwnProperty(Tt)&&yp(s,o,Tt,void 0,u,ee);for(se in u)ee=u[se],ne=c[se],!u.hasOwnProperty(se)||ee===ne||ee===void 0&&ne===void 0||yp(s,o,se,ee,u,ne);return}}for(var Y in c)ee=c[Y],c.hasOwnProperty(Y)&&ee!=null&&!u.hasOwnProperty(Y)&&bt(s,o,Y,null,u,ee);for(ce in u)ee=u[ce],ne=c[ce],!u.hasOwnProperty(ce)||ee===ne||ee==null&&ne==null||bt(s,o,ce,ee,u,ne)}function g_(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bI(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,c=performance.getEntriesByType("resource"),u=0;u<c.length;u++){var x=c[u],_=x.transferSize,w=x.initiatorType,C=x.duration;if(_&&C&&g_(w)){for(w=0,C=x.responseEnd,u+=1;u<c.length;u++){var q=c[u],Z=q.startTime;if(Z>C)break;var se=q.transferSize,ce=q.initiatorType;se&&g_(ce)&&(q=q.responseEnd,w+=se*(q<C?1:(C-Z)/(q-Z)))}if(--u,o+=8*(_+w)/(x.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var vp=null,xp=null;function Od(s){return s.nodeType===9?s:s.ownerDocument}function y_(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function v_(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function _p(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bp=null;function TI(){var s=window.event;return s&&s.type==="popstate"?s===bp?!1:(bp=s,!0):(bp=null,!1)}var x_=typeof setTimeout=="function"?setTimeout:void 0,EI=typeof clearTimeout=="function"?clearTimeout:void 0,__=typeof Promise=="function"?Promise:void 0,wI=typeof queueMicrotask=="function"?queueMicrotask:typeof __<"u"?function(s){return __.resolve(null).then(s).catch(SI)}:x_;function SI(s){setTimeout(function(){throw s})}function Ji(s){return s==="head"}function b_(s,o){var c=o,u=0;do{var x=c.nextSibling;if(s.removeChild(c),x&&x.nodeType===8)if(c=x.data,c==="/$"||c==="/&"){if(u===0){s.removeChild(x),tl(o);return}u--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")u++;else if(c==="html")Pc(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Pc(c);for(var _=c.firstChild;_;){var w=_.nextSibling,C=_.nodeName;_[vt]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&_.rel.toLowerCase()==="stylesheet"||c.removeChild(_),_=w}}else c==="body"&&Pc(s.ownerDocument.body);c=x}while(c);tl(o)}function T_(s,o){var c=s;s=0;do{var u=c.nextSibling;if(c.nodeType===1?o?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(o?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),u&&u.nodeType===8)if(c=u.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=u}while(c)}function Tp(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var c=o;switch(o=o.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":Tp(c),Us(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function AI(s,o,c,u){for(;s.nodeType===1;){var x=c;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(u){if(!s[vt])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(_=s.getAttribute("rel"),_==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(_!==x.rel||s.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||s.getAttribute("title")!==(x.title==null?null:x.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(_=s.getAttribute("src"),(_!==(x.src==null?null:x.src)||s.getAttribute("type")!==(x.type==null?null:x.type)||s.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&_&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var _=x.name==null?null:""+x.name;if(x.type==="hidden"&&s.getAttribute("name")===_)return s}else return s;if(s=Sr(s.nextSibling),s===null)break}return null}function NI(s,o,c){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Sr(s.nextSibling),s===null))return null;return s}function E_(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=Sr(s.nextSibling),s===null))return null;return s}function Ep(s){return s.data==="$?"||s.data==="$~"}function wp(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function CI(s,o){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||c.readyState!=="loading")o();else{var u=function(){o(),c.removeEventListener("DOMContentLoaded",u)};c.addEventListener("DOMContentLoaded",u),s._reactRetry=u}}function Sr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Sp=null;function w_(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(o===0)return Sr(s.nextSibling);o--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||o++}s=s.nextSibling}return null}function S_(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(o===0)return s;o--}else c!=="/$"&&c!=="/&"||o++}s=s.previousSibling}return null}function A_(s,o,c){switch(o=Od(c),s){case"html":if(s=o.documentElement,!s)throw Error(r(452));return s;case"head":if(s=o.head,!s)throw Error(r(453));return s;case"body":if(s=o.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function Pc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Us(s)}var Ar=new Map,N_=new Set;function jd(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ti=ae.d;ae.d={f:II,r:RI,D:kI,C:DI,L:MI,m:PI,X:VI,S:LI,M:UI};function II(){var s=ti.f(),o=Rd();return s||o}function RI(s){var o=On(s);o!==null&&o.tag===5&&o.type==="form"?Gv(o):ti.r(s)}var Qa=typeof document>"u"?null:document;function C_(s,o,c){var u=Qa;if(u&&typeof o=="string"&&o){var x=jn(o);x='link[rel="'+s+'"][href="'+x+'"]',typeof c=="string"&&(x+='[crossorigin="'+c+'"]'),N_.has(x)||(N_.add(x),s={rel:s,crossOrigin:c,href:o},u.querySelector(x)===null&&(o=u.createElement("link"),mn(o,"link",s),Vt(o),u.head.appendChild(o)))}}function kI(s){ti.D(s),C_("dns-prefetch",s,null)}function DI(s,o){ti.C(s,o),C_("preconnect",s,o)}function MI(s,o,c){ti.L(s,o,c);var u=Qa;if(u&&s&&o){var x='link[rel="preload"][as="'+jn(o)+'"]';o==="image"&&c&&c.imageSrcSet?(x+='[imagesrcset="'+jn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(x+='[imagesizes="'+jn(c.imageSizes)+'"]')):x+='[href="'+jn(s)+'"]';var _=x;switch(o){case"style":_=Za(s);break;case"script":_=el(s)}Ar.has(_)||(s=b({rel:"preload",href:o==="image"&&c&&c.imageSrcSet?void 0:s,as:o},c),Ar.set(_,s),u.querySelector(x)!==null||o==="style"&&u.querySelector(Lc(_))||o==="script"&&u.querySelector(Vc(_))||(o=u.createElement("link"),mn(o,"link",s),Vt(o),u.head.appendChild(o)))}}function PI(s,o){ti.m(s,o);var c=Qa;if(c&&s){var u=o&&typeof o.as=="string"?o.as:"script",x='link[rel="modulepreload"][as="'+jn(u)+'"][href="'+jn(s)+'"]',_=x;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=el(s)}if(!Ar.has(_)&&(s=b({rel:"modulepreload",href:s},o),Ar.set(_,s),c.querySelector(x)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Vc(_)))return}u=c.createElement("link"),mn(u,"link",s),Vt(u),c.head.appendChild(u)}}}function LI(s,o,c){ti.S(s,o,c);var u=Qa;if(u&&s){var x=tr(u).hoistableStyles,_=Za(s);o=o||"default";var w=x.get(_);if(!w){var C={loading:0,preload:null};if(w=u.querySelector(Lc(_)))C.loading=5;else{s=b({rel:"stylesheet",href:s,"data-precedence":o},c),(c=Ar.get(_))&&Ap(s,c);var q=w=u.createElement("link");Vt(q),mn(q,"link",s),q._p=new Promise(function(Z,se){q.onload=Z,q.onerror=se}),q.addEventListener("load",function(){C.loading|=1}),q.addEventListener("error",function(){C.loading|=2}),C.loading|=4,Fd(w,o,u)}w={type:"stylesheet",instance:w,count:1,state:C},x.set(_,w)}}}function VI(s,o){ti.X(s,o);var c=Qa;if(c&&s){var u=tr(c).hoistableScripts,x=el(s),_=u.get(x);_||(_=c.querySelector(Vc(x)),_||(s=b({src:s,async:!0},o),(o=Ar.get(x))&&Np(s,o),_=c.createElement("script"),Vt(_),mn(_,"link",s),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(x,_))}}function UI(s,o){ti.M(s,o);var c=Qa;if(c&&s){var u=tr(c).hoistableScripts,x=el(s),_=u.get(x);_||(_=c.querySelector(Vc(x)),_||(s=b({src:s,async:!0,type:"module"},o),(o=Ar.get(x))&&Np(s,o),_=c.createElement("script"),Vt(_),mn(_,"link",s),c.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(x,_))}}function I_(s,o,c,u){var x=(x=Le.current)?jd(x):null;if(!x)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(o=Za(c.href),c=tr(x).hoistableStyles,u=c.get(o),u||(u={type:"style",instance:null,count:0,state:null},c.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Za(c.href);var _=tr(x).hoistableStyles,w=_.get(s);if(w||(x=x.ownerDocument||x,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(s,w),(_=x.querySelector(Lc(s)))&&!_._p&&(w.instance=_,w.state.loading=5),Ar.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Ar.set(s,c),_||OI(x,s,c,w.state))),o&&u===null)throw Error(r(528,""));return w}if(o&&u!==null)throw Error(r(529,""));return null;case"script":return o=c.async,c=c.src,typeof c=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=el(c),c=tr(x).hoistableScripts,u=c.get(o),u||(u={type:"script",instance:null,count:0,state:null},c.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Za(s){return'href="'+jn(s)+'"'}function Lc(s){return'link[rel="stylesheet"]['+s+"]"}function R_(s){return b({},s,{"data-precedence":s.precedence,precedence:null})}function OI(s,o,c,u){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=s.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),mn(o,"link",c),Vt(o),s.head.appendChild(o))}function el(s){return'[src="'+jn(s)+'"]'}function Vc(s){return"script[async]"+s}function k_(s,o,c){if(o.count++,o.instance===null)switch(o.type){case"style":var u=s.querySelector('style[data-href~="'+jn(c.href)+'"]');if(u)return o.instance=u,Vt(u),u;var x=b({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return u=(s.ownerDocument||s).createElement("style"),Vt(u),mn(u,"style",x),Fd(u,c.precedence,s),o.instance=u;case"stylesheet":x=Za(c.href);var _=s.querySelector(Lc(x));if(_)return o.state.loading|=4,o.instance=_,Vt(_),_;u=R_(c),(x=Ar.get(x))&&Ap(u,x),_=(s.ownerDocument||s).createElement("link"),Vt(_);var w=_;return w._p=new Promise(function(C,q){w.onload=C,w.onerror=q}),mn(_,"link",u),o.state.loading|=4,Fd(_,c.precedence,s),o.instance=_;case"script":return _=el(c.src),(x=s.querySelector(Vc(_)))?(o.instance=x,Vt(x),x):(u=c,(x=Ar.get(_))&&(u=b({},c),Np(u,x)),s=s.ownerDocument||s,x=s.createElement("script"),Vt(x),mn(x,"link",u),s.head.appendChild(x),o.instance=x);case"void":return null;default:throw Error(r(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,Fd(u,c.precedence,s));return o.instance}function Fd(s,o,c){for(var u=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=u.length?u[u.length-1]:null,_=x,w=0;w<u.length;w++){var C=u[w];if(C.dataset.precedence===o)_=C;else if(_!==x)break}_?_.parentNode.insertBefore(s,_.nextSibling):(o=c.nodeType===9?c.head:c,o.insertBefore(s,o.firstChild))}function Ap(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Np(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var qd=null;function D_(s,o,c){if(qd===null){var u=new Map,x=qd=new Map;x.set(c,u)}else x=qd,u=x.get(c),u||(u=new Map,x.set(c,u));if(u.has(s))return u;for(u.set(s,null),c=c.getElementsByTagName(s),x=0;x<c.length;x++){var _=c[x];if(!(_[vt]||_[Dt]||s==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var w=_.getAttribute(o)||"";w=s+w;var C=u.get(w);C?C.push(_):u.set(w,[_])}}return u}function M_(s,o,c){s=s.ownerDocument||s,s.head.insertBefore(c,o==="title"?s.querySelector("head > title"):null)}function jI(s,o,c){if(c===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function P_(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function FI(s,o,c,u){if(c.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Za(u.href),_=o.querySelector(Lc(x));if(_){o=_._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=Bd.bind(s),o.then(s,s)),c.state.loading|=4,c.instance=_,Vt(_);return}_=o.ownerDocument||o,u=R_(u),(x=Ar.get(x))&&Ap(u,x),_=_.createElement("link"),Vt(_);var w=_;w._p=new Promise(function(C,q){w.onload=C,w.onerror=q}),mn(_,"link",u),c.instance=_}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,o),(o=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Bd.bind(s),o.addEventListener("load",c),o.addEventListener("error",c))}}var Cp=0;function qI(s,o){return s.stylesheets&&s.count===0&&Gd(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var u=setTimeout(function(){if(s.stylesheets&&Gd(s,s.stylesheets),s.unsuspend){var _=s.unsuspend;s.unsuspend=null,_()}},6e4+o);0<s.imgBytes&&Cp===0&&(Cp=62500*bI());var x=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Gd(s,s.stylesheets),s.unsuspend)){var _=s.unsuspend;s.unsuspend=null,_()}},(s.imgBytes>Cp?50:800)+o);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(u),clearTimeout(x)}}:null}function Bd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Gd(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Hd=null;function Gd(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Hd=new Map,o.forEach(BI,s),Hd=null,Bd.call(s))}function BI(s,o){if(!(o.state.loading&4)){var c=Hd.get(s);if(c)var u=c.get(null);else{c=new Map,Hd.set(s,c);for(var x=s.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<x.length;_++){var w=x[_];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(c.set(w.dataset.precedence,w),u=w)}u&&c.set(null,u)}x=o.instance,w=x.getAttribute("data-precedence"),_=c.get(w)||u,_===u&&c.set(null,x),c.set(w,x),this.count++,u=Bd.bind(this),x.addEventListener("load",u),x.addEventListener("error",u),_?_.parentNode.insertBefore(x,_.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(x,s.firstChild)),o.state.loading|=4}}var Uc={$$typeof:F,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function HI(s,o,c,u,x,_,w,C,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Qn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qn(0),this.hiddenUpdates=Qn(null),this.identifierPrefix=u,this.onUncaughtError=x,this.onCaughtError=_,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function L_(s,o,c,u,x,_,w,C,q,Z,se,ce){return s=new HI(s,o,c,w,q,Z,se,ce,C),o=1,_===!0&&(o|=24),_=sr(3,null,null,o),s.current=_,_.stateNode=s,o=am(),o.refCount++,s.pooledCache=o,o.refCount++,_.memoizedState={element:u,isDehydrated:c,cache:o},dm(_),s}function V_(s){return s?(s=ka,s):ka}function U_(s,o,c,u,x,_){x=V_(x),u.context===null?u.context=x:u.pendingContext=x,u=Vi(o),u.payload={element:c},_=_===void 0?null:_,_!==null&&(u.callback=_),c=Ui(s,u,o),c!==null&&(zn(c,s,o),pc(c,s,o))}function O_(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<o?c:o}}function Ip(s,o){O_(s,o),(s=s.alternate)&&O_(s,o)}function j_(s){if(s.tag===13||s.tag===31){var o=Mo(s,67108864);o!==null&&zn(o,s,67108864),Ip(s,67108864)}}function F_(s){if(s.tag===13||s.tag===31){var o=cr();o=Vs(o);var c=Mo(s,o);c!==null&&zn(c,s,o),Ip(s,o)}}var zd=!0;function GI(s,o,c,u){var x=G.T;G.T=null;var _=ae.p;try{ae.p=2,Rp(s,o,c,u)}finally{ae.p=_,G.T=x}}function zI(s,o,c,u){var x=G.T;G.T=null;var _=ae.p;try{ae.p=8,Rp(s,o,c,u)}finally{ae.p=_,G.T=x}}function Rp(s,o,c,u){if(zd){var x=kp(u);if(x===null)gp(s,o,u,$d,c),B_(s,u);else if(JI(x,s,o,c,u))u.stopPropagation();else if(B_(s,u),o&4&&-1<$I.indexOf(s)){for(;x!==null;){var _=On(x);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var w=pr(_.pendingLanes);if(w!==0){var C=_;for(C.pendingLanes|=2,C.entangledLanes|=2;w;){var q=1<<31-dt(w);C.entanglements[1]|=q,w&=~q}gs(_),(ft&6)===0&&(Cd=st()+500,kc(0))}}break;case 31:case 13:C=Mo(_,2),C!==null&&zn(C,_,2),Rd(),Ip(_,2)}if(_=kp(u),_===null&&gp(s,o,u,$d,c),_===x)break;x=_}x!==null&&u.stopPropagation()}else gp(s,o,u,null,c)}}function kp(s){return s=gr(s),Dp(s)}var $d=null;function Dp(s){if($d=null,s=bn(s),s!==null){var o=a(s);if(o===null)s=null;else{var c=o.tag;if(c===13){if(s=l(o),s!==null)return s;s=null}else if(c===31){if(s=d(o),s!==null)return s;s=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return $d=s,null}function q_(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case Xn:return 2;case Lr:return 8;case ts:case vi:return 32;case Ds:return 268435456;default:return 32}default:return 32}}var Mp=!1,Yi=null,Ki=null,Xi=null,Oc=new Map,jc=new Map,Wi=[],$I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function B_(s,o){switch(s){case"focusin":case"focusout":Yi=null;break;case"dragenter":case"dragleave":Ki=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":Oc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":jc.delete(o.pointerId)}}function Fc(s,o,c,u,x,_){return s===null||s.nativeEvent!==_?(s={blockedOn:o,domEventName:c,eventSystemFlags:u,nativeEvent:_,targetContainers:[x]},o!==null&&(o=On(o),o!==null&&j_(o)),s):(s.eventSystemFlags|=u,o=s.targetContainers,x!==null&&o.indexOf(x)===-1&&o.push(x),s)}function JI(s,o,c,u,x){switch(o){case"focusin":return Yi=Fc(Yi,s,o,c,u,x),!0;case"dragenter":return Ki=Fc(Ki,s,o,c,u,x),!0;case"mouseover":return Xi=Fc(Xi,s,o,c,u,x),!0;case"pointerover":var _=x.pointerId;return Oc.set(_,Fc(Oc.get(_)||null,s,o,c,u,x)),!0;case"gotpointercapture":return _=x.pointerId,jc.set(_,Fc(jc.get(_)||null,s,o,c,u,x)),!0}return!1}function H_(s){var o=bn(s.target);if(o!==null){var c=a(o);if(c!==null){if(o=c.tag,o===13){if(o=l(c),o!==null){s.blockedOn=o,er(s.priority,function(){F_(c)});return}}else if(o===31){if(o=d(c),o!==null){s.blockedOn=o,er(s.priority,function(){F_(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Jd(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var c=kp(s.nativeEvent);if(c===null){c=s.nativeEvent;var u=new c.constructor(c.type,c);Zl=u,c.target.dispatchEvent(u),Zl=null}else return o=On(c),o!==null&&j_(o),s.blockedOn=c,!1;o.shift()}return!0}function G_(s,o,c){Jd(s)&&c.delete(o)}function YI(){Mp=!1,Yi!==null&&Jd(Yi)&&(Yi=null),Ki!==null&&Jd(Ki)&&(Ki=null),Xi!==null&&Jd(Xi)&&(Xi=null),Oc.forEach(G_),jc.forEach(G_)}function Yd(s,o){s.blockedOn===o&&(s.blockedOn=null,Mp||(Mp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,YI)))}var Kd=null;function z_(s){Kd!==s&&(Kd=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Kd===s&&(Kd=null);for(var o=0;o<s.length;o+=3){var c=s[o],u=s[o+1],x=s[o+2];if(typeof u!="function"){if(Dp(u||c)===null)continue;break}var _=On(c);_!==null&&(s.splice(o,3),o-=3,km(_,{pending:!0,data:x,method:c.method,action:u},u,x))}}))}function tl(s){function o(q){return Yd(q,s)}Yi!==null&&Yd(Yi,s),Ki!==null&&Yd(Ki,s),Xi!==null&&Yd(Xi,s),Oc.forEach(o),jc.forEach(o);for(var c=0;c<Wi.length;c++){var u=Wi[c];u.blockedOn===s&&(u.blockedOn=null)}for(;0<Wi.length&&(c=Wi[0],c.blockedOn===null);)H_(c),c.blockedOn===null&&Wi.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(u=0;u<c.length;u+=3){var x=c[u],_=c[u+1],w=x[K]||null;if(typeof _=="function")w||z_(c);else if(w){var C=null;if(_&&_.hasAttribute("formAction")){if(x=_,w=_[K]||null)C=w.formAction;else if(Dp(x)!==null)continue}else C=w.action;typeof C=="function"?c[u+1]=C:(c.splice(u,3),u-=3),z_(c)}}}function $_(){function s(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(w){return x=w})},focusReset:"manual",scroll:"manual"})}function o(){x!==null&&(x(),x=null),u||setTimeout(c,20)}function c(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,x=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(c,100),function(){u=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),x!==null&&(x(),x=null)}}}function Pp(s){this._internalRoot=s}Xd.prototype.render=Pp.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(r(409));var c=o.current,u=cr();U_(c,u,s,o,null,null)},Xd.prototype.unmount=Pp.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;U_(s.current,2,null,s,null,null),Rd(),o[fe]=null}};function Xd(s){this._internalRoot=s}Xd.prototype.unstable_scheduleHydration=function(s){if(s){var o=ya();s={blockedOn:null,target:s,priority:o};for(var c=0;c<Wi.length&&o!==0&&o<Wi[c].priority;c++);Wi.splice(c,0,s),c===0&&H_(s)}};var J_=e.version;if(J_!=="19.2.3")throw Error(r(527,J_,"19.2.3"));ae.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=m(o),s=s!==null?v(s):null,s=s===null?null:s.stateNode,s};var KI={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{Vn=Wd.inject(KI),ut=Wd}catch{}}return Bc.createRoot=function(s,o){if(!i(s))throw Error(r(299));var c=!1,u="",x=ex,_=tx,w=nx;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(x=o.onUncaughtError),o.onCaughtError!==void 0&&(_=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=L_(s,1,!1,null,null,c,u,null,x,_,w,$_),s[fe]=o.current,pp(s),new Pp(o)},Bc.hydrateRoot=function(s,o,c){if(!i(s))throw Error(r(299));var u=!1,x="",_=ex,w=tx,C=nx,q=null;return c!=null&&(c.unstable_strictMode===!0&&(u=!0),c.identifierPrefix!==void 0&&(x=c.identifierPrefix),c.onUncaughtError!==void 0&&(_=c.onUncaughtError),c.onCaughtError!==void 0&&(w=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.formState!==void 0&&(q=c.formState)),o=L_(s,1,!0,o,c??null,u,x,q,_,w,C,$_),o.context=V_(null),c=o.current,u=cr(),u=Vs(u),x=Vi(u),x.callback=null,Ui(c,x,u),c=u,o.current.lanes=c,ns(o,c),gs(o),s[fe]=o.current,pp(s),new Xd(o)},Bc.version="19.2.3",Bc}var rb;function iR(){if(rb)return Up.exports;rb=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Up.exports=sR(),Up.exports}var oR=iR();const aR=eS(oR);/**
 * react-router v7.11.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sb="popstate";function lR(n={}){function e(i,a){let{pathname:l="/",search:d="",hash:f=""}=oa(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),hg("",{pathname:l,search:d,hash:f},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let f=i.location.href,m=f.indexOf("#");d=m===-1?f:f.slice(0,m)}return d+"#"+(typeof a=="string"?a:lu(a))}function r(i,a){hr(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return uR(e,t,r,n)}function Mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function hr(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cR(){return Math.random().toString(36).substring(2,10)}function ib(n,e){return{usr:n.state,key:n.key,idx:e}}function hg(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?oa(e):e,state:t,key:e&&e.key||r||cR()}}function lu({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function oa(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function uR(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",f=null,m=v();m==null&&(m=0,l.replaceState({...l.state,idx:m},""));function v(){return(l.state||{idx:null}).idx}function b(){d="POP";let N=v(),U=N==null?null:N-m;m=N,f&&f({action:d,location:D.location,delta:U})}function T(N,U){d="PUSH";let B=hg(D.location,N,U);t&&t(B,N),m=v()+1;let F=ib(B,m),Q=D.createHref(B);try{l.pushState(F,"",Q)}catch(J){if(J instanceof DOMException&&J.name==="DataCloneError")throw J;i.location.assign(Q)}a&&f&&f({action:d,location:D.location,delta:1})}function S(N,U){d="REPLACE";let B=hg(D.location,N,U);t&&t(B,N),m=v();let F=ib(B,m),Q=D.createHref(B);l.replaceState(F,"",Q),a&&f&&f({action:d,location:D.location,delta:0})}function I(N){return dR(N)}let D={get action(){return d},get location(){return n(i,l)},listen(N){if(f)throw new Error("A history only accepts one active listener");return i.addEventListener(sb,b),f=N,()=>{i.removeEventListener(sb,b),f=null}},createHref(N){return e(i,N)},createURL:I,encodeLocation(N){let U=I(N);return{pathname:U.pathname,search:U.search,hash:U.hash}},push:T,replace:S,go(N){return l.go(N)}};return D}function dR(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Mt(t,"No window.location.(origin|href) available to create URL");let r=typeof n=="string"?n:lu(n);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function tS(n,e,t="/"){return hR(n,e,t,!1)}function hR(n,e,t,r){let i=typeof e=="string"?oa(e):e,a=ai(i.pathname||"/",t);if(a==null)return null;let l=nS(n);fR(l);let d=null;for(let f=0;d==null&&f<l.length;++f){let m=wR(a);d=TR(l[f],m,r)}return d}function nS(n,e=[],t=[],r="",i=!1){let a=(l,d,f=i,m)=>{let v={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(r)&&f)return;Mt(v.relativePath.startsWith(r),`Absolute route path "${v.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(r.length)}let b=ii([r,v.relativePath]),T=t.concat(v);l.children&&l.children.length>0&&(Mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),nS(l.children,e,T,b,f)),!(l.path==null&&!l.index)&&e.push({path:b,score:_R(b,l.index),routesMeta:T})};return n.forEach((l,d)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))a(l,d);else for(let m of rS(l.path))a(l,d,!0,m)}),e}function rS(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),a=t.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=rS(r.join("/")),d=[];return d.push(...l.map(f=>f===""?a:[a,f].join("/"))),i&&d.push(...l),d.map(f=>n.startsWith("/")&&f===""?"/":f)}function fR(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:bR(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var mR=/^:[\w-]+$/,pR=3,gR=2,yR=1,vR=10,xR=-2,ob=n=>n==="*";function _R(n,e){let t=n.split("/"),r=t.length;return t.some(ob)&&(r+=xR),e&&(r+=gR),t.filter(i=>!ob(i)).reduce((i,a)=>i+(mR.test(a)?pR:a===""?yR:vR),r)}function bR(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function TR(n,e,t=!1){let{routesMeta:r}=n,i={},a="/",l=[];for(let d=0;d<r.length;++d){let f=r[d],m=d===r.length-1,v=a==="/"?e:e.slice(a.length)||"/",b=Ch({path:f.relativePath,caseSensitive:f.caseSensitive,end:m},v),T=f.route;if(!b&&m&&t&&!r[r.length-1].route.index&&(b=Ch({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},v)),!b)return null;Object.assign(i,b.params),l.push({params:i,pathname:ii([a,b.pathname]),pathnameBase:CR(ii([a,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(a=ii([a,b.pathnameBase]))}return l}function Ch(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=ER(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((m,{paramName:v,isOptional:b},T)=>{if(v==="*"){let I=d[T]||"";l=a.slice(0,a.length-I.length).replace(/(.)\/+$/,"$1")}const S=d[T];return b&&!S?m[v]=void 0:m[v]=(S||"").replace(/%2F/g,"/"),m},{}),pathname:a,pathnameBase:l,pattern:n}}function ER(n,e=!1,t=!0){hr(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,f)=>(r.push({paramName:d,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function wR(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return hr(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function ai(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}var sS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SR=n=>sS.test(n);function AR(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?oa(n):n,a;if(t)if(SR(t))a=t;else{if(t.includes("//")){let l=t;t=t.replace(/\/\/+/g,"/"),hr(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${t}`)}t.startsWith("/")?a=ab(t.substring(1),"/"):a=ab(t,e)}else a=e;return{pathname:a,search:IR(r),hash:RR(i)}}function ab(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function qp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NR(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iS(n){let e=NR(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function oS(n,e,t,r=!1){let i;typeof n=="string"?i=oa(n):(i={...n},Mt(!i.pathname||!i.pathname.includes("?"),qp("?","pathname","search",i)),Mt(!i.pathname||!i.pathname.includes("#"),qp("#","pathname","hash",i)),Mt(!i.search||!i.search.includes("#"),qp("#","search","hash",i)));let a=n===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=t;else{let b=e.length-1;if(!r&&l.startsWith("..")){let T=l.split("/");for(;T[0]==="..";)T.shift(),b-=1;i.pathname=T.join("/")}d=b>=0?e[b]:"/"}let f=AR(i,d),m=l&&l!=="/"&&l.endsWith("/"),v=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(m||v)&&(f.pathname+="/"),f}var ii=n=>n.join("/").replace(/\/\/+/g,"/"),CR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),IR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,RR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,kR=class{constructor(n,e,t,r=!1){this.status=n,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function DR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function MR(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var aS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function lS(n,e){let t=n;if(typeof t!="string"||!sS.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,i=!1;if(aS)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),d=ai(l.pathname,e);l.origin===a.origin&&d!=null?t=d+l.search+l.hash:i=!0}catch{hr(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:i,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var cS=["POST","PUT","PATCH","DELETE"];new Set(cS);var PR=["GET",...cS];new Set(PR);var Rl=j.createContext(null);Rl.displayName="DataRouter";var af=j.createContext(null);af.displayName="DataRouterState";var LR=j.createContext(!1),uS=j.createContext({isTransitioning:!1});uS.displayName="ViewTransition";var VR=j.createContext(new Map);VR.displayName="Fetchers";var UR=j.createContext(null);UR.displayName="Await";var Dr=j.createContext(null);Dr.displayName="Navigation";var xu=j.createContext(null);xu.displayName="Location";var Cs=j.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var ay=j.createContext(null);ay.displayName="RouteError";var dS="REACT_ROUTER_ERROR",OR="REDIRECT",jR="ROUTE_ERROR_RESPONSE";function FR(n){if(n.startsWith(`${dS}:${OR}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function qR(n){if(n.startsWith(`${dS}:${jR}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new kR(e.status,e.statusText,e.data)}catch{}}function BR(n,{relative:e}={}){Mt(_u(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(Dr),{hash:i,pathname:a,search:l}=bu(n,{relative:e}),d=a;return t!=="/"&&(d=a==="/"?t:ii([t,a])),r.createHref({pathname:d,search:l,hash:i})}function _u(){return j.useContext(xu)!=null}function Is(){return Mt(_u(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(xu).location}var hS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function fS(n){j.useContext(Dr).static||j.useLayoutEffect(n)}function xn(){let{isDataRoute:n}=j.useContext(Cs);return n?tk():HR()}function HR(){Mt(_u(),"useNavigate() may be used only in the context of a <Router> component.");let n=j.useContext(Rl),{basename:e,navigator:t}=j.useContext(Dr),{matches:r}=j.useContext(Cs),{pathname:i}=Is(),a=JSON.stringify(iS(r)),l=j.useRef(!1);return fS(()=>{l.current=!0}),j.useCallback((f,m={})=>{if(hr(l.current,hS),!l.current)return;if(typeof f=="number"){t.go(f);return}let v=oS(f,JSON.parse(a),i,m.relative==="path");n==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:ii([e,v.pathname])),(m.replace?t.replace:t.push)(v,m.state,m)},[e,t,a,i,n])}j.createContext(null);function mS(){let{matches:n}=j.useContext(Cs),e=n[n.length-1];return e?e.params:{}}function bu(n,{relative:e}={}){let{matches:t}=j.useContext(Cs),{pathname:r}=Is(),i=JSON.stringify(iS(t));return j.useMemo(()=>oS(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function GR(n,e){return pS(n,e)}function pS(n,e,t,r,i){var B;Mt(_u(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=j.useContext(Dr),{matches:l}=j.useContext(Cs),d=l[l.length-1],f=d?d.params:{},m=d?d.pathname:"/",v=d?d.pathnameBase:"/",b=d&&d.route;{let F=b&&b.path||"";yS(m,!b||F.endsWith("*")||F.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${F}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${F}"> to <Route path="${F==="/"?"*":`${F}/*`}">.`)}let T=Is(),S;if(e){let F=typeof e=="string"?oa(e):e;Mt(v==="/"||((B=F.pathname)==null?void 0:B.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${F.pathname}" was given in the \`location\` prop.`),S=F}else S=T;let I=S.pathname||"/",D=I;if(v!=="/"){let F=v.replace(/^\//,"").split("/");D="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let N=tS(n,{pathname:D});hr(b||N!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),hr(N==null||N[N.length-1].route.element!==void 0||N[N.length-1].route.Component!==void 0||N[N.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let U=KR(N&&N.map(F=>Object.assign({},F,{params:Object.assign({},f,F.params),pathname:ii([v,a.encodeLocation?a.encodeLocation(F.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?v:ii([v,a.encodeLocation?a.encodeLocation(F.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:F.pathnameBase])})),l,t,r,i);return e&&U?j.createElement(xu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},U):U}function zR(){let n=ek(),e=DR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:i},t):null,l)}var $R=j.createElement(zR,null),gS=class extends j.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=qR(n.digest);t&&(n=t)}let e=n!==void 0?j.createElement(Cs.Provider,{value:this.props.routeContext},j.createElement(ay.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?j.createElement(JR,{error:n},e):e}};gS.contextType=LR;var Bp=new WeakMap;function JR({children:n,error:e}){let{basename:t}=j.useContext(Dr);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=FR(e.digest);if(r){let i=Bp.get(e);if(i)throw i;let a=lS(r.location,t);if(aS&&!Bp.get(e))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw Bp.set(e,l),l}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function YR({routeContext:n,match:e,children:t}){let r=j.useContext(Rl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Cs.Provider,{value:n},t)}function KR(n,e=[],t=null,r=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t==null?void 0:t.errors;if(l!=null){let v=a.findIndex(b=>b.route.id&&(l==null?void 0:l[b.route.id])!==void 0);Mt(v>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,v+1))}let d=!1,f=-1;if(t)for(let v=0;v<a.length;v++){let b=a[v];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(f=v),b.route.id){let{loaderData:T,errors:S}=t,I=b.route.loader&&!T.hasOwnProperty(b.route.id)&&(!S||S[b.route.id]===void 0);if(b.route.lazy||I){d=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let m=t&&r?(v,b)=>{var T,S;r(v,{location:t.location,params:((S=(T=t.matches)==null?void 0:T[0])==null?void 0:S.params)??{},unstable_pattern:MR(t.matches),errorInfo:b})}:void 0;return a.reduceRight((v,b,T)=>{let S,I=!1,D=null,N=null;t&&(S=l&&b.route.id?l[b.route.id]:void 0,D=b.route.errorElement||$R,d&&(f<0&&T===0?(yS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),I=!0,N=null):f===T&&(I=!0,N=b.route.hydrateFallbackElement||null)));let U=e.concat(a.slice(0,T+1)),B=()=>{let F;return S?F=D:I?F=N:b.route.Component?F=j.createElement(b.route.Component,null):b.route.element?F=b.route.element:F=v,j.createElement(YR,{match:b,routeContext:{outlet:v,matches:U,isDataRoute:t!=null},children:F})};return t&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?j.createElement(gS,{location:t.location,revalidation:t.revalidation,component:D,error:S,children:B(),routeContext:{outlet:null,matches:U,isDataRoute:!0},onError:m}):B()},null)}function ly(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XR(n){let e=j.useContext(Rl);return Mt(e,ly(n)),e}function WR(n){let e=j.useContext(af);return Mt(e,ly(n)),e}function QR(n){let e=j.useContext(Cs);return Mt(e,ly(n)),e}function cy(n){let e=QR(n),t=e.matches[e.matches.length-1];return Mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function ZR(){return cy("useRouteId")}function ek(){var r;let n=j.useContext(ay),e=WR("useRouteError"),t=cy("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function tk(){let{router:n}=XR("useNavigate"),e=cy("useNavigate"),t=j.useRef(!1);return fS(()=>{t.current=!0}),j.useCallback(async(i,a={})=>{hr(t.current,hS),t.current&&(typeof i=="number"?await n.navigate(i):await n.navigate(i,{fromRouteId:e,...a}))},[n,e])}var lb={};function yS(n,e,t){!e&&!lb[n]&&(lb[n]=!0,hr(!1,t))}j.memo(nk);function nk({routes:n,future:e,state:t,onError:r}){return pS(n,void 0,t,r,e)}function pn(n){Mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rk({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:a=!1,unstable_useTransitions:l}){Mt(!_u(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=n.replace(/^\/*/,"/"),f=j.useMemo(()=>({basename:d,navigator:i,static:a,unstable_useTransitions:l,future:{}}),[d,i,a,l]);typeof t=="string"&&(t=oa(t));let{pathname:m="/",search:v="",hash:b="",state:T=null,key:S="default"}=t,I=j.useMemo(()=>{let D=ai(m,d);return D==null?null:{location:{pathname:D,search:v,hash:b,state:T,key:S},navigationType:r}},[d,m,v,b,T,S,r]);return hr(I!=null,`<Router basename="${d}"> is not able to match the URL "${m}${v}${b}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:j.createElement(Dr.Provider,{value:f},j.createElement(xu.Provider,{children:e,value:I}))}function sk({children:n,location:e}){return GR(fg(n),e)}function fg(n,e=[]){let t=[];return j.Children.forEach(n,(r,i)=>{if(!j.isValidElement(r))return;let a=[...e,i];if(r.type===j.Fragment){t.push.apply(t,fg(r.props.children,a));return}Mt(r.type===pn,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=fg(r.props.children,a)),t.push(l)}),t}var mh="get",ph="application/x-www-form-urlencoded";function lf(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function ik(n){return lf(n)&&n.tagName.toLowerCase()==="button"}function ok(n){return lf(n)&&n.tagName.toLowerCase()==="form"}function ak(n){return lf(n)&&n.tagName.toLowerCase()==="input"}function lk(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function ck(n,e){return n.button===0&&(!e||e==="_self")&&!lk(n)}function mg(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((e,t)=>{let r=n[t];return e.concat(Array.isArray(r)?r.map(i=>[t,i]):[[t,r]])},[]))}function uk(n,e){let t=mg(n);return e&&e.forEach((r,i)=>{t.has(i)||e.getAll(i).forEach(a=>{t.append(i,a)})}),t}var Qd=null;function dk(){if(Qd===null)try{new FormData(document.createElement("form"),0),Qd=!1}catch{Qd=!0}return Qd}var hk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hp(n){return n!=null&&!hk.has(n)?(hr(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ph}"`),null):n}function fk(n,e){let t,r,i,a,l;if(ok(n)){let d=n.getAttribute("action");r=d?ai(d,e):null,t=n.getAttribute("method")||mh,i=Hp(n.getAttribute("enctype"))||ph,a=new FormData(n)}else if(ik(n)||ak(n)&&(n.type==="submit"||n.type==="image")){let d=n.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||d.getAttribute("action");if(r=f?ai(f,e):null,t=n.getAttribute("formmethod")||d.getAttribute("method")||mh,i=Hp(n.getAttribute("formenctype"))||Hp(d.getAttribute("enctype"))||ph,a=new FormData(d,n),!dk()){let{name:m,type:v,value:b}=n;if(v==="image"){let T=m?`${m}.`:"";a.append(`${T}x`,"0"),a.append(`${T}y`,"0")}else m&&a.append(m,b)}}else{if(lf(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=mh,r=null,i=ph,l=n}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function uy(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mk(n,e,t){let r=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return r.pathname==="/"?r.pathname=`_root.${t}`:e&&ai(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${t}`,r}async function pk(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function gk(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function yk(n,e,t){let r=await Promise.all(n.map(async i=>{let a=e.routes[i.route.id];if(a){let l=await pk(a,t);return l.links?l.links():[]}return[]}));return bk(r.flat(1).filter(gk).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function cb(n,e,t,r,i,a){let l=(f,m)=>t[m]?f.route.id!==t[m].route.id:!0,d=(f,m)=>{var v;return t[m].pathname!==f.pathname||((v=t[m].route.path)==null?void 0:v.endsWith("*"))&&t[m].params["*"]!==f.params["*"]};return a==="assets"?e.filter((f,m)=>l(f,m)||d(f,m)):a==="data"?e.filter((f,m)=>{var b;let v=r.routes[f.route.id];if(!v||!v.hasLoader)return!1;if(l(f,m)||d(f,m))return!0;if(f.route.shouldRevalidate){let T=f.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((b=t[0])==null?void 0:b.params)||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function vk(n,e,{includeHydrateFallback:t}={}){return xk(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function xk(n){return[...new Set(n)]}function _k(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function bk(n,e){let t=new Set;return new Set(e),n.reduce((r,i)=>{let a=JSON.stringify(_k(i));return t.has(a)||(t.add(a),r.push({key:a,link:i})),r},[])}function vS(){let n=j.useContext(Rl);return uy(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function Tk(){let n=j.useContext(af);return uy(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var dy=j.createContext(void 0);dy.displayName="FrameworkContext";function xS(){let n=j.useContext(dy);return uy(n,"You must render this element inside a <HydratedRouter> element"),n}function Ek(n,e){let t=j.useContext(dy),[r,i]=j.useState(!1),[a,l]=j.useState(!1),{onFocus:d,onBlur:f,onMouseEnter:m,onMouseLeave:v,onTouchStart:b}=e,T=j.useRef(null);j.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let D=U=>{U.forEach(B=>{l(B.isIntersecting)})},N=new IntersectionObserver(D,{threshold:.5});return T.current&&N.observe(T.current),()=>{N.disconnect()}}},[n]),j.useEffect(()=>{if(r){let D=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(D)}}},[r]);let S=()=>{i(!0)},I=()=>{i(!1),l(!1)};return t?n!=="intent"?[a,T,{}]:[a,T,{onFocus:Hc(d,S),onBlur:Hc(f,I),onMouseEnter:Hc(m,S),onMouseLeave:Hc(v,I),onTouchStart:Hc(b,S)}]:[!1,T,{}]}function Hc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function wk({page:n,...e}){let{router:t}=vS(),r=j.useMemo(()=>tS(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?j.createElement(Ak,{page:n,matches:r,...e}):null}function Sk(n){let{manifest:e,routeModules:t}=xS(),[r,i]=j.useState([]);return j.useEffect(()=>{let a=!1;return yk(n,e,t).then(l=>{a||i(l)}),()=>{a=!0}},[n,e,t]),r}function Ak({page:n,matches:e,...t}){let r=Is(),{manifest:i,routeModules:a}=xS(),{basename:l}=vS(),{loaderData:d,matches:f}=Tk(),m=j.useMemo(()=>cb(n,e,f,i,r,"data"),[n,e,f,i,r]),v=j.useMemo(()=>cb(n,e,f,i,r,"assets"),[n,e,f,i,r]),b=j.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,D=!1;if(e.forEach(U=>{var F;let B=i.routes[U.route.id];!B||!B.hasLoader||(!m.some(Q=>Q.route.id===U.route.id)&&U.route.id in d&&((F=a[U.route.id])!=null&&F.shouldRevalidate)||B.hasClientLoader?D=!0:I.add(U.route.id))}),I.size===0)return[];let N=mk(n,l,"data");return D&&I.size>0&&N.searchParams.set("_routes",e.filter(U=>I.has(U.route.id)).map(U=>U.route.id).join(",")),[N.pathname+N.search]},[l,d,r,i,m,e,n,a]),T=j.useMemo(()=>vk(v,i),[v,i]),S=Sk(v);return j.createElement(j.Fragment,null,b.map(I=>j.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),T.map(I=>j.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),S.map(({key:I,link:D})=>j.createElement("link",{key:I,nonce:t.nonce,...D})))}function Nk(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ck=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ck&&(window.__reactRouterVersion="7.11.0")}catch{}function Ik({basename:n,children:e,unstable_useTransitions:t,window:r}){let i=j.useRef();i.current==null&&(i.current=lR({window:r,v5Compat:!0}));let a=i.current,[l,d]=j.useState({action:a.action,location:a.location}),f=j.useCallback(m=>{t===!1?d(m):j.startTransition(()=>d(m))},[t]);return j.useLayoutEffect(()=>a.listen(f),[a,f]),j.createElement(rk,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var _S=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,it=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:f,to:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:T,...S},I){let{basename:D,unstable_useTransitions:N}=j.useContext(Dr),U=typeof m=="string"&&_S.test(m),B=lS(m,D);m=B.to;let F=BR(m,{relative:i}),[Q,J,re]=Ek(r,S),k=Mk(m,{replace:l,state:d,target:f,preventScrollReset:v,relative:i,viewTransition:b,unstable_defaultShouldRevalidate:T,unstable_useTransitions:N});function M(L){e&&e(L),L.defaultPrevented||k(L)}let R=j.createElement("a",{...S,...re,href:B.absoluteURL||F,onClick:B.isExternal||a?e:M,ref:Nk(I,J),target:f,"data-discover":!U&&t==="render"?"true":void 0});return Q&&!U?j.createElement(j.Fragment,null,R,j.createElement(wk,{page:F})):R});it.displayName="Link";var Rk=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:f,...m},v){let b=bu(l,{relative:m.relative}),T=Is(),S=j.useContext(af),{navigator:I,basename:D}=j.useContext(Dr),N=S!=null&&jk(b)&&d===!0,U=I.encodeLocation?I.encodeLocation(b).pathname:b.pathname,B=T.pathname,F=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;t||(B=B.toLowerCase(),F=F?F.toLowerCase():null,U=U.toLowerCase()),F&&D&&(F=ai(F,D)||F);const Q=U!=="/"&&U.endsWith("/")?U.length-1:U.length;let J=B===U||!i&&B.startsWith(U)&&B.charAt(Q)==="/",re=F!=null&&(F===U||!i&&F.startsWith(U)&&F.charAt(U.length)==="/"),k={isActive:J,isPending:re,isTransitioning:N},M=J?e:void 0,R;typeof r=="function"?R=r(k):R=[r,J?"active":null,re?"pending":null,N?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(k):a;return j.createElement(it,{...m,"aria-current":M,className:R,ref:v,style:L,to:l,viewTransition:d},typeof f=="function"?f(k):f)});Rk.displayName="NavLink";var kk=j.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:a,method:l=mh,action:d,onSubmit:f,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:T,...S},I)=>{let{unstable_useTransitions:D}=j.useContext(Dr),N=Uk(),U=Ok(d,{relative:m}),B=l.toLowerCase()==="get"?"get":"post",F=typeof d=="string"&&_S.test(d),Q=J=>{if(f&&f(J),J.defaultPrevented)return;J.preventDefault();let re=J.nativeEvent.submitter,k=(re==null?void 0:re.getAttribute("formmethod"))||l,M=()=>N(re||J.currentTarget,{fetcherKey:e,method:k,navigate:t,replace:i,state:a,relative:m,preventScrollReset:v,viewTransition:b,unstable_defaultShouldRevalidate:T});D&&t!==!1?j.startTransition(()=>M()):M()};return j.createElement("form",{ref:I,method:B,action:U,onSubmit:r?f:Q,...S,"data-discover":!F&&n==="render"?"true":void 0})});kk.displayName="Form";function Dk(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bS(n){let e=j.useContext(Rl);return Mt(e,Dk(n)),e}function Mk(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:f}={}){let m=xn(),v=Is(),b=bu(n,{relative:a});return j.useCallback(T=>{if(ck(T,e)){T.preventDefault();let S=t!==void 0?t:lu(v)===lu(b),I=()=>m(n,{replace:S,state:r,preventScrollReset:i,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:d});f?j.startTransition(()=>I()):I()}},[v,m,b,t,r,e,n,i,a,l,d,f])}function Pk(n){hr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=j.useRef(mg(n)),t=j.useRef(!1),r=Is(),i=j.useMemo(()=>uk(r.search,t.current?null:e.current),[r.search]),a=xn(),l=j.useCallback((d,f)=>{const m=mg(typeof d=="function"?d(new URLSearchParams(i)):d);t.current=!0,a("?"+m,f)},[a,i]);return[i,l]}var Lk=0,Vk=()=>`__${String(++Lk)}__`;function Uk(){let{router:n}=bS("useSubmit"),{basename:e}=j.useContext(Dr),t=ZR(),r=n.fetch,i=n.navigate;return j.useCallback(async(a,l={})=>{let{action:d,method:f,encType:m,formData:v,body:b}=fk(a,e);if(l.navigate===!1){let T=l.fetcherKey||Vk();await r(T,t,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||f,formEncType:l.encType||m,flushSync:l.flushSync})}else await i(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:v,body:b,formMethod:l.method||f,formEncType:l.encType||m,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[r,i,e,t])}function Ok(n,{relative:e}={}){let{basename:t}=j.useContext(Dr),r=j.useContext(Cs);Mt(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...bu(n||".",{relative:e})},l=Is();if(n==null){a.search=l.search;let d=new URLSearchParams(a.search),f=d.getAll("index");if(f.some(v=>v==="")){d.delete("index"),f.filter(b=>b).forEach(b=>d.append("index",b));let v=d.toString();a.search=v?`?${v}`:""}}return(!n||n===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:ii([t,a.pathname])),lu(a)}function jk(n,{relative:e}={}){let t=j.useContext(uS);Mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=bS("useViewTransitionState"),i=bu(n,{relative:e});if(!t.isTransitioning)return!1;let a=ai(t.currentLocation.pathname,r)||t.currentLocation.pathname,l=ai(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Ch(i.pathname,l)!=null||Ch(i.pathname,a)!=null}const Fk="modulepreload",qk=function(n){return"/"+n},ub={},cf=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){let l=function(m){return Promise.all(m.map(v=>Promise.resolve(v).then(b=>({status:"fulfilled",value:b}),b=>({status:"rejected",reason:b}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),f=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=l(t.map(m=>{if(m=qk(m),m in ub)return;ub[m]=!0;const v=m.endsWith(".css"),b=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${b}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":Fk,v||(T.as="script"),T.crossOrigin="",T.href=m,f&&T.setAttribute("nonce",f),document.head.appendChild(T),v)return new Promise((S,I)=>{T.addEventListener("load",S),T.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${m}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};/*! Capacitor: https://capacitorjs.com/ - MIT License */var xl;(function(n){n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE"})(xl||(xl={}));class Gp extends Error{constructor(e,t,r){super(e),this.message=e,this.code=t,this.data=r}}const Bk=n=>{var e,t;return n!=null&&n.androidBridge?"android":!((t=(e=n==null?void 0:n.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},Hk=n=>{const e=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},r=t.Plugins=t.Plugins||{},i=()=>e!==null?e.name:Bk(n),a=()=>i()!=="web",l=b=>{const T=m.get(b);return!!(T!=null&&T.platforms.has(i())||d(b))},d=b=>{var T;return(T=t.PluginHeaders)===null||T===void 0?void 0:T.find(S=>S.name===b)},f=b=>n.console.error(b),m=new Map,v=(b,T={})=>{const S=m.get(b);if(S)return console.warn(`Capacitor plugin "${b}" already registered. Cannot register plugins twice.`),S.proxy;const I=i(),D=d(b);let N;const U=async()=>(!N&&I in T?N=typeof T[I]=="function"?N=await T[I]():N=T[I]:e!==null&&!N&&"web"in T&&(N=typeof T.web=="function"?N=await T.web():N=T.web),N),B=(M,R)=>{var L,O;if(D){const H=D==null?void 0:D.methods.find(V=>R===V.name);if(H)return H.rtype==="promise"?V=>t.nativePromise(b,R.toString(),V):(V,Ae)=>t.nativeCallback(b,R.toString(),V,Ae);if(M)return(L=M[R])===null||L===void 0?void 0:L.bind(M)}else{if(M)return(O=M[R])===null||O===void 0?void 0:O.bind(M);throw new Gp(`"${b}" plugin is not implemented on ${I}`,xl.Unimplemented)}},F=M=>{let R;const L=(...O)=>{const H=U().then(V=>{const Ae=B(V,M);if(Ae){const $e=Ae(...O);return R=$e==null?void 0:$e.remove,$e}else throw new Gp(`"${b}.${M}()" is not implemented on ${I}`,xl.Unimplemented)});return M==="addListener"&&(H.remove=async()=>R()),H};return L.toString=()=>`${M.toString()}() { [capacitor code] }`,Object.defineProperty(L,"name",{value:M,writable:!1,configurable:!1}),L},Q=F("addListener"),J=F("removeListener"),re=(M,R)=>{const L=Q({eventName:M},R),O=async()=>{const V=await L;J({eventName:M,callbackId:V},R)},H=new Promise(V=>L.then(()=>V({remove:O})));return H.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await O()},H},k=new Proxy({},{get(M,R){switch(R){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return D?re:Q;case"removeListener":return J;default:return F(R)}}});return r[b]=k,m.set(b,{name:b,proxy:k,platforms:new Set([...Object.keys(T),...D?[I]:[]])}),k};return t.convertFileSrc||(t.convertFileSrc=b=>b),t.getPlatform=i,t.handleError=f,t.isNativePlatform=a,t.isPluginAvailable=l,t.registerPlugin=v,t.Exception=Gp,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Gk=n=>n.Capacitor=Hk(n),_l=Gk(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),aa=_l.registerPlugin;class hy{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(t);const a=this.windowListeners[e];a&&!a.registered&&this.addWindowListener(a),r&&this.sendRetainedArgumentsForEvent(e);const l=async()=>this.removeListener(e,t);return Promise.resolve({remove:l})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,r){const i=this.listeners[e];if(!i){if(r){let a=this.retainedEventArguments[e];a||(a=[]),a.push(t),this.retainedEventArguments[e]=a}return}i.forEach(a=>a(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:r=>{this.notifyListeners(t,r)}}}unimplemented(e="not implemented"){return new _l.Exception(e,xl.Unimplemented)}unavailable(e="not available"){return new _l.Exception(e,xl.Unavailable)}async removeListener(e,t){const r=this.listeners[e];if(!r)return;const i=r.indexOf(t);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(r=>{this.notifyListeners(e,r)}))}}const db=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),hb=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class zk extends hy{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,a]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=hb(i).trim(),a=hb(a).trim(),t[i]=a}),t}async setCookie(e){try{const t=db(e.key),r=db(e.value),i=`; expires=${(e.expires||"").replace("expires=","")}`,a=(e.path||"/").replace("path=",""),l=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${r||""}${i}; path=${a}; ${l};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}aa("CapacitorCookies",{web:()=>new zk});const $k=async n=>new Promise((e,t)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>t(i),r.readAsDataURL(n)}),Jk=(n={})=>{const e=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,a,l)=>(i[a]=n[e[l]],i),{})},Yk=(n,e=!0)=>n?Object.entries(n).reduce((r,i)=>{const[a,l]=i;let d,f;return Array.isArray(l)?(f="",l.forEach(m=>{d=e?encodeURIComponent(m):m,f+=`${a}=${d}&`}),f.slice(0,-1)):(d=e?encodeURIComponent(l):l,f=`${a}=${d}`),`${r}&${f}`},"").substr(1):null,Kk=(n,e={})=>{const t=Object.assign({method:n.method||"GET",headers:n.headers},e),i=Jk(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){const a=new URLSearchParams;for(const[l,d]of Object.entries(n.data||{}))a.set(l,d);t.body=a.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){const a=new FormData;if(n.data instanceof FormData)n.data.forEach((d,f)=>{a.append(f,d)});else for(const d of Object.keys(n.data))a.append(d,n.data[d]);t.body=a;const l=new Headers(t.headers);l.delete("content-type"),t.headers=l}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t};class Xk extends hy{async request(e){const t=Kk(e,e.webFetchExtra),r=Yk(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,a=await fetch(i,t),l=a.headers.get("content-type")||"";let{responseType:d="text"}=a.ok?e:{};l.includes("application/json")&&(d="json");let f,m;switch(d){case"arraybuffer":case"blob":m=await a.blob(),f=await $k(m);break;case"json":f=await a.json();break;case"document":case"text":default:f=await a.text()}const v={};return a.headers.forEach((b,T)=>{v[T]=b}),{data:f,headers:v,status:a.status,url:a.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}aa("CapacitorHttp",{web:()=>new Xk});var fb;(function(n){n.Dark="DARK",n.Light="LIGHT",n.Default="DEFAULT"})(fb||(fb={}));var mb;(function(n){n.StatusBar="StatusBar",n.NavigationBar="NavigationBar"})(mb||(mb={}));class Wk extends hy{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}aa("SystemBars",{web:()=>new Wk});var ze;(function(n){n.Heavy="HEAVY",n.Medium="MEDIUM",n.Light="LIGHT"})(ze||(ze={}));var pb;(function(n){n.Success="SUCCESS",n.Warning="WARNING",n.Error="ERROR"})(pb||(pb={}));const Qe=aa("Haptics",{web:()=>cf(()=>import("./web-inFs3hza.js"),[]).then(n=>new n.HapticsWeb)}),gb=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"],Qk=[{id:"3",type:"Event",title:"Sunday Worship Service",subtitle:"Main Sanctuary  Sunday 10am",path:"/events/3"},{id:"2",type:"Event",title:"Youth Group Meetup",subtitle:"The Loft  Wed 6pm",path:"/events/2"},{id:"ann-1",type:"Announcement",title:"Church Picnic",subtitle:"Community Event",path:"/events/ann-1"},{id:"s-1",type:"Sermon",title:"Finding Hope in Chaos",subtitle:"Recorded last Sunday",path:"/sermons"},{id:"p-1",type:"Prayer",title:"Prayer Journal",subtitle:"View your requests",path:"/prayers"}],Zk=({onClose:n})=>{const[e,t]=j.useState(""),[r,i]=j.useState([]),[a,l]=j.useState(!1),d=j.useRef(null),f=xn();j.useEffect(()=>{d.current&&d.current.focus()},[]);const m=b=>{const S=b.trim().match(/^([\d\s\w]+?)\s+(\d+)(?::(\d+))?$/i);if(S){const I=S[1].trim(),D=parseInt(S[2]),N=S[3]?parseInt(S[3]):void 0,U=gb.find(B=>B.toLowerCase()===I.toLowerCase()||B.toLowerCase().startsWith(I.toLowerCase()));if(U)return{book:U,chapter:D,verse:N}}return null};j.useEffect(()=>{if(e.trim()===""){i([]);return}const b=e.toLowerCase(),T=[];gb.filter(N=>N.toLowerCase().includes(b)).forEach(N=>{T.push({id:`book-${N}`,type:"Book",title:N,subtitle:"Bible Book",path:"/bible",book:N,chapter:1})});const I=m(e);if(I){const{book:N,chapter:U,verse:B}=I;T.unshift({id:`verse-${N}-${U}-${B||0}`,type:"Verse",title:B?`${N} ${U}:${B}`:`${N} ${U}`,subtitle:B?"Go to verse":"Go to chapter",path:"/bible",book:N,chapter:U,verse:B})}const D=Qk.filter(N=>N.title.toLowerCase().includes(b)||N.subtitle.toLowerCase().includes(b)||N.type.toLowerCase().includes(b));T.push(...D),i(T)},[e]);const v=b=>{if(b.type==="Book"||b.type==="Verse"){const T=new URLSearchParams;b.book&&T.set("book",b.book),b.chapter&&T.set("chapter",b.chapter.toString()),b.verse&&T.set("verse",b.verse.toString()),f(`/bible?${T.toString()}`)}else f(b.path);n()};return h.jsxs("div",{className:"fixed inset-0 z-[100] bg-white dark:bg-[#101a22] animate-fadeIn flex flex-col",children:[h.jsxs("div",{className:"flex items-center gap-3 pt-safe px-4 pb-4 border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:n,className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-gray-500 dark:text-gray-400",children:"arrow_back"})}),h.jsx("div",{className:"flex-1 relative",children:h.jsx("input",{ref:d,type:"text",placeholder:"Search events, sermons, verses...",className:"w-full bg-transparent text-lg font-medium text-slate-900 dark:text-white placeholder-gray-400 outline-none border-none focus:ring-0 p-0",value:e,onChange:b=>t(b.target.value)})}),e&&h.jsx("button",{onClick:()=>t(""),className:"p-1 text-gray-400 hover:text-gray-600",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:e===""?h.jsxs("div",{className:"mt-8",children:[h.jsx("h3",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider mb-4",children:"Suggested"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:["Events","Sermons","John 3:16","Prayers"].map(b=>h.jsx("button",{onClick:()=>t(b),className:"px-4 py-2 rounded-full bg-gray-50 dark:bg-gray-800 text-sm font-medium text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:b},b))})]}):h.jsx("div",{className:"space-y-2",children:r.length>0?r.map(b=>h.jsxs("button",{onClick:()=>v(b),className:"w-full flex items-center gap-4 p-3 rounded-xl hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left group",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary shrink-0 group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:b.type==="Event"?"calendar_month":b.type==="Sermon"?"mic":b.type==="Bible"||b.type==="Book"||b.type==="Verse"?"menu_book":b.type==="Prayer"?"hands_praying":"campaign"})}),h.jsxs("div",{children:[h.jsx("h4",{className:"text-base font-semibold text-slate-900 dark:text-white leading-tight",children:b.title}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[h.jsx("span",{className:"font-bold uppercase text-[10px] mr-1.5 opacity-70",children:b.type}),b.subtitle]})]})]},`${b.type}-${b.id}`)):h.jsxs("div",{className:"text-center py-12 text-gray-400",children:[h.jsx("span",{className:"material-symbols-outlined text-4xl mb-2 opacity-50",children:"search_off"}),h.jsxs("p",{children:['No results found for "',e,'"']})]})})})]})},e2=[{id:"1",title:"Service Time Change",message:"Sunday service will start at 10:30 AM this week.",time:"2h ago",read:!1,type:"alert"},{id:"2",title:"Prayer Request Update",message:"John D. posted a praise report regarding his job.",time:"5h ago",read:!1,type:"info"},{id:"3",title:"Volunteer Reminder",message:"Don't forget the volunteer meeting tomorrow evening.",time:"1d ago",read:!0,type:"info"},{id:"4",title:"Donation Received",message:"Thank you for your generous tithe.",time:"2d ago",read:!0,type:"success"}],t2=({onClose:n,onMarkAllRead:e})=>{const[t,r]=j.useState(e2),i=l=>{r(d=>d.filter(f=>f.id!==l))},a=l=>{r(d=>d.map(f=>f.id===l?{...f,read:!0}:f))};return h.jsxs("div",{className:"fixed inset-0 z-[100] flex justify-end",children:[h.jsx("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-[1px]",onClick:n}),h.jsxs("div",{className:"relative w-full max-w-sm h-full bg-white dark:bg-[#101a22] shadow-2xl animate-slideInRight flex flex-col",children:[h.jsxs("div",{className:"flex items-center justify-between pt-safe px-4 pb-4 border-b border-gray-100 dark:border-gray-800 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md",children:[h.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Notifications"}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>{r(l=>l.map(d=>({...d,read:!0}))),e()},className:"text-xs font-medium text-primary hover:text-blue-600 px-3 py-1.5 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",children:"Mark all read"}),h.jsx("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800",children:h.jsx("span",{className:"material-symbols-outlined",children:"close"})})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:t.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400",children:[h.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"notifications_off"}),h.jsx("p",{children:"No notifications"})]}):t.map(l=>h.jsx("div",{className:`relative p-4 rounded-xl border transition-all ${l.read?"bg-white dark:bg-card-dark border-gray-100 dark:border-gray-800 opacity-80":"bg-blue-50/50 dark:bg-blue-900/10 border-blue-100 dark:border-blue-900/30"}`,onClick:()=>a(l.id),children:h.jsxs("div",{className:"flex gap-3",children:[h.jsx("div",{className:`w-2 h-2 rounded-full mt-2 shrink-0 ${l.read?"bg-gray-300 dark:bg-gray-600":"bg-primary"}`}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("h4",{className:`text-sm ${l.read?"font-medium text-slate-600 dark:text-slate-300":"font-bold text-slate-900 dark:text-white"}`,children:l.title}),h.jsx("span",{className:"text-[10px] text-gray-400 whitespace-nowrap ml-2",children:l.time})]}),h.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 leading-relaxed pr-6",children:l.message})]}),h.jsx("button",{onClick:d=>{d.stopPropagation(),i(l.id)},className:"absolute bottom-2 right-2 p-1.5 text-gray-300 hover:text-red-400 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"delete"})})]})},l.id))})]})]})},n2=({children:n})=>{const e=Is(),t=xn(),[r,i]=j.useState(!1),[a,l]=j.useState(!1),[d,f]=j.useState(2),m=["/","/bible","/events","/prayers","/sermons","/settings"],v=U=>U==="/more"?["/more","/prayers","/sermons","/settings","/profile","/sermons/history"].includes(e.pathname)||e.pathname.startsWith("/sermons/history"):e.pathname===U,b=j.useRef(null),T=j.useRef(null),S=60,I=U=>{T.current=null,b.current={x:U.targetTouches[0].clientX,y:U.targetTouches[0].clientY}},D=U=>{T.current={x:U.targetTouches[0].clientX,y:U.targetTouches[0].clientY}},N=U=>{if(!b.current||!T.current)return;const B=b.current.x-T.current.x,F=b.current.y-T.current.y,Q=B>S,J=B<-S;if(!Q&&!J||Math.abs(F)>Math.abs(B))return;let re=U.target,k=!1;for(;re&&re!==U.currentTarget;){if(re.scrollWidth>re.clientWidth){const R=window.getComputedStyle(re);if(["auto","scroll"].includes(R.overflowX)){k=!0;break}}re=re.parentElement}if(k)return;const M=m.indexOf(e.pathname);M!==-1&&(Q?M<m.length-1&&(Qe.impact({style:ze.Light}),t(m[M+1])):M>0&&(Qe.impact({style:ze.Light}),t(m[M-1])))};return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden pb-24 bg-background-light dark:bg-background-dark touch-pan-y",onTouchStart:I,onTouchMove:D,onTouchEnd:N,children:[h.jsxs("header",{className:"sticky top-0 z-50 flex items-center bg-white/90 dark:bg-[#101a22]/90 backdrop-blur-md px-4 pt-safe pb-3 justify-between border-b border-gray-100 dark:border-gray-800",children:[h.jsx("h1",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight tracking-tight flex-1 text-center",children:"BibleNoteLM"}),h.jsxs("div",{className:"flex items-center justify-end gap-1",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),i(!0)},className:"flex items-center justify-center text-[#111518] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-full transition-colors",children:h.jsx("span",{className:"material-symbols-outlined",children:"search"})}),h.jsxs("button",{onClick:()=>{Qe.impact({style:ze.Light}),l(!0)},className:"flex items-center justify-center text-[#111518] dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-full transition-colors relative",children:[h.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),d>0&&h.jsx("span",{className:"absolute top-2 right-2 w-2 h-2 bg-red-500 rounded-full border border-white dark:border-[#101a22]"})]})]})]}),h.jsx("main",{className:"flex-1 w-full",children:n}),h.jsx("nav",{className:"fixed bottom-0 left-0 w-full bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-lg border-t border-gray-200 dark:border-gray-800 pb-safe z-40",children:h.jsxs("div",{className:"flex items-center justify-around h-16 max-w-lg mx-auto px-2",children:[h.jsxs(it,{to:"/",onClick:()=>Qe.impact({style:ze.Light}),className:`flex flex-col items-center justify-center w-full h-full gap-1 ${v("/")?"text-primary":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[26px] ${v("/")?"filled":""}`,children:"home"}),h.jsx("span",{className:"text-[10px] font-medium",children:"Home"})]}),h.jsxs(it,{to:"/bible",onClick:()=>Qe.impact({style:ze.Light}),className:`flex flex-col items-center justify-center w-full h-full gap-1 ${v("/bible")?"text-primary":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[26px] ${v("/bible")?"filled":""}`,children:"auto_stories"}),h.jsx("span",{className:"text-[10px] font-medium",children:"Bible"})]}),h.jsxs(it,{to:"/events",onClick:()=>Qe.impact({style:ze.Light}),className:`flex flex-col items-center justify-center w-full h-full gap-1 ${v("/events")?"text-primary":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[26px] ${v("/events")?"filled":""}`,children:"calendar_month"}),h.jsx("span",{className:"text-[10px] font-medium",children:"Events"})]}),h.jsxs(it,{to:"/more",onClick:()=>Qe.impact({style:ze.Light}),className:`flex flex-col items-center justify-center w-full h-full gap-1 ${v("/more")?"text-primary":"text-gray-400 hover:text-gray-600 dark:text-gray-500 dark:hover:text-gray-300"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[26px] ${v("/more")?"filled":""}`,children:"more_horiz"}),h.jsx("span",{className:"text-[10px] font-medium",children:"More"})]})]})})]}),r&&h.jsx(Zk,{onClose:()=>i(!1)}),a&&h.jsx(t2,{onClose:()=>l(!1),onMarkAllRead:()=>f(0)})]})};var r2={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let s2,i2;function o2(){return{geminiUrl:s2,vertexUrl:i2}}function a2(n,e,t,r){var i,a;if(!(n!=null&&n.baseUrl)){const l=o2();return e?(i=l.vertexUrl)!==null&&i!==void 0?i:t:(a=l.geminiUrl)!==null&&a!==void 0?a:r}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mi{}function xe(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const a=e[i];return a!=null?String(a):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let m=0;m<f.length;m++){const v=f[m];g(v,e.slice(a+1),t[m])}else for(const m of f)g(m,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];g(f[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const r=e[e.length-1],i=n[r];if(i!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===i)return;if(typeof i=="object"&&typeof t=="object"&&i!==null&&t!==null)Object.assign(i,t);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[r]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let r=0;r<e.length;r++){if(typeof n!="object"||n===null)return t;const i=e[r];if(i.endsWith("[]")){const a=i.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(d=>p(d,e.slice(r+1),t)):t}else return t}else n=n[i]}return n}catch(r){if(r instanceof TypeError)return t;throw r}}function l2(n,e){for(const[t,r]of Object.entries(e)){const i=t.split("."),a=r.split("."),l=new Set;let d=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const m=a[f];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&l.add(m)}pg(n,i,a,0,l)}}function pg(n,e,t,r,i){if(r>=e.length||typeof n!="object"||n===null)return;const a=e[r];if(a.endsWith("[]")){const l=a.slice(0,-2),d=n;if(l in d&&Array.isArray(d[l]))for(const f of d[l])pg(f,e,t,r+1,i)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,d=Object.keys(l).filter(m=>!m.startsWith("_")&&!i.has(m)),f={};for(const m of d)f[m]=l[m];for(const[m,v]of Object.entries(f)){const b=[];for(const T of t.slice(r))T==="*"?b.push(m):b.push(T);g(l,b,v)}for(const m of d)delete l[m]}}else{const l=n;a in l&&pg(l[a],e,t,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fy(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c2(n){const e={},t=p(n,["operationName"]);t!=null&&g(e,["operationName"],t);const r=p(n,["resourceName"]);return r!=null&&g(e,["_url","resourceName"],r),e}function u2(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],h2(l)),e}function d2(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],f2(l)),e}function h2(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>m2(l))),g(e,["generatedVideos"],a)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function f2(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>p2(l))),g(e,["generatedVideos"],a)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function m2(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],b2(t)),e}function p2(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],T2(t)),e}function g2(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function y2(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function v2(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],x2(l)),e}function x2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&g(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function TS(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],_2(l)),e}function _2(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&g(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function b2(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const r=p(n,["encodedVideo"]);r!=null&&g(e,["videoBytes"],fy(r));const i=p(n,["encoding"]);return i!=null&&g(e,["mimeType"],i),e}function T2(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&g(e,["videoBytes"],fy(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var yb;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(yb||(yb={}));var vb;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(vb||(vb={}));var xb;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(xb||(xb={}));var wn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(wn||(wn={}));var _b;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(_b||(_b={}));var bb;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(bb||(bb={}));var Tb;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Tb||(Tb={}));var Eb;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Eb||(Eb={}));var wb;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(wb||(wb={}));var Sb;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Sb||(Sb={}));var Ab;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(Ab||(Ab={}));var Nb;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Nb||(Nb={}));var Cb;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Cb||(Cb={}));var Ib;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Ib||(Ib={}));var Rb;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Rb||(Rb={}));var kb;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(kb||(kb={}));var Db;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Db||(Db={}));var Mb;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(Mb||(Mb={}));var Pb;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Pb||(Pb={}));var cu;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(cu||(cu={}));var Lb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Lb||(Lb={}));var Vb;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Vb||(Vb={}));var Ub;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Ub||(Ub={}));var gg;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(gg||(gg={}));var Ob;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Ob||(Ob={}));var jb;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(jb||(jb={}));var Fb;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Fb||(Fb={}));var qb;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(qb||(qb={}));var Bb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Bb||(Bb={}));var Hb;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Hb||(Hb={}));var Gb;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Gb||(Gb={}));var zb;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(zb||(zb={}));var $b;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})($b||($b={}));var Jb;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Jb||(Jb={}));var Yb;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Yb||(Yb={}));var Kb;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Kb||(Kb={}));var Xb;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Xb||(Xb={}));var Wb;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Wb||(Wb={}));var Qb;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Qb||(Qb={}));var Zb;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Zb||(Zb={}));var eT;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(eT||(eT={}));var tT;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(tT||(tT={}));var nT;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(nT||(nT={}));var rT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(rT||(rT={}));var sT;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(sT||(sT={}));var iT;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(iT||(iT={}));var oT;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(oT||(oT={}));var aT;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(aT||(aT={}));var lT;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(lT||(lT={}));var cT;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cT||(cT={}));var uT;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(uT||(uT={}));var dT;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(dT||(dT={}));var hT;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(hT||(hT={}));var fT;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(fT||(fT={}));var mT;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(mT||(mT={}));var cl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(cl||(cl={}));class yg{constructor(e){const t={};for(const r of e.headers.entries())t[r[0]]=r[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Gc{get text(){var e,t,r,i,a,l,d,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const b=[];for(const T of(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[S,I]of Object.entries(T))S!=="text"&&S!=="thought"&&S!=="thoughtSignature"&&(I!==null||I!==void 0)&&b.push(S);if(typeof T.text=="string"){if(typeof T.thought=="boolean"&&T.thought)continue;v=!0,m+=T.text}}return b.length>0&&console.warn(`there are non-text parts ${b} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,r,i,a,l,d,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const b of(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[T,S]of Object.entries(b))T!=="inlineData"&&(S!==null||S!==void 0)&&v.push(T);b.inlineData&&typeof b.inlineData.data=="string"&&(m+=atob(b.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,r,i,a,l,d,f;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,r,i,a,l,d,f,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.executableCode).map(b=>b.executableCode).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,r,i,a,l,d,f,m;if(((i=(r=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(b=>b.codeExecutionResult).map(b=>b.codeExecutionResult).filter(b=>b!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class pT{}class gT{}class E2{}class w2{}class S2{}class A2{}class yT{}class vT{}class xT{}class N2{}class Ih{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new Ih;let i;const a=e;return t?i=d2(a):i=u2(a),Object.assign(r,i),r}}class _T{}class bT{}class TT{}class ET{}class C2{}class I2{}class R2{}class my{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new my,a=v2(e);return Object.assign(r,a),r}}class k2{}class D2{}class M2{}class wT{}class P2{get text(){var e,t,r;let i="",a=!1;const l=[];for(const d of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[f,m]of Object.entries(d))f!=="text"&&f!=="thought"&&m!==null&&l.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,i+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?i:void 0}get data(){var e,t,r;let i="";const a=[];for(const l of(r=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&r!==void 0?r:[]){for(const[d,f]of Object.entries(l))d!=="inlineData"&&f!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(i+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class L2{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class py{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const r=new py,a=TS(e);return Object.assign(r,a),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ct(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ES(n,e){const t=ct(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function wS(n){return Array.isArray(n)?n.map(e=>Rh(e)):[Rh(n)]}function Rh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function SS(n){const e=Rh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function AS(n){const e=Rh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function ST(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function NS(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>ST(e)):[ST(n)]}function vg(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function AT(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function NT(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Nn(n){if(n==null)throw new Error("ContentUnion is required");return vg(n)?n:{role:"user",parts:NS(n)}}function gy(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const r=Nn(t);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(n.isVertexAI()){const t=Nn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Nn(t)):[Nn(e)]}function Cr(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(AT(n)||NT(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Nn(n)]}const e=[],t=[],r=vg(n[0]);for(const i of n){const a=vg(i);if(a!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(i);else{if(AT(i)||NT(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(i)}}return r||e.push({role:"user",parts:NS(t)}),e}function V2(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(r=>r!=="null");if(t.length===1)e.type=Object.values(wn).includes(t[0].toUpperCase())?t[0].toUpperCase():wn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of t)e.anyOf.push({type:Object.values(wn).includes(r.toUpperCase())?r.toUpperCase():wn.TYPE_UNSPECIFIED})}}function hl(n){const e={},t=["items"],r=["anyOf"],i=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&V2(n.type,e);for(const[l,d]of Object.entries(n))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(wn).includes(d.toUpperCase())?d.toUpperCase():wn.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=hl(d);else if(r.includes(l)){const f=[];for(const m of d){if(m.type=="null"){e.nullable=!0;continue}f.push(hl(m))}e[l]=f}else if(i.includes(l)){const f={};for(const[m,v]of Object.entries(d))f[m]=hl(v);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=d}return e}function yy(n){return hl(n)}function vy(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function xy(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function kl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=hl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=hl(e.response));return n}function Dl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function U2(n,e,t,r=1){const i=!e.startsWith(`${t}/`)&&e.split("/").length===r;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:i?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:i?`${t}/${e}`:e}function pi(n,e){if(typeof e!="string")throw new Error("name must be a string");return U2(n,e,"cachedContents")}function CS(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function vo(n){return fy(n)}function O2(n){return n!=null&&typeof n=="object"&&"name"in n}function j2(n){return n!=null&&typeof n=="object"&&"video"in n}function F2(n){return n!=null&&typeof n=="object"&&"uri"in n}function IS(n){var e;let t;if(O2(n)&&(t=n.name),!(F2(n)&&(t=n.uri,t===void 0))&&!(j2(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const i=t.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${t}`);t=i[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function RS(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function kS(n){for(const e of["models","tunedModels","publisherModels"])if(q2(n,e))return n[e];return[]}function q2(n,e){return n!==null&&typeof n=="object"&&e in n}function B2(n,e={}){const t=n,r={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(r.responseJsonSchema=t.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function H2(n,e={}){const t=[],r=new Set;for(const i of n){const a=i.name;if(r.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);r.add(a);const l=B2(i,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function DS(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const r=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,i=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function G2(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function MS(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const i=t.inlinedResponses;if(!Array.isArray(i)||i.length===0)return n;let a=!1;for(const l of i){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Ml(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function PS(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function z2(n){const e={},t=p(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const r=p(n,["inlinedResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>SD(l))),g(e,["inlinedResponses"],a)}const i=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function $2(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const r=p(n,["gcsDestination","outputUriPrefix"]);r!=null&&g(e,["gcsUri"],r);const i=p(n,["bigqueryDestination","outputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function J2(n){const e={},t=p(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const r=p(n,["gcsUri"]);r!=null&&g(e,["gcsDestination","outputUriPrefix"],r);const i=p(n,["bigqueryUri"]);if(i!=null&&g(e,["bigqueryDestination","outputUri"],i),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function gh(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata","displayName"]);r!=null&&g(e,["displayName"],r);const i=p(n,["metadata","state"]);i!=null&&g(e,["state"],PS(i));const a=p(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(n,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const d=p(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const f=p(n,["metadata","model"]);f!=null&&g(e,["model"],f);const m=p(n,["metadata","output"]);return m!=null&&g(e,["dest"],z2(MS(m))),e}function xg(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(n,["state"]);i!=null&&g(e,["state"],PS(i));const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["createTime"]);l!=null&&g(e,["createTime"],l);const d=p(n,["startTime"]);d!=null&&g(e,["startTime"],d);const f=p(n,["endTime"]);f!=null&&g(e,["endTime"],f);const m=p(n,["updateTime"]);m!=null&&g(e,["updateTime"],m);const v=p(n,["model"]);v!=null&&g(e,["model"],v);const b=p(n,["inputConfig"]);b!=null&&g(e,["src"],Y2(b));const T=p(n,["outputConfig"]);T!=null&&g(e,["dest"],$2(MS(T)));const S=p(n,["completionStats"]);return S!=null&&g(e,["completionStats"],S),e}function Y2(n){const e={},t=p(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const r=p(n,["gcsSource","uris"]);r!=null&&g(e,["gcsUri"],r);const i=p(n,["bigquerySource","inputUri"]);return i!=null&&g(e,["bigqueryUri"],i),e}function K2(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=p(e,["fileName"]);r!=null&&g(t,["fileName"],r);const i=p(e,["inlinedRequests"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>wD(n,l))),g(t,["requests","requests"],a)}return t}function X2(n){const e={},t=p(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const r=p(n,["gcsUri"]);r!=null&&g(e,["gcsSource","uris"],r);const i=p(n,["bigqueryUri"]);if(i!=null&&g(e,["bigquerySource","inputUri"],i),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function W2(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Q2(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function Z2(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function eD(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const r=p(n,["citationMetadata"]);r!=null&&g(e,["citationMetadata"],tD(r));const i=p(n,["tokenCount"]);i!=null&&g(e,["tokenCount"],i);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const d=p(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=p(n,["index"]);f!=null&&g(e,["index"],f);const m=p(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=p(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["safetyRatings"],T)}const b=p(n,["urlContextMetadata"]);return b!=null&&g(e,["urlContextMetadata"],b),e}function tD(n){const e={},t=p(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),g(e,["citations"],r)}return e}function LS(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>DD(a))),g(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&g(e,["role"],r),e}function nD(n,e){const t={},r=p(n,["displayName"]);if(e!==void 0&&r!=null&&g(e,["batch","displayName"],r),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function rD(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(n,["dest"]);return e!==void 0&&i!=null&&g(e,["outputConfig"],J2(G2(i))),t}function CT(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["src"]);i!=null&&g(t,["batch","inputConfig"],K2(n,DS(n,i)));const a=p(e,["config"]);return a!=null&&nD(a,t),t}function sD(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["model"],ct(n,r));const i=p(e,["src"]);i!=null&&g(t,["inputConfig"],X2(DS(n,i)));const a=p(e,["config"]);return a!=null&&rD(a,t),t}function iD(n,e){const t={},r=p(n,["displayName"]);return e!==void 0&&r!=null&&g(e,["batch","displayName"],r),t}function oD(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["src"]);i!=null&&g(t,["batch","inputConfig"],fD(n,i));const a=p(e,["config"]);return a!=null&&iD(a,t),t}function aD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function lD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function cD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["name"]);r!=null&&g(e,["name"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function uD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["name"]);r!=null&&g(e,["name"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function dD(n,e){const t={},r=p(e,["contents"]);if(r!=null){let a=gy(n,r);Array.isArray(a)&&(a=a.map(l=>l)),g(t,["requests[]","request","content"],a)}const i=p(e,["config"]);return i!=null&&(g(t,["_self"],hD(i,t)),l2(t,{"requests[].*":"requests[].request.*"})),t}function hD(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&g(e,["requests[]","taskType"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&g(e,["requests[]","title"],i);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function fD(n,e){const t={},r=p(e,["fileName"]);r!=null&&g(t,["file_name"],r);const i=p(e,["inlinedRequests"]);return i!=null&&g(t,["requests"],dD(n,i)),t}function mD(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function pD(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const r=p(n,["args"]);r!=null&&g(e,["args"],r);const i=p(n,["name"]);if(i!=null&&g(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function gD(n){const e={},t=p(n,["mode"]);t!=null&&g(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&g(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function yD(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&g(t,["systemInstruction"],LS(Nn(i)));const a=p(e,["temperature"]);a!=null&&g(r,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(r,["topP"],l);const d=p(e,["topK"]);d!=null&&g(r,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(r,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&g(r,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&g(r,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&g(r,["responseLogprobs"],b);const T=p(e,["logprobs"]);T!=null&&g(r,["logprobs"],T);const S=p(e,["presencePenalty"]);S!=null&&g(r,["presencePenalty"],S);const I=p(e,["frequencyPenalty"]);I!=null&&g(r,["frequencyPenalty"],I);const D=p(e,["seed"]);D!=null&&g(r,["seed"],D);const N=p(e,["responseMimeType"]);N!=null&&g(r,["responseMimeType"],N);const U=p(e,["responseSchema"]);U!=null&&g(r,["responseSchema"],yy(U));const B=p(e,["responseJsonSchema"]);if(B!=null&&g(r,["responseJsonSchema"],B),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=p(e,["safetySettings"]);if(t!==void 0&&F!=null){let V=F;Array.isArray(V)&&(V=V.map(Ae=>MD(Ae))),g(t,["safetySettings"],V)}const Q=p(e,["tools"]);if(t!==void 0&&Q!=null){let V=Dl(Q);Array.isArray(V)&&(V=V.map(Ae=>LD(kl(Ae)))),g(t,["tools"],V)}const J=p(e,["toolConfig"]);if(t!==void 0&&J!=null&&g(t,["toolConfig"],PD(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=p(e,["cachedContent"]);t!==void 0&&re!=null&&g(t,["cachedContent"],pi(n,re));const k=p(e,["responseModalities"]);k!=null&&g(r,["responseModalities"],k);const M=p(e,["mediaResolution"]);M!=null&&g(r,["mediaResolution"],M);const R=p(e,["speechConfig"]);if(R!=null&&g(r,["speechConfig"],vy(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(r,["thinkingConfig"],L);const O=p(e,["imageConfig"]);O!=null&&g(r,["imageConfig"],ED(O));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&g(r,["enableEnhancedCivicAnswers"],H),r}function vD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>eD(m))),g(e,["candidates"],f)}const i=p(n,["modelVersion"]);i!=null&&g(e,["modelVersion"],i);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&g(e,["responseId"],l);const d=p(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function xD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function _D(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],Ml(n,r)),t}function bD(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function TD(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function ED(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const r=p(n,["imageSize"]);if(r!=null&&g(e,["imageSize"],r),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function wD(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["request","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let d=Cr(i);Array.isArray(d)&&(d=d.map(f=>LS(f))),g(t,["request","contents"],d)}const a=p(e,["metadata"]);a!=null&&g(t,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(t,["request","generationConfig"],yD(n,l,p(t,["request"],{}))),t}function SD(n){const e={},t=p(n,["response"]);t!=null&&g(e,["response"],vD(t));const r=p(n,["error"]);return r!=null&&g(e,["error"],r),e}function AD(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);if(e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function ND(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);e!==void 0&&i!=null&&g(e,["_query","pageToken"],i);const a=p(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function CD(n){const e={},t=p(n,["config"]);return t!=null&&AD(t,e),e}function ID(n){const e={},t=p(n,["config"]);return t!=null&&ND(t,e),e}function RD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["operations"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>gh(l))),g(e,["batchJobs"],a)}return e}function kD(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["batchPredictionJobs"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>xg(l))),g(e,["batchJobs"],a)}return e}function DD(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&g(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&g(e,["executableCode"],i);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],mD(a));const l=p(n,["functionCall"]);l!=null&&g(e,["functionCall"],pD(l));const d=p(n,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],W2(f));const m=p(n,["text"]);m!=null&&g(e,["text"],m);const v=p(n,["thought"]);v!=null&&g(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function MD(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(n,["threshold"]);return r!=null&&g(e,["threshold"],r),e}function PD(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],gD(t));const r=p(n,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],r),e}function LD(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(b=>b)),g(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&g(e,["computerUse"],i);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],bD(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],TD(f));const m=p(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var li;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(li||(li={}));class la{constructor(e,t,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,r,i)}init(e,t,r){var i,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!r||Object.keys(r).length===0?l={config:{}}:typeof r=="object"?l=Object.assign({},r):l=r,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(i=l.config)===null||i===void 0?void 0:i.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class VD extends mi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new la(li.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=CT(this.apiClient,e),r=t._url,i=xe("{model}:batchGenerateContent",r),d=t.batch.inputConfig.requests,f=d.requests,m=[];for(const v of f){const b=Object.assign({},v);if(b.systemInstruction){const T=b.systemInstruction;delete b.systemInstruction;const S=b.request;S.systemInstruction=T,b.request=S}m.push(b)}return d.requests=m,delete t.config,delete t._url,delete t._query,{path:i,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const r=t?Object.assign({},t):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?r.dest=`${a.slice(0,-6)}/dest`:r.dest=`${a}_dest_${i}`;else if(l)r.dest=`${l}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=sD(this.apiClient,e);return d=xe("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>xg(v))}else{const m=CT(this.apiClient,e);return d=xe("{model}:batchGenerateContent",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>gh(v))}}async createEmbeddingsInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=oD(this.apiClient,e);return a=xe("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>gh(f))}}async get(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=_D(this.apiClient,e);return d=xe("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>xg(v))}else{const m=xD(this.apiClient,e);return d=xe("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>gh(v))}}async cancel(e){var t,r,i,a;let l="",d={};if(this.apiClient.isVertexAI()){const f=Z2(this.apiClient,e);l=xe("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=Q2(this.apiClient,e);l=xe("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=ID(e);return d=xe("batchPredictionJobs",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=kD(v),T=new wT;return Object.assign(T,b),T})}else{const m=CD(e);return d=xe("batches",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=RD(v),T=new wT;return Object.assign(T,b),T})}}async delete(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=lD(this.apiClient,e);return d=xe("batchPredictionJobs/{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>uD(v))}else{const m=aD(this.apiClient,e);return d=xe("batches/{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>cD(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function UD(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function IT(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>oM(a))),g(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&g(e,["role"],r),e}function OD(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(n,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let v=Cr(l);Array.isArray(v)&&(v=v.map(b=>IT(b))),g(e,["contents"],v)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],IT(Nn(d)));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let v=f;Array.isArray(v)&&(v=v.map(b=>lM(b))),g(e,["tools"],v)}const m=p(n,["toolConfig"]);if(e!==void 0&&m!=null&&g(e,["toolConfig"],aM(m)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function jD(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(n,["expireTime"]);e!==void 0&&i!=null&&g(e,["expireTime"],i);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let b=Cr(l);Array.isArray(b)&&(b=b.map(T=>T)),g(e,["contents"],b)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],Nn(d));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let b=f;Array.isArray(b)&&(b=b.map(T=>cM(T))),g(e,["tools"],b)}const m=p(n,["toolConfig"]);e!==void 0&&m!=null&&g(e,["toolConfig"],m);const v=p(n,["kmsKeyName"]);return e!==void 0&&v!=null&&g(e,["encryption_spec","kmsKeyName"],v),t}function FD(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["model"],ES(n,r));const i=p(e,["config"]);return i!=null&&OD(i,t),t}function qD(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["model"],ES(n,r));const i=p(e,["config"]);return i!=null&&jD(i,t),t}function BD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],pi(n,r)),t}function HD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],pi(n,r)),t}function GD(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function zD(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function $D(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function JD(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const r=p(n,["args"]);r!=null&&g(e,["args"],r);const i=p(n,["name"]);if(i!=null&&g(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function YD(n){const e={},t=p(n,["mode"]);t!=null&&g(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&g(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function KD(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const r=p(n,["name"]);r!=null&&g(e,["name"],r);const i=p(n,["parameters"]);i!=null&&g(e,["parameters"],i);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function XD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],pi(n,r)),t}function WD(n,e){const t={},r=p(e,["name"]);return r!=null&&g(t,["_url","name"],pi(n,r)),t}function QD(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ZD(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function eM(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),t}function tM(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),t}function nM(n){const e={},t=p(n,["config"]);return t!=null&&eM(t,e),e}function rM(n){const e={},t=p(n,["config"]);return t!=null&&tM(t,e),e}function sM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function iM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["cachedContents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function oM(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&g(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&g(e,["executableCode"],i);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],$D(a));const l=p(n,["functionCall"]);l!=null&&g(e,["functionCall"],JD(l));const d=p(n,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],UD(f));const m=p(n,["text"]);m!=null&&g(e,["text"],m);const v=p(n,["thought"]);v!=null&&g(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function aM(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],YD(t));const r=p(n,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],r),e}function lM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(b=>b)),g(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&g(e,["computerUse"],i);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],QD(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],ZD(f));const m=p(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function cM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(T=>KD(T))),g(e,["functionDeclarations"],b)}const r=p(n,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function uM(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(n,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),t}function dM(n,e){const t={},r=p(n,["ttl"]);e!==void 0&&r!=null&&g(e,["ttl"],r);const i=p(n,["expireTime"]);return e!==void 0&&i!=null&&g(e,["expireTime"],i),t}function hM(n,e){const t={},r=p(e,["name"]);r!=null&&g(t,["_url","name"],pi(n,r));const i=p(e,["config"]);return i!=null&&uM(i,t),t}function fM(n,e){const t={},r=p(e,["name"]);r!=null&&g(t,["_url","name"],pi(n,r));const i=p(e,["config"]);return i!=null&&dM(i,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mM extends mi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new la(li.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(t),t)}async create(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=qD(this.apiClient,e);return d=xe("cachedContents",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const m=FD(this.apiClient,e);return d=xe("cachedContents",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async get(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=WD(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const m=XD(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async delete(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=HD(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=zD(v),T=new TT;return Object.assign(T,b),T})}else{const m=BD(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=GD(v),T=new TT;return Object.assign(T,b),T})}}async update(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=fM(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>v)}else{const m=hM(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>v)}}async listInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=rM(e);return d=xe("cachedContents",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=iM(v),T=new ET;return Object.assign(T,b),T})}else{const m=nM(e);return d=xe("cachedContents",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=sM(v),T=new ET;return Object.assign(T,b),T})}}}function kh(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}function RT(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ve(n){return this instanceof Ve?(this.v=n,this):new Ve(n)}function Jr(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),i[Symbol.asyncIterator]=function(){return this},i;function l(S){return function(I){return Promise.resolve(I).then(S,b)}}function d(S,I){r[S]&&(i[S]=function(D){return new Promise(function(N,U){a.push([S,D,N,U])>1||f(S,D)})},I&&(i[S]=I(i[S])))}function f(S,I){try{m(r[S](I))}catch(D){T(a[0][3],D)}}function m(S){S.value instanceof Ve?Promise.resolve(S.value.v).then(v,b):T(a[0][2],S)}function v(S){f("next",S)}function b(S){f("throw",S)}function T(S,I){S(I),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Yr(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof RT=="function"?RT(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(l){return new Promise(function(d,f){l=n[a](l),i(d,f,l.done,l.value)})}}function i(a,l,d,f){Promise.resolve(f).then(function(m){a({value:m,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pM(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:VS(t)}function VS(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function gM(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function kT(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let r=0;for(;r<t;)if(n[r].role==="user")e.push(n[r]),r++;else{const i=[];let a=!0;for(;r<t&&n[r].role==="model";)i.push(n[r]),a&&!VS(n[r])&&(a=!1),r++;a?e.push(...i):e.pop()}return e}class yM{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new vM(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class vM{constructor(e,t,r,i={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=r,this.config=i,this.history=a,this.sendPromise=Promise.resolve(),gM(a)}async sendMessage(e){var t;await this.sendPromise;const r=Nn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,d;const f=await i,m=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,v=f.automaticFunctionCallingHistory,b=this.getHistory(!0).length;let T=[];v!=null&&(T=(d=v.slice(b))!==null&&d!==void 0?d:[]);const S=m?[m]:[];this.recordHistory(r,S,T)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var t;await this.sendPromise;const r=Nn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const a=await i;return this.processStreamResponse(a,r)}getHistory(e=!1){const t=e?kT(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Jr(this,arguments,function*(){var i,a,l,d,f,m;const v=[];try{for(var b=!0,T=Yr(e),S;S=yield Ve(T.next()),i=S.done,!i;b=!0){d=S.value,b=!1;const I=d;if(pM(I)){const D=(m=(f=I.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content;D!==void 0&&v.push(D)}yield yield Ve(I)}}catch(I){a={error:I}}finally{try{!b&&!i&&(l=T.return)&&(yield Ve(l.call(T)))}finally{if(a)throw a.error}}this.recordHistory(t,v)})}recordHistory(e,t,r){let i=[];t.length>0&&t.every(a=>a.role!==void 0)?i=t:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...kT(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,uf.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xM(n){const e={},t=p(n,["file"]);return t!=null&&g(e,["file"],t),e}function _M(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function bM(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],IS(t)),e}function TM(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function EM(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],IS(t)),e}function wM(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),t}function SM(n){const e={},t=p(n,["config"]);return t!=null&&wM(t,e),e}function AM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["files"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class NM extends mi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new la(li.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=SM(e);return a=xe("files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>{const m=AM(f),v=new k2;return Object.assign(v,m),v})}}async createInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=xM(e);return a=xe("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=_M(f),v=new D2;return Object.assign(v,m),v})}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=EM(e);return a=xe("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=bM(e);return a=xe("files/{file}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>{const m=TM(f),v=new M2;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yh(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function CM(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>GM(a))),g(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&g(e,["role"],r),e}function IM(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function RM(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const r=p(n,["args"]);r!=null&&g(e,["args"],r);const i=p(n,["name"]);if(i!=null&&g(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function kM(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const r=p(n,["name"]);r!=null&&g(e,["name"],r);const i=p(n,["parameters"]);i!=null&&g(e,["parameters"],i);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function DM(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const r=p(n,["responseJsonSchema"]);r!=null&&g(e,["responseJsonSchema"],r);const i=p(n,["audioTimestamp"]);i!=null&&g(e,["audioTimestamp"],i);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const d=p(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=p(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const m=p(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=p(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const b=p(n,["presencePenalty"]);b!=null&&g(e,["presencePenalty"],b);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const S=p(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const I=p(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const D=p(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=p(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const U=p(n,["seed"]);U!=null&&g(e,["seed"],U);const B=p(n,["speechConfig"]);B!=null&&g(e,["speechConfig"],B);const F=p(n,["stopSequences"]);F!=null&&g(e,["stopSequences"],F);const Q=p(n,["temperature"]);Q!=null&&g(e,["temperature"],Q);const J=p(n,["thinkingConfig"]);J!=null&&g(e,["thinkingConfig"],J);const re=p(n,["topK"]);re!=null&&g(e,["topK"],re);const k=p(n,["topP"]);if(k!=null&&g(e,["topP"],k),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function MM(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function PM(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function LM(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],r);const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],xy(b));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const S=p(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=p(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],CM(Nn(I)));const D=p(n,["tools"]);if(e!==void 0&&D!=null){let re=Dl(D);Array.isArray(re)&&(re=re.map(k=>$M(kl(k)))),g(e,["setup","tools"],re)}const N=p(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],zM(N));const U=p(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&g(e,["setup","outputAudioTranscription"],B);const F=p(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&g(e,["setup","realtimeInputConfig"],F);const Q=p(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&g(e,["setup","contextWindowCompression"],Q);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&g(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function VM(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],DM(r));const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],xy(b));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const S=p(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=p(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],Nn(I));const D=p(n,["tools"]);if(e!==void 0&&D!=null){let k=Dl(D);Array.isArray(k)&&(k=k.map(M=>JM(kl(M)))),g(e,["setup","tools"],k)}const N=p(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],N);const U=p(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&g(e,["setup","outputAudioTranscription"],B);const F=p(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&g(e,["setup","realtimeInputConfig"],F);const Q=p(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&g(e,["setup","contextWindowCompression"],Q);const J=p(n,["proactivity"]);e!==void 0&&J!=null&&g(e,["setup","proactivity"],J);const re=p(n,["explicitVadSignal"]);return e!==void 0&&re!=null&&g(e,["setup","explicitVadSignal"],re),t}function UM(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["setup","model"],ct(n,r));const i=p(e,["config"]);return i!=null&&g(t,["config"],LM(i,t)),t}function OM(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["setup","model"],ct(n,r));const i=p(e,["config"]);return i!=null&&g(t,["config"],VM(i,t)),t}function jM(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function FM(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),g(e,["weightedPrompts"],r)}return e}function qM(n){const e={},t=p(n,["media"]);if(t!=null){let m=wS(t);Array.isArray(m)&&(m=m.map(v=>yh(v))),g(e,["mediaChunks"],m)}const r=p(n,["audio"]);r!=null&&g(e,["audio"],yh(AS(r)));const i=p(n,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);const a=p(n,["video"]);a!=null&&g(e,["video"],yh(SS(a)));const l=p(n,["text"]);l!=null&&g(e,["text"],l);const d=p(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function BM(n){const e={},t=p(n,["media"]);if(t!=null){let m=wS(t);Array.isArray(m)&&(m=m.map(v=>v)),g(e,["mediaChunks"],m)}const r=p(n,["audio"]);r!=null&&g(e,["audio"],AS(r));const i=p(n,["audioStreamEnd"]);i!=null&&g(e,["audioStreamEnd"],i);const a=p(n,["video"]);a!=null&&g(e,["video"],SS(a));const l=p(n,["text"]);l!=null&&g(e,["text"],l);const d=p(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function HM(n){const e={},t=p(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const r=p(n,["serverContent"]);r!=null&&g(e,["serverContent"],r);const i=p(n,["toolCall"]);i!=null&&g(e,["toolCall"],i);const a=p(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(n,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],YM(l));const d=p(n,["goAway"]);d!=null&&g(e,["goAway"],d);const f=p(n,["sessionResumptionUpdate"]);f!=null&&g(e,["sessionResumptionUpdate"],f);const m=p(n,["voiceActivityDetectionSignal"]);return m!=null&&g(e,["voiceActivityDetectionSignal"],m),e}function GM(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&g(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&g(e,["executableCode"],i);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],IM(a));const l=p(n,["functionCall"]);l!=null&&g(e,["functionCall"],RM(l));const d=p(n,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],yh(f));const m=p(n,["text"]);m!=null&&g(e,["text"],m);const v=p(n,["thought"]);v!=null&&g(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function zM(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function $M(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(b=>b)),g(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&g(e,["computerUse"],i);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],MM(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],PM(f));const m=p(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function JM(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(T=>kM(T))),g(e,["functionDeclarations"],b)}const r=p(n,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function YM(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const r=p(n,["cachedContentTokenCount"]);r!=null&&g(e,["cachedContentTokenCount"],r);const i=p(n,["candidatesTokenCount"]);i!=null&&g(e,["responseTokenCount"],i);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(n,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const d=p(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const f=p(n,["promptTokensDetails"]);if(f!=null){let S=f;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["promptTokensDetails"],S)}const m=p(n,["cacheTokensDetails"]);if(m!=null){let S=m;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["cacheTokensDetails"],S)}const v=p(n,["candidatesTokensDetails"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["responseTokensDetails"],S)}const b=p(n,["toolUsePromptTokensDetails"]);if(b!=null){let S=b;Array.isArray(S)&&(S=S.map(I=>I)),g(e,["toolUsePromptTokensDetails"],S)}const T=p(n,["trafficType"]);return T!=null&&g(e,["trafficType"],T),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KM(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function XM(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const r=p(n,["citationMetadata"]);r!=null&&g(e,["citationMetadata"],WM(r));const i=p(n,["tokenCount"]);i!=null&&g(e,["tokenCount"],i);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const d=p(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=p(n,["index"]);f!=null&&g(e,["index"],f);const m=p(n,["logprobsResult"]);m!=null&&g(e,["logprobsResult"],m);const v=p(n,["safetyRatings"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),g(e,["safetyRatings"],T)}const b=p(n,["urlContextMetadata"]);return b!=null&&g(e,["urlContextMetadata"],b),e}function WM(n){const e={},t=p(n,["citationSources"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>i)),g(e,["citations"],r)}return e}function QM(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let a=Cr(i);Array.isArray(a)&&(a=a.map(l=>l)),g(t,["contents"],a)}return t}function ZM(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["tokensInfo"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),g(e,["tokensInfo"],i)}return e}function eP(n){const e={},t=p(n,["values"]);t!=null&&g(e,["values"],t);const r=p(n,["statistics"]);return r!=null&&g(e,["statistics"],tP(r)),e}function tP(n){const e={},t=p(n,["truncated"]);t!=null&&g(e,["truncated"],t);const r=p(n,["token_count"]);return r!=null&&g(e,["tokenCount"],r),e}function df(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>u4(a))),g(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&g(e,["role"],r),e}function nP(n){const e={},t=p(n,["controlType"]);t!=null&&g(e,["controlType"],t);const r=p(n,["enableControlImageComputation"]);return r!=null&&g(e,["computeControl"],r),e}function rP(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function sP(n,e){const t={},r=p(n,["systemInstruction"]);e!==void 0&&r!=null&&g(e,["systemInstruction"],Nn(r));const i=p(n,["tools"]);if(e!==void 0&&i!=null){let l=i;Array.isArray(l)&&(l=l.map(d=>FS(d))),g(e,["tools"],l)}const a=p(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],KP(a)),t}function iP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let l=Cr(i);Array.isArray(l)&&(l=l.map(d=>df(d))),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&rP(a),t}function oP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let l=Cr(i);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&sP(a,t),t}function aP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["totalTokens"]);r!=null&&g(e,["totalTokens"],r);const i=p(n,["cachedContentTokenCount"]);return i!=null&&g(e,["cachedContentTokenCount"],i),e}function lP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["totalTokens"]);return r!=null&&g(e,["totalTokens"],r),e}function cP(n,e){const t={},r=p(e,["model"]);return r!=null&&g(t,["_url","name"],ct(n,r)),t}function uP(n,e){const t={},r=p(e,["model"]);return r!=null&&g(t,["_url","name"],ct(n,r)),t}function dP(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function hP(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function fP(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const i=p(n,["negativePrompt"]);e!==void 0&&i!=null&&g(e,["parameters","negativePrompt"],i);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const m=p(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&g(e,["parameters","includeSafetyAttributes"],b);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const S=p(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const I=p(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const D=p(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=p(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const U=p(n,["labels"]);e!==void 0&&U!=null&&g(e,["labels"],U);const B=p(n,["editMode"]);e!==void 0&&B!=null&&g(e,["parameters","editMode"],B);const F=p(n,["baseSteps"]);return e!==void 0&&F!=null&&g(e,["parameters","editConfig","baseSteps"],F),t}function mP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["prompt"]);i!=null&&g(t,["instances[0]","prompt"],i);const a=p(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>g4(f))),g(t,["instances[0]","referenceImages"],d)}const l=p(e,["config"]);return l!=null&&fP(l,t),t}function pP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>hf(a))),g(e,["generatedImages"],i)}return e}function gP(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&g(e,["requests[]","taskType"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&g(e,["requests[]","title"],i);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function yP(n,e){const t={},r=p(n,["taskType"]);e!==void 0&&r!=null&&g(e,["instances[]","task_type"],r);const i=p(n,["title"]);e!==void 0&&i!=null&&g(e,["instances[]","title"],i);const a=p(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(n,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const d=p(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function vP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let d=gy(n,i);Array.isArray(d)&&(d=d.map(f=>f)),g(t,["requests[]","content"],d)}const a=p(e,["config"]);a!=null&&gP(a,t);const l=p(e,["model"]);return l!==void 0&&g(t,["requests[]","model"],ct(n,l)),t}function xP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let l=gy(n,i);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&yP(a,t),t}function _P(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const i=p(n,["metadata"]);return i!=null&&g(e,["metadata"],i),e}function bP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["predictions[]","embeddings"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>eP(l))),g(e,["embeddings"],a)}const i=p(n,["metadata"]);return i!=null&&g(e,["metadata"],i),e}function TP(n){const e={},t=p(n,["endpoint"]);t!=null&&g(e,["name"],t);const r=p(n,["deployedModelId"]);return r!=null&&g(e,["deployedModelId"],r),e}function EP(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function wP(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const r=p(n,["args"]);r!=null&&g(e,["args"],r);const i=p(n,["name"]);if(i!=null&&g(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function SP(n){const e={},t=p(n,["mode"]);t!=null&&g(e,["mode"],t);const r=p(n,["allowedFunctionNames"]);if(r!=null&&g(e,["allowedFunctionNames"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function AP(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const r=p(n,["name"]);r!=null&&g(e,["name"],r);const i=p(n,["parameters"]);i!=null&&g(e,["parameters"],i);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function NP(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&g(t,["systemInstruction"],df(Nn(i)));const a=p(e,["temperature"]);a!=null&&g(r,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(r,["topP"],l);const d=p(e,["topK"]);d!=null&&g(r,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(r,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&g(r,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&g(r,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&g(r,["responseLogprobs"],b);const T=p(e,["logprobs"]);T!=null&&g(r,["logprobs"],T);const S=p(e,["presencePenalty"]);S!=null&&g(r,["presencePenalty"],S);const I=p(e,["frequencyPenalty"]);I!=null&&g(r,["frequencyPenalty"],I);const D=p(e,["seed"]);D!=null&&g(r,["seed"],D);const N=p(e,["responseMimeType"]);N!=null&&g(r,["responseMimeType"],N);const U=p(e,["responseSchema"]);U!=null&&g(r,["responseSchema"],yy(U));const B=p(e,["responseJsonSchema"]);if(B!=null&&g(r,["responseJsonSchema"],B),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const F=p(e,["safetySettings"]);if(t!==void 0&&F!=null){let V=F;Array.isArray(V)&&(V=V.map(Ae=>y4(Ae))),g(t,["safetySettings"],V)}const Q=p(e,["tools"]);if(t!==void 0&&Q!=null){let V=Dl(Q);Array.isArray(V)&&(V=V.map(Ae=>w4(kl(Ae)))),g(t,["tools"],V)}const J=p(e,["toolConfig"]);if(t!==void 0&&J!=null&&g(t,["toolConfig"],E4(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const re=p(e,["cachedContent"]);t!==void 0&&re!=null&&g(t,["cachedContent"],pi(n,re));const k=p(e,["responseModalities"]);k!=null&&g(r,["responseModalities"],k);const M=p(e,["mediaResolution"]);M!=null&&g(r,["mediaResolution"],M);const R=p(e,["speechConfig"]);if(R!=null&&g(r,["speechConfig"],vy(R)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(r,["thinkingConfig"],L);const O=p(e,["imageConfig"]);O!=null&&g(r,["imageConfig"],e4(O));const H=p(e,["enableEnhancedCivicAnswers"]);return H!=null&&g(r,["enableEnhancedCivicAnswers"],H),r}function CP(n,e,t){const r={},i=p(e,["systemInstruction"]);t!==void 0&&i!=null&&g(t,["systemInstruction"],Nn(i));const a=p(e,["temperature"]);a!=null&&g(r,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(r,["topP"],l);const d=p(e,["topK"]);d!=null&&g(r,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(r,["candidateCount"],f);const m=p(e,["maxOutputTokens"]);m!=null&&g(r,["maxOutputTokens"],m);const v=p(e,["stopSequences"]);v!=null&&g(r,["stopSequences"],v);const b=p(e,["responseLogprobs"]);b!=null&&g(r,["responseLogprobs"],b);const T=p(e,["logprobs"]);T!=null&&g(r,["logprobs"],T);const S=p(e,["presencePenalty"]);S!=null&&g(r,["presencePenalty"],S);const I=p(e,["frequencyPenalty"]);I!=null&&g(r,["frequencyPenalty"],I);const D=p(e,["seed"]);D!=null&&g(r,["seed"],D);const N=p(e,["responseMimeType"]);N!=null&&g(r,["responseMimeType"],N);const U=p(e,["responseSchema"]);U!=null&&g(r,["responseSchema"],yy(U));const B=p(e,["responseJsonSchema"]);B!=null&&g(r,["responseJsonSchema"],B);const F=p(e,["routingConfig"]);F!=null&&g(r,["routingConfig"],F);const Q=p(e,["modelSelectionConfig"]);Q!=null&&g(r,["modelConfig"],Q);const J=p(e,["safetySettings"]);if(t!==void 0&&J!=null){let G=J;Array.isArray(G)&&(G=G.map(ae=>ae)),g(t,["safetySettings"],G)}const re=p(e,["tools"]);if(t!==void 0&&re!=null){let G=Dl(re);Array.isArray(G)&&(G=G.map(ae=>FS(kl(ae)))),g(t,["tools"],G)}const k=p(e,["toolConfig"]);t!==void 0&&k!=null&&g(t,["toolConfig"],k);const M=p(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const R=p(e,["cachedContent"]);t!==void 0&&R!=null&&g(t,["cachedContent"],pi(n,R));const L=p(e,["responseModalities"]);L!=null&&g(r,["responseModalities"],L);const O=p(e,["mediaResolution"]);O!=null&&g(r,["mediaResolution"],O);const H=p(e,["speechConfig"]);H!=null&&g(r,["speechConfig"],vy(H));const V=p(e,["audioTimestamp"]);V!=null&&g(r,["audioTimestamp"],V);const Ae=p(e,["thinkingConfig"]);Ae!=null&&g(r,["thinkingConfig"],Ae);const $e=p(e,["imageConfig"]);if($e!=null&&g(r,["imageConfig"],t4($e)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return r}function DT(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let l=Cr(i);Array.isArray(l)&&(l=l.map(d=>df(d))),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],NP(n,a,t)),t}function MT(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["contents"]);if(i!=null){let l=Cr(i);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],CP(n,a,t)),t}function PT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(m=>XM(m))),g(e,["candidates"],f)}const i=p(n,["modelVersion"]);i!=null&&g(e,["modelVersion"],i);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&g(e,["responseId"],l);const d=p(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function LT(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["candidates"]);if(r!=null){let m=r;Array.isArray(m)&&(m=m.map(v=>v)),g(e,["candidates"],m)}const i=p(n,["createTime"]);i!=null&&g(e,["createTime"],i);const a=p(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const d=p(n,["responseId"]);d!=null&&g(e,["responseId"],d);const f=p(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function IP(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(n,["aspectRatio"]);e!==void 0&&i!=null&&g(e,["parameters","aspectRatio"],i);const a=p(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const d=p(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const f=p(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&g(e,["parameters","includeSafetyAttributes"],f);const m=p(n,["includeRaiReason"]);e!==void 0&&m!=null&&g(e,["parameters","includeRaiReason"],m);const v=p(n,["language"]);e!==void 0&&v!=null&&g(e,["parameters","language"],v);const b=p(n,["outputMimeType"]);e!==void 0&&b!=null&&g(e,["parameters","outputOptions","mimeType"],b);const T=p(n,["outputCompressionQuality"]);if(e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const S=p(n,["imageSize"]);if(e!==void 0&&S!=null&&g(e,["parameters","sampleImageSize"],S),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function RP(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const i=p(n,["negativePrompt"]);e!==void 0&&i!=null&&g(e,["parameters","negativePrompt"],i);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const m=p(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&g(e,["parameters","safetySetting"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const b=p(n,["includeSafetyAttributes"]);e!==void 0&&b!=null&&g(e,["parameters","includeSafetyAttributes"],b);const T=p(n,["includeRaiReason"]);e!==void 0&&T!=null&&g(e,["parameters","includeRaiReason"],T);const S=p(n,["language"]);e!==void 0&&S!=null&&g(e,["parameters","language"],S);const I=p(n,["outputMimeType"]);e!==void 0&&I!=null&&g(e,["parameters","outputOptions","mimeType"],I);const D=p(n,["outputCompressionQuality"]);e!==void 0&&D!=null&&g(e,["parameters","outputOptions","compressionQuality"],D);const N=p(n,["addWatermark"]);e!==void 0&&N!=null&&g(e,["parameters","addWatermark"],N);const U=p(n,["labels"]);e!==void 0&&U!=null&&g(e,["labels"],U);const B=p(n,["imageSize"]);e!==void 0&&B!=null&&g(e,["parameters","sampleImageSize"],B);const F=p(n,["enhancePrompt"]);return e!==void 0&&F!=null&&g(e,["parameters","enhancePrompt"],F),t}function kP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["prompt"]);i!=null&&g(t,["instances[0]","prompt"],i);const a=p(e,["config"]);return a!=null&&IP(a,t),t}function DP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["prompt"]);i!=null&&g(t,["instances[0]","prompt"],i);const a=p(e,["config"]);return a!=null&&RP(a,t),t}function MP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>zP(l))),g(e,["generatedImages"],a)}const i=p(n,["positivePromptSafetyAttributes"]);return i!=null&&g(e,["positivePromptSafetyAttributes"],OS(i)),e}function PP(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>hf(l))),g(e,["generatedImages"],a)}const i=p(n,["positivePromptSafetyAttributes"]);return i!=null&&g(e,["positivePromptSafetyAttributes"],jS(i)),e}function LP(n,e){const t={},r=p(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const i=p(n,["durationSeconds"]);if(e!==void 0&&i!=null&&g(e,["parameters","durationSeconds"],i),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(n,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const d=p(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(n,["negativePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","negativePrompt"],f);const m=p(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&g(e,["parameters","enhancePrompt"],m),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=p(n,["lastFrame"]);e!==void 0&&v!=null&&g(e,["instances[0]","lastFrame"],ff(v));const b=p(n,["referenceImages"]);if(e!==void 0&&b!=null){let T=b;Array.isArray(T)&&(T=T.map(S=>U4(S))),g(e,["instances[0]","referenceImages"],T)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function VP(n,e){const t={},r=p(n,["numberOfVideos"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const a=p(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(n,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const d=p(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const f=p(n,["aspectRatio"]);e!==void 0&&f!=null&&g(e,["parameters","aspectRatio"],f);const m=p(n,["resolution"]);e!==void 0&&m!=null&&g(e,["parameters","resolution"],m);const v=p(n,["personGeneration"]);e!==void 0&&v!=null&&g(e,["parameters","personGeneration"],v);const b=p(n,["pubsubTopic"]);e!==void 0&&b!=null&&g(e,["parameters","pubsubTopic"],b);const T=p(n,["negativePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","negativePrompt"],T);const S=p(n,["enhancePrompt"]);e!==void 0&&S!=null&&g(e,["parameters","enhancePrompt"],S);const I=p(n,["generateAudio"]);e!==void 0&&I!=null&&g(e,["parameters","generateAudio"],I);const D=p(n,["lastFrame"]);e!==void 0&&D!=null&&g(e,["instances[0]","lastFrame"],Wr(D));const N=p(n,["referenceImages"]);if(e!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(Q=>O4(Q))),g(e,["instances[0]","referenceImages"],F)}const U=p(n,["mask"]);e!==void 0&&U!=null&&g(e,["instances[0]","mask"],V4(U));const B=p(n,["compressionQuality"]);return e!==void 0&&B!=null&&g(e,["parameters","compressionQuality"],B),t}function UP(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],qP(l)),e}function OP(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],BP(l)),e}function jP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["prompt"]);i!=null&&g(t,["instances[0]","prompt"],i);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],ff(a));const l=p(e,["video"]);l!=null&&g(t,["instances[0]","video"],qS(l));const d=p(e,["source"]);d!=null&&HP(d,t);const f=p(e,["config"]);return f!=null&&LP(f,t),t}function FP(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["prompt"]);i!=null&&g(t,["instances[0]","prompt"],i);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],Wr(a));const l=p(e,["video"]);l!=null&&g(t,["instances[0]","video"],BS(l));const d=p(e,["source"]);d!=null&&GP(d,t);const f=p(e,["config"]);return f!=null&&VP(f,t),t}function qP(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>JP(l))),g(e,["generatedVideos"],a)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function BP(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>YP(l))),g(e,["generatedVideos"],a)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&g(e,["raiMediaFilteredCount"],r);const i=p(n,["raiMediaFilteredReasons"]);return i!=null&&g(e,["raiMediaFilteredReasons"],i),e}function HP(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&g(e,["instances[0]","image"],ff(i));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],qS(a)),t}function GP(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&g(e,["instances[0]","image"],Wr(i));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],BS(a)),t}function zP(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],n4(t));const r=p(n,["raiFilteredReason"]);r!=null&&g(e,["raiFilteredReason"],r);const i=p(n,["_self"]);return i!=null&&g(e,["safetyAttributes"],OS(i)),e}function hf(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],US(t));const r=p(n,["raiFilteredReason"]);r!=null&&g(e,["raiFilteredReason"],r);const i=p(n,["_self"]);i!=null&&g(e,["safetyAttributes"],jS(i));const a=p(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function $P(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["mask"],US(t));const r=p(n,["labels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),g(e,["labels"],i)}return e}function JP(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],P4(t)),e}function YP(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],L4(t)),e}function KP(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const r=p(n,["responseJsonSchema"]);r!=null&&g(e,["responseJsonSchema"],r);const i=p(n,["audioTimestamp"]);i!=null&&g(e,["audioTimestamp"],i);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const d=p(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=p(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const m=p(n,["maxOutputTokens"]);m!=null&&g(e,["maxOutputTokens"],m);const v=p(n,["mediaResolution"]);v!=null&&g(e,["mediaResolution"],v);const b=p(n,["presencePenalty"]);b!=null&&g(e,["presencePenalty"],b);const T=p(n,["responseLogprobs"]);T!=null&&g(e,["responseLogprobs"],T);const S=p(n,["responseMimeType"]);S!=null&&g(e,["responseMimeType"],S);const I=p(n,["responseModalities"]);I!=null&&g(e,["responseModalities"],I);const D=p(n,["responseSchema"]);D!=null&&g(e,["responseSchema"],D);const N=p(n,["routingConfig"]);N!=null&&g(e,["routingConfig"],N);const U=p(n,["seed"]);U!=null&&g(e,["seed"],U);const B=p(n,["speechConfig"]);B!=null&&g(e,["speechConfig"],B);const F=p(n,["stopSequences"]);F!=null&&g(e,["stopSequences"],F);const Q=p(n,["temperature"]);Q!=null&&g(e,["temperature"],Q);const J=p(n,["thinkingConfig"]);J!=null&&g(e,["thinkingConfig"],J);const re=p(n,["topK"]);re!=null&&g(e,["topK"],re);const k=p(n,["topP"]);if(k!=null&&g(e,["topP"],k),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function XP(n,e){const t={},r=p(e,["model"]);return r!=null&&g(t,["_url","name"],ct(n,r)),t}function WP(n,e){const t={},r=p(e,["model"]);return r!=null&&g(t,["_url","name"],ct(n,r)),t}function QP(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function ZP(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function e4(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const r=p(n,["imageSize"]);if(r!=null&&g(e,["imageSize"],r),p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function t4(n){const e={},t=p(n,["aspectRatio"]);t!=null&&g(e,["aspectRatio"],t);const r=p(n,["imageSize"]);r!=null&&g(e,["imageSize"],r);const i=p(n,["outputMimeType"]);i!=null&&g(e,["imageOutputOptions","mimeType"],i);const a=p(n,["outputCompressionQuality"]);return a!=null&&g(e,["imageOutputOptions","compressionQuality"],a),e}function n4(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],vo(t));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function US(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&g(e,["imageBytes"],vo(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function ff(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],vo(t));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Wr(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const r=p(n,["imageBytes"]);r!=null&&g(e,["bytesBase64Encoded"],vo(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function r4(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const l=p(e,["filter"]);t!==void 0&&l!=null&&g(t,["_query","filter"],l);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],RS(n,d)),r}function s4(n,e,t){const r={},i=p(e,["pageSize"]);t!==void 0&&i!=null&&g(t,["_query","pageSize"],i);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const l=p(e,["filter"]);t!==void 0&&l!=null&&g(t,["_query","filter"],l);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],RS(n,d)),r}function i4(n,e){const t={},r=p(e,["config"]);return r!=null&&r4(n,r,t),t}function o4(n,e){const t={},r=p(e,["config"]);return r!=null&&s4(n,r,t),t}function a4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["_self"]);if(i!=null){let a=kS(i);Array.isArray(a)&&(a=a.map(l=>_g(l))),g(e,["models"],a)}return e}function l4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["_self"]);if(i!=null){let a=kS(i);Array.isArray(a)&&(a=a.map(l=>bg(l))),g(e,["models"],a)}return e}function c4(n){const e={},t=p(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const r=p(n,["segmentationClasses"]);r!=null&&g(e,["maskClasses"],r);const i=p(n,["maskDilation"]);return i!=null&&g(e,["dilation"],i),e}function _g(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(n,["description"]);i!=null&&g(e,["description"],i);const a=p(n,["version"]);a!=null&&g(e,["version"],a);const l=p(n,["_self"]);l!=null&&g(e,["tunedModelInfo"],S4(l));const d=p(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const f=p(n,["outputTokenLimit"]);f!=null&&g(e,["outputTokenLimit"],f);const m=p(n,["supportedGenerationMethods"]);m!=null&&g(e,["supportedActions"],m);const v=p(n,["temperature"]);v!=null&&g(e,["temperature"],v);const b=p(n,["maxTemperature"]);b!=null&&g(e,["maxTemperature"],b);const T=p(n,["topP"]);T!=null&&g(e,["topP"],T);const S=p(n,["topK"]);S!=null&&g(e,["topK"],S);const I=p(n,["thinking"]);return I!=null&&g(e,["thinking"],I),e}function bg(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["displayName"]);r!=null&&g(e,["displayName"],r);const i=p(n,["description"]);i!=null&&g(e,["description"],i);const a=p(n,["versionId"]);a!=null&&g(e,["version"],a);const l=p(n,["deployedModels"]);if(l!=null){let b=l;Array.isArray(b)&&(b=b.map(T=>TP(T))),g(e,["endpoints"],b)}const d=p(n,["labels"]);d!=null&&g(e,["labels"],d);const f=p(n,["_self"]);f!=null&&g(e,["tunedModelInfo"],A4(f));const m=p(n,["defaultCheckpointId"]);m!=null&&g(e,["defaultCheckpointId"],m);const v=p(n,["checkpoints"]);if(v!=null){let b=v;Array.isArray(b)&&(b=b.map(T=>T)),g(e,["checkpoints"],b)}return e}function u4(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&g(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&g(e,["executableCode"],i);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],EP(a));const l=p(n,["functionCall"]);l!=null&&g(e,["functionCall"],wP(l));const d=p(n,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],KM(f));const m=p(n,["text"]);m!=null&&g(e,["text"],m);const v=p(n,["thought"]);v!=null&&g(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function d4(n){const e={},t=p(n,["productImage"]);return t!=null&&g(e,["image"],Wr(t)),e}function h4(n,e){const t={},r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&g(e,["parameters","sampleCount"],r);const i=p(n,["baseSteps"]);e!==void 0&&i!=null&&g(e,["parameters","baseSteps"],i);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(n,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const m=p(n,["addWatermark"]);e!==void 0&&m!=null&&g(e,["parameters","addWatermark"],m);const v=p(n,["outputMimeType"]);e!==void 0&&v!=null&&g(e,["parameters","outputOptions","mimeType"],v);const b=p(n,["outputCompressionQuality"]);e!==void 0&&b!=null&&g(e,["parameters","outputOptions","compressionQuality"],b);const T=p(n,["enhancePrompt"]);e!==void 0&&T!=null&&g(e,["parameters","enhancePrompt"],T);const S=p(n,["labels"]);return e!==void 0&&S!=null&&g(e,["labels"],S),t}function f4(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["source"]);i!=null&&p4(i,t);const a=p(e,["config"]);return a!=null&&h4(a,t),t}function m4(n){const e={},t=p(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>hf(i))),g(e,["generatedImages"],r)}return e}function p4(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(n,["personImage"]);e!==void 0&&i!=null&&g(e,["instances[0]","personImage","image"],Wr(i));const a=p(n,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>d4(d))),g(e,["instances[0]","productImages"],l)}return t}function g4(n){const e={},t=p(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Wr(t));const r=p(n,["referenceId"]);r!=null&&g(e,["referenceId"],r);const i=p(n,["referenceType"]);i!=null&&g(e,["referenceType"],i);const a=p(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],c4(a));const l=p(n,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],nP(l));const d=p(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const f=p(n,["subjectImageConfig"]);return f!=null&&g(e,["subjectImageConfig"],f),e}function OS(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const r=p(n,["safetyAttributes","scores"]);r!=null&&g(e,["scores"],r);const i=p(n,["contentType"]);return i!=null&&g(e,["contentType"],i),e}function jS(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const r=p(n,["safetyAttributes","scores"]);r!=null&&g(e,["scores"],r);const i=p(n,["contentType"]);return i!=null&&g(e,["contentType"],i),e}function y4(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(n,["threshold"]);return r!=null&&g(e,["threshold"],r),e}function v4(n){const e={},t=p(n,["image"]);return t!=null&&g(e,["image"],Wr(t)),e}function x4(n,e){const t={},r=p(n,["mode"]);e!==void 0&&r!=null&&g(e,["parameters","mode"],r);const i=p(n,["maxPredictions"]);e!==void 0&&i!=null&&g(e,["parameters","maxPredictions"],i);const a=p(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(n,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const d=p(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const f=p(n,["labels"]);return e!==void 0&&f!=null&&g(e,["labels"],f),t}function _4(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["source"]);i!=null&&T4(i,t);const a=p(e,["config"]);return a!=null&&x4(a,t),t}function b4(n){const e={},t=p(n,["predictions"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(i=>$P(i))),g(e,["generatedMasks"],r)}return e}function T4(n,e){const t={},r=p(n,["prompt"]);e!==void 0&&r!=null&&g(e,["instances[0]","prompt"],r);const i=p(n,["image"]);e!==void 0&&i!=null&&g(e,["instances[0]","image"],Wr(i));const a=p(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],v4(a)),t}function E4(n){const e={},t=p(n,["functionCallingConfig"]);t!=null&&g(e,["functionCallingConfig"],SP(t));const r=p(n,["retrievalConfig"]);return r!=null&&g(e,["retrievalConfig"],r),e}function w4(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(b=>b)),g(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&g(e,["computerUse"],i);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],QP(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],ZP(f));const m=p(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}function FS(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let b=t;Array.isArray(b)&&(b=b.map(T=>AP(T))),g(e,["functionDeclarations"],b)}const r=p(n,["retrieval"]);r!=null&&g(e,["retrieval"],r);const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const m=p(n,["googleSearch"]);m!=null&&g(e,["googleSearch"],m);const v=p(n,["urlContext"]);return v!=null&&g(e,["urlContext"],v),e}function S4(n){const e={},t=p(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const r=p(n,["createTime"]);r!=null&&g(e,["createTime"],r);const i=p(n,["updateTime"]);return i!=null&&g(e,["updateTime"],i),e}function A4(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const r=p(n,["createTime"]);r!=null&&g(e,["createTime"],r);const i=p(n,["updateTime"]);return i!=null&&g(e,["updateTime"],i),e}function N4(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(n,["description"]);e!==void 0&&i!=null&&g(e,["description"],i);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function C4(n,e){const t={},r=p(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const i=p(n,["description"]);e!==void 0&&i!=null&&g(e,["description"],i);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function I4(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","name"],ct(n,r));const i=p(e,["config"]);return i!=null&&N4(i,t),t}function R4(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["config"]);return i!=null&&C4(i,t),t}function k4(n,e){const t={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const i=p(n,["safetyFilterLevel"]);e!==void 0&&i!=null&&g(e,["parameters","safetySetting"],i);const a=p(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(n,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const d=p(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const f=p(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f);const m=p(n,["enhanceInputImage"]);e!==void 0&&m!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=p(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const b=p(n,["labels"]);e!==void 0&&b!=null&&g(e,["labels"],b);const T=p(n,["numberOfImages"]);e!==void 0&&T!=null&&g(e,["parameters","sampleCount"],T);const S=p(n,["mode"]);return e!==void 0&&S!=null&&g(e,["parameters","mode"],S),t}function D4(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["_url","model"],ct(n,r));const i=p(e,["image"]);i!=null&&g(t,["instances[0]","image"],Wr(i));const a=p(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&k4(l,t),t}function M4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>hf(a))),g(e,["generatedImages"],i)}return e}function P4(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const r=p(n,["encodedVideo"]);r!=null&&g(e,["videoBytes"],vo(r));const i=p(n,["encoding"]);return i!=null&&g(e,["mimeType"],i),e}function L4(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const r=p(n,["bytesBase64Encoded"]);r!=null&&g(e,["videoBytes"],vo(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function V4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["_self"],Wr(t));const r=p(n,["maskMode"]);return r!=null&&g(e,["maskMode"],r),e}function U4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],ff(t));const r=p(n,["referenceType"]);return r!=null&&g(e,["referenceType"],r),e}function O4(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],Wr(t));const r=p(n,["referenceType"]);return r!=null&&g(e,["referenceType"],r),e}function qS(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const r=p(n,["videoBytes"]);r!=null&&g(e,["encodedVideo"],vo(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["encoding"],i),e}function BS(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const r=p(n,["videoBytes"]);r!=null&&g(e,["bytesBase64Encoded"],vo(r));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function j4(n,e){const t={},r=p(n,["displayName"]);return e!==void 0&&r!=null&&g(e,["displayName"],r),t}function F4(n){const e={},t=p(n,["config"]);return t!=null&&j4(t,e),e}function q4(n,e){const t={},r=p(n,["force"]);return e!==void 0&&r!=null&&g(e,["_query","force"],r),t}function B4(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const r=p(n,["config"]);return r!=null&&q4(r,e),e}function H4(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function G4(n,e){const t={},r=p(n,["customMetadata"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const i=p(n,["chunkingConfig"]);return e!==void 0&&i!=null&&g(e,["chunkingConfig"],i),t}function z4(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const r=p(n,["metadata"]);r!=null&&g(e,["metadata"],r);const i=p(n,["done"]);i!=null&&g(e,["done"],i);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],J4(l)),e}function $4(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const r=p(n,["fileName"]);r!=null&&g(e,["fileName"],r);const i=p(n,["config"]);return i!=null&&G4(i,e),e}function J4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["parent"]);r!=null&&g(e,["parent"],r);const i=p(n,["documentName"]);return i!=null&&g(e,["documentName"],i),e}function Y4(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),t}function K4(n){const e={},t=p(n,["config"]);return t!=null&&Y4(t,e),e}function X4(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["fileSearchStores"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function HS(n,e){const t={},r=p(n,["mimeType"]);e!==void 0&&r!=null&&g(e,["mimeType"],r);const i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const a=p(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>f)),g(e,["customMetadata"],d)}const l=p(n,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),t}function W4(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const r=p(n,["config"]);return r!=null&&HS(r,e),e}function Q4(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Z4="Content-Type",eL="X-Server-Timeout",tL="User-Agent",Tg="x-goog-api-client",nL="1.34.0",rL=`google-genai-sdk/${nL}`,sL="v1beta1",iL="v1beta";class oL{constructor(e){var t,r;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const i={};this.clientOptions.vertexai?(i.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:sL,i.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(i.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:iL,i.baseUrl="https://generativelanguage.googleapis.com/"),i.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=i,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(i,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,r){const i=[this.getRequestUrlInternal(t)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))i.searchParams.append(l,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.unaryApiCall(i,a,e.httpMethod)}patchHttpOptions(e,t){const r=JSON.parse(JSON.stringify(e));for(const[i,a]of Object.entries(t))typeof a=="object"?r[i]=Object.assign(Object.assign({},r[i]),a):a!==void 0&&(r[i]=a);return r}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e),i=this.constructUrl(e.path,t,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,i.toString(),e.abortSignal),this.streamApiCall(i,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,r,i){if(t&&t.timeout||i){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}i&&i.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&aL(e,t.extraBody),e.headers=await this.getHeadersInternal(t,r),e}async unaryApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await VT(i),new yg(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,t,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:r})).then(async i=>(await VT(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return Jr(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),a=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let l="";const d="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ve(i.read());if(m){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const b=a.decode(v,{stream:!0});try{const I=JSON.parse(b);if("error"in I){const D=JSON.parse(JSON.stringify(I.error)),N=D.status,U=D.code,B=`got status: ${N}. ${JSON.stringify(I)}`;if(U>=400&&U<600)throw new uf({message:B,status:U})}}catch(I){if(I.name==="ApiError")throw I}l+=b;let T=-1,S=0;for(;;){T=-1,S=0;for(const N of f){const U=l.indexOf(N);U!==-1&&(T===-1||U<T)&&(T=U,S=N.length)}if(T===-1)break;const I=l.substring(0,T);l=l.substring(T+S);const D=I.trim();if(D.startsWith(d)){const N=D.substring(d.length).trim();try{const U=new Response(N,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ve(new yg(U))}catch(U){throw new Error(`exception parsing stream chunk ${N}. ${U}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(r=>{throw new Error(`exception ${r} sending request`)})}getDefaultHeaders(){const e={},t=rL+" "+this.clientOptions.userAgentExtra;return e[tL]=t,e[Tg]=t,e[Z4]="application/json",e}async getHeadersInternal(e,t){const r=new Headers;if(e&&e.headers){for(const[i,a]of Object.entries(e.headers))r.append(i,a);e.timeout&&e.timeout>0&&r.append(eL,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,t),r}getFileName(e){var t;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(t=r.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),r}async uploadFile(e,t){var r;const i={};t!=null&&(i.mimeType=t.mimeType,i.name=t.name,i.displayName=t.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);i.sizeBytes=String(l.size);const d=(r=t==null?void 0:t.mimeType)!==null&&r!==void 0?r:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=d;const f={file:i},m=this.getFileName(e),v=xe("upload/v1beta/files",f._url),b=await this.fetchUploadUrl(v,i.sizeBytes,i.mimeType,m,f,t==null?void 0:t.httpOptions);return a.upload(e,b,this)}async uploadFileToFileSearchStore(e,t,r){var i;const a=this.clientOptions.uploader,l=await a.stat(t),d=String(l.size),f=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),b={};r!=null&&HS(r,b);const T=await this.fetchUploadUrl(m,d,f,v,b,r==null?void 0:r.httpOptions);return a.uploadToFileSearchStore(t,T,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,r,i,a,l){var d;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const m=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(d=m==null?void 0:m.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function VT(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let r;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await n.json():r={error:{message:await n.text(),code:n.status,status:n.statusText}};const i=JSON.stringify(r);throw t>=400&&t<600?new uf({message:i,status:t}):new Error(i)}}function aL(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(a,l){const d=Object.assign({},a);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const m=l[f],v=d[f];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?d[f]=r(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),d[f]=m)}return d}const i=r(t,e);n.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lL="mcp_used/unknown";let cL=!1;function GS(n){for(const e of n)if(uL(e)||typeof e=="object"&&"inputSchema"in e)return!0;return cL}function zS(n){var e;const t=(e=n[Tg])!==null&&e!==void 0?e:"";n[Tg]=(t+` ${lL}`).trimStart()}function uL(n){return n!==null&&typeof n=="object"&&n instanceof _y}function dL(n){return Jr(this,arguments,function*(t,r=100){let i,a=0;for(;a<r;){const l=yield Ve(t.listTools({cursor:i}));for(const d of l.tools)yield yield Ve(d),a++;if(!l.nextCursor)break;i=l.nextCursor}})}class _y{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new _y(e,t)}async initialize(){var e,t,r,i;if(this.mcpTools.length>0)return;const a={},l=[];for(const v of this.mcpClients)try{for(var d=!0,f=(t=void 0,Yr(dL(v))),m;m=await f.next(),e=m.done,!e;d=!0){i=m.value,d=!1;const b=i;l.push(b);const T=b.name;if(a[T])throw new Error(`Duplicate function name ${T} found in MCP tools. Please ensure function names are unique.`);a[T]=v}}catch(b){t={error:b}}finally{try{!d&&!e&&(r=f.return)&&await r.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),H2(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await i.callTool({name:r.name,arguments:r.args},void 0,a);t.push({functionResponse:{name:r.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function hL(n,e,t){const r=new L2;let i;t.data instanceof Blob?i=JSON.parse(await t.data.text()):i=JSON.parse(t.data),Object.assign(r,i),e(r)}class fL{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r}async connect(e){var t,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=gL(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let m=()=>{};const v=new Promise(F=>{m=F}),b=e.callbacks,T=function(){m({})},S=this.apiClient,I={onopen:T,onmessage:F=>{hL(S,b.onmessage,F)},onerror:(t=b==null?void 0:b.onerror)!==null&&t!==void 0?t:function(F){},onclose:(r=b==null?void 0:b.onclose)!==null&&r!==void 0?r:function(F){}},D=this.webSocketFactory.create(f,pL(l),I);D.connect(),await v;const B={setup:{model:ct(this.apiClient,e.model)}};return D.send(JSON.stringify(B)),new mL(D,this.apiClient)}}class mL{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=FM(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=jM(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(cl.PLAY)}pause(){this.sendPlaybackControl(cl.PAUSE)}stop(){this.sendPlaybackControl(cl.STOP)}resetContext(){this.sendPlaybackControl(cl.RESET_CONTEXT)}close(){this.conn.close()}}function pL(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function gL(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yL="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function vL(n,e,t){const r=new P2;let i;t.data instanceof Blob?i=await t.data.text():t.data instanceof ArrayBuffer?i=new TextDecoder().decode(t.data):i=t.data;const a=JSON.parse(i);if(n.isVertexAI()){const l=HM(a);Object.assign(r,l)}else Object.assign(r,a);e(r)}class xL{constructor(e,t,r){this.apiClient=e,this.auth=t,this.webSocketFactory=r,this.music=new fL(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,r,i,a,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const b=this.apiClient.getHeaders();e.config&&e.config.tools&&GS(e.config.tools)&&zS(b);const T=EL(b);if(this.apiClient.isVertexAI())v=`${f}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(T,v);else{const R=this.apiClient.getApiKey();let L="BidiGenerateContent",O="key";R!=null&&R.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",O="access_token"),v=`${f}/ws/google.ai.generativelanguage.${m}.GenerativeService.${L}?${O}=${R}`}let S=()=>{};const I=new Promise(R=>{S=R}),D=e.callbacks,N=function(){var R;(R=D==null?void 0:D.onopen)===null||R===void 0||R.call(D),S({})},U=this.apiClient,B={onopen:N,onmessage:R=>{vL(U,D.onmessage,R)},onerror:(t=D==null?void 0:D.onerror)!==null&&t!==void 0?t:function(R){},onclose:(r=D==null?void 0:D.onclose)!==null&&r!==void 0?r:function(R){}},F=this.webSocketFactory.create(v,TL(T),B);F.connect(),await I;let Q=ct(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Q.startsWith("publishers/")){const R=this.apiClient.getProject(),L=this.apiClient.getLocation();Q=`projects/${R}/locations/${L}/`+Q}let J={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[cu.AUDIO]}:e.config.responseModalities=[cu.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const re=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],k=[];for(const R of re)if(this.isCallableTool(R)){const L=R;k.push(await L.tool())}else k.push(R);k.length>0&&(e.config.tools=k);const M={model:Q,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?J=OM(this.apiClient,M):J=UM(this.apiClient,M),delete J.config,F.send(JSON.stringify(J)),new bL(F,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const _L={turnComplete:!0};class bL{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let r=[];try{r=Cr(t.turns),e.isVertexAI()||(r=r.map(i=>df(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:r,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let r=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?r=t.functionResponses:r=[t.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const a of r){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(yL)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},_L),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:BM(e)}:t={realtimeInput:qM(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function TL(n){const e={};return n.forEach((t,r)=>{e[r]=t}),e}function EL(n){const e=new Headers;for(const[t,r]of Object.entries(n))e.append(t,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UT=10;function OT(n){var e,t,r;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(fl(l)){i=!0;break}if(!i)return!0;const a=(r=n==null?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function fl(n){return"callTool"in n&&typeof n.callTool=="function"}function wL(n){var e,t,r;return(r=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(i=>fl(i)))!==null&&r!==void 0?r:!1}function jT(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((r,i)=>{if(fl(r))return;const a=r;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(i)}),t}function FT(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SL extends mi{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var r,i,a,l,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!wL(t)||OT(t.config))return await this.generateContentInternal(f);const m=jT(t);if(m.length>0){const D=m.map(N=>`tools[${N}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${D}.`)}let v,b;const T=Cr(f.contents),S=(a=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&a!==void 0?a:UT;let I=0;for(;I<S&&(v=await this.generateContentInternal(f),!(!v.functionCalls||v.functionCalls.length===0));){const D=v.candidates[0].content,N=[];for(const U of(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(fl(U)){const F=await U.callTool(v.functionCalls);N.push(...F)}I++,b={role:"user",parts:N},f.contents=Cr(f.contents),f.contents.push(D),f.contents.push(b),FT(f.config)&&(T.push(D),T.push(b))}return FT(f.config)&&(v.automaticFunctionCallingHistory=T),v},this.generateContentStream=async t=>{var r,i,a,l,d;if(this.maybeMoveToResponseJsonSchem(t),OT(t.config)){const b=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(b)}const f=jT(t);if(f.length>0){const b=f.map(T=>`tools[${T}]`).join(", ");throw new Error(`Incompatible tools found at ${b}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(a=(i=(r=t==null?void 0:t.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,v=(d=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||d===void 0?void 0:d.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(r=>{var i;let a;const l=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:r.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:r.sdkHttpResponse},d}),this.list=async t=>{var r;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((r=l.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new la(li.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async t=>{const r={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(r.referenceImages=t.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async t=>{let r={numberOfImages:1,mode:"upscale"};t.config&&(r=Object.assign(Object.assign({},r),t.config));const i={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async t=>{var r,i,a,l,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=t.video)===null||r===void 0)&&r.uri&&(!((i=t.video)===null||i===void 0)&&i.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,r,i;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>fl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&GS(e.config.tools)){const f=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let m=Object.assign({},f);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),zS(m),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return d}async initAfcToolsMap(e){var t,r,i;const a=new Map;for(const l of(r=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&r!==void 0?r:[])if(fl(l)){const d=l,f=await d.tool();for(const m of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!m.name)throw new Error("Function declaration name is required.");if(a.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);a.set(m.name,d)}}return a}async processAfcStream(e){var t,r,i;const a=(i=(r=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:UT;let l=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(m,v,b){return Jr(this,arguments,function*(){for(var T,S,I,D,N,U;d<a;){l&&(d++,l=!1);const J=yield Ve(m.processParamsMaybeAddMcpUsage(b)),re=yield Ve(m.generateContentStreamInternal(J)),k=[],M=[];try{for(var B=!0,F=(S=void 0,Yr(re)),Q;Q=yield Ve(F.next()),T=Q.done,!T;B=!0){D=Q.value,B=!1;const R=D;if(yield yield Ve(R),R.candidates&&(!((N=R.candidates[0])===null||N===void 0)&&N.content)){M.push(R.candidates[0].content);for(const L of(U=R.candidates[0].content.parts)!==null&&U!==void 0?U:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(L.functionCall.name)){const O=yield Ve(v.get(L.functionCall.name).callTool([L.functionCall]));k.push(...O)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(R){S={error:R}}finally{try{!B&&!T&&(I=F.return)&&(yield Ve(I.call(F)))}finally{if(S)throw S.error}}if(k.length>0){l=!0;const R=new Gc;R.candidates=[{content:{role:"user",parts:k}}],yield yield Ve(R);const L=[];L.push(...M),L.push({role:"user",parts:k});const O=Cr(b.contents).concat(L);b.contents=O}else break}})})(this,f,e)}async generateContentInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=MT(this.apiClient,e);return d=xe("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=LT(v),T=new Gc;return Object.assign(T,b),T})}else{const m=DT(this.apiClient,e);return d=xe("{model}:generateContent",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=PT(v),T=new Gc;return Object.assign(T,b),T})}}async generateContentStreamInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=MT(this.apiClient,e);return d=xe("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),l.then(function(b){return Jr(this,arguments,function*(){var T,S,I,D;try{for(var N=!0,U=Yr(b),B;B=yield Ve(U.next()),T=B.done,!T;N=!0){D=B.value,N=!1;const F=D,Q=LT(yield Ve(F.json()));Q.sdkHttpResponse={headers:F.headers};const J=new Gc;Object.assign(J,Q),yield yield Ve(J)}}catch(F){S={error:F}}finally{try{!N&&!T&&(I=U.return)&&(yield Ve(I.call(U)))}finally{if(S)throw S.error}}})})}else{const m=DT(this.apiClient,e);return d=xe("{model}:streamGenerateContent?alt=sse",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(b){return Jr(this,arguments,function*(){var T,S,I,D;try{for(var N=!0,U=Yr(b),B;B=yield Ve(U.next()),T=B.done,!T;N=!0){D=B.value,N=!1;const F=D,Q=PT(yield Ve(F.json()));Q.sdkHttpResponse={headers:F.headers};const J=new Gc;Object.assign(J,Q),yield yield Ve(J)}}catch(F){S={error:F}}finally{try{!N&&!T&&(I=U.return)&&(yield Ve(I.call(U)))}finally{if(S)throw S.error}}})})}}async embedContent(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=xP(this.apiClient,e);return d=xe("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=bP(v),T=new pT;return Object.assign(T,b),T})}else{const m=vP(this.apiClient,e);return d=xe("{model}:batchEmbedContents",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=_P(v),T=new pT;return Object.assign(T,b),T})}}async generateImagesInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=DP(this.apiClient,e);return d=xe("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=PP(v),T=new gT;return Object.assign(T,b),T})}else{const m=kP(this.apiClient,e);return d=xe("{model}:predict",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=MP(v),T=new gT;return Object.assign(T,b),T})}}async editImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=mP(this.apiClient,e);return a=xe("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>{const m=pP(f),v=new E2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=D4(this.apiClient,e);return a=xe("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>{const m=M4(f),v=new w2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=f4(this.apiClient,e);return a=xe("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=m4(f),v=new S2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=_4(this.apiClient,e);return a=xe("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=b4(f),v=new A2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=WP(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>bg(v))}else{const m=XP(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>_g(v))}}async listInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=o4(this.apiClient,e);return d=xe("{models_url}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=l4(v),T=new yT;return Object.assign(T,b),T})}else{const m=i4(this.apiClient,e);return d=xe("{models_url}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=a4(v),T=new yT;return Object.assign(T,b),T})}}async update(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=R4(this.apiClient,e);return d=xe("{model}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>bg(v))}else{const m=I4(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>_g(v))}}async delete(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=uP(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=hP(v),T=new vT;return Object.assign(T,b),T})}else{const m=cP(this.apiClient,e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=dP(v),T=new vT;return Object.assign(T,b),T})}}async countTokens(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=oP(this.apiClient,e);return d=xe("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=lP(v),T=new xT;return Object.assign(T,b),T})}else{const m=iP(this.apiClient,e);return d=xe("{model}:countTokens",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=aP(v),T=new xT;return Object.assign(T,b),T})}}async computeTokens(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=QM(this.apiClient,e);return a=xe("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>{const m=ZM(f),v=new N2;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=FP(this.apiClient,e);return d=xe("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l.then(v=>{const b=OP(v),T=new Ih;return Object.assign(T,b),T})}else{const m=jP(this.apiClient,e);return d=xe("{model}:predictLongRunning",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l.then(v=>{const b=UP(v),T=new Ih;return Object.assign(T,b),T})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class AL extends mi{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const t=e.operation,r=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=t.name.split("/operations/")[0];let a;r&&"httpOptions"in r&&(a=r.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:i,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:t.name,config:r});return t._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=y2(e);return d=xe("{operationName}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json()),l}else{const m=g2(e);return d=xe("{operationName}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json()),l}}async fetchPredictVideosOperationInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=c2(e);return a=xe("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NL(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function CL(n){const e={},t=p(n,["parts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(a=>UL(a))),g(e,["parts"],i)}const r=p(n,["role"]);return r!=null&&g(e,["role"],r),e}function IL(n,e,t){const r={},i=p(e,["expireTime"]);t!==void 0&&i!=null&&g(t,["expireTime"],i);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const l=p(e,["uses"]);t!==void 0&&l!=null&&g(t,["uses"],l);const d=p(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],VL(n,d));const f=p(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&g(t,["fieldMask"],f),r}function RL(n,e){const t={},r=p(e,["config"]);return r!=null&&g(t,["config"],IL(n,r,t)),t}function kL(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function DL(n){const e={},t=p(n,["id"]);t!=null&&g(e,["id"],t);const r=p(n,["args"]);r!=null&&g(e,["args"],r);const i=p(n,["name"]);if(i!=null&&g(e,["name"],i),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ML(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function PL(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function LL(n,e){const t={},r=p(n,["generationConfig"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig"],r);const i=p(n,["responseModalities"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig","responseModalities"],i);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const m=p(n,["mediaResolution"]);e!==void 0&&m!=null&&g(e,["setup","generationConfig","mediaResolution"],m);const v=p(n,["seed"]);e!==void 0&&v!=null&&g(e,["setup","generationConfig","seed"],v);const b=p(n,["speechConfig"]);e!==void 0&&b!=null&&g(e,["setup","generationConfig","speechConfig"],xy(b));const T=p(n,["thinkingConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","thinkingConfig"],T);const S=p(n,["enableAffectiveDialog"]);e!==void 0&&S!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],S);const I=p(n,["systemInstruction"]);e!==void 0&&I!=null&&g(e,["setup","systemInstruction"],CL(Nn(I)));const D=p(n,["tools"]);if(e!==void 0&&D!=null){let re=Dl(D);Array.isArray(re)&&(re=re.map(k=>jL(kl(k)))),g(e,["setup","tools"],re)}const N=p(n,["sessionResumption"]);e!==void 0&&N!=null&&g(e,["setup","sessionResumption"],OL(N));const U=p(n,["inputAudioTranscription"]);e!==void 0&&U!=null&&g(e,["setup","inputAudioTranscription"],U);const B=p(n,["outputAudioTranscription"]);e!==void 0&&B!=null&&g(e,["setup","outputAudioTranscription"],B);const F=p(n,["realtimeInputConfig"]);e!==void 0&&F!=null&&g(e,["setup","realtimeInputConfig"],F);const Q=p(n,["contextWindowCompression"]);e!==void 0&&Q!=null&&g(e,["setup","contextWindowCompression"],Q);const J=p(n,["proactivity"]);if(e!==void 0&&J!=null&&g(e,["setup","proactivity"],J),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function VL(n,e){const t={},r=p(e,["model"]);r!=null&&g(t,["setup","model"],ct(n,r));const i=p(e,["config"]);return i!=null&&g(t,["config"],LL(i,t)),t}function UL(n){const e={},t=p(n,["mediaResolution"]);t!=null&&g(e,["mediaResolution"],t);const r=p(n,["codeExecutionResult"]);r!=null&&g(e,["codeExecutionResult"],r);const i=p(n,["executableCode"]);i!=null&&g(e,["executableCode"],i);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],kL(a));const l=p(n,["functionCall"]);l!=null&&g(e,["functionCall"],DL(l));const d=p(n,["functionResponse"]);d!=null&&g(e,["functionResponse"],d);const f=p(n,["inlineData"]);f!=null&&g(e,["inlineData"],NL(f));const m=p(n,["text"]);m!=null&&g(e,["text"],m);const v=p(n,["thought"]);v!=null&&g(e,["thought"],v);const b=p(n,["thoughtSignature"]);b!=null&&g(e,["thoughtSignature"],b);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function OL(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function jL(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(b=>b)),g(e,["functionDeclarations"],v)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const i=p(n,["computerUse"]);i!=null&&g(e,["computerUse"],i);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],ML(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],PL(f));const m=p(n,["urlContext"]);return m!=null&&g(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FL(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const r=n[t];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(a=>`${t}.${a}`);e.push(...i)}else e.push(t)}return e.join(",")}function qL(n,e){let t=null;const r=n.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const a=r.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else r!==void 0&&delete n.bidiGenerateContentSetup;const i=n.fieldMask;if(t){const a=FL(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];i.length>0&&(d=i.map(m=>l.includes(m)?`generationConfig.${m}`:m));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?n.fieldMask=i.join(","):delete n.fieldMask;return n}class BL extends mi{constructor(e){super(),this.apiClient=e}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=RL(this.apiClient,e);a=xe("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const f=qL(d,e.config);return i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json()),i.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HL(n,e){const t={},r=p(n,["force"]);return e!==void 0&&r!=null&&g(e,["_query","force"],r),t}function GL(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const r=p(n,["config"]);return r!=null&&HL(r,e),e}function zL(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function $L(n,e){const t={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const i=p(n,["pageToken"]);return e!==void 0&&i!=null&&g(e,["_query","pageToken"],i),t}function JL(n){const e={},t=p(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const r=p(n,["config"]);return r!=null&&$L(r,e),e}function YL(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const r=p(n,["nextPageToken"]);r!=null&&g(e,["nextPageToken"],r);const i=p(n,["documents"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KL extends mi{constructor(e){super(),this.apiClient=e,this.list=async t=>new la(li.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:t.parent,config:r.config}),await this.listInternal(t),t)}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=zL(e);return a=xe("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=GL(e);i=xe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=JL(e);return a=xe("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=YL(f),v=new C2;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class XL extends mi{constructor(e,t=new KL(e)){super(),this.apiClient=e,this.documents=t,this.list=async(r={})=>new la(li.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=F4(e);return a=xe("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=H4(e);return a=xe("{name}",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var t,r;let i="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=B4(e);i=xe("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:i,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=K4(e);return a=xe("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=X4(f),v=new I2;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=W4(e);return a=xe("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=Q4(f),v=new R2;return Object.assign(v,m),v})}}async importFile(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=$4(e);return a=xe("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const m=z4(f),v=new my;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let $S=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return $S=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^t()&15>>+r/4).toString(16))};const WL=()=>$S();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Eg(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const wg=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Rr extends Error{}class Mn extends Rr{constructor(e,t,r,i){super(`${Mn.makeMessage(e,t,r)}`),this.status=e,this.headers=i,this.error=t}static makeMessage(e,t,r){const i=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,t,r,i){if(!e||!i)return new mf({message:r,cause:wg(t)});const a=t;return e===400?new YS(e,a,r,i):e===401?new KS(e,a,r,i):e===403?new XS(e,a,r,i):e===404?new WS(e,a,r,i):e===409?new QS(e,a,r,i):e===422?new ZS(e,a,r,i):e===429?new eA(e,a,r,i):e>=500?new tA(e,a,r,i):new Mn(e,a,r,i)}}class Sg extends Mn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class mf extends Mn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class JS extends mf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class YS extends Mn{}class KS extends Mn{}class XS extends Mn{}class WS extends Mn{}class QS extends Mn{}class ZS extends Mn{}class eA extends Mn{}class tA extends Mn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QL=/^[a-z][a-z0-9+.-]*:/i,ZL=n=>QL.test(n);let Ag=n=>(Ag=Array.isArray,Ag(n));const eV=Ag;let tV=eV;const qT=tV;function nV(n){if(!n)return!0;for(const e in n)return!1;return!0}function rV(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const sV=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Rr(`${n} must be an integer`);if(e<0)throw new Rr(`${n} must be a positive integer`);return e},iV=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const oV=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sl="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aV(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const lV=()=>{var n,e,t,r,i;const a=aV();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sl,"X-Stainless-OS":HT(Deno.build.os),"X-Stainless-Arch":BT(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sl,"X-Stainless-OS":HT((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":BT((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const l=cV();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":sl,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function cV(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const r=t.exec(navigator.userAgent);if(r){const i=r[1]||0,a=r[2]||0,l=r[3]||0;return{browser:e,version:`${i}.${a}.${l}`}}}return null}const BT=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",HT=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let Zd;const uV=()=>Zd??(Zd=lV());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dV(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function nA(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function hV(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return nA({start(){},async pull(t){const{done:r,value:i}=await e.next();r?t.close():t.enqueue(i)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function rA(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function fV(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const r=n.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mV=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sA=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function zp(n,e,t){return sA(),new File(n,e??"unknown_file",t)}function pV(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const gV=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const iA=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",yV=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&iA(n),vV=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function xV(n,e,t){if(sA(),n=await n,yV(n))return n instanceof File?n:zp([await n.arrayBuffer()],n.name);if(vV(n)){const i=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),zp(await Ng(i),e,t)}const r=await Ng(n);if(e||(e=pV(n)),!(t!=null&&t.type)){const i=r.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof i=="string"&&(t=Object.assign(Object.assign({},t),{type:i}))}return zp(r,e,t)}async function Ng(n){var e,t,r,i,a;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(iA(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(gV(n))try{for(var d=!0,f=Yr(n),m;m=await f.next(),e=m.done,!e;d=!0){i=m.value,d=!1;const v=i;l.push(...await Ng(v))}}catch(v){t={error:v}}finally{try{!d&&!e&&(r=f.return)&&await r.call(f)}finally{if(t)throw t.error}}else{const v=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${_V(n)}`)}return l}function _V(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oA{constructor(e){this._client=e}}oA._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aA(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const GT=Object.freeze(Object.create(null)),bV=(n=aA)=>(function(t,...r){if(t.length===1)return t[0];let i=!1;const a=[],l=t.reduce((v,b,T)=>{var S,I,D;/[?#]/.test(b)&&(i=!0);const N=r[T];let U=(i?encodeURIComponent:n)(""+N);return T!==r.length&&(N==null||typeof N=="object"&&N.toString===((D=Object.getPrototypeOf((I=Object.getPrototypeOf((S=N.hasOwnProperty)!==null&&S!==void 0?S:GT))!==null&&I!==void 0?I:GT))===null||D===void 0?void 0:D.toString))&&(U=N+"",a.push({start:v.length+b.length,length:U.length,error:`Value of type ${Object.prototype.toString.call(N).slice(8,-1)} is not a valid path parameter`})),v+b+(T===r.length?"":U)},""),d=l.split(/[?#]/,1)[0],f=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=f.exec(d))!==null;)a.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(a.sort((v,b)=>v.start-b.start),a.length>0){let v=0;const b=a.reduce((T,S)=>{const I=" ".repeat(S.start-v),D="^".repeat(S.length);return v=S.start+S.length,T+I+D},"");throw new Rr(`Path parameters result in path with invalid segments:
${a.map(T=>T.error).join(`
`)}
${l}
${b}`)}return l}),eh=bV(aA);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lA extends oA{create(e,t){var r;const{api_version:i=this._client.apiVersion}=e,a=kh(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new Rr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new Rr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(eh`/${i}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.delete(eh`/${i}/interactions/${e}`,r)}cancel(e,t={},r){const{api_version:i=this._client.apiVersion}=t??{};return this._client.post(eh`/${i}/interactions/${e}/cancel`,r)}get(e,t={},r){var i;const a=t??{},{api_version:l=this._client.apiVersion}=a,d=kh(a,["api_version"]);return this._client.get(eh`/${l}/interactions/${e}`,Object.assign(Object.assign({query:d},r),{stream:(i=t==null?void 0:t.stream)!==null&&i!==void 0?i:!1}))}}lA._key=Object.freeze(["interactions"]);class cA extends lA{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function TV(n){let e=0;for(const i of n)e+=i.length;const t=new Uint8Array(e);let r=0;for(const i of n)t.set(i,r),r+=i.length;return t}let th;function by(n){let e;return(th??(e=new globalThis.TextEncoder,th=e.encode.bind(e)))(n)}let nh;function zT(n){let e;return(nh??(e=new globalThis.TextDecoder,nh=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?by(e):e;this.buffer=TV([this.buffer,t]);const r=[];let i;for(;(i=EV(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(zT(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,l=zT(this.buffer.subarray(0,a));r.push(l),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}pf.NEWLINE_CHARS=new Set([`
`,"\r"]);pf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function EV(n,e){for(let i=e??0;i<n.length;i++){if(n[i]===10)return{preceding:i,index:i+1,carriage:!1};if(n[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function wV(n){for(let r=0;r<n.length-1;r++){if(n[r]===10&&n[r+1]===10||n[r]===13&&n[r+1]===13)return r+2;if(n[r]===13&&n[r+1]===10&&r+3<n.length&&n[r+2]===13&&n[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Dh={off:0,error:200,warn:300,info:400,debug:500},$T=(n,e,t)=>{if(n){if(rV(Dh,n))return n;kn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Dh))}`)}};function Jc(){}function rh(n,e,t){return!e||Dh[n]>Dh[t]?Jc:e[n].bind(e)}const SV={error:Jc,warn:Jc,info:Jc,debug:Jc};let JT=new WeakMap;function kn(n){var e;const t=n.logger,r=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return SV;const i=JT.get(t);if(i&&i[0]===r)return i[1];const a={error:rh("error",t,r),warn:rh("warn",t,r),info:rh("info",t,r),debug:rh("debug",t,r)};return JT.set(t,[r,a]),a}const $o=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ul{constructor(e,t,r){this.iterator=e,this.controller=t,this.client=r}static fromSSEResponse(e,t,r){let i=!1;const a=r?kn(r):console;function l(){return Jr(this,arguments,function*(){var f,m,v,b;if(i)throw new Rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let T=!1;try{try{for(var S=!0,I=Yr(AV(e,t)),D;D=yield Ve(I.next()),f=D.done,!f;S=!0){b=D.value,S=!1;const N=b;if(!T)if(N.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield Ve(JSON.parse(N.data))}catch(U){throw a.error("Could not parse message into JSON:",N.data),a.error("From chunk:",N.raw),U}}}catch(N){m={error:N}}finally{try{!S&&!f&&(v=I.return)&&(yield Ve(v.call(I)))}finally{if(m)throw m.error}}T=!0}catch(N){if(Eg(N))return yield Ve(void 0);throw N}finally{T||t.abort()}})}return new ul(l,t,r)}static fromReadableStream(e,t,r){let i=!1;function a(){return Jr(this,arguments,function*(){var f,m,v,b;const T=new pf,S=rA(e);try{for(var I=!0,D=Yr(S),N;N=yield Ve(D.next()),f=N.done,!f;I=!0){b=N.value,I=!1;const U=b;for(const B of T.decode(U))yield yield Ve(B)}}catch(U){m={error:U}}finally{try{!I&&!f&&(v=D.return)&&(yield Ve(v.call(D)))}finally{if(m)throw m.error}}for(const U of T.flush())yield yield Ve(U)})}function l(){return Jr(this,arguments,function*(){var f,m,v,b;if(i)throw new Rr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let T=!1;try{try{for(var S=!0,I=Yr(a()),D;D=yield Ve(I.next()),f=D.done,!f;S=!0){b=D.value,S=!1;const N=b;T||N&&(yield yield Ve(JSON.parse(N)))}}catch(N){m={error:N}}finally{try{!S&&!f&&(v=I.return)&&(yield Ve(v.call(I)))}finally{if(m)throw m.error}}T=!0}catch(N){if(Eg(N))return yield Ve(void 0);throw N}finally{T||t.abort()}})}return new ul(l,t,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],r=this.iterator(),i=a=>({next:()=>{if(a.length===0){const l=r.next();e.push(l),t.push(l)}return a.shift()}});return[new ul(()=>i(e),this.controller,this.client),new ul(()=>i(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return nA({async start(){t=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:a}=await t.next();if(a)return r.close();const l=by(JSON.stringify(i)+`
`);r.enqueue(l)}catch(i){r.error(i)}},async cancel(){var r;await((r=t.return)===null||r===void 0?void 0:r.call(t))}})}}function AV(n,e){return Jr(this,arguments,function*(){var r,i,a,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Rr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Rr("Attempted to iterate over a response with no body");const d=new CV,f=new pf,m=rA(n.body);try{for(var v=!0,b=Yr(NV(m)),T;T=yield Ve(b.next()),r=T.done,!r;v=!0){l=T.value,v=!1;const S=l;for(const I of f.decode(S)){const D=d.decode(I);D&&(yield yield Ve(D))}}}catch(S){i={error:S}}finally{try{!v&&!r&&(a=b.return)&&(yield Ve(a.call(b)))}finally{if(i)throw i.error}}for(const S of f.flush()){const I=d.decode(S);I&&(yield yield Ve(I))}})}function NV(n){return Jr(this,arguments,function*(){var t,r,i,a;let l=new Uint8Array;try{for(var d=!0,f=Yr(n),m;m=yield Ve(f.next()),t=m.done,!t;d=!0){a=m.value,d=!1;const v=a;if(v==null)continue;const b=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?by(v):v;let T=new Uint8Array(l.length+b.length);T.set(l),T.set(b,l.length),l=T;let S;for(;(S=wV(l))!==-1;)yield yield Ve(l.slice(0,S)),l=l.slice(S)}}catch(v){r={error:v}}finally{try{!d&&!t&&(i=f.return)&&(yield Ve(i.call(f)))}finally{if(r)throw r.error}}l.length>0&&(yield yield Ve(l))})}class CV{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,i]=IV(e,":");return i.startsWith(" ")&&(i=i.substring(1)),t==="event"?this.event=i:t==="data"&&this.data.push(i),null}}function IV(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function RV(n,e){const{response:t,requestLogID:r,retryOfRequestLogID:i,startTime:a}=e,l=await(async()=>{var d;if(e.options.stream)return kn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):ul.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const f=t.headers.get("content-type"),m=(d=f==null?void 0:f.split(";")[0])===null||d===void 0?void 0:d.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return kn(n).debug(`[${r}] response parsed`,$o({retryOfRequestLogID:i,url:t.url,status:t.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ty extends Promise{constructor(e,t,r=RV){super(i=>{i(null)}),this.responsePromise=t,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new Ty(this.client,this.responsePromise,async(t,r)=>e(await this.parseResponse(t,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uA=Symbol("brand.privateNullableHeaders");function*kV(n){if(!n)return;if(uA in n){const{values:r,nulls:i}=n;yield*r.entries();for(const a of i)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():qT(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let r of t){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const a=qT(r[1])?r[1]:[r[1]];let l=!1;for(const d of a)d!==void 0&&(e&&!l&&(l=!0,yield[i,null]),yield[i,d])}}const zc=n=>{const e=new Headers,t=new Set;for(const r of n){const i=new Set;for(const[a,l]of kV(r)){const d=a.toLowerCase();i.has(d)||(e.delete(a),i.add(d)),l===null?(e.delete(a),t.add(d)):(e.append(a,l),t.delete(d))}}return{[uA]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $p=n=>{var e,t,r,i,a,l;if(typeof globalThis.process<"u")return(r=(t=(e=r2)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||a===void 0?void 0:a.call(i,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var dA;class gf{constructor(e){var t,r,i,a,l,d,f,{baseURL:m=$p("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=$p("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:b="v1beta"}=e,T=kh(e,["baseURL","apiKey","apiVersion"]);const S=Object.assign(Object.assign({apiKey:v,apiVersion:b},T),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=S.baseURL,this.timeout=(r=S.timeout)!==null&&r!==void 0?r:gf.DEFAULT_TIMEOUT,this.logger=(i=S.logger)!==null&&i!==void 0?i:console;const I="warn";this.logLevel=I,this.logLevel=(l=(a=$T(S.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:$T($p("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:I,this.fetchOptions=S.fetchOptions,this.maxRetries=(d=S.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(f=S.fetch)!==null&&f!==void 0?f:dV(),this.encoder=mV,this._options=S,this.apiKey=v,this.apiVersion=b,this.clientAdapter=S.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=zc([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return zc([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return zc([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,r])=>typeof r<"u").map(([t,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(t)}=`;throw new Rr(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${sl}`}defaultIdempotencyKey(){return`stainless-node-retry-${WL()}`}makeStatusError(e,t,r,i){return Mn.generate(e,t,r,i)}buildURL(e,t,r){const i=!this.baseURLOverridden()&&r||this.baseURL,a=ZL(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return nV(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:r}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:t},i)))}request(e,t=null){return new Ty(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,r){var i,a,l;const d=await e,f=(i=d.maxRetries)!==null&&i!==void 0?i:this.maxRetries;t==null&&(t=f),await this.prepareOptions(d);const{req:m,url:v,timeout:b}=await this.buildRequest(d,{retryCount:f-t});await this.prepareRequest(m,{url:v,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=r===void 0?"":`, retryOf: ${r}`,I=Date.now();if(kn(this).debug(`[${T}] sending request`,$o({retryOfRequestLogID:r,method:d.method,url:v,options:d,headers:m.headers})),!((a=d.signal)===null||a===void 0)&&a.aborted)throw new Sg;const D=new AbortController,N=await this.fetchWithTimeout(v,m,b,D).catch(wg),U=Date.now();if(N instanceof globalThis.Error){const F=`retrying, ${t} attempts remaining`;if(!((l=d.signal)===null||l===void 0)&&l.aborted)throw new Sg;const Q=Eg(N)||/timed? ?out/i.test(String(N)+("cause"in N?String(N.cause):""));if(t)return kn(this).info(`[${T}] connection ${Q?"timed out":"failed"} - ${F}`),kn(this).debug(`[${T}] connection ${Q?"timed out":"failed"} (${F})`,$o({retryOfRequestLogID:r,url:v,durationMs:U-I,message:N.message})),this.retryRequest(d,t,r??T);throw kn(this).info(`[${T}] connection ${Q?"timed out":"failed"} - error; no more retries left`),kn(this).debug(`[${T}] connection ${Q?"timed out":"failed"} (error; no more retries left)`,$o({retryOfRequestLogID:r,url:v,durationMs:U-I,message:N.message})),Q?new JS:new mf({cause:N})}const B=`[${T}${S}] ${m.method} ${v} ${N.ok?"succeeded":"failed"} with status ${N.status} in ${U-I}ms`;if(!N.ok){const F=await this.shouldRetry(N);if(t&&F){const R=`retrying, ${t} attempts remaining`;return await fV(N.body),kn(this).info(`${B} - ${R}`),kn(this).debug(`[${T}] response error (${R})`,$o({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:U-I})),this.retryRequest(d,t,r??T,N.headers)}const Q=F?"error; no more retries left":"error; not retryable";kn(this).info(`${B} - ${Q}`);const J=await N.text().catch(R=>wg(R).message),re=iV(J),k=re?void 0:J;throw kn(this).debug(`[${T}] response error (${Q})`,$o({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,message:k,durationMs:Date.now()-I})),this.makeStatusError(N.status,re,k,N.headers)}return kn(this).info(B),kn(this).debug(`[${T}] response start`,$o({retryOfRequestLogID:r,url:N.url,status:N.status,headers:N.headers,durationMs:U-I})),{response:N,options:d,controller:D,requestLogID:T,retryOfRequestLogID:r,startTime:I}}async fetchWithTimeout(e,t,r,i){const a=t||{},{signal:l,method:d}=a,f=kh(a,["signal","method"]);l&&l.addEventListener("abort",()=>i.abort());const m=setTimeout(()=>i.abort(),r),v=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,b=Object.assign(Object.assign(Object.assign({signal:i.signal},v?{duplex:"half"}:{}),{method:"GET"}),f);d&&(b.method=d.toUpperCase());try{return await this.fetch.call(void 0,e,b)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,r,i){var a;let l;const d=i==null?void 0:i.get("retry-after-ms");if(d){const m=parseFloat(d);Number.isNaN(m)||(l=m)}const f=i==null?void 0:i.get("retry-after");if(f&&!l){const m=parseFloat(f);Number.isNaN(m)?l=Date.parse(f)-Date.now():l=m*1e3}if(!(l&&0<=l&&l<60*1e3)){const m=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,m)}return await oV(l),this.makeRequest(e,t-1,r)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,l=Math.min(.5*Math.pow(2,a),8),d=1-Math.random()*.25;return l*d*1e3}async buildRequest(e,{retryCount:t=0}={}){var r,i,a;const l=Object.assign({},e),{method:d,path:f,query:m,defaultBaseURL:v}=l,b=this.buildURL(f,m,v);"timeout"in l&&sV("timeout",l.timeout),l.timeout=(r=l.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:T,body:S}=this.buildBody({options:l}),I=await this.buildHeaders({options:e,method:d,bodyHeaders:T,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:I},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"}),S&&{body:S}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:b,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:r,retryCount:i}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let d=zc([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),uV()),this._options.defaultHeaders,r,e.headers,l]);return this.validateHeaders(d),d.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=zc([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:hV(e)}:this.encoder({body:e,headers:r})}}gf.DEFAULT_TIMEOUT=6e4;class an extends gf{constructor(){super(...arguments),this.interactions=new cA(this)}}dA=an;an.GeminiNextGenAPIClient=dA;an.GeminiNextGenAPIClientError=Rr;an.APIError=Mn;an.APIConnectionError=mf;an.APIConnectionTimeoutError=JS;an.APIUserAbortError=Sg;an.NotFoundError=WS;an.ConflictError=QS;an.RateLimitError=eA;an.BadRequestError=YS;an.AuthenticationError=KS;an.InternalServerError=tA;an.PermissionDeniedError=XS;an.UnprocessableEntityError=ZS;an.toFile=xV;an.Interactions=cA;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DV(n,e){const t={},r=p(n,["name"]);return r!=null&&g(t,["_url","name"],r),t}function MV(n,e){const t={},r=p(n,["name"]);return r!=null&&g(t,["_url","name"],r),t}function PV(n,e){const t={},r=p(n,["sdkHttpResponse"]);return r!=null&&g(t,["sdkHttpResponse"],r),t}function LV(n,e){const t={},r=p(n,["sdkHttpResponse"]);return r!=null&&g(t,["sdkHttpResponse"],r),t}function VV(n,e,t){const r={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=p(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&g(e,["displayName"],i),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(n,["learningRateMultiplier"]);if(l!=null&&g(r,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=p(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const f=p(n,["learningRate"]);if(e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","learningRate"],f),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return r}function UV(n,e,t){const r={};let i=p(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const S=p(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec"],YT(S))}else if(i==="PREFERENCE_TUNING"){const S=p(n,["validationDataset"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec"],YT(S))}const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let d=p(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const S=p(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],S)}else if(d==="PREFERENCE_TUNING"){const S=p(n,["epochCount"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],S)}let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const S=p(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],S)}else if(f==="PREFERENCE_TUNING"){const S=p(n,["learningRateMultiplier"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],S)}let m=p(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const S=p(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],S)}else if(m==="PREFERENCE_TUNING"){const S=p(n,["exportLastCheckpointOnly"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],S)}let v=p(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const S=p(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],S)}else if(v==="PREFERENCE_TUNING"){const S=p(n,["adapterSize"]);e!==void 0&&S!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],S)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const b=p(n,["labels"]);e!==void 0&&b!=null&&g(e,["labels"],b);const T=p(n,["beta"]);return e!==void 0&&T!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],T),r}function OV(n,e){const t={},r=p(n,["baseModel"]);r!=null&&g(t,["baseModel"],r);const i=p(n,["preTunedModel"]);i!=null&&g(t,["preTunedModel"],i);const a=p(n,["trainingDataset"]);a!=null&&KV(a);const l=p(n,["config"]);return l!=null&&VV(l,t),t}function jV(n,e){const t={},r=p(n,["baseModel"]);r!=null&&g(t,["baseModel"],r);const i=p(n,["preTunedModel"]);i!=null&&g(t,["preTunedModel"],i);const a=p(n,["trainingDataset"]);a!=null&&XV(a,t,e);const l=p(n,["config"]);return l!=null&&UV(l,t,e),t}function FV(n,e){const t={},r=p(n,["name"]);return r!=null&&g(t,["_url","name"],r),t}function qV(n,e){const t={},r=p(n,["name"]);return r!=null&&g(t,["_url","name"],r),t}function BV(n,e,t){const r={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),r}function HV(n,e,t){const r={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),r}function GV(n,e){const t={},r=p(n,["config"]);return r!=null&&BV(r,t),t}function zV(n,e){const t={},r=p(n,["config"]);return r!=null&&HV(r,t),t}function $V(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&g(t,["sdkHttpResponse"],r);const i=p(n,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=p(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>hA(d))),g(t,["tuningJobs"],l)}return t}function JV(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&g(t,["sdkHttpResponse"],r);const i=p(n,["nextPageToken"]);i!=null&&g(t,["nextPageToken"],i);const a=p(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>Cg(d))),g(t,["tuningJobs"],l)}return t}function YV(n,e){const t={},r=p(n,["name"]);r!=null&&g(t,["model"],r);const i=p(n,["name"]);return i!=null&&g(t,["endpoint"],i),t}function KV(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=p(n,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(a=>a)),g(t,["examples","examples"],i)}return t}function XV(n,e,t){const r={};let i=p(t,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(i==="PREFERENCE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function hA(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&g(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&g(t,["name"],i);const a=p(n,["state"]);a!=null&&g(t,["state"],CS(a));const l=p(n,["createTime"]);l!=null&&g(t,["createTime"],l);const d=p(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const f=p(n,["tuningTask","completeTime"]);f!=null&&g(t,["endTime"],f);const m=p(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=p(n,["description"]);v!=null&&g(t,["description"],v);const b=p(n,["baseModel"]);b!=null&&g(t,["baseModel"],b);const T=p(n,["_self"]);return T!=null&&g(t,["tunedModel"],YV(T)),t}function Cg(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&g(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&g(t,["name"],i);const a=p(n,["state"]);a!=null&&g(t,["state"],CS(a));const l=p(n,["createTime"]);l!=null&&g(t,["createTime"],l);const d=p(n,["startTime"]);d!=null&&g(t,["startTime"],d);const f=p(n,["endTime"]);f!=null&&g(t,["endTime"],f);const m=p(n,["updateTime"]);m!=null&&g(t,["updateTime"],m);const v=p(n,["error"]);v!=null&&g(t,["error"],v);const b=p(n,["description"]);b!=null&&g(t,["description"],b);const T=p(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const S=p(n,["tunedModel"]);S!=null&&g(t,["tunedModel"],S);const I=p(n,["preTunedModel"]);I!=null&&g(t,["preTunedModel"],I);const D=p(n,["supervisedTuningSpec"]);D!=null&&g(t,["supervisedTuningSpec"],D);const N=p(n,["preferenceOptimizationSpec"]);N!=null&&g(t,["preferenceOptimizationSpec"],N);const U=p(n,["tuningDataStats"]);U!=null&&g(t,["tuningDataStats"],U);const B=p(n,["encryptionSpec"]);B!=null&&g(t,["encryptionSpec"],B);const F=p(n,["partnerModelTuningSpec"]);F!=null&&g(t,["partnerModelTuningSpec"],F);const Q=p(n,["customBaseModel"]);Q!=null&&g(t,["customBaseModel"],Q);const J=p(n,["experiment"]);J!=null&&g(t,["experiment"],J);const re=p(n,["labels"]);re!=null&&g(t,["labels"],re);const k=p(n,["outputUri"]);k!=null&&g(t,["outputUri"],k);const M=p(n,["pipelineJob"]);M!=null&&g(t,["pipelineJob"],M);const R=p(n,["serviceAccount"]);R!=null&&g(t,["serviceAccount"],R);const L=p(n,["tunedModelDisplayName"]);L!=null&&g(t,["tunedModelDisplayName"],L);const O=p(n,["veoTuningSpec"]);return O!=null&&g(t,["veoTuningSpec"],O),t}function WV(n,e){const t={},r=p(n,["sdkHttpResponse"]);r!=null&&g(t,["sdkHttpResponse"],r);const i=p(n,["name"]);i!=null&&g(t,["name"],i);const a=p(n,["metadata"]);a!=null&&g(t,["metadata"],a);const l=p(n,["done"]);l!=null&&g(t,["done"],l);const d=p(n,["error"]);return d!=null&&g(t,["error"],d),t}function YT(n,e){const t={},r=p(n,["gcsUri"]);r!=null&&g(t,["validationDatasetUri"],r);const i=p(n,["vertexDatasetResource"]);return i!=null&&g(t,["validationDatasetUri"],i),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class QV extends mi{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new la(li.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var r;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const i={tunedModelName:t.baseModel};!((r=t.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:i});return a.baseModel=void 0,await this.tuneInternal(a)}else{const i=Object.assign({},t);return await this.tuneInternal(i)}else{const i=Object.assign({},t),a=await this.tuneMldevInternal(i);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:gg.JOB_STATE_QUEUED}}}}async getInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=qV(e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>Cg(v))}else{const m=FV(e);return d=xe("{name}",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>hA(v))}}async listInternal(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=zV(e);return d=xe("tuningJobs",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=JV(v),T=new _T;return Object.assign(T,b),T})}else{const m=GV(e);return d=xe("tunedModels",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=$V(v),T=new _T;return Object.assign(T,b),T})}}async cancel(e){var t,r,i,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const m=MV(e);return d=xe("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=LV(v),T=new bT;return Object.assign(T,b),T})}else{const m=DV(e);return d=xe("{name}:cancel",m._url),f=m._query,delete m._url,delete m._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(v=>v.json().then(b=>{const T=b;return T.sdkHttpResponse={headers:v.headers},T})),l.then(v=>{const b=PV(v),T=new bT;return Object.assign(T,b),T})}}async tuneInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI()){const d=jV(e,e);return a=xe("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>Cg(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,r;let i,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=OV(e);return a=xe("tunedModels",d._url),l=d._query,delete d._url,delete d._query,i=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:f.headers},v})),i.then(f=>WV(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ZV{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const eU=1024*1024*8,tU=3,nU=1e3,rU=2,Mh="x-goog-upload-status";async function sU(n,e,t){var r;const i=await fA(n,e,t),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function iU(n,e,t){var r;const i=await fA(n,e,t),a=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[Mh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=TS(a),d=new py;return Object.assign(d,l),d}async function fA(n,e,t){var r,i;let a=0,l=0,d=new yg(new Response),f="upload";for(a=n.size;l<a;){const m=Math.min(eU,a-l),v=n.slice(l,l+m);l+m>=a&&(f+=", finalize");let b=0,T=nU;for(;b<tU&&(d=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(m)}}}),!(!((r=d==null?void 0:d.headers)===null||r===void 0)&&r[Mh]));)b++,await aU(T),T=T*rU;if(l+=m,((i=d==null?void 0:d.headers)===null||i===void 0?void 0:i[Mh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function oU(n){return{size:n.size,type:n.type}}function aU(n){return new Promise(e=>setTimeout(e,n))}class lU{async upload(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await sU(e,t,r)}async uploadToFileSearchStore(e,t,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iU(e,t,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await oU(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cU{create(e,t,r){return new uU(e,t,r)}}class uU{constructor(e,t,r){this.url=e,this.headers=t,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const KT="x-goog-api-key";class dU{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(KT)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(KT,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const hU="gl-node/";class mA{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new an({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const r=a2(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new dU(this.apiKey);this.apiClient=new oL({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:hU+"web",uploader:new lU,downloader:new ZV}),this.models=new SL(this.apiClient),this.live=new xL(this.apiClient,i,new cU),this.batches=new VD(this.apiClient),this.chats=new yM(this.models,this.apiClient),this.caches=new mM(this.apiClient),this.files=new NM(this.apiClient),this.operations=new AL(this.apiClient),this.authTokens=new BL(this.apiClient),this.tunings=new QV(this.apiClient),this.fileSearchStores=new XL(this.apiClient)}}const Jo="your_gemini_api_key",nl=new mA({apiKey:Jo}),Ph={async generateVerseReflection(n,e){try{return(await nl.models.generateContent({model:"gemini-3-flash-preview",contents:`Read this Bible verse (${e}): "${n}". 
        Write a short, encouraging 2-sentence reflection applicable to modern daily life.`})).text||"Could not generate reflection."}catch(t){return console.error("Gemini Error:",t),"Unable to generate reflection at this time."}},async summarizeSermon(n){try{const e=await nl.models.generateContent({model:"gemini-3-pro-preview",contents:`Analyze the following sermon transcript and provide a structured summary in JSON format.
        Transcript: ${n}`,config:{responseMimeType:"application/json",responseSchema:{type:wn.OBJECT,properties:{title:{type:wn.STRING,description:"A catchy title for the sermon"},keyPoints:{type:wn.ARRAY,items:{type:wn.STRING},description:"3 key takeaways"},practicalApplications:{type:wn.ARRAY,items:{type:wn.STRING},description:"1-2 practical applications"},discussionQuestions:{type:wn.ARRAY,items:{type:wn.STRING},description:"2-3 discussion questions"}}}}});return e.text?JSON.parse(e.text):null}catch(e){return console.error("Gemini Error:",e),null}},async explainPassage(n){try{return(await nl.models.generateContent({model:"gemini-3-flash-preview",contents:`Provide a historical context and theological insight for the following passage. Keep it concise (under 100 words). Passage: ${n}`})).text||"No insight available."}catch(e){return console.error("Gemini Error:",e),"Unable to generate insights."}},async transcribeAudio(n,e){try{return(await nl.models.generateContent({model:"gemini-3-flash-preview",contents:{parts:[{inlineData:{mimeType:e,data:n}},{text:"Transcribe this audio clip accurately."}]}})).text||"Transcription failed."}catch(t){return console.error("Gemini Transcription Error:",t),"Error transcribing audio. Ensure the clip is not too long."}},async generateSpeech(n,e="Charon"){var t,r,i,a,l,d;try{return((d=(l=(a=(i=(r=(t=(await nl.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:n}]}],config:{responseModalities:[cu.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}}}})).candidates)==null?void 0:t[0])==null?void 0:r.content)==null?void 0:i.parts)==null?void 0:a[0])==null?void 0:l.inlineData)==null?void 0:d.data)||null}catch(f){return console.error("Gemini TTS Error:",f),null}},async summarizeText(n){try{return(await nl.models.generateContent({model:"gemini-3-flash-preview",contents:`Summarize the following note in 2-3 concise sentences, highlighting the main points:

${n}`})).text||"Could not generate summary."}catch(e){return console.error("Gemini Error:",e),"Unable to generate summary at this time."}}};class fU{constructor(e){this.sqlite=e,this._connectionDict=new Map}async initWebStore(){try{return await this.sqlite.initWebStore(),Promise.resolve()}catch(e){return Promise.reject(e)}}async saveToStore(e){try{return await this.sqlite.saveToStore({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async saveToLocalDisk(e){try{return await this.sqlite.saveToLocalDisk({database:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getFromLocalDiskToStore(e){const t=e??!0;try{return await this.sqlite.getFromLocalDiskToStore({overwrite:t}),Promise.resolve()}catch(r){return Promise.reject(r)}}async echo(e){try{const t=await this.sqlite.echo({value:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isSecretStored(){try{const e=await this.sqlite.isSecretStored();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async setEncryptionSecret(e){try{return await this.sqlite.setEncryptionSecret({passphrase:e}),Promise.resolve()}catch(t){return Promise.reject(t)}}async changeEncryptionSecret(e,t){try{return await this.sqlite.changeEncryptionSecret({passphrase:e,oldpassphrase:t}),Promise.resolve()}catch(r){return Promise.reject(r)}}async clearEncryptionSecret(){try{return await this.sqlite.clearEncryptionSecret(),Promise.resolve()}catch(e){return Promise.reject(e)}}async checkEncryptionSecret(e){try{const t=await this.sqlite.checkEncryptionSecret({passphrase:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async addUpgradeStatement(e,t){try{return e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.addUpgradeStatement({database:e,upgrade:t}),Promise.resolve()}catch(r){return Promise.reject(r)}}async createConnection(e,t,r,i,a){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.createConnection({database:e,encrypted:t,mode:r,version:i,readonly:a});const l=new XT(e,a,this.sqlite),d=a?`RO_${e}`:`RW_${e}`;return this._connectionDict.set(d,l),Promise.resolve(l)}catch(l){return Promise.reject(l)}}async closeConnection(e,t){try{e.endsWith(".db")&&(e=e.slice(0,-3)),await this.sqlite.closeConnection({database:e,readonly:t});const r=t?`RO_${e}`:`RW_${e}`;return this._connectionDict.delete(r),Promise.resolve()}catch(r){return Promise.reject(r)}}async isConnection(e,t){const r={};e.endsWith(".db")&&(e=e.slice(0,-3));const i=t?`RO_${e}`:`RW_${e}`;return r.result=this._connectionDict.has(i),Promise.resolve(r)}async retrieveConnection(e,t){e.endsWith(".db")&&(e=e.slice(0,-3));const r=t?`RO_${e}`:`RW_${e}`;if(this._connectionDict.has(r)){const i=this._connectionDict.get(r);return typeof i<"u"?Promise.resolve(i):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async getNCDatabasePath(e,t){try{const r=await this.sqlite.getNCDatabasePath({path:e,database:t});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async createNCConnection(e,t){try{await this.sqlite.createNCConnection({databasePath:e,version:t});const r=new XT(e,!0,this.sqlite),i=`RO_${e})`;return this._connectionDict.set(i,r),Promise.resolve(r)}catch(r){return Promise.reject(r)}}async closeNCConnection(e){try{await this.sqlite.closeNCConnection({databasePath:e});const t=`RO_${e})`;return this._connectionDict.delete(t),Promise.resolve()}catch(t){return Promise.reject(t)}}async isNCConnection(e){const t={},r=`RO_${e})`;return t.result=this._connectionDict.has(r),Promise.resolve(t)}async retrieveNCConnection(e){if(this._connectionDict.has(e)){const t=`RO_${e})`,r=this._connectionDict.get(t);return typeof r<"u"?Promise.resolve(r):Promise.reject(`Connection ${e} is undefined`)}else return Promise.reject(`Connection ${e} does not exist`)}async isNCDatabase(e){try{const t=await this.sqlite.isNCDatabase({databasePath:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async retrieveAllConnections(){return this._connectionDict}async closeAllConnections(){const e=new Map;try{for(const t of this._connectionDict.keys()){const r=t.substring(3),i=t.substring(0,3)==="RO_";await this.sqlite.closeConnection({database:r,readonly:i}),e.set(t,null)}for(const t of e.keys())this._connectionDict.delete(t);return Promise.resolve()}catch(t){return Promise.reject(t)}}async checkConnectionsConsistency(){try{const e=[...this._connectionDict.keys()],t=[],r=[];for(const a of e)t.push(a.substring(0,2)),r.push(a.substring(3));const i=await this.sqlite.checkConnectionsConsistency({dbNames:r,openModes:t});return i.result||(this._connectionDict=new Map),Promise.resolve(i)}catch(e){return this._connectionDict=new Map,Promise.reject(e)}}async importFromJson(e){try{const t=await this.sqlite.importFromJson({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isJsonValid(e){try{const t=await this.sqlite.isJsonValid({jsonstring:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async copyFromAssets(e){const t=e??!0;try{return await this.sqlite.copyFromAssets({overwrite:t}),Promise.resolve()}catch(r){return Promise.reject(r)}}async getFromHTTPRequest(e,t){const r=t??!0;try{return await this.sqlite.getFromHTTPRequest({url:e,overwrite:r}),Promise.resolve()}catch(i){return Promise.reject(i)}}async isDatabaseEncrypted(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabaseEncrypted({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isInConfigEncryption(){try{const e=await this.sqlite.isInConfigEncryption();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isInConfigBiometricAuth(){try{const e=await this.sqlite.isInConfigBiometricAuth();return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isDatabase(e){e.endsWith(".db")&&(e=e.slice(0,-3));try{const t=await this.sqlite.isDatabase({database:e});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async getDatabaseList(){try{const t=(await this.sqlite.getDatabaseList()).values;t.sort();const r={values:t};return Promise.resolve(r)}catch(e){return Promise.reject(e)}}async getMigratableDbList(e){const t=e||"default";try{const r=await this.sqlite.getMigratableDbList({folderPath:t});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async addSQLiteSuffix(e,t){const r=e||"default",i=t||[];try{const a=await this.sqlite.addSQLiteSuffix({folderPath:r,dbNameList:i});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async deleteOldDatabases(e,t){const r=e||"default",i=t||[];try{const a=await this.sqlite.deleteOldDatabases({folderPath:r,dbNameList:i});return Promise.resolve(a)}catch(a){return Promise.reject(a)}}async moveDatabasesAndAddSuffix(e,t){const r=e||"default",i=t||[];return this.sqlite.moveDatabasesAndAddSuffix({folderPath:r,dbNameList:i})}}class XT{constructor(e,t,r){this.dbName=e,this.readonly=t,this.sqlite=r}getConnectionDBName(){return this.dbName}getConnectionReadOnly(){return this.readonly}async open(){try{return await this.sqlite.open({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async close(){try{return await this.sqlite.close({database:this.dbName,readonly:this.readonly}),Promise.resolve()}catch(e){return Promise.reject(e)}}async beginTransaction(){try{const e=await this.sqlite.beginTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async commitTransaction(){try{const e=await this.sqlite.commitTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async rollbackTransaction(){try{const e=await this.sqlite.rollbackTransaction({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTransactionActive(){try{const e=await this.sqlite.isTransactionActive({database:this.dbName});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async loadExtension(e){try{return await this.sqlite.loadExtension({database:this.dbName,path:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async enableLoadExtension(e){try{return await this.sqlite.enableLoadExtension({database:this.dbName,toggle:e,readonly:this.readonly}),Promise.resolve()}catch(t){return Promise.reject(t)}}async getUrl(){try{const e=await this.sqlite.getUrl({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getVersion(){try{const e=await this.sqlite.getVersion({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async getTableList(){try{const e=await this.sqlite.getTableList({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async execute(e,t=!0,r=!0){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const i=await this.sqlite.execute({database:this.dbName,statements:e,transaction:t,readonly:!1,isSQL92:r});return Promise.resolve(i)}}catch(i){return Promise.reject(i)}}async query(e,t,r=!0){let i;try{return t&&t.length>0?i=await this.sqlite.query({database:this.dbName,statement:e,values:t,readonly:this.readonly,isSQL92:!0}):i=await this.sqlite.query({database:this.dbName,statement:e,values:[],readonly:this.readonly,isSQL92:r}),i=await this.reorderRows(i),Promise.resolve(i)}catch(a){return Promise.reject(a)}}async run(e,t,r=!0,i="no",a=!0){let l;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(t&&t.length>0?l=await this.sqlite.run({database:this.dbName,statement:e,values:t,transaction:r,readonly:!1,returnMode:i,isSQL92:!0}):l=await this.sqlite.run({database:this.dbName,statement:e,values:[],transaction:r,readonly:!1,returnMode:i,isSQL92:a}),l.changes=await this.reorderRows(l.changes),Promise.resolve(l))}catch(d){return Promise.reject(d)}}async executeSet(e,t=!0,r="no",i=!0){let a;try{return this.readonly?Promise.reject("not allowed in read-only mode"):(a=await this.sqlite.executeSet({database:this.dbName,set:e,transaction:t,readonly:!1,returnMode:r,isSQL92:i}),a.changes=await this.reorderRows(a.changes),Promise.resolve(a))}catch(l){return Promise.reject(l)}}async isExists(){try{const e=await this.sqlite.isDBExists({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async isTable(e){try{const t=await this.sqlite.isTableExists({database:this.dbName,table:e,readonly:this.readonly});return Promise.resolve(t)}catch(t){return Promise.reject(t)}}async isDBOpen(){try{const e=await this.sqlite.isDBOpen({database:this.dbName,readonly:this.readonly});return Promise.resolve(e)}catch(e){return Promise.reject(e)}}async delete(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteDatabase({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async createSyncTable(){try{if(this.readonly)return Promise.reject("not allowed in read-only mode");{const e=await this.sqlite.createSyncTable({database:this.dbName,readonly:!1});return Promise.resolve(e)}}catch(e){return Promise.reject(e)}}async setSyncDate(e){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.setSyncDate({database:this.dbName,syncdate:e,readonly:!1}),Promise.resolve())}catch(t){return Promise.reject(t)}}async getSyncDate(){try{const e=await this.sqlite.getSyncDate({database:this.dbName,readonly:this.readonly});let t="";return e.syncDate>0&&(t=new Date(e.syncDate*1e3).toISOString()),Promise.resolve(t)}catch(e){return Promise.reject(e)}}async exportToJson(e,t=!1){try{const r=await this.sqlite.exportToJson({database:this.dbName,jsonexportmode:e,readonly:this.readonly,encrypted:t});return Promise.resolve(r)}catch(r){return Promise.reject(r)}}async deleteExportedRows(){try{return this.readonly?Promise.reject("not allowed in read-only mode"):(await this.sqlite.deleteExportedRows({database:this.dbName,readonly:!1}),Promise.resolve())}catch(e){return Promise.reject(e)}}async executeTransaction(e,t=!0){let r=0,i=!1;if(this.readonly)return Promise.reject("not allowed in read-only mode");if(await this.sqlite.beginTransaction({database:this.dbName}),i=await this.sqlite.isTransactionActive({database:this.dbName}),!i)return Promise.reject("After Begin Transaction, no transaction active");try{for(const d of e){if(typeof d!="object"||!("statement"in d))throw new Error("Error a task.statement must be provided");if("values"in d&&d.values&&d.values.length>0){const f=d.statement.toUpperCase().includes("RETURNING")?"all":"no",m=await this.sqlite.run({database:this.dbName,statement:d.statement,values:d.values,transaction:!1,readonly:!1,returnMode:f,isSQL92:t});if(m.changes.changes<0)throw new Error("Error in transaction method run ");r+=m.changes.changes}else{const f=await this.sqlite.execute({database:this.dbName,statements:d.statement,transaction:!1,readonly:!1});if(f.changes.changes<0)throw new Error("Error in transaction method execute ");r+=f.changes.changes}}const a=await this.sqlite.commitTransaction({database:this.dbName});r+=a.changes.changes;const l={changes:{changes:r}};return Promise.resolve(l)}catch(a){const l=a.message?a.message:a;return await this.sqlite.rollbackTransaction({database:this.dbName}),Promise.reject(l)}}async reorderRows(e){const t=e;if(e!=null&&e.values&&typeof e.values[0]=="object"&&Object.keys(e.values[0]).includes("ios_columns")){const r=e.values[0].ios_columns,i=[];for(let a=1;a<e.values.length;a++){const l=e.values[a],d={};for(const f of r)d[f]=l[f];i.push(d)}t.values=i}return Promise.resolve(t)}}const mU=aa("CapacitorSQLite",{web:()=>cf(()=>import("./web-DNF-mOwi.js"),[]).then(n=>new n.CapacitorSQLiteWeb),electron:()=>window.CapacitorCustomPlatform.plugins.CapacitorSQLite}),ou=class ou{static async initialize(){try{if(!_l.isNativePlatform()){console.log("SQLite: Running in browser, using localStorage fallback");return}this.sqlite=new fU(mU),this.db=await this.sqlite.createConnection(this.DB_NAME,!1,"no-encryption",this.DB_VERSION,!1),await this.db.open(),await this.createTables(),console.log(" Unified database initialized")}catch(e){throw console.error("Failed to initialize unified database:",e),e}}static async createTables(){if(!this.db)throw new Error("Database not initialized");await this.db.execute(`
      CREATE TABLE IF NOT EXISTS verse_data (
        id TEXT PRIMARY KEY,
        book TEXT NOT NULL,
        chapter INTEGER NOT NULL,
        verse INTEGER NOT NULL,
        note TEXT,
        highlight TEXT,
        bookmarked INTEGER DEFAULT 0,
        createdAt INTEGER NOT NULL,
        updatedAt INTEGER NOT NULL,
        UNIQUE(book, chapter, verse)
      );
    `),await this.db.execute(`
      CREATE TABLE IF NOT EXISTS text_highlights (
        id TEXT PRIMARY KEY,
        book TEXT NOT NULL,
        chapter INTEGER NOT NULL,
        verse INTEGER NOT NULL,
        startOffset INTEGER NOT NULL,
        endOffset INTEGER NOT NULL,
        selectedText TEXT NOT NULL,
        color TEXT NOT NULL,
        createdAt INTEGER NOT NULL
      );
    `),await this.db.execute(`
      CREATE TABLE IF NOT EXISTS chapter_notes (
        id TEXT PRIMARY KEY,
        book TEXT NOT NULL,
        chapter INTEGER NOT NULL,
        note TEXT NOT NULL,
        createdAt INTEGER NOT NULL,
        updatedAt INTEGER NOT NULL,
        UNIQUE(book, chapter)
      );
    `),await this.db.execute(`
      CREATE TABLE IF NOT EXISTS prayer_requests (
        id TEXT PRIMARY KEY,
        authorId TEXT NOT NULL,
        authorName TEXT NOT NULL,
        churchId TEXT,
        content TEXT NOT NULL,
        category TEXT NOT NULL,
        isAnswered INTEGER DEFAULT 0,
        isAnonymous INTEGER DEFAULT 0,
        isPublic INTEGER DEFAULT 1,
        createdAt INTEGER NOT NULL,
        updatedAt INTEGER NOT NULL,
        syncedToCloud INTEGER DEFAULT 0
      );
    `),await this.db.execute(`
      CREATE TABLE IF NOT EXISTS prayer_hearts (
        id TEXT PRIMARY KEY,
        prayerRequestId TEXT NOT NULL,
        userId TEXT NOT NULL,
        userName TEXT NOT NULL,
        userAvatar TEXT,
        createdAt INTEGER NOT NULL,
        FOREIGN KEY (prayerRequestId) REFERENCES prayer_requests(id) ON DELETE CASCADE,
        UNIQUE(prayerRequestId, userId)
      );
    `),await this.db.execute("CREATE INDEX IF NOT EXISTS idx_verse_data_location ON verse_data(book, chapter, verse);"),await this.db.execute("CREATE INDEX IF NOT EXISTS idx_text_highlights_location ON text_highlights(book, chapter, verse);"),await this.db.execute("CREATE INDEX IF NOT EXISTS idx_chapter_notes_location ON chapter_notes(book, chapter);"),await this.db.execute("CREATE INDEX IF NOT EXISTS idx_prayer_requests_created ON prayer_requests(createdAt DESC);"),await this.db.execute("CREATE INDEX IF NOT EXISTS idx_prayer_hearts_request ON prayer_hearts(prayerRequestId);")}static async getVerseData(e,t,r){if(!this.db)return this.getVerseDataFromLocalStorage(e,t,r);const a=await this.db.query("SELECT * FROM verse_data WHERE book = ? AND chapter = ? AND verse = ?;",[e,t,r]);if(a.values&&a.values.length>0){const l=a.values[0];return{id:l.id,book:l.book,chapter:l.chapter,verse:l.verse,note:l.note||"",highlight:l.highlight||"",bookmarked:!!l.bookmarked,createdAt:l.createdAt,updatedAt:l.updatedAt}}return{id:"",book:e,chapter:t,verse:r,note:"",highlight:"",bookmarked:!1,createdAt:0,updatedAt:0}}static async getAllBookmarks(){if(!this.db)try{const r=localStorage.getItem("bible_user_data");if(!r)return[];const i=JSON.parse(r);return Object.values(i).filter(a=>a&&a.bookmarked)}catch(r){return console.error("Failed to load bookmarks from localStorage:",r),[]}return((await this.db.query(`
      SELECT * FROM verse_data
      WHERE bookmarked = 1
      ORDER BY updatedAt DESC;
    `)).values||[]).map(r=>({id:r.id,book:r.book,chapter:r.chapter,verse:r.verse,note:r.note,highlight:r.highlight,bookmarked:!!r.bookmarked,createdAt:r.createdAt,updatedAt:r.updatedAt}))}static async getAllVerseData(){if(!this.db)try{const r=localStorage.getItem("bible_user_data");if(!r)return[];const i=JSON.parse(r);return Object.values(i)}catch(r){return console.error("Failed to load verse data from localStorage:",r),[]}return((await this.db.query(`
      SELECT * FROM verse_data
      ORDER BY updatedAt DESC;
    `)).values||[]).map(r=>({id:r.id,book:r.book,chapter:r.chapter,verse:r.verse,note:r.note||"",highlight:r.highlight||"",bookmarked:!!r.bookmarked,createdAt:r.createdAt,updatedAt:r.updatedAt}))}static async saveVerseData(e){if(!this.db){this.saveVerseDataToLocalStorage(e);return}const t=Date.now(),r=e.id||`${e.book}-${e.chapter}-${e.verse}`;await this.db.run(`
      INSERT OR REPLACE INTO verse_data
      (id, book, chapter, verse, note, highlight, bookmarked, createdAt, updatedAt)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[r,e.book,e.chapter,e.verse,e.note||null,e.highlight||null,e.bookmarked?1:0,e.createdAt||t,t])}static async getTextHighlights(e,t,r){return this.db?((await this.db.query(`
      SELECT * FROM text_highlights
      WHERE book = ? AND chapter = ? AND verse = ?
      ORDER BY startOffset ASC;
    `,[e,t,r])).values||[]).map(l=>({id:l.id,book:l.book,chapter:l.chapter,verse:l.verse,startOffset:l.startOffset,endOffset:l.endOffset,selectedText:l.selectedText,color:l.color,createdAt:l.createdAt})):this.getTextHighlightsFromLocalStorage(e,t,r)}static async addTextHighlight(e){if(!this.db){this.addTextHighlightToLocalStorage(e);return}await this.db.run(`
      INSERT INTO text_highlights
      (id, book, chapter, verse, startOffset, endOffset, selectedText, color, createdAt)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?);
    `,[e.id,e.book,e.chapter,e.verse,e.startOffset,e.endOffset,e.selectedText,e.color,e.createdAt])}static async deleteTextHighlight(e){if(!this.db){this.deleteTextHighlightFromLocalStorage(e);return}await this.db.run("DELETE FROM text_highlights WHERE id = ?;",[e])}static async getChapterNote(e,t){if(!this.db)return this.getChapterNoteFromLocalStorage(e,t);const i=await this.db.query("SELECT * FROM chapter_notes WHERE book = ? AND chapter = ?;",[e,t]);if(i.values&&i.values.length>0){const a=i.values[0];return{id:a.id,book:a.book,chapter:a.chapter,note:a.note,createdAt:a.createdAt,updatedAt:a.updatedAt}}return null}static async saveChapterNote(e){if(!this.db){this.saveChapterNoteToLocalStorage(e);return}const t=Date.now(),r=e.id||`${e.book}-${e.chapter}`;await this.db.run(`
      INSERT OR REPLACE INTO chapter_notes
      (id, book, chapter, note, createdAt, updatedAt)
      VALUES (?, ?, ?, ?, ?, ?);
    `,[r,e.book,e.chapter,e.note,e.createdAt||t,t])}static async deleteChapterNote(e,t){if(!this.db){this.deleteChapterNoteFromLocalStorage(e,t);return}await this.db.run("DELETE FROM chapter_notes WHERE book = ? AND chapter = ?;",[e,t])}static async addPrayerRequest(e){if(!this.db){const r=this.getLocalStoragePrayers();r.push({...e,syncedToCloud:!1}),localStorage.setItem("prayer_requests",JSON.stringify(r));return}await this.db.run(`
      INSERT INTO prayer_requests
      (id, authorId, authorName, churchId, content, category, isAnswered, isAnonymous, isPublic, createdAt, updatedAt, syncedToCloud)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, 0);
    `,[e.id,e.authorId,e.authorName,e.churchId||null,e.content,e.category,e.isAnswered?1:0,e.isAnonymous?1:0,e.isPublic?1:0,e.createdAt,e.updatedAt])}static async getAllPrayerRequests(){return this.db?((await this.db.query(`
      SELECT
        pr.*,
        COUNT(ph.id) as prayedCount
      FROM prayer_requests pr
      LEFT JOIN prayer_hearts ph ON pr.id = ph.prayerRequestId
      GROUP BY pr.id
      ORDER BY pr.createdAt DESC;
    `)).values||[]).map(r=>({id:r.id,authorId:r.authorId,authorName:r.authorName,churchId:r.churchId,content:r.content,category:r.category,isAnswered:!!r.isAnswered,isAnonymous:!!r.isAnonymous,isPublic:!!r.isPublic,createdAt:r.createdAt,updatedAt:r.updatedAt,syncedToCloud:!!r.syncedToCloud,prayedCount:r.prayedCount||0})):this.getLocalStoragePrayers().map(i=>({...i,prayedCount:0}))}static async getMyPrayerRequests(e){return this.db?((await this.db.query(`
      SELECT
        pr.*,
        COUNT(ph.id) as prayedCount
      FROM prayer_requests pr
      LEFT JOIN prayer_hearts ph ON pr.id = ph.prayerRequestId
      WHERE pr.authorId = ?
      GROUP BY pr.id
      ORDER BY pr.createdAt DESC;
    `,[e])).values||[]).map(i=>({id:i.id,authorId:i.authorId,authorName:i.authorName,churchId:i.churchId,content:i.content,category:i.category,isAnswered:!!i.isAnswered,isAnonymous:!!i.isAnonymous,isPublic:!!i.isPublic,createdAt:i.createdAt,updatedAt:i.updatedAt,syncedToCloud:!!i.syncedToCloud,prayedCount:i.prayedCount||0})):this.getLocalStoragePrayers().filter(a=>a.authorId===e).map(a=>({...a,prayedCount:0}))}static async addPrayerHeart(e){if(!this.db){const r=this.getLocalStorageHearts();r.push(e),localStorage.setItem("prayer_hearts",JSON.stringify(r));return}await this.db.run(`
      INSERT OR IGNORE INTO prayer_hearts
      (id, prayerRequestId, userId, userName, userAvatar, createdAt)
      VALUES (?, ?, ?, ?, ?, ?);
    `,[e.id,e.prayerRequestId,e.userId,e.userName,e.userAvatar||null,e.createdAt])}static async getHeartsForPrayer(e){return this.db?((await this.db.query("SELECT * FROM prayer_hearts WHERE prayerRequestId = ? ORDER BY createdAt DESC;",[e])).values||[]).map(i=>({id:i.id,prayerRequestId:i.prayerRequestId,userId:i.userId,userName:i.userName,userAvatar:i.userAvatar,createdAt:i.createdAt})):this.getLocalStorageHearts().filter(a=>a.prayerRequestId===e)}static async updatePrayerRequest(e,t){if(!this.db){const l=this.getLocalStoragePrayers(),d=l.findIndex(f=>f.id===e);d!==-1&&(l[d]={...l[d],...t,updatedAt:Date.now()},localStorage.setItem("prayer_requests",JSON.stringify(l)));return}const r=[],i=[];if(t.content!==void 0&&(r.push("content = ?"),i.push(t.content)),t.isAnswered!==void 0&&(r.push("isAnswered = ?"),i.push(t.isAnswered?1:0)),t.category!==void 0&&(r.push("category = ?"),i.push(t.category)),r.length===0)return;r.push("updatedAt = ?"),i.push(Date.now()),i.push(e);const a=`UPDATE prayer_requests SET ${r.join(", ")} WHERE id = ?;`;await this.db.run(a,i)}static async deletePrayerRequest(e){if(!this.db){const r=this.getLocalStoragePrayers().filter(i=>i.id!==e);localStorage.setItem("prayer_requests",JSON.stringify(r));return}await this.db.run("DELETE FROM prayer_requests WHERE id = ?;",[e])}static async getUnsyncedPrayers(){return this.db?((await this.db.query(`
      SELECT * FROM prayer_requests
      WHERE syncedToCloud = 0 AND isPublic = 1
      ORDER BY createdAt ASC;
    `)).values||[]).map(r=>({id:r.id,authorId:r.authorId,authorName:r.authorName,churchId:r.churchId,content:r.content,category:r.category,isAnswered:!!r.isAnswered,isAnonymous:!!r.isAnonymous,isPublic:!!r.isPublic,createdAt:r.createdAt,updatedAt:r.updatedAt,syncedToCloud:!!r.syncedToCloud})):[]}static async markPrayersAsSynced(e){if(!this.db||e.length===0)return;const r=`UPDATE prayer_requests SET syncedToCloud = 1 WHERE id IN (${e.map(()=>"?").join(",")});`;await this.db.run(r,e)}static getVerseDataFromLocalStorage(e,t,r){try{const i=localStorage.getItem("bible_user_data"),a=i?JSON.parse(i):{},l=`${e}-${t}-${r}`;return a[l]||{id:l,book:e,chapter:t,verse:r,note:"",highlight:"",bookmarked:!1,createdAt:0,updatedAt:0}}catch{return{id:"",book:e,chapter:t,verse:r,note:"",highlight:"",bookmarked:!1,createdAt:0,updatedAt:0}}}static saveVerseDataToLocalStorage(e){try{const t=localStorage.getItem("bible_user_data"),r=t?JSON.parse(t):{},i=`${e.book}-${e.chapter}-${e.verse}`;r[i]=e,localStorage.setItem("bible_user_data",JSON.stringify(r))}catch(t){console.error("Failed to save verse data to localStorage:",t)}}static getTextHighlightsFromLocalStorage(e,t,r){try{const i=localStorage.getItem("bible_text_highlights");return(i?JSON.parse(i):[]).filter(l=>l.book===e&&l.chapter===t&&l.verse===r)}catch{return[]}}static addTextHighlightToLocalStorage(e){try{const t=localStorage.getItem("bible_text_highlights"),r=t?JSON.parse(t):[];r.push(e),localStorage.setItem("bible_text_highlights",JSON.stringify(r))}catch(t){console.error("Failed to save highlight:",t)}}static deleteTextHighlightFromLocalStorage(e){try{const t=localStorage.getItem("bible_text_highlights"),i=(t?JSON.parse(t):[]).filter(a=>a.id!==e);localStorage.setItem("bible_text_highlights",JSON.stringify(i))}catch(t){console.error("Failed to delete highlight:",t)}}static getChapterNoteFromLocalStorage(e,t){try{const r=localStorage.getItem("bible_chapter_notes");return(r?JSON.parse(r):[]).find(a=>a.book===e&&a.chapter===t)||null}catch{return null}}static saveChapterNoteToLocalStorage(e){try{const t=localStorage.getItem("bible_chapter_notes"),r=t?JSON.parse(t):[],i=r.findIndex(a=>a.book===e.book&&a.chapter===e.chapter);i!==-1?r[i]=e:r.push(e),localStorage.setItem("bible_chapter_notes",JSON.stringify(r))}catch(t){console.error("Failed to save chapter note:",t)}}static deleteChapterNoteFromLocalStorage(e,t){try{const r=localStorage.getItem("bible_chapter_notes"),a=(r?JSON.parse(r):[]).filter(l=>!(l.book===e&&l.chapter===t));localStorage.setItem("bible_chapter_notes",JSON.stringify(a))}catch(r){console.error("Failed to delete chapter note:",r)}}static getLocalStoragePrayers(){try{const e=localStorage.getItem("prayer_requests");return e?JSON.parse(e):[]}catch{return[]}}static getLocalStorageHearts(){try{const e=localStorage.getItem("prayer_hearts");return e?JSON.parse(e):[]}catch{return[]}}static async close(){this.db&&(await this.db.close(),this.db=null)}};ou.db=null,ou.DB_NAME="biblenotelm_unified.db",ou.DB_VERSION=1;let nt=ou;const ur={reference:"Jeremiah 29:11",text:'For I know the plans I have for you," declares the Lord, "plans to prosper you and not to harm you, plans to give you hope and a future.',translation:"NIV"},sh=n=>{const e=n.match(/^(.+?)\s+(\d+):(\d+)$/);return e?{book:e[1],chapter:parseInt(e[2]),verse:parseInt(e[3])}:null},pU=()=>{const n=xn(),[e,t]=j.useState(null),[r,i]=j.useState(!1),[a,l]=j.useState(!1),[d,f]=j.useState(!1),[m,v]=j.useState(null),[b,T]=j.useState(!1);j.useEffect(()=>{(async()=>{const B=sh(ur.reference);if(B)try{await nt.initialize();const F=await nt.getVerseData(B.book,B.chapter,B.verse);v(F),l(F.highlight==="yellow"),f(F.bookmarked)}catch(F){console.error("Failed to load verse data:",F)}})()},[]);const S=async()=>{i(!0);const U=await Ph.generateVerseReflection(ur.text,ur.reference);t(U),i(!1)},I=async()=>{const U=sh(ur.reference);if(!U)return;const B=!a;l(B);try{const F=Date.now(),Q={id:`${U.book}-${U.chapter}-${U.verse}`,book:U.book,chapter:U.chapter,verse:U.verse,note:(m==null?void 0:m.note)||"",highlight:B?"yellow":"",bookmarked:(m==null?void 0:m.bookmarked)||!1,createdAt:(m==null?void 0:m.createdAt)||F,updatedAt:F};await nt.saveVerseData(Q),v(Q)}catch(F){console.error("Failed to save like:",F),l(!B)}},D=async()=>{const U=sh(ur.reference);if(!U)return;const B=!d;f(B);try{const F=Date.now(),Q={id:`${U.book}-${U.chapter}-${U.verse}`,book:U.book,chapter:U.chapter,verse:U.verse,note:(m==null?void 0:m.note)||"",highlight:(m==null?void 0:m.highlight)||"",bookmarked:B,createdAt:(m==null?void 0:m.createdAt)||F,updatedAt:F};await nt.saveVerseData(Q),v(Q)}catch(F){console.error("Failed to save bookmark:",F),f(!B)}},N=U=>{const B=`"${ur.text}"

 ${ur.reference} (${ur.translation})`,F=encodeURIComponent(B),Q=encodeURIComponent("Bible,DailyVerse,Faith");let J="";switch(U){case"twitter":J=`https://twitter.com/intent/tweet?text=${F}&hashtags=${Q}`;break;case"facebook":J=`https://www.facebook.com/sharer/sharer.php?quote=${F}`;break;case"whatsapp":J=`https://wa.me/?text=${F}`;break;case"telegram":J=`https://t.me/share/url?text=${F}`;break;case"copy":navigator.clipboard.writeText(B),alert("Verse copied to clipboard!"),T(!1);return;default:return}J&&(window.open(J,"_blank","width=600,height=400"),T(!1))};return h.jsxs("section",{className:"p-4 w-full",children:[h.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-primary/10 via-white to-primary/5 dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 shadow-sm border border-primary/10 dark:border-slate-700 p-6 flex flex-col gap-4",children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("span",{className:"text-xs font-semibold tracking-wider uppercase text-primary bg-primary/10 px-2 py-1 rounded-full",children:"Verse of the Day"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:I,className:`p-2 rounded-full transition-all active:scale-95 ${a?"text-red-500 bg-red-50 dark:bg-red-900/20":"text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20"}`,title:a?"Remove from favorites":"Add to favorites",children:h.jsx("span",{className:`material-symbols-outlined text-[20px] ${a?"filled":""}`,children:"favorite"})}),h.jsx("button",{onClick:D,className:`p-2 rounded-full transition-all active:scale-95 ${d?"text-amber-500 bg-amber-50 dark:bg-amber-900/20":"text-gray-400 hover:text-amber-500 hover:bg-amber-50 dark:hover:bg-amber-900/20"}`,title:d?"Remove bookmark":"Bookmark this verse",children:h.jsx("span",{className:`material-symbols-outlined text-[20px] ${d?"filled":""}`,children:"bookmark"})}),h.jsx("button",{onClick:()=>T(!0),className:"p-2 rounded-full text-gray-400 hover:text-primary hover:bg-primary/10 transition-colors dark:text-gray-500",title:"Share verse",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"share"})}),h.jsx("button",{onClick:()=>{const U=sh(ur.reference);U&&n(`/bible?book=${U.book}&chapter=${U.chapter}&verse=${U.verse}`)},className:"p-2 rounded-full text-gray-400 hover:text-primary hover:bg-primary/10 transition-colors dark:text-gray-500",title:"Open in Bible Reader",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"open_in_full"})})]})]}),h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsxs("p",{className:"font-serif text-xl sm:text-2xl italic leading-relaxed text-gray-800 dark:text-gray-100",children:["",ur.text,""]}),h.jsxs("p",{className:"text-right font-bold text-sm text-gray-500 dark:text-gray-400 mt-2",children:[" ",ur.reference]})]}),e?h.jsxs("div",{className:"mt-4 bg-white/50 dark:bg-slate-800/50 rounded-xl p-4 border border-primary/10 animate-fadeIn backdrop-blur-sm",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2 text-primary",children:[h.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"auto_awesome"}),h.jsx("span",{className:"text-xs font-bold uppercase",children:"Reflection"})]}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 leading-relaxed font-display",children:e})]}):h.jsxs("button",{onClick:S,disabled:r,className:"mt-2 self-start flex items-center gap-2 px-4 py-2 rounded-full bg-white dark:bg-slate-700 border border-gray-200 dark:border-slate-600 shadow-sm hover:border-primary/50 transition-all active:scale-95 disabled:opacity-50",children:[h.jsx("span",{className:`material-symbols-outlined text-[18px] text-yellow-500 ${r?"animate-spin":""}`,children:r?"refresh":"auto_awesome"}),h.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:r?"Generating...":"View Reflection"})]}),h.jsx("div",{className:"absolute -bottom-10 -right-10 w-40 h-40 bg-primary/5 rounded-full blur-3xl pointer-events-none"})]}),b&&h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",onClick:()=>T(!1),children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-md w-full p-6 animate-fadeIn",onClick:U=>U.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Share Verse"}),h.jsx("button",{onClick:()=>T(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px] text-gray-500",children:"close"})})]}),h.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-6 italic",children:['"',ur.text,'"',h.jsxs("span",{className:"block mt-2 font-semibold text-primary",children:[" ",ur.reference]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("button",{onClick:()=>N("twitter"),className:"flex items-center gap-3 p-3 rounded-xl bg-[#1DA1F2]/10 hover:bg-[#1DA1F2]/20 transition-colors border border-[#1DA1F2]/20",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1DA1F2] flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),h.jsx("span",{className:"font-semibold text-[#1DA1F2]",children:"Twitter"})]}),h.jsxs("button",{onClick:()=>N("facebook"),className:"flex items-center gap-3 p-3 rounded-xl bg-[#1877F2]/10 hover:bg-[#1877F2]/20 transition-colors border border-[#1877F2]/20",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#1877F2] flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),h.jsx("span",{className:"font-semibold text-[#1877F2]",children:"Facebook"})]}),h.jsxs("button",{onClick:()=>N("whatsapp"),className:"flex items-center gap-3 p-3 rounded-xl bg-[#25D366]/10 hover:bg-[#25D366]/20 transition-colors border border-[#25D366]/20",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#25D366] flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),h.jsx("span",{className:"font-semibold text-[#25D366]",children:"WhatsApp"})]}),h.jsxs("button",{onClick:()=>N("telegram"),className:"flex items-center gap-3 p-3 rounded-xl bg-[#0088CC]/10 hover:bg-[#0088CC]/20 transition-colors border border-[#0088CC]/20",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-[#0088CC] flex items-center justify-center",children:h.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:h.jsx("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})}),h.jsx("span",{className:"font-semibold text-[#0088CC]",children:"Telegram"})]}),h.jsxs("button",{onClick:()=>N("copy"),className:"col-span-2 flex items-center justify-center gap-3 p-3 rounded-xl bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors border border-gray-300 dark:border-gray-600",children:[h.jsx("span",{className:"material-symbols-outlined text-[20px] text-gray-700 dark:text-gray-300",children:"content_copy"}),h.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Copy to Clipboard"})]})]})]})})]})},gU=[{id:"3",title:"Sunday Worship Service",date:"14",time:"10:00 AM - 11:30 AM",location:"Main Sanctuary",type:"Service"},{id:"2",title:"Youth Group Meetup",date:"17",time:"6:00 PM - 8:00 PM",location:"Room 3B",type:"Youth"}],yU=({event:n})=>h.jsx(it,{to:`/events/${n.id}`,className:"block",children:h.jsxs("div",{className:"flex items-center bg-white dark:bg-slate-800 p-3 rounded-xl shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/50 transition-colors",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center w-14 h-14 rounded-lg bg-primary/10 text-primary dark:bg-slate-700 dark:text-blue-400 shrink-0",children:[h.jsx("span",{className:"text-xs font-bold uppercase",children:n.type==="Service"?"Sun":"Wed"}),h.jsx("span",{className:"text-lg font-bold",children:n.date})]}),h.jsxs("div",{className:"ml-4 flex-1",children:[h.jsx("h3",{className:"text-sm font-bold text-[#111518] dark:text-white",children:n.title}),h.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"})," ",n.time]})]}),h.jsx("div",{className:"p-2 text-gray-400 hover:text-primary dark:text-gray-500",children:h.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]})}),vU=()=>h.jsxs("section",{className:"px-4 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsx("h2",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight",children:"Upcoming Events"}),h.jsx(it,{to:"/events",className:"text-primary text-sm font-medium hover:underline",children:"See all"})]}),h.jsx("div",{className:"flex flex-col gap-3",children:gU.map(n=>h.jsx(yU,{event:n},n.id))})]}),rl=[{id:"3",title:"Special Sunday Service",description:"Join us for a celebration with special musical guests.",time:"9:00 AM & 11:00 AM",month:"Oct",day:"14",color:"text-primary",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuDN1nS1EYFukMWUghWnfGyFFFJaBD8i_zs4ETsltyCr3wwpAZ8tJ0J0VVRb2LUcETcrGDg6l5Ghc2PDsW-ayOf1RLlf6lD9xR-jRMJ9ueksqp2WFfypTrmIinSW8u66s8mHPAgxsawK78qW_sIuzIiS2-b_unC-rH39pgGzE46monZGuEFh3TLI0TYloGklD5VygOXhhMRE-qY2DPgNRlYAFnKId9zhBLRko4yF5FQkDAKSjyq813qpvCsf3ntHlpa99xGj4eZDx6TH",isFeatured:!0,isSaved:!1},{id:"1",title:"Wednesday Night Bible Study",time:"7:00 PM",location:"Main Hall",month:"Oct",day:"24",color:"text-red-500",isFeatured:!1,isSaved:!1},{id:"2",title:"Youth Group Hangout",time:"6:30 PM",location:"The Loft",month:"Oct",day:"26",color:"text-primary",isFeatured:!1,isSaved:!0},{id:"4",title:"Community Potluck",time:"5:00 PM",location:"Courtyard",month:"Nov",day:"02",color:"text-orange-500",isFeatured:!1,isSaved:!0},{id:"5",title:"Worship Night",time:"8:00 PM",location:"Chapel",month:"Nov",day:"05",color:"text-purple-500",isFeatured:!1,isSaved:!1}],WT=[{id:1,title:"Volunteer Meeting Moved",content:"Please note the time change for this week's coordination meeting. We will meet in Room 3B.",priority:!0},{id:2,title:"Food Drive Results",content:"We collected over 500lbs of food! Thank you to everyone who contributed to the community pantry.",priority:!1}],xU=()=>{const[n,e]=j.useState("This Week"),[t,r]=j.useState(null),[i,a]=j.useState(!1),[l,d]=j.useState(!1),[f,m]=j.useState({start:null,end:null}),v=rl.find(J=>J.isFeatured),b=rl.filter(J=>!J.isFeatured&&J.month==="Oct"),T=rl,S=rl.filter(J=>J.isSaved),I=31,D=0,N=j.useMemo(()=>f.start?rl.filter(J=>{if(J.month!=="Oct")return!1;const re=parseInt(J.day);return f.end?re>=f.start&&re<=f.end:re===f.start}).sort((J,re)=>parseInt(J.day)-parseInt(re.day)):[],[f]),U=J=>{!f.start||f.start&&f.end?m({start:J,end:null}):J<f.start?m({start:J,end:f.start}):m({...f,end:J})},B=()=>{m({start:null,end:null})},F=async()=>{if(!t){a(!0);try{const J="your_gemini_api_key",re=new mA({apiKey:J}),k=`Summarize the following church schedule for this week:
      Featured: ${v==null?void 0:v.title} - ${v==null?void 0:v.description}.
      Upcoming: ${b.map(R=>`${R.title} on ${R.month} ${R.day} at ${R.time}`).join(". ")}.
      Notices: ${WT.map(R=>R.title).join(", ")}.
      
      Keep it brief, friendly and inviting (under 40 words).`,M=await re.models.generateContent({model:"gemini-3-flash-preview",contents:k});r(M.text||"Join us this week for the Special Service and Bible Study! Don't miss out.")}catch(J){console.error(J),r("Unable to generate summary right now.")}finally{a(!1)}}},Q=(J,re)=>J.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-12 px-4 opacity-50",children:[h.jsx("span",{className:"material-symbols-outlined text-4xl text-gray-300 mb-2",children:"event_busy"}),h.jsx("p",{className:"text-gray-500 font-medium text-center",children:re})]}):h.jsx("div",{className:"flex flex-col gap-3 px-4 py-4",children:J.map(k=>h.jsxs(it,{to:`/events/${k.id}`,className:"group flex items-center gap-4 bg-white dark:bg-[#1a2630] px-4 py-3 justify-between hover:bg-gray-50 dark:hover:bg-[#253341] transition-colors cursor-pointer rounded-lg shadow-sm border border-transparent hover:border-gray-200 dark:hover:border-gray-700",children:[h.jsxs("div",{className:"flex items-center gap-4 w-full",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg bg-gray-50 dark:bg-[#253341] shadow-sm shrink-0 size-[60px] border border-gray-100 dark:border-gray-700",children:[h.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${k.color}`,children:k.month}),h.jsx("span",{className:"text-xl font-bold text-[#111518] dark:text-white leading-none mt-0.5",children:k.day})]}),h.jsxs("div",{className:"flex flex-col justify-center flex-1 min-w-0",children:[h.jsx("p",{className:"text-[#111518] dark:text-white text-base font-semibold leading-normal line-clamp-1 group-hover:text-primary transition-colors",children:k.title}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:"text-[#60778a] dark:text-gray-400 text-sm font-normal",children:k.time}),k.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-[#dbe1e6] dark:text-gray-600 text-xs",children:""}),h.jsx("span",{className:"text-[#60778a] dark:text-gray-400 text-sm font-normal truncate",children:k.location})]})]})]})]}),h.jsx("div",{className:"shrink-0 text-[#dbe1e6] dark:text-gray-600",children:h.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]},k.id))});return h.jsxs("div",{className:"relative flex flex-col w-full min-h-screen bg-background-light dark:bg-background-dark shadow-2xl overflow-hidden",children:[h.jsxs("header",{className:"flex items-center justify-between bg-white dark:bg-[#1a2630] p-4 pb-2 sticky top-0 z-10 shadow-sm",children:[h.jsx("h2",{className:"text-xl font-bold leading-tight tracking-[-0.015em] flex-1 text-[#111518] dark:text-white",children:"Church Life"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:()=>d(!0),className:"flex items-center justify-center text-[#111518] dark:text-white transition-colors hover:text-primary",children:h.jsx("span",{className:"material-symbols-outlined",children:"calendar_month"})}),h.jsx("button",{className:"flex items-center justify-center text-[#111518] dark:text-white transition-colors hover:text-primary",children:h.jsx("span",{className:"material-symbols-outlined",children:"tune"})})]})]}),h.jsx("nav",{className:"bg-white dark:bg-[#1a2630] pt-2 sticky top-[60px] z-10",children:h.jsx("div",{className:"flex border-b border-[#dbe1e6] dark:border-gray-700 px-4 justify-between",children:["This Week","All Events","Saved"].map(J=>h.jsx("button",{onClick:()=>e(J),className:`flex flex-col items-center justify-center border-b-[3px] pb-3 pt-2 flex-1 transition-colors ${n===J?"border-primary text-primary":"border-transparent text-[#60778a] dark:text-gray-400 hover:text-[#111518] dark:hover:text-white"}`,children:h.jsx("p",{className:"text-sm font-bold leading-normal tracking-[0.015em]",children:J})},J))})}),h.jsxs("main",{className:"flex-1 overflow-y-auto pb-20",children:[n==="This Week"&&h.jsxs("div",{className:"animate-fadeIn",children:[h.jsx("div",{className:"px-4 py-4",children:t?h.jsx("div",{className:"w-full bg-primary/10 rounded-xl p-4 animate-fadeIn",children:h.jsxs("div",{className:"flex items-start gap-2",children:[h.jsx("span",{className:"material-symbols-outlined text-primary text-[20px] mt-0.5",children:"auto_awesome"}),h.jsx("p",{className:"text-sm text-[#111518] dark:text-white leading-relaxed",children:t})]})}):h.jsxs("button",{onClick:F,disabled:i,className:"w-full bg-gradient-to-r from-primary/10 to-blue-100/50 dark:from-primary/20 dark:to-blue-900/20 rounded-full py-2 px-4 flex items-center justify-center gap-2 group transition-all active:scale-95 disabled:opacity-70",children:[h.jsx("span",{className:`material-symbols-outlined text-primary text-[20px] ${i?"animate-spin":""}`,children:i?"refresh":"auto_awesome"}),h.jsx("span",{className:"text-primary text-sm font-medium",children:i?"Generating summary...":"Summarize this week for me"})]})}),v&&h.jsx("div",{className:"px-4 pb-2 @container",children:h.jsxs(it,{to:`/events/${v.id}`,className:"block flex flex-col items-stretch justify-start rounded-xl shadow-md bg-white dark:bg-[#1a2630] overflow-hidden hover:shadow-lg transition-shadow",children:[h.jsx("div",{className:"w-full aspect-video bg-cover bg-center relative",style:{backgroundImage:`url("${v.image}")`},children:h.jsx("div",{className:"absolute inset-0 bg-black/20"})}),h.jsxs("div",{className:"flex w-full grow flex-col items-stretch justify-center gap-1 py-4 px-4",children:[h.jsx("div",{className:"flex justify-between items-start",children:h.jsxs("div",{children:[h.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wider bg-primary/10 text-primary mb-2",children:"Featured"}),h.jsx("h3",{className:"text-[#111518] dark:text-white text-xl font-bold leading-tight tracking-[-0.015em]",children:v.title})]})}),v.description&&h.jsx("p",{className:"text-[#60778a] dark:text-gray-300 text-sm font-normal leading-normal mt-1",children:v.description}),h.jsxs("div",{className:"flex items-end gap-3 justify-between mt-4",children:[h.jsx("div",{className:"flex flex-col",children:h.jsx("p",{className:"text-[#60778a] dark:text-gray-400 text-sm font-medium",children:v.time})}),h.jsx("button",{className:"flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-9 px-5 bg-primary hover:bg-blue-600 transition-colors text-white text-sm font-bold leading-normal shadow-sm",children:"RSVP"})]})]})]})}),h.jsxs("div",{className:"mt-4",children:[h.jsx("h3",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2",children:"Happening Soon"}),h.jsx("div",{className:"flex flex-col gap-0 px-2",children:b.map(J=>h.jsxs(it,{to:`/events/${J.id}`,className:"group flex items-center gap-4 bg-background-light dark:bg-background-dark px-4 py-3 justify-between hover:bg-white dark:hover:bg-[#1a2630] transition-colors cursor-pointer rounded-lg mx-2",children:[h.jsxs("div",{className:"flex items-center gap-4 w-full",children:[h.jsxs("div",{className:"flex flex-col items-center justify-center rounded-lg bg-white dark:bg-[#253341] shadow-sm shrink-0 size-[60px] border border-gray-100 dark:border-gray-700",children:[h.jsx("span",{className:`text-xs font-bold uppercase tracking-wide ${J.color}`,children:J.month}),h.jsx("span",{className:"text-xl font-bold text-[#111518] dark:text-white leading-none mt-0.5",children:J.day})]}),h.jsxs("div",{className:"flex flex-col justify-center flex-1 min-w-0",children:[h.jsx("p",{className:"text-[#111518] dark:text-white text-base font-semibold leading-normal line-clamp-1 group-hover:text-primary transition-colors",children:J.title}),h.jsxs("div",{className:"flex items-center gap-1.5 mt-0.5",children:[h.jsx("span",{className:"text-[#60778a] dark:text-gray-400 text-sm font-normal",children:J.time}),J.location&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"text-[#dbe1e6] dark:text-gray-600 text-xs",children:""}),h.jsx("span",{className:"text-[#60778a] dark:text-gray-400 text-sm font-normal truncate",children:J.location})]})]})]})]}),h.jsx("div",{className:"shrink-0 text-[#dbe1e6] dark:text-gray-600",children:h.jsx("span",{className:"material-symbols-outlined",children:"chevron_right"})})]},J.id))})]}),h.jsxs("div",{className:"mt-6 mb-8",children:[h.jsx("h3",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2",children:"Notices"}),h.jsx("div",{className:"flex flex-col gap-3 px-4",children:WT.map(J=>h.jsxs("div",{className:`flex flex-col p-4 bg-white dark:bg-[#1a2630] rounded-lg shadow-sm border-l-4 ${J.priority?"border-primary":"border-gray-200 dark:border-gray-700"}`,children:[h.jsxs("div",{className:"flex justify-between items-start mb-1",children:[h.jsx("p",{className:"text-[#111518] dark:text-white text-base font-bold leading-normal",children:J.title}),J.priority&&h.jsx("span",{className:"flex size-2 bg-primary rounded-full mt-2"})]}),h.jsx("p",{className:"text-[#60778a] dark:text-gray-400 text-sm font-normal leading-relaxed",children:J.content})]},J.id))})]})]}),n==="All Events"&&h.jsx("div",{className:"animate-fadeIn",children:h.jsxs("div",{className:"px-4 py-4",children:[h.jsx("h3",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight mb-4",children:"Calendar"}),Q(T,"No events scheduled.")]})}),n==="Saved"&&h.jsx("div",{className:"animate-fadeIn",children:h.jsxs("div",{className:"px-4 py-4",children:[h.jsx("h3",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight mb-4",children:"My Saved Events"}),Q(S,"No saved events yet.")]})}),h.jsxs("div",{className:"flex flex-col items-center justify-center pt-8 pb-12 opacity-50",children:[h.jsx("span",{className:"material-symbols-outlined text-4xl text-[#dbe1e6] dark:text-gray-700 mb-2",children:"church"}),h.jsx("p",{className:"text-xs text-[#60778a] dark:text-gray-500 font-medium",children:"Holy Simplicity"})]})]}),l&&h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 animate-fadeIn",onClick:()=>d(!1),children:h.jsxs("div",{className:"bg-white dark:bg-[#1a2630] rounded-3xl w-full max-w-sm overflow-hidden shadow-2xl border border-gray-100 dark:border-gray-800 flex flex-col max-h-[80vh]",onClick:J=>J.stopPropagation(),children:[h.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center bg-gray-50/50 dark:bg-gray-800/20 shrink-0",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"October 2023"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Select start and end dates"})]}),h.jsx("button",{onClick:()=>d(!1),className:"p-2 rounded-full bg-white dark:bg-gray-700 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors shadow-sm",children:h.jsx("span",{className:"material-symbols-outlined text-slate-500 dark:text-slate-300 text-[20px]",children:"close"})})]}),h.jsxs("div",{className:"overflow-y-auto",children:[h.jsxs("div",{className:"p-5",children:[h.jsx("div",{className:"grid grid-cols-7 text-center mb-4",children:["S","M","T","W","T","F","S"].map(J=>h.jsx("div",{className:"text-xs font-bold text-slate-400",children:J},J))}),h.jsxs("div",{className:"grid grid-cols-7 gap-y-3 gap-x-0 text-center",children:[Array.from({length:D}).map((J,re)=>h.jsx("div",{},`empty-${re}`)),Array.from({length:I},(J,re)=>re+1).map(J=>{const re=rl.some(H=>H.month==="Oct"&&H.day===J.toString()),k=J===12,M=f.start===J,R=f.end===J,L=f.start&&f.end&&J>f.start&&J<f.end,O=M||R;return h.jsx("div",{className:`relative flex items-center justify-center aspect-square
                                        ${L?"bg-primary/10":""}
                                        ${M&&f.end?"bg-gradient-to-r from-transparent to-primary/10 rounded-l-full":""}
                                        ${R&&f.start?"bg-gradient-to-l from-transparent to-primary/10 rounded-r-full":""}
                                    `,children:h.jsxs("button",{onClick:()=>U(J),className:`w-9 h-9 flex items-center justify-center rounded-full text-sm transition-all relative z-10
                                            ${O?"bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold scale-110 shadow-md":""}
                                            ${!O&&k?"border-2 border-primary text-primary font-bold":""}
                                            ${!O&&re?"text-primary font-bold":""}
                                            ${!O&&!k&&!re?"text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700":""}
                                        `,children:[J,re&&!O&&h.jsx("div",{className:"absolute bottom-1 w-1 h-1 rounded-full bg-primary"})]})},J)})]})]}),h.jsxs("div",{className:"bg-gray-50/50 dark:bg-[#152028] border-t border-gray-100 dark:border-gray-700 px-5 py-4 min-h-[150px]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("h4",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:[h.jsx("span",{className:"material-symbols-outlined text-[18px] text-slate-400",children:"event"}),f.start?f.end?`Events: Oct ${f.start} - ${f.end}`:`Events: Oct ${f.start}`:"Select dates to filter"]}),f.start&&h.jsx("button",{onClick:B,className:"text-xs text-primary font-medium hover:underline",children:"Clear"})]}),f.start?N.length>0?h.jsx("div",{className:"flex flex-col gap-2",children:N.map(J=>h.jsxs(it,{to:`/events/${J.id}`,className:"flex items-center gap-3 bg-white dark:bg-[#1a2630] p-3 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 hover:border-primary/50 transition-colors",children:[h.jsx("div",{className:"flex flex-col items-center justify-center w-10 h-10 rounded-lg bg-primary/10 text-primary dark:bg-slate-700/50 shrink-0",children:h.jsx("span",{className:"text-xs font-bold",children:J.day})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h5",{className:"text-sm font-bold text-slate-900 dark:text-white truncate",children:J.title}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:J.time})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-300 text-[18px]",children:"chevron_right"})]},J.id))}):h.jsxs("div",{className:"flex flex-col items-center justify-center py-6 text-slate-400",children:[h.jsx("span",{className:"material-symbols-outlined text-3xl mb-1 opacity-50",children:"event_busy"}),h.jsx("p",{className:"text-xs font-medium",children:"No events in range"})]}):h.jsxs("div",{className:"flex items-center gap-4 text-xs font-medium py-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-primary/20 border border-primary/50"}),h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Range"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-2.5 h-2.5 rounded-full border-2 border-primary"}),h.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Today"})]})]})]})]})]})})]})};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _U=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),bU=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),QT=n=>{const e=bU(n);return e.charAt(0).toUpperCase()+e.slice(1)},pA=(...n)=>n.filter((e,t,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===t).join(" ").trim(),TU=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var EU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wU=j.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:i="",children:a,iconNode:l,...d},f)=>j.createElement("svg",{ref:f,...EU,width:e,height:e,stroke:n,strokeWidth:r?Number(t)*24/Number(e):t,className:pA("lucide",i),...!a&&!TU(d)&&{"aria-hidden":"true"},...d},[...l.map(([m,v])=>j.createElement(m,v)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ot=(n,e)=>{const t=j.forwardRef(({className:r,...i},a)=>j.createElement(wU,{ref:a,iconNode:e,className:pA(`lucide-${_U(QT(n))}`,`lucide-${n}`,r),...i}));return t.displayName=QT(n),t};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SU=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],AU=ot("arrow-down-wide-narrow",SU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NU=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],CU=ot("arrow-left",NU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],RU=ot("arrow-up-narrow-wide",IU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],DU=ot("arrow-up",kU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ig=ot("bell",MU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Jp=ot("book-open",PU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],VU=ot("calendar",LU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],OU=ot("check",UU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jU=[["path",{d:"M10 9h4",key:"u4k05v"}],["path",{d:"M12 7v5",key:"ma6bk"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"m18 9 3.52 2.147a1 1 0 0 1 .48.854V19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-6.999a1 1 0 0 1 .48-.854L6 9",key:"flvdwo"}],["path",{d:"M6 21V7a1 1 0 0 1 .376-.782l5-3.999a1 1 0 0 1 1.249.001l5 4A1 1 0 0 1 18 7v14",key:"a5i0n2"}]],FU=ot("church",jU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ZT=ot("circle-check",qU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],gA=ot("crown",BU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],GU=ot("ellipsis-vertical",HU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],$U=ot("eye-off",zU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JU=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],YU=ot("eye",JU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KU=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],XU=ot("globe",KU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Yp=ot("heart",WU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QU=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],ZU=ot("list-filter",QU);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],t3=ot("lock",e3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],r3=ot("mic",n3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],i3=ot("pause",s3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Rg=ot("pen",o3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],l3=ot("play",a3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ey=ot("plus",c3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],d3=ot("search",u3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],f3=ot("shield",h3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Yc=ot("sparkles",m3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],g3=ot("square-check-big",p3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],yA=ot("square",y3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],x3=ot("star",v3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],kg=ot("trash-2",_3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],T3=ot("user",b3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vA=ot("users",E3);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],S3=ot("zap",w3),eE=n=>{let e;const t=new Set,r=(m,v)=>{const b=typeof m=="function"?m(e):m;if(!Object.is(b,e)){const T=e;e=v??(typeof b!="object"||b===null)?b:Object.assign({},e,b),t.forEach(S=>S(e,T))}},i=()=>e,d={setState:r,getState:i,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m))},f=e=n(r,i,d);return d},A3=(n=>n?eE(n):eE),N3=n=>n;function C3(n,e=N3){const t=$c.useSyncExternalStore(n.subscribe,$c.useCallback(()=>e(n.getState()),[n,e]),$c.useCallback(()=>e(n.getInitialState()),[n,e]));return $c.useDebugValue(t),t}const tE=n=>{const e=A3(n),t=r=>C3(e,r);return Object.assign(t,e),t},Tu=(n=>n?tE(n):tE),nE="...and sometimes we struggle to find meaning in the chaos, but looking back at the history of the church, we see patterns of redemption. ",rE=[{id:"1",timestamp:"23:45",content:"Grace isn't just a concept, it's a person. This is a key takeaway.",type:"text"},{id:"2",timestamp:"18:12",content:"Reminder to read this verse with the family tonight.",verseRef:"John 3:16",type:"verse"},{id:"3",timestamp:"05:30",content:"Intro started with a powerful story about forgiveness.",type:"text"}],sE=Tu(n=>({viewState:"idle",timer:0,isPaused:!1,transcript:nE,notes:rE,setViewState:e=>n({viewState:e}),setTimer:e=>n({timer:e}),incrementTimer:()=>n(e=>({timer:e.timer+1})),togglePause:()=>n(e=>({isPaused:!e.isPaused})),setIsPaused:e=>n({isPaused:e}),setTranscript:e=>n({transcript:e}),appendTranscript:e=>n(t=>({transcript:t.transcript+e})),addNote:e=>n(t=>({notes:[e,...t.notes]})),resetRecording:()=>n({viewState:"idle",timer:0,isPaused:!1,transcript:nE,notes:rE})}));function I3(n,e){let t;try{t=n()}catch{return}return{getItem:i=>{var a;const l=f=>f===null?null:JSON.parse(f,void 0),d=(a=t.getItem(i))!=null?a:null;return d instanceof Promise?d.then(l):l(d)},setItem:(i,a)=>t.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>t.removeItem(i)}}const Dg=n=>e=>{try{const t=n(e);return t instanceof Promise?t:{then(r){return Dg(r)(t)},catch(r){return this}}}catch(t){return{then(r){return this},catch(r){return Dg(r)(t)}}}},R3=(n,e)=>(t,r,i)=>{let a={storage:I3(()=>localStorage),partialize:D=>D,version:0,merge:(D,N)=>({...N,...D}),...e},l=!1;const d=new Set,f=new Set;let m=a.storage;if(!m)return n((...D)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),t(...D)},r,i);const v=()=>{const D=a.partialize({...r()});return m.setItem(a.name,{state:D,version:a.version})},b=i.setState;i.setState=(D,N)=>(b(D,N),v());const T=n((...D)=>(t(...D),v()),r,i);i.getInitialState=()=>T;let S;const I=()=>{var D,N;if(!m)return;l=!1,d.forEach(B=>{var F;return B((F=r())!=null?F:T)});const U=((N=a.onRehydrateStorage)==null?void 0:N.call(a,(D=r())!=null?D:T))||void 0;return Dg(m.getItem.bind(m))(a.name).then(B=>{if(B)if(typeof B.version=="number"&&B.version!==a.version){if(a.migrate){const F=a.migrate(B.state,B.version);return F instanceof Promise?F.then(Q=>[!0,Q]):[!0,F]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,B.state];return[!1,void 0]}).then(B=>{var F;const[Q,J]=B;if(S=a.merge(J,(F=r())!=null?F:T),t(S,!0),Q)return v()}).then(()=>{U==null||U(S,void 0),S=r(),l=!0,f.forEach(B=>B(S))}).catch(B=>{U==null||U(void 0,B)})};return i.persist={setOptions:D=>{a={...a,...D},D.storage&&(m=D.storage)},clearStorage:()=>{m==null||m.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>I(),hasHydrated:()=>l,onHydrate:D=>(d.add(D),()=>{d.delete(D)}),onFinishHydration:D=>(f.add(D),()=>{f.delete(D)})},a.skipHydration||I(),S||T},yf=R3,k3=[{id:"mock-1",title:"Finding Hope in Chaos",date:"Oct 14, 2023",duration:"35:20",transcript:"Welcome everyone. Today we are talking about finding hope when everything seems chaotic...",notes:[{id:"1",timestamp:"05:30",content:"Key verse: Jeremiah 29:11",type:"text"},{id:"2",timestamp:"12:45",content:"Chaos is often the precursor to creation.",type:"text"}]},{id:"mock-2",title:"The Power of Community",date:"Oct 07, 2023",duration:"42:15",transcript:"Community isn't just about proximity, it's about shared purpose...",notes:[{id:"1",timestamp:"10:00",content:"We are designed for connection.",type:"text"}]}],wy=Tu()(yf((n,e)=>({sermons:k3,addSermon:t=>n(r=>({sermons:[t,...r.sermons]})),deleteSermon:t=>n(r=>({sermons:r.sermons.filter(i=>i.id!==t)})),getSermon:t=>e().sermons.find(r=>r.id===t)}),{name:"sermon-history-storage"})),D3="...and sometimes we struggle to find meaning in the chaos, but looking back at the history of the church, we see patterns of redemption. ",M3=`"...and as we look closely at Romans 8:28, we see that all things work together for good to them that love God. This isn't just a promise for the good times, but for every season.`,P3=()=>{const n=xn(),{viewState:e,setViewState:t,timer:r,setTimer:i,incrementTimer:a,isPaused:l,setIsPaused:d,togglePause:f,transcript:m,setTranscript:v,appendTranscript:b,notes:T,addNote:S,resetRecording:I}=sE(),{addSermon:D}=wy(),[N,U]=j.useState(""),[B,F]=j.useState(null);j.useEffect(()=>{let L;return e==="recording"&&!l&&(L=window.setInterval(()=>{a()},1e3)),()=>{clearInterval(L)}},[e,l,a]),j.useEffect(()=>{let L;return e==="recording"&&!l&&(L=window.setInterval(()=>{const{transcript:O,appendTranscript:H}=sE.getState(),V=D3+M3;if(O.length<V.length){const Ae=V[O.length];Ae&&H(Ae)}},50)),()=>{clearInterval(L)}},[e,l]);const Q=L=>{const O=Math.floor(L/60),H=L%60;return`${O.toString().padStart(2,"0")} : ${H.toString().padStart(2,"0")}`},J=async()=>{try{F(null),t("recording"),i(1455)}catch(L){console.error("Microphone error:",L)}},re=()=>{const L=Date.now().toString(),O={id:L,title:`Sermon - ${new Date().toLocaleDateString(void 0,{month:"short",day:"numeric"})}`,date:new Date().toLocaleDateString(void 0,{weekday:"short",month:"long",day:"numeric"}),duration:Q(r).replace(" : ",":"),transcript:m,notes:T};D(O),F(L),t("summary")},k=()=>{if(!N.trim())return;const L={id:Date.now().toString(),timestamp:Q(r).replace(" : ",":"),content:N,type:"text"};S(L),U("")},M=()=>{F(null),I()},R=()=>{const L=m.split(/(Romans 8:28)/g);return h.jsxs("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-[15px]",children:[L.map((O,H)=>O==="Romans 8:28"?h.jsxs("span",{className:"inline-flex items-center gap-1 bg-teal-50 text-teal-700 px-1.5 py-0.5 rounded mx-1 font-medium border border-teal-100",children:[O,h.jsx("span",{className:"material-symbols-outlined text-[12px]",children:"open_in_new"})]},H):O),h.jsx("span",{className:"inline-block w-0.5 h-4 bg-teal-400 ml-0.5 align-middle animate-pulse"})]})};return e==="summary"?h.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6 animate-fadeIn p-4",children:[h.jsx("div",{className:"w-20 h-20 bg-green-50 rounded-full flex items-center justify-center mb-2",children:h.jsx("span",{className:"material-symbols-outlined text-green-500 text-4xl",children:"check"})}),h.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white text-center",children:"Recording Saved!"}),h.jsxs("p",{className:"text-slate-500 text-center max-w-xs mb-4",children:["Your sermon has been saved to the library with ",T.length," notes and transcript."]}),h.jsxs("div",{className:"flex flex-col w-full max-w-xs gap-3",children:[h.jsx("button",{onClick:()=>B&&n(`/sermons/history/${B}`),className:"w-full py-3.5 bg-primary text-white font-bold rounded-xl shadow-lg shadow-blue-200 hover:bg-blue-600 transition-colors",children:"View Notes & Transcript"}),h.jsx("button",{onClick:()=>n("/sermons/history"),className:"w-full py-3.5 bg-white dark:bg-card-dark text-slate-700 dark:text-slate-200 font-bold rounded-xl border border-gray-200 dark:border-gray-700",children:"Go to Library"}),h.jsx("button",{onClick:M,className:"w-full py-3 text-sm text-slate-400 font-medium hover:text-slate-600",children:"Start New Recording"})]})]}):e==="idle"?h.jsxs("div",{className:"flex flex-col h-full relative",children:[h.jsx("div",{className:"absolute top-0 right-0 z-10",children:h.jsxs("button",{onClick:()=>n("/sermons/history"),className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-slate-800 rounded-full shadow-sm border border-gray-100 dark:border-gray-700 text-sm font-medium text-slate-700 dark:text-slate-200 hover:text-primary transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"history"}),h.jsx("span",{children:"Library"})]})}),h.jsxs("div",{className:"flex flex-col items-center justify-center mt-24 gap-8",children:[h.jsxs("div",{className:"relative",children:[h.jsx("div",{className:"absolute inset-0 bg-teal-400/20 rounded-full blur-xl animate-pulse"}),h.jsx("div",{className:"relative w-24 h-24 bg-white dark:bg-slate-800 rounded-full flex items-center justify-center shadow-xl border border-teal-50 dark:border-slate-700",children:h.jsx(r3,{className:"w-10 h-10 text-teal-500"})})]}),h.jsxs("div",{className:"text-center space-y-2",children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-800 dark:text-white",children:"Ready to Record?"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 max-w-[240px] mx-auto",children:"Capture the sermon with AI-powered transcription and live notes."})]}),h.jsxs("button",{onClick:J,className:"bg-teal-400 hover:bg-teal-500 text-white font-bold py-4 px-12 rounded-full shadow-lg shadow-teal-200/50 transition-all active:scale-95 text-lg flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 bg-white rounded-full animate-pulse"}),"Start Recording"]})]})]}):h.jsxs("div",{className:"flex flex-col min-h-screen bg-[#F4FCFD] dark:bg-background-dark -mx-4 -mt-6",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center justify-between px-4 py-4 bg-[#F4FCFD]/95 dark:bg-background-dark/95 backdrop-blur-sm",children:[h.jsx("button",{onClick:M,className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:h.jsx(CU,{className:"w-6 h-6 text-slate-700 dark:text-white"})}),h.jsx("h1",{className:"text-sm font-bold tracking-widest uppercase text-slate-500 dark:text-slate-400",children:"Sunday Service"}),h.jsx("button",{className:"p-2 -mr-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800",children:h.jsx(GU,{className:"w-6 h-6 text-slate-700 dark:text-white"})})]}),h.jsxs("div",{className:"flex flex-col items-center justify-center py-2",children:[h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-red-50 rounded-full mb-3",children:[h.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),h.jsx("span",{className:"text-[10px] font-bold text-red-500 tracking-wider uppercase",children:"Recording Active"})]}),h.jsx("div",{className:"text-[48px] font-bold text-slate-900 dark:text-white font-mono tracking-tight leading-none mb-6",children:Q(r)}),h.jsxs("div",{className:"flex items-center gap-6 mb-8",children:[h.jsxs("button",{onClick:f,className:"flex flex-col items-center gap-2 group",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-white dark:bg-slate-800 shadow-sm border border-slate-100 dark:border-slate-700 flex items-center justify-center group-active:scale-95 transition-transform",children:l?h.jsx(l3,{className:"w-6 h-6 text-slate-700 dark:text-white ml-1"}):h.jsx(i3,{className:"w-6 h-6 text-slate-700 dark:text-white"})}),h.jsx("span",{className:"text-xs font-medium text-slate-500",children:l?"Resume":"Pause"})]}),h.jsxs("button",{onClick:re,className:"flex flex-col items-center gap-2 group",children:[h.jsx("div",{className:"w-16 h-16 rounded-full bg-[#111827] text-white shadow-lg flex items-center justify-center group-active:scale-95 transition-transform",children:h.jsx(yA,{className:"w-6 h-6 fill-current"})}),h.jsx("span",{className:"text-xs font-medium text-slate-900 dark:text-slate-300",children:"Stop & Save"})]})]})]}),h.jsx("div",{className:"px-4 mb-8",children:h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl p-5 shadow-sm border border-slate-100 dark:border-slate-800",children:[h.jsxs("div",{className:"flex items-center justify-between mb-3",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Yc,{className:"w-4 h-4 text-teal-400"}),h.jsx("h3",{className:"font-bold text-slate-800 dark:text-white",children:"Live Transcript"})]}),h.jsx("span",{className:"px-2 py-1 bg-teal-50 dark:bg-teal-900/30 text-teal-600 dark:text-teal-400 text-[10px] font-bold uppercase rounded",children:"AI Generating"})]}),R()]})}),h.jsxs("div",{className:"flex-1 bg-[#F4FCFD] dark:bg-background-dark px-4 pb-24",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-white",children:"My Notes"}),h.jsxs("span",{className:"text-xs font-medium text-slate-500",children:[T.length," notes"]})]}),h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-xl p-2 flex items-center shadow-sm border border-slate-100 dark:border-slate-800 mb-6",children:[h.jsx("button",{className:"p-2 text-slate-400",children:h.jsx(ZU,{className:"w-5 h-5"})}),h.jsx("input",{type:"text",value:N,onChange:L=>U(L.target.value),placeholder:"Jot down a quick thought...",className:"flex-1 bg-transparent border-none focus:ring-0 text-slate-700 dark:text-slate-200 placeholder-slate-400 text-sm",onKeyDown:L=>L.key==="Enter"&&k()}),h.jsx("button",{onClick:k,disabled:!N.trim(),className:"p-2 bg-teal-50 dark:bg-teal-900/30 rounded-lg text-teal-50 disabled:opacity-50 disabled:bg-slate-50",children:h.jsx(DU,{className:"w-5 h-5"})})]}),h.jsxs("div",{className:"relative pl-4 space-y-6",children:[h.jsx("div",{className:"absolute left-4 top-2 bottom-0 w-0.5 bg-slate-200 dark:bg-slate-700"}),T.map(L=>h.jsxs("div",{className:"relative pl-6 animate-fadeIn",children:[h.jsx("div",{className:"absolute left-[13px] top-2 w-2 h-2 rounded-full bg-slate-300 dark:bg-slate-600 ring-4 ring-[#F4FCFD] dark:ring-background-dark z-10"}),h.jsxs("span",{className:"text-xs font-medium text-slate-400 mb-1 block flex items-center gap-2",children:[L.timestamp,L.verseRef&&h.jsx("span",{className:"bg-slate-100 dark:bg-slate-800 text-slate-500 px-1.5 rounded text-[10px]",children:L.verseRef})]}),h.jsx("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl shadow-sm border border-slate-100 dark:border-slate-800",children:h.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 leading-relaxed",children:L.content})})]},L.id))]})]}),h.jsx("button",{className:"fixed bottom-24 right-4 w-14 h-14 bg-teal-400 hover:bg-teal-500 text-white rounded-2xl shadow-lg shadow-teal-200/50 flex items-center justify-center transition-transform active:scale-95 z-20",children:h.jsx(Ey,{className:"w-8 h-8"})})]})},L3=()=>{const n=xn(),{sermons:e,deleteSermon:t}=wy(),r=(i,a)=>{i.stopPropagation(),confirm("Are you sure you want to delete this recording?")&&t(a)};return h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>n("/"),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1",children:"Sermon Library"})]}),h.jsx("div",{className:"p-4 space-y-4",children:e.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[h.jsx("span",{className:"material-symbols-outlined text-5xl mb-4 opacity-50",children:"mic_off"}),h.jsx("p",{className:"font-medium",children:"No recordings yet"}),h.jsx("button",{onClick:()=>n("/sermons"),className:"mt-4 text-primary font-bold hover:underline",children:"Record your first sermon"})]}):e.map(i=>h.jsxs("div",{onClick:()=>n(`/sermons/history/${i.id}`),className:"group bg-white dark:bg-card-dark p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 active:scale-[0.98] transition-all cursor-pointer",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white text-base leading-tight mb-1",children:i.title}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400 font-medium flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"calendar_today"}),i.date]})]}),h.jsx("button",{onClick:a=>r(a,i.id),className:"p-2 text-slate-300 hover:text-red-500 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})]}),h.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[h.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:[h.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"schedule"}),h.jsx("span",{className:"text-xs font-bold",children:i.duration})]}),h.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-md bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",children:[h.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"edit_note"}),h.jsxs("span",{className:"text-xs font-bold",children:[i.notes.length," Notes"]})]})]})]},i.id))})]})},V3=()=>{const{id:n}=mS(),e=xn(),t=wy(I=>I.getSermon(n||"")),[r,i]=j.useState("notes"),[a,l]=j.useState(!1),[d,f]=j.useState(0),v=t?(I=>{if(!I)return 0;const D=I.split(":").map(Number);return D.length===2?D[0]*60+D[1]:0})(t.duration):0;j.useEffect(()=>{let I;return a&&(I=window.setInterval(()=>{f(D=>D>=v?(l(!1),0):D+1)},1e3)),()=>clearInterval(I)},[a,v]);const b=I=>{const D=Math.floor(I/60),N=I%60;return`${D}:${N.toString().padStart(2,"0")}`},T=v>0?d/v*100:0;if(!t)return h.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background-light dark:bg-background-dark",children:[h.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-slate-800 rounded-full flex items-center justify-center mb-4",children:h.jsx("span",{className:"material-symbols-outlined text-gray-400 text-3xl",children:"sentiment_dissatisfied"})}),h.jsx("p",{className:"text-slate-500 mb-6 font-medium",children:"Sermon not found"}),h.jsx("button",{onClick:()=>e("/sermons/history"),className:"px-6 py-2 bg-primary text-white rounded-full font-bold shadow-sm hover:bg-blue-600 transition-colors",children:"Back to Library"})]});const S=I=>{if(!I)return h.jsx("p",{className:"text-slate-400 italic",children:"No transcript available."});const D=["God","Jesus","Christ","Lord","Spirit","Grace","Faith","Hope","Love","Bible","Scripture"],N=new RegExp(`\\b(${D.join("|")})\\b`,"gi"),U=I.split(N);return h.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-loose text-lg font-serif",children:U.map((B,F)=>D.some(Q=>Q.toLowerCase()===B.toLowerCase())?h.jsx("span",{className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-200 px-0.5 rounded font-medium",children:B},F):B)})};return h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen flex flex-col pb-safe",children:[h.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3 p-4",children:[h.jsx("button",{onClick:()=>e(-1),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h1",{className:"text-base font-bold text-slate-900 dark:text-white truncate",children:t.title}),h.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500 dark:text-slate-400",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"calendar_today"}),t.date]}),h.jsx("span",{children:""}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"schedule"}),t.duration]})]})]}),h.jsx("button",{className:"p-2 text-slate-400 hover:text-primary transition-colors",children:h.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})})]}),h.jsx("div",{className:"px-4 pb-4",children:h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-800 rounded-xl p-3 flex items-center gap-4 border border-slate-100 dark:border-slate-700",children:[h.jsx("button",{onClick:()=>l(!a),className:"w-10 h-10 rounded-full bg-primary text-white flex items-center justify-center shadow-md hover:bg-blue-600 transition-colors shrink-0",children:h.jsx("span",{className:"material-symbols-outlined filled",children:a?"pause":"play_arrow"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("div",{className:"h-1 bg-slate-200 dark:bg-slate-600 rounded-full overflow-hidden relative",children:h.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-1000 ease-linear",style:{width:`${T}%`}})}),h.jsxs("div",{className:"flex justify-between mt-1",children:[h.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:b(d)}),h.jsx("span",{className:"text-[10px] text-slate-400 font-mono",children:t.duration})]})]})]})}),h.jsxs("div",{className:"flex px-4 gap-8 border-t border-gray-50 dark:border-gray-800/50",children:[h.jsxs("button",{onClick:()=>i("notes"),className:`py-3 text-sm font-bold border-b-2 transition-all relative ${r==="notes"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:["Notes ",h.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-slate-100 dark:bg-slate-800 rounded-full text-[10px]",children:t.notes.length})]}),h.jsx("button",{onClick:()=>i("transcript"),className:`py-3 text-sm font-bold border-b-2 transition-all ${r==="transcript"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Transcript"})]})]}),h.jsx("div",{className:"flex-1 p-4 bg-gray-50/50 dark:bg-[#101a22]",children:r==="notes"?h.jsxs("div",{className:"space-y-0 animate-fadeIn relative pb-8",children:[t.notes.length>0&&h.jsx("div",{className:"absolute left-[19px] top-4 bottom-4 w-0.5 bg-slate-200 dark:bg-slate-700 rounded-full"}),t.notes.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-slate-400",children:[h.jsx("span",{className:"material-symbols-outlined text-4xl mb-3 opacity-30",children:"edit_note"}),h.jsx("p",{className:"text-sm",children:"No notes taken for this sermon."})]}):t.notes.map((I,D)=>h.jsxs("div",{className:"relative pl-10 pb-6 group",children:[h.jsx("div",{className:"absolute left-[13px] top-4 w-3.5 h-3.5 rounded-full bg-white dark:bg-[#101a22] border-[3px] border-slate-300 dark:border-slate-600 group-hover:border-primary transition-colors z-10"}),h.jsxs("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-800 hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 font-mono bg-slate-100 dark:bg-slate-800 px-1.5 py-0.5 rounded",children:I.timestamp}),I.verseRef&&h.jsxs("span",{className:"text-[10px] font-bold text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 px-1.5 py-0.5 rounded border border-blue-100 dark:border-blue-900/30 flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[10px]",children:"menu_book"}),I.verseRef]})]}),h.jsx("button",{className:"text-slate-300 hover:text-slate-500 dark:hover:text-slate-200",children:h.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"edit"})})]}),h.jsx("p",{className:"text-slate-700 dark:text-slate-300 text-sm leading-relaxed whitespace-pre-wrap",children:I.content})]})]},I.id))]}):h.jsxs("div",{className:"bg-white dark:bg-card-dark p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 animate-fadeIn",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4 pb-4 border-b border-gray-50 dark:border-gray-800",children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Full Text"}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-full text-slate-400 hover:text-primary transition-colors",title:"Copy Text",children:h.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"content_copy"})}),h.jsx("button",{className:"p-2 hover:bg-slate-50 dark:hover:bg-slate-800 rounded-full text-slate-400 hover:text-primary transition-colors",title:"Text Settings",children:h.jsx("span",{className:"material-symbols-outlined text-[18px]",children:"text_fields"})})]})]}),h.jsx("div",{className:"prose dark:prose-invert max-w-none",children:S(t.transcript)})]})})]})},U3={guest:["view_public_content"],member:["view_public_content","view_church_content","create_prayer_request","view_events"],subscriber:["view_public_content","view_church_content","create_prayer_request","view_events","record_sermon","ai_features","take_notes"],pastor:["view_public_content","view_church_content","create_prayer_request","view_events","record_sermon","ai_features","take_notes","manage_announcements","manage_events","view_members"],admin:["view_public_content","view_church_content","create_prayer_request","view_events","record_sermon","ai_features","take_notes","manage_announcements","manage_events","view_members","manage_church","manage_roles","manage_subscriptions"]},O3=(n,e)=>{var t;return((t=U3[n])==null?void 0:t.includes(e))??!1},Zc=[{id:"kjv",name:"King James Version",short:"KJV",size:"4.2 MB"},{id:"web",name:"World English Bible",short:"WEB",size:"4.5 MB"},{id:"asv",name:"American Standard Version",short:"ASV",size:"4.1 MB"},{id:"bbe",name:"Bible in Basic English",short:"BBE",size:"3.8 MB"}],xA=Tu()(yf((n,e)=>({downloadedVersions:[],addDownloadedVersion:t=>n(r=>({downloadedVersions:[...new Set([...r.downloadedVersions,t])]})),removeDownloadedVersion:t=>n(r=>({downloadedVersions:r.downloadedVersions.filter(i=>i!==t)})),isVersionDownloaded:t=>e().downloadedVersions.includes(t)}),{name:"bible-settings-storage"}));console.log(" API.Bible: No valid key - using bible-api.com fallback only");async function j3(n,e,t="kjv"){throw new Error("No valid API.Bible key configured - skipping API.Bible")}const iE=["Genesis","Exodus","Leviticus","Numbers","Deuteronomy","Joshua","Judges","Ruth","1 Samuel","2 Samuel","1 Kings","2 Kings","1 Chronicles","2 Chronicles","Ezra","Nehemiah","Esther","Job","Psalms","Proverbs","Ecclesiastes","Song of Solomon","Isaiah","Jeremiah","Lamentations","Ezekiel","Daniel","Hosea","Joel","Amos","Obadiah","Jonah","Micah","Nahum","Habakkuk","Zephaniah","Haggai","Zechariah","Malachi","Matthew","Mark","Luke","John","Acts","Romans","1 Corinthians","2 Corinthians","Galatians","Ephesians","Philippians","Colossians","1 Thessalonians","2 Thessalonians","1 Timothy","2 Timothy","Titus","Philemon","Hebrews","James","1 Peter","2 Peter","1 John","2 John","3 John","Jude","Revelation"];function F3(n){const e=atob(n),t=e.length,r=new Uint8Array(t);for(let i=0;i<t;i++)r[i]=e.charCodeAt(i);return r}async function q3(n,e,t,r){const i=new Int16Array(n.buffer),a=i.length/r,l=e.createBuffer(r,a,t);for(let d=0;d<r;d++){const f=l.getChannelData(d);for(let m=0;m<a;m++)f[m]=i[m*r+d]/32768}return l}const B3=()=>{var Un,Dt;const n=xn(),[e]=Pk(),t=Is(),{isVersionDownloaded:r}=xA(),[i,a]=j.useState("kjv"),[l,d]=j.useState("Romans"),[f,m]=j.useState(5),[v,b]=j.useState([]),[T,S]=j.useState(!1),[I,D]=j.useState(null),[N,U]=j.useState({}),[B,F]=j.useState([]);j.useEffect(()=>{(async()=>{try{await nt.initialize(),console.log(" Unified database initialized")}catch(fe){console.error("Failed to initialize database:",fe)}})()},[]);const[Q,J]=j.useState([]),[re,k]=j.useState(!1),[M,R]=j.useState({x:0,y:0}),[L,O]=j.useState(null),[H,V]=j.useState(!1),[Ae,$e]=j.useState("");j.useEffect(()=>{const K=e.get("book"),fe=e.get("chapter"),ye=e.get("verse");if(K&&(console.log("Navigating to book from search:",K),d(K)),fe){const Ee=parseInt(fe);console.log("Navigating to chapter from search:",Ee),m(Ee)}if(ye){const Ee=parseInt(ye);console.log("Navigating to verse from search:",Ee),D(Ee)}(K||fe||ye)&&n("/bible",{replace:!0})},[t.search,e,n]);const[G,ae]=j.useState(!1),[_e,he]=j.useState(!1),[qe,z]=j.useState(!1),[ie,pe]=j.useState(!1),[ve,ke]=j.useState(1.125),[Le,de]=j.useState(1.8),[ge,De]=j.useState(null),[jt,Gt]=j.useState(!1),[ks,Qr]=j.useState(""),[Pn,Zr]=j.useState(!1),[Kn,Pr]=j.useState(!1),[Ln,Rt]=j.useState(null),[kt,es]=j.useState("Charon"),[Bl,yi]=j.useState(!1),st=j.useRef(null),fr=j.useRef(null),Xn=j.useRef({}),Lr=j.useRef(!1),[ts,vi]=j.useState(!1),[Ds,xi]=j.useState(""),bo=j.useRef(null);j.useEffect(()=>{(async()=>{S(!0),_n(),Xn.current={};try{const fe=await j3(l,f,i);b(fe)}catch{try{const ye=await fetch(`https://bible-api.com/${l}+${f}?translation=${i}`);if(!ye.ok)throw new Error("Failed to fetch from fallback API");const Ee=await ye.json();if(Ee.verses){const Ie=Ee.verses.map(Oe=>({verse:Oe.verse,text:Oe.text.replace(/\n/g," ").trim()}));b(Ie)}else b([])}catch(ye){console.error("Failed to fetch Bible verses:",ye),b([])}}finally{S(!1)}})()},[l,f,i]),j.useEffect(()=>{const K=async()=>{try{const fe={};for(const Ie of v){const Oe=await nt.getVerseData(l,f,Ie.verse),vt=`${l}-${f}-${Ie.verse}`;fe[vt]={note:Oe.note,highlight:Oe.highlight,bookmarked:Oe.bookmarked}}U(fe);const ye=[];for(const Ie of v){const Oe=await nt.getTextHighlights(l,f,Ie.verse);ye.push(...Oe.map(vt=>({...vt,color:vt.color})))}F(ye);const Ee=await nt.getChapterNote(l,f);J(Ee?[Ee]:[])}catch(fe){console.error("Failed to load Bible data from database:",fe)}};v.length>0&&K()},[v,l,f]),j.useEffect(()=>{if(I&&v.length>0){const K=document.getElementById(`verse-${I}`);K&&setTimeout(()=>{K.scrollIntoView({behavior:"smooth",block:"center"}),De(I),D(null)},300)}},[I,v]);const Vn=K=>`${l}-${f}-${K}`,ut=K=>N[Vn(K)]||{},ln=async(K,fe)=>{const ye=Vn(K);U(Ee=>({...Ee,[ye]:{...Ee[ye],...fe}}));try{const Ee=await nt.getVerseData(l,f,K),Ie=Date.now();await nt.saveVerseData({id:Ee.id||`${l}-${f}-${K}`,book:l,chapter:f,verse:K,note:fe.note!==void 0?fe.note:Ee.note,highlight:fe.highlight!==void 0?fe.highlight:Ee.highlight,bookmarked:fe.bookmarked!==void 0?fe.bookmarked:Ee.bookmarked,createdAt:Ee.createdAt||Ie,updatedAt:Ie})}catch(Ee){console.error("Failed to save verse data to database:",Ee)}},dt=()=>Q.find(K=>K.book===l&&K.chapter===f),ma=async K=>{const fe=dt();if(K.trim()===""){if(fe){J(ye=>ye.filter(Ee=>Ee.id!==fe.id));try{await nt.deleteChapterNote(l,f)}catch(ye){console.error("Failed to delete chapter note from database:",ye)}}}else{const ye=Date.now();if(fe){const Ee={...fe,note:K,updatedAt:ye};J(Ie=>Ie.map(Oe=>Oe.id===fe.id?Ee:Oe));try{await nt.saveChapterNote(Ee)}catch(Ie){console.error("Failed to update chapter note in database:",Ie)}}else{const Ee={id:`${Date.now()}-${Math.random()}`,book:l,chapter:f,note:K,createdAt:ye,updatedAt:ye};J(Ie=>[...Ie,Ee]);try{await nt.saveChapterNote(Ee)}catch(Ie){console.error("Failed to create chapter note in database:",Ie)}}}};j.useEffect(()=>{const K=dt();$e((K==null?void 0:K.note)||"")},[l,f]);const _i=K=>{if(!ge)return;const ye=ut(ge).highlight===K?void 0:K;ln(ge,{highlight:ye})},pa=()=>{if(!ge)return;const K=ut(ge);ln(ge,{bookmarked:!K.bookmarked})},mr=()=>{if(!ge)return;const K=ut(ge);Qr(K.note||""),Gt(!0)},Ms=()=>{ge&&ln(ge,{note:ks}),Gt(!1)},Lt=()=>{if(!ge)return;const K=v.find(fe=>fe.verse===ge);K&&(navigator.clipboard.writeText(`${l} ${f}:${K.verse} - ${K.text}`),De(null))},pr=()=>{if(!ge)return;const K=v.findIndex(fe=>fe.verse===ge);K!==-1&&(De(null),Zr(!0),Ps(K))};j.useEffect(()=>()=>{_n(),st.current&&(st.current.close(),st.current=null)},[]);const Wn=()=>{if(!st.current){const K=window.AudioContext||window.webkitAudioContext;st.current=new K({sampleRate:24e3})}st.current.state==="suspended"&&st.current.resume()},_n=()=>{if(fr.current){try{fr.current.stop()}catch{}fr.current=null}Pr(!1),Lr.current=!1,Rt(null),yi(!1)},ga=async K=>{if(K<0||K>=v.length)return null;if(Xn.current[K])return Xn.current[K];try{const fe=await Ph.generateSpeech(v[K].text,kt);if(!fe)return null;const ye=F3(fe);if(!st.current)return null;const Ee=await q3(ye,st.current,24e3,1);return Xn.current[K]=Ee,Ee}catch(fe){return console.error("Audio fetch error:",fe),null}},Ps=async K=>{Wn(),_n(),Pr(!0),Lr.current=!0;const fe=async ye=>{if(!Lr.current)return;if(ye>=v.length){_n();return}Rt(v[ye].verse);const Ee=document.getElementById(`verse-${v[ye].verse}`);Ee&&Ee.scrollIntoView({behavior:"smooth",block:"center"});let Ie=Xn.current[ye];if(Ie||(yi(!0),Ie=await ga(ye),yi(!1)),!Ie||!Lr.current)return;const Oe=st.current.createBufferSource();Oe.buffer=Ie,Oe.connect(st.current.destination),Oe.onended=()=>{Lr.current&&fe(ye+1)},fr.current=Oe,Oe.start(),ye+1<v.length&&!Xn.current[ye+1]&&ga(ye+1)};fe(K)},Qn=()=>{var K,fe,ye;if(Wn(),Kn)((K=st.current)==null?void 0:K.state)==="running"?(st.current.suspend(),Pr(!1)):((fe=st.current)==null?void 0:fe.state)==="suspended"&&(st.current.resume(),Pr(!0));else if(((ye=st.current)==null?void 0:ye.state)==="suspended")st.current.resume(),Pr(!0);else{const Ee=Ln?v.findIndex(Ie=>Ie.verse===Ln):0;Zr(!0),Ps(Ee!==-1?Ee:0)}},ns=K=>{const fe=Ln?v.findIndex(Ee=>Ee.verse===Ln):0;let ye=K==="next"?fe+1:fe-1;ye<0&&(ye=0),ye>=v.length&&(ye=0),Ps(ye)},Hl=()=>{if(es(kt==="Charon"?"Kore":"Charon"),Xn.current={},Kn&&Ln){const fe=v.findIndex(ye=>ye.verse===Ln);Ps(fe!==-1?fe:0)}},Ls=K=>{if(K.preventDefault(),!Ds.trim())return;const fe=/^(\d?\s?[a-zA-Z]+)\s+(\d+)$/,ye=Ds.match(fe);if(ye){const Ee=ye[1].trim().toLowerCase(),Ie=parseInt(ye[2],10),Oe=iE.find(vt=>vt.toLowerCase().startsWith(Ee));Oe&&(d(Oe),m(Ie),vi(!1),xi(""))}else{const Ee=parseInt(Ds);isNaN(Ee)||(m(Ee),vi(!1),xi(""))}},bi=()=>{var tr;const K=window.getSelection();if(!K||K.isCollapsed){k(!1);return}const fe=K.toString().trim();if(!fe||fe.length<3){k(!1);return}const ye=K.getRangeAt(0);let Ie=ye.commonAncestorContainer.parentElement;for(;Ie&&!((tr=Ie.id)!=null&&tr.startsWith("verse-"));)Ie=Ie.parentElement;if(!Ie)return;const Oe=parseInt(Ie.id.replace("verse-",""));if(isNaN(Oe))return;const vt=v.find(Vt=>Vt.verse===Oe);if(!vt)return;const bn=vt.text.indexOf(fe);if(bn===-1){k(!1);return}const On=bn+fe.length,cn=ye.getBoundingClientRect();R({x:cn.left+cn.width/2,y:cn.top-10}),O({verse:Oe,startOffset:bn,endOffset:On,selectedText:fe}),k(!0)},rs=async K=>{var ye;if(!L)return;const fe={id:`${Date.now()}-${Math.random()}`,book:l,chapter:f,verse:L.verse,startOffset:L.startOffset,endOffset:L.endOffset,selectedText:L.selectedText,color:K,createdAt:Date.now()};F(Ee=>[...Ee,fe]),k(!1),O(null);try{await nt.addTextHighlight(fe)}catch(Ee){console.error("Failed to save text highlight to database:",Ee)}(ye=window.getSelection())==null||ye.removeAllRanges()},Vs=async K=>{F(fe=>fe.filter(ye=>ye.id!==K));try{await nt.deleteTextHighlight(K)}catch(fe){console.error("Failed to delete text highlight from database:",fe)}},Zn=K=>B.filter(fe=>fe.book===l&&fe.chapter===f&&fe.verse===K),ya=K=>{const fe=Zn(K.verse);if(fe.length===0)return K.text;const ye=[...fe].sort((Oe,vt)=>Oe.startOffset-vt.startOffset),Ee=[];let Ie=0;return ye.forEach((Oe,vt)=>{Ie<Oe.startOffset&&Ee.push(h.jsx("span",{children:K.text.substring(Ie,Oe.startOffset)},`text-${vt}-before`));const Us=Oe.color==="yellow"?"bg-yellow-300/60 dark:bg-yellow-600/40":Oe.color==="green"?"bg-green-300/60 dark:bg-green-600/40":Oe.color==="blue"?"bg-blue-300/60 dark:bg-blue-600/40":"bg-purple-300/60 dark:bg-purple-600/40";Ee.push(h.jsx("mark",{className:`${Us} cursor-pointer rounded-sm px-0.5`,onClick:bn=>{bn.stopPropagation(),confirm("Delete this highlight?")&&Vs(Oe.id)},children:K.text.substring(Oe.startOffset,Oe.endOffset)},`highlight-${Oe.id}`)),Ie=Oe.endOffset}),Ie<K.text.length&&Ee.push(h.jsx("span",{children:K.text.substring(Ie)},"text-after")),h.jsx(h.Fragment,{children:Ee})},er={yellow:"bg-yellow-200/70 dark:bg-yellow-900/40",green:"bg-green-200/70 dark:bg-green-900/40",blue:"bg-blue-200/70 dark:bg-blue-900/40",purple:"bg-purple-200/70 dark:bg-purple-900/40"};return h.jsxs("div",{className:"flex flex-col h-full w-full bg-white dark:bg-[#101a22] font-serif transition-colors relative",children:[h.jsxs("header",{className:"sticky top-0 z-30 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800 transition-colors pt-safe",children:[ts?h.jsxs("form",{onSubmit:Ls,className:"flex items-center px-4 h-16 gap-2",children:[h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"search"}),h.jsx("input",{ref:bo,type:"text",value:Ds,onChange:K=>xi(K.target.value),placeholder:"Search 'Romans 8'...",className:"flex-1 bg-transparent border-none outline-none ring-0 text-lg font-sans text-slate-900 dark:text-white placeholder-slate-400"}),h.jsx("button",{type:"button",onClick:()=>vi(!1),className:"text-sm font-bold text-primary font-sans",children:"Cancel"})]}):h.jsxs("div",{className:"flex items-center justify-between px-4 h-16",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("button",{onClick:()=>he(!0),className:"px-4 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full flex items-center gap-2 transition-colors relative",children:[h.jsxs("span",{className:"text-sm font-bold text-slate-900 dark:text-white font-sans",children:[l," ",f]}),dt()&&h.jsx("span",{className:"material-symbols-outlined text-[14px] text-blue-500 filled",title:"Chapter has notes",children:"description"})]}),h.jsxs("button",{onClick:()=>ae(!0),className:"px-3 py-2 bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full flex items-center gap-1 transition-colors",children:[h.jsx("span",{className:"text-xs font-bold text-slate-600 dark:text-slate-300 font-sans tracking-wider",children:(Un=Zc.find(K=>K.id===i))==null?void 0:Un.short}),r(i)&&h.jsx("span",{className:"material-symbols-outlined text-[14px] text-green-500 filled",children:"check_circle"})]})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsxs("button",{onClick:()=>V(!0),className:`p-2 rounded-full transition-colors relative ${dt()?"text-blue-600 bg-blue-50 dark:bg-blue-900/20":"text-slate-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}`,title:"Chapter Notes",children:[h.jsx("span",{className:"material-symbols-outlined",children:"note_add"}),dt()&&h.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-blue-500"})]}),h.jsx("button",{onClick:()=>{Zr(K=>!K),!Pn&&!Kn&&Qn()},className:`p-2 rounded-full transition-colors ${Kn||Pn?"text-primary bg-primary/10":"text-slate-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:h.jsx("span",{className:"material-symbols-outlined filled",children:"volume_up"})}),h.jsx("button",{onClick:()=>z(!qe),className:`p-2 rounded-full transition-colors ${qe?"text-primary bg-primary/10":"text-slate-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:h.jsx("span",{className:"material-symbols-outlined",children:"text_fields"})}),h.jsx("button",{onClick:()=>{vi(!0),setTimeout(()=>{var K;return(K=bo.current)==null?void 0:K.focus()},100)},className:"p-2 rounded-full text-slate-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined",children:"search"})}),h.jsx("button",{onClick:()=>pe(!ie),className:`p-2 rounded-full transition-colors ${ie?"text-primary bg-primary/10":"text-slate-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-800"}`,children:h.jsx("span",{className:"material-symbols-outlined",children:"bookmarks"})})]})]}),qe&&h.jsxs("div",{className:"absolute top-16 right-4 w-64 bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 p-4 animate-fadeIn z-40 font-sans",children:[h.jsx("div",{className:"flex justify-between items-center mb-4",children:h.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Text Size"})}),h.jsxs("div",{className:"flex items-center gap-4 bg-gray-100 dark:bg-gray-900 rounded-xl p-2 mb-4",children:[h.jsx("span",{className:"text-sm font-serif",children:"A"}),h.jsx("input",{type:"range",min:"0.875",max:"1.5",step:"0.125",value:ve,onChange:K=>ke(parseFloat(K.target.value)),className:"flex-1 h-1 bg-gray-300 rounded-lg appearance-none cursor-pointer accent-primary"}),h.jsx("span",{className:"text-xl font-serif",children:"A"})]})]}),ie&&h.jsx(H3,{onClose:()=>pe(!1),onNavigate:(K,fe,ye)=>{d(K),m(fe),D(ye),pe(!1)}})]}),h.jsx("main",{className:"flex-1 overflow-y-auto hide-scrollbar",style:{scrollBehavior:"smooth"},onClick:()=>{ge&&De(null),k(!1)},onMouseUp:bi,onTouchEnd:bi,children:h.jsxs("div",{className:"max-w-3xl mx-auto px-6 py-8 pb-40",children:[h.jsx("h1",{className:"text-3xl font-bold text-center text-slate-900 dark:text-white mb-4",children:f}),(()=>{const K=v.filter(Ie=>ut(Ie.verse).note).length,fe=v.filter(Ie=>Zn(Ie.verse).length>0).length,ye=!!dt();return K+fe+(ye?1:0)>0?h.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6 font-sans",children:[ye&&h.jsxs("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 text-xs font-bold rounded-full flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px] filled",children:"description"}),"Chapter Note"]}),K>0&&h.jsxs("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 text-xs font-bold rounded-full flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px]",children:"description"}),K," ",K===1?"Note":"Notes"]}),fe>0&&h.jsxs("span",{className:"px-3 py-1 bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400 text-xs font-bold rounded-full flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined text-[14px] filled",children:"ink_highlighter"}),fe," ",fe===1?"Highlight":"Highlights"]})]}):null})(),dt()&&h.jsx("div",{onClick:()=>V(!0),className:"mb-8 p-4 bg-blue-50 dark:bg-blue-900/20 border-l-4 border-blue-500 rounded-r-xl cursor-pointer hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors group",children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400 text-[20px] mt-0.5",children:"note"}),h.jsxs("div",{className:"flex-1 font-sans",children:[h.jsx("h4",{className:"text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wide mb-1",children:"Chapter Notes"}),h.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 line-clamp-3 whitespace-pre-wrap",children:(Dt=dt())==null?void 0:Dt.note})]}),h.jsx("span",{className:"material-symbols-outlined text-blue-500 text-[18px] opacity-0 group-hover:opacity-100 transition-opacity",children:"edit"})]})}),T?h.jsx("div",{className:"space-y-4 animate-pulse",children:[1,2,3,4,5].map(K=>h.jsx("div",{className:"h-4 bg-gray-200 dark:bg-gray-800 rounded w-full"},K))}):h.jsx("div",{className:"text-slate-800 dark:text-slate-200",style:{fontSize:`${ve}rem`,lineHeight:Le},children:v.map(K=>{const fe=Ln===K.verse,ye=ge===K.verse,Ee=ut(K.verse),Ie=Zn(K.verse),Oe=Ie.length>0;return h.jsxs("span",{id:`verse-${K.verse}`,onClick:vt=>{vt.stopPropagation(),De(K.verse===ge?null:K.verse)},className:`
                                    relative inline transition-all duration-300 cursor-pointer rounded-sm px-0.5 box-decoration-clone
                                    ${fe?"bg-yellow-400/30 dark:bg-yellow-400/20":""}
                                    ${ye?"bg-slate-200 dark:bg-slate-700":""}
                                    ${!ye&&!fe&&Ee.highlight?er[Ee.highlight]:""}
                                    ${!ye&&!fe?"hover:bg-black/5 dark:hover:bg-white/5":""}
                                `,children:[h.jsxs("sup",{className:"text-[0.6em] font-bold text-slate-400 mr-1 select-none font-sans inline-flex items-center gap-1",children:[h.jsxs("span",{className:"inline-flex items-center gap-0.5",children:[K.verse,Ee.bookmarked&&h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse",title:"Bookmarked"})]}),Ee.note&&h.jsx("span",{className:"material-symbols-outlined text-[10px] text-blue-500 cursor-pointer hover:text-blue-700 dark:hover:text-blue-300 transition-colors",title:"Double-click to view note",onDoubleClick:vt=>{vt.stopPropagation(),De(K.verse),Qr(Ee.note||""),Gt(!0)},children:"description"}),Oe&&h.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-600 dark:text-yellow-400 filled",title:`${Ie.length} highlight${Ie.length>1?"s":""}`,children:"ink_highlighter"})]}),h.jsxs("span",{className:fe?"font-medium":"",children:[ya(K)," "]})]},K.verse)})}),h.jsxs("div",{className:"flex justify-between items-center mt-12 pt-8 border-t border-gray-100 dark:border-gray-800 font-sans",children:[h.jsxs("button",{onClick:()=>m(Math.max(1,f-1)),disabled:f<=1,className:"px-4 py-2 text-slate-500 hover:text-primary disabled:opacity-30 transition-colors font-medium flex items-center gap-1",children:[h.jsx("span",{className:"material-symbols-outlined",children:"arrow_back"})," Prev"]}),h.jsxs("button",{onClick:()=>m(f+1),className:"px-4 py-2 text-slate-500 hover:text-primary transition-colors font-medium flex items-center gap-1",children:["Next ",h.jsx("span",{className:"material-symbols-outlined",children:"arrow_forward"})]})]})]})}),ge&&h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[60] bg-white dark:bg-[#1e293b] rounded-t-[32px] shadow-[0_-8px_30px_rgba(0,0,0,0.12)] border-t border-gray-100 dark:border-gray-700 animate-slideUp font-sans",children:[h.jsxs("div",{className:"w-full flex flex-col items-center pt-3 pb-2",onClick:()=>De(null),children:[h.jsx("div",{className:"w-12 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full mb-4"}),h.jsxs("div",{className:"w-full px-6 flex justify-between items-center mb-2",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:[l," ",f,":",ge]}),h.jsx("div",{className:"flex gap-2",children:h.jsx("button",{onClick:K=>{K.stopPropagation(),De(null)},className:"p-2 bg-gray-100 dark:bg-gray-800 rounded-full text-slate-500 hover:bg-gray-200 dark:hover:bg-gray-700",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})})]})]}),h.jsxs("div",{className:"px-6 pb-safe space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 block",children:"Highlight"}),h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("button",{onClick:()=>ln(ge,{highlight:void 0}),className:"w-12 h-12 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center text-slate-400 hover:border-gray-400 hover:text-slate-600 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"format_color_reset"})}),["yellow","green","blue","purple"].map(K=>h.jsx("button",{onClick:()=>_i(K),className:`w-12 h-12 rounded-full border-2 transition-transform active:scale-95 flex items-center justify-center ${K==="yellow"?"bg-yellow-300 border-yellow-400":K==="green"?"bg-green-300 border-green-400":K==="blue"?"bg-blue-300 border-blue-400":"bg-purple-300 border-purple-400"} ${ut(ge).highlight===K?"ring-2 ring-offset-2 ring-slate-400 dark:ring-offset-slate-900 scale-110":""}`,children:ut(ge).highlight===K&&h.jsx("span",{className:"material-symbols-outlined text-black/50",children:"check"})},K))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-3 block",children:"Actions"}),h.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[h.jsxs("button",{onClick:pr,className:"flex flex-col items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl text-slate-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"play_circle"}),h.jsx("span",{className:"text-xs font-medium",children:"Listen"})]}),h.jsxs("button",{onClick:mr,className:`flex flex-col items-center gap-2 p-3 rounded-2xl transition-colors ${ut(ge).note?"bg-primary/10 text-primary":"bg-gray-50 dark:bg-gray-800 text-slate-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[24px] ${ut(ge).note?"filled":""}`,children:ut(ge).note?"edit_note":"note_add"}),h.jsx("span",{className:"text-xs font-medium",children:"Note"})]}),h.jsxs("button",{onClick:pa,className:`flex flex-col items-center gap-2 p-3 rounded-2xl transition-colors ${ut(ge).bookmarked?"bg-primary/10 text-primary":"bg-gray-50 dark:bg-gray-800 text-slate-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[h.jsx("span",{className:`material-symbols-outlined text-[24px] ${ut(ge).bookmarked?"filled":""}`,children:ut(ge).bookmarked?"bookmark_added":"bookmark_border"}),h.jsx("span",{className:"text-xs font-medium",children:"Save"})]}),h.jsxs("button",{onClick:Lt,className:"flex flex-col items-center gap-2 p-3 bg-gray-50 dark:bg-gray-800 rounded-2xl text-slate-600 dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"content_copy"}),h.jsx("span",{className:"text-xs font-medium",children:"Copy"})]})]})]})]})]}),Pn&&!ge&&h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 z-[60] bg-white dark:bg-[#1e293b] rounded-t-[32px] shadow-[0_-8px_30px_rgba(0,0,0,0.12)] border-t border-gray-100 dark:border-gray-700 animate-slideUp font-sans",children:[h.jsx("div",{className:"w-full h-1 bg-gray-100 dark:bg-gray-800",children:h.jsx("div",{className:"h-full bg-primary transition-all duration-300",style:{width:`${v.findIndex(K=>K.verse===Ln)/Math.max(1,v.length)*100}%`}})}),h.jsxs("div",{className:"px-6 py-6 pb-safe",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-sm font-bold text-slate-900 dark:text-white flex items-center gap-2",children:["Gemini Neural Voice",h.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] bg-blue-100 text-blue-700 font-bold uppercase",children:"AI"})]}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-0.5",children:"High-fidelity audio streaming"})]}),h.jsx("button",{onClick:()=>Zr(!1),className:"text-slate-400 hover:text-slate-600",children:h.jsx("span",{className:"material-symbols-outlined",children:"expand_more"})})]}),h.jsxs("div",{className:"flex flex-col items-center gap-6",children:[h.jsxs("button",{onClick:Hl,className:"px-4 py-1.5 rounded-full border border-gray-200 dark:border-gray-600 text-xs font-bold text-slate-700 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-gray-700 flex items-center gap-2 transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[16px] text-primary",children:"record_voice_over"}),"Narrator: ",kt]}),h.jsxs("div",{className:"flex items-center gap-8",children:[h.jsx("button",{onClick:()=>ns("prev"),className:"text-slate-800 dark:text-white hover:text-primary active:scale-90",children:h.jsx("span",{className:"material-symbols-outlined text-[40px]",children:"skip_previous"})}),h.jsxs("div",{className:"relative",children:[Bl&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:h.jsx("div",{className:"w-16 h-16 rounded-full border-4 border-primary/30 border-t-primary animate-spin"})}),h.jsx("button",{onClick:Qn,className:"w-16 h-16 rounded-full bg-slate-900 dark:bg-white text-white dark:text-slate-900 flex items-center justify-center shadow-lg hover:scale-105 active:scale-95 transition-all relative z-10",children:h.jsx("span",{className:"material-symbols-outlined text-[32px] filled",children:Kn?"pause":"play_arrow"})})]}),h.jsx("button",{onClick:()=>ns("next"),className:"text-slate-800 dark:text-white hover:text-primary active:scale-90",children:h.jsx("span",{className:"material-symbols-outlined text-[40px]",children:"skip_next"})})]})]})]})]}),jt&&ge&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fadeIn font-sans",children:h.jsxs("div",{className:"bg-white dark:bg-[#1e293b] w-full max-w-sm rounded-2xl shadow-2xl p-5",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:["Note for ",l," ",f,":",ge]}),h.jsx("button",{onClick:()=>Gt(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:h.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),h.jsx("textarea",{value:ks,onChange:K=>Qr(K.target.value),placeholder:"Write your thoughts about this verse...",className:"w-full h-40 p-3 bg-gray-50 dark:bg-gray-800 rounded-xl border-none focus:ring-2 focus:ring-primary mb-4 text-slate-900 dark:text-white resize-none",autoFocus:!0}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>Gt(!1),className:"flex-1 py-3 text-slate-500 font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"Cancel"}),h.jsx("button",{onClick:Ms,className:"flex-1 py-3 bg-primary text-white font-bold rounded-xl hover:bg-blue-600 transition-colors shadow-sm",children:"Save Note"})]})]})}),H&&h.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fadeIn font-sans",children:h.jsxs("div",{className:"bg-white dark:bg-[#1e293b] w-full max-w-lg rounded-2xl shadow-2xl p-5",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Chapter Notes"}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-1",children:[l," Chapter ",f]})]}),h.jsx("button",{onClick:()=>V(!1),className:"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300",children:h.jsx("span",{className:"material-symbols-outlined",children:"close"})})]}),h.jsx("textarea",{value:Ae,onChange:K=>$e(K.target.value),placeholder:"Write notes about this chapter... Key themes, insights, questions, applications...",className:"w-full h-48 p-4 bg-gray-50 dark:bg-gray-800 rounded-xl border-none focus:ring-2 focus:ring-blue-500 mb-4 text-slate-900 dark:text-white resize-none",autoFocus:!0}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:()=>{V(!1);const K=dt();$e((K==null?void 0:K.note)||"")},className:"flex-1 py-3 text-slate-500 font-bold hover:bg-gray-100 dark:hover:bg-gray-700 rounded-xl transition-colors",children:"Cancel"}),h.jsx("button",{onClick:()=>{ma(Ae),V(!1)},className:"flex-1 py-3 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-colors shadow-sm",children:Ae.trim()===""?"Delete Note":"Save Note"})]})]})}),_e&&h.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col font-sans",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>he(!1)}),h.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-white dark:bg-[#1e293b] rounded-t-[32px] overflow-hidden flex flex-col max-h-[85%] animate-slideUp",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white px-2",children:"Select Book"}),h.jsx("button",{onClick:()=>he(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),h.jsx("div",{className:"overflow-y-auto p-2 pb-safe grid grid-cols-2 gap-2 hide-scrollbar",children:iE.map(K=>h.jsx("button",{onClick:()=>{d(K),m(1),he(!1)},className:`text-left p-3 rounded-xl transition-colors ${l===K?"bg-primary/10 dark:bg-primary/20 text-primary font-bold":"text-slate-700 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:K},K))})]})]}),G&&h.jsxs("div",{className:"absolute inset-0 z-50 flex flex-col font-sans",children:[h.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>ae(!1)}),h.jsxs("div",{className:"absolute bottom-0 left-0 w-full bg-white dark:bg-[#1e293b] rounded-t-[32px] overflow-hidden flex flex-col max-h-[50%] animate-slideUp",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white px-2",children:"Select Version"}),h.jsx("button",{onClick:()=>ae(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),h.jsx("div",{className:"overflow-y-auto p-2 pb-safe space-y-1 hide-scrollbar",children:Zc.map(K=>h.jsxs("button",{onClick:()=>{a(K.id),ae(!1)},className:`w-full flex items-center justify-between p-4 rounded-xl transition-colors ${i===K.id?"bg-primary/10 dark:bg-primary/20 text-primary":"text-slate-700 dark:text-slate-300 hover:bg-gray-50 dark:hover:bg-gray-800"}`,children:[h.jsx("span",{className:"font-bold",children:K.name}),r(K.id)&&h.jsx("span",{className:"material-symbols-outlined text-green-500 text-[18px] filled",children:"check_circle"}),i===K.id&&!r(K.id)&&h.jsx("span",{className:"material-symbols-outlined",children:"check"})]},K.id))})]})]}),re&&L&&h.jsx("div",{className:"fixed z-[70] animate-fadeIn",style:{left:`${M.x}px`,top:`${M.y}px`,transform:"translate(-50%, -100%)"},children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl border border-gray-200 dark:border-gray-700 p-3 flex items-center gap-2 mb-2",children:[h.jsx("button",{onClick:()=>rs("yellow"),className:"w-10 h-10 rounded-full bg-yellow-300 hover:bg-yellow-400 transition-colors border-2 border-transparent hover:border-yellow-600 flex items-center justify-center",title:"Yellow",children:h.jsx("span",{className:"material-symbols-outlined text-yellow-900 text-[18px] filled",children:"format_ink_highlighter"})}),h.jsx("button",{onClick:()=>rs("green"),className:"w-10 h-10 rounded-full bg-green-300 hover:bg-green-400 transition-colors border-2 border-transparent hover:border-green-600 flex items-center justify-center",title:"Green",children:h.jsx("span",{className:"material-symbols-outlined text-green-900 text-[18px] filled",children:"format_ink_highlighter"})}),h.jsx("button",{onClick:()=>rs("blue"),className:"w-10 h-10 rounded-full bg-blue-300 hover:bg-blue-400 transition-colors border-2 border-transparent hover:border-blue-600 flex items-center justify-center",title:"Blue",children:h.jsx("span",{className:"material-symbols-outlined text-blue-900 text-[18px] filled",children:"format_ink_highlighter"})}),h.jsx("button",{onClick:()=>rs("purple"),className:"w-10 h-10 rounded-full bg-purple-300 hover:bg-purple-400 transition-colors border-2 border-transparent hover:border-purple-600 flex items-center justify-center",title:"Purple",children:h.jsx("span",{className:"material-symbols-outlined text-purple-900 text-[18px] filled",children:"format_ink_highlighter"})}),h.jsx("div",{className:"w-px h-8 bg-gray-300 dark:bg-gray-600"}),h.jsx("button",{onClick:()=>{var K;k(!1),O(null),(K=window.getSelection())==null||K.removeAllRanges()},className:"w-10 h-10 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors flex items-center justify-center",title:"Cancel",children:h.jsx("span",{className:"material-symbols-outlined text-gray-600 dark:text-gray-400 text-[18px]",children:"close"})})]})})]})},H3=({onClose:n,onNavigate:e})=>{const[t,r]=j.useState([]),[i,a]=j.useState(!0);return j.useEffect(()=>{(async()=>{try{const d=await nt.getAllBookmarks();r(d)}catch(d){console.error("Failed to load bookmarks:",d)}finally{a(!1)}})()},[]),i?h.jsx("div",{className:"absolute top-16 right-4 w-80 max-h-[500px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 animate-fadeIn z-40 font-sans",children:h.jsxs("div",{className:"p-6 text-center",children:[h.jsx("div",{className:"w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto"}),h.jsx("p",{className:"text-sm text-slate-500 mt-2",children:"Loading bookmarks..."})]})}):h.jsxs("div",{className:"absolute top-16 right-4 w-80 max-h-[500px] bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 animate-fadeIn z-40 font-sans overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Bookmarks"}),h.jsx("button",{onClick:n,className:"p-1 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"close"})})]}),t.length===0?h.jsxs("div",{className:"p-6 text-center",children:[h.jsx("span",{className:"material-symbols-outlined text-[48px] text-slate-300 dark:text-slate-600",children:"bookmarks"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 mt-2",children:"No bookmarks yet"}),h.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-500 mt-1",children:"Tap the bookmark icon on any verse to save it"})]}):h.jsx("div",{className:"overflow-y-auto flex-1",children:t.map(l=>h.jsxs("button",{onClick:()=>e(l.book,l.chapter,l.verse),className:"w-full p-4 flex items-start gap-3 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors border-b border-gray-100 dark:border-gray-700/50 last:border-0 text-left",children:[h.jsx("span",{className:"material-symbols-outlined filled text-primary text-[20px] flex-shrink-0 mt-0.5",children:"bookmark"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"font-bold text-sm text-slate-900 dark:text-white",children:[l.book," ",l.chapter,":",l.verse]}),l.note&&h.jsx("p",{className:"text-xs text-slate-600 dark:text-slate-400 mt-1 line-clamp-2",children:l.note}),l.highlight&&h.jsx("span",{className:`inline-block mt-1 px-2 py-0.5 rounded text-[10px] font-medium ${l.highlight==="yellow"?"bg-yellow-200 text-yellow-900":l.highlight==="green"?"bg-green-200 text-green-900":l.highlight==="blue"?"bg-blue-200 text-blue-900":l.highlight==="purple"?"bg-purple-200 text-purple-900":"bg-red-200 text-red-900"}`,children:l.highlight})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400 text-[18px] flex-shrink-0",children:"chevron_right"})]},l.id))})]})},G3=()=>{};var oE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},z3=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const a=n[t++];e[r++]=String.fromCharCode((i&31)<<6|a&63)}else if(i>239&&i<365){const a=n[t++],l=n[t++],d=n[t++],f=((i&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(a&63)<<6|l&63)}}return e.join("")},bA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const a=n[i],l=i+1<n.length,d=l?n[i+1]:0,f=i+2<n.length,m=f?n[i+2]:0,v=a>>2,b=(a&3)<<4|d>>4;let T=(d&15)<<2|m>>6,S=m&63;f||(S=64,l||(T=64)),r.push(t[v],t[b],t[T],t[S])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_A(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):z3(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const a=t[n.charAt(i++)],d=i<n.length?t[n.charAt(i)]:0;++i;const m=i<n.length?t[n.charAt(i)]:64;++i;const b=i<n.length?t[n.charAt(i)]:64;if(++i,a==null||d==null||m==null||b==null)throw new $3;const T=a<<2|d>>4;if(r.push(T),m!==64){const S=d<<4&240|m>>2;if(r.push(S),b!==64){const I=m<<6&192|b;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class $3 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const J3=function(n){const e=_A(n);return bA.encodeByteArray(e,!0)},Lh=function(n){return J3(n).replace(/\./g,"")},TA=function(n){try{return bA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K3=()=>Y3().__FIREBASE_DEFAULTS__,X3=()=>{if(typeof process>"u"||typeof oE>"u")return;const n=oE.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W3=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&TA(n[1]);return e&&JSON.parse(e)},vf=()=>{try{return G3()||K3()||X3()||W3()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},EA=n=>{var e,t;return(t=(e=vf())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},wA=n=>{const e=EA(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},SA=()=>{var n;return(n=vf())==null?void 0:n.config},AA=n=>{var e;return(e=vf())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Sy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Lh(JSON.stringify(t)),Lh(JSON.stringify(l)),""].join(".")}const eu={};function Z3(){const n={prod:[],emulator:[]};for(const e of Object.keys(eu))eu[e]?n.emulator.push(e):n.prod.push(e);return n}function eO(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let aE=!1;function Ay(n,e){if(typeof window>"u"||typeof document>"u"||!ca(window.location.host)||eu[n]===e||eu[n]||aE)return;eu[n]=e;function t(T){return`__firebase__banner__${T}`}const r="__firebase__banner",a=Z3().prod.length>0;function l(){const T=document.getElementById(r);T&&T.remove()}function d(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function f(T,S){T.setAttribute("width","24"),T.setAttribute("id",S),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function m(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{aE=!0,l()},T}function v(T,S){T.setAttribute("id",S),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function b(){const T=eO(r),S=t("text"),I=document.getElementById(S)||document.createElement("span"),D=t("learnmore"),N=document.getElementById(D)||document.createElement("a"),U=t("preprendIcon"),B=document.getElementById(U)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const F=T.element;d(F),v(N,D);const Q=m();f(B,U),F.append(B,I,N,Q),document.body.appendChild(F)}a?(I.innerText="Preview backend disconnected.",B.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(B.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,I.innerText="Preview backend running in this workspace."),I.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",b):b()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Cn())}function nO(){var e;const n=(e=vf())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rO(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CA(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function sO(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iO(){const n=Cn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function oO(){return!nO()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function IA(){try{return typeof indexedDB=="object"}catch{return!1}}function RA(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var a;e(((a=i.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function aO(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="FirebaseError";class Mr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=lO,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,a=this.errors[e],l=a?cO(a,r):"Error",d=`${this.serviceName}: ${l} (${i}).`;return new Mr(i,d,r)}}function cO(n,e){return n.replace(uO,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const uO=/\{\$([^}]+)}/g;function dO(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function uo(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const a=n[i],l=e[i];if(lE(a)&&lE(l)){if(!uo(a,l))return!1}else if(a!==l)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function lE(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function hO(n,e){const t=new fO(n,e);return t.subscribe.bind(t)}class fO{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");mO(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Kp),i.error===void 0&&(i.error=Kp),i.complete===void 0&&(i.complete=Kp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mO(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=1e3,gO=2,yO=14400*1e3,vO=.5;function cE(n,e=pO,t=gO){const r=e*Math.pow(t,n),i=Math.round(vO*r*(Math.random()-.5)*2);return Math.min(yO,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(n){return n&&n._delegate?n._delegate:n}class kr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Q3;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bO(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:i});r.resolve(a)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);r===d&&l.resolve(i)}return i}onInit(e,t){const r=this.normalizeInstanceIdentifier(t),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const a=this.instances.get(r);return a&&e(a,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_O(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _O(n){return n===Yo?void 0:n}function bO(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new xO(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(We||(We={}));const EO={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},wO=We.INFO,SO={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},AO=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=SO[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xf{constructor(e){this.name=e,this._logLevel=wO,this._logHandler=AO,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EO[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const NO=(n,e)=>e.some(t=>n instanceof t);let uE,dE;function CO(){return uE||(uE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function IO(){return dE||(dE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const kA=new WeakMap,Mg=new WeakMap,DA=new WeakMap,Xp=new WeakMap,Ny=new WeakMap;function RO(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(io(n.result)),i()},l=()=>{r(n.error),i()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&kA.set(t,n)}).catch(()=>{}),Ny.set(e,n),e}function kO(n){if(Mg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),i()},l=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});Mg.set(n,e)}let Pg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Mg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||DA.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return io(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DO(n){Pg=n(Pg)}function MO(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Wp(this),e,...t);return DA.set(r,e.sort?e.sort():[e]),io(r)}:IO().includes(n)?function(...e){return n.apply(Wp(this),e),io(kA.get(this))}:function(...e){return io(n.apply(Wp(this),e))}}function PO(n){return typeof n=="function"?MO(n):(n instanceof IDBTransaction&&kO(n),NO(n,CO())?new Proxy(n,Pg):n)}function io(n){if(n instanceof IDBRequest)return RO(n);if(Xp.has(n))return Xp.get(n);const e=PO(n);return e!==n&&(Xp.set(n,e),Ny.set(e,n)),e}const Wp=n=>Ny.get(n);function MA(n,e,{blocked:t,upgrade:r,blocking:i,terminated:a}={}){const l=indexedDB.open(n,e),d=io(l);return r&&l.addEventListener("upgradeneeded",f=>{r(io(l.result),f.oldVersion,f.newVersion,io(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),i&&f.addEventListener("versionchange",m=>i(m.oldVersion,m.newVersion,m))}).catch(()=>{}),d}const LO=["get","getKey","getAll","getAllKeys","count"],VO=["put","add","delete","clear"],Qp=new Map;function hE(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=VO.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LO.includes(t)))return;const a=async function(l,...d){const f=this.transaction(l,i?"readwrite":"readonly");let m=f.store;return r&&(m=m.index(d.shift())),(await Promise.all([m[t](...d),i&&f.done]))[0]};return Qp.set(e,a),a}DO(n=>({...n,get:(e,t,r)=>hE(e,t)||n.get(e,t,r),has:(e,t)=>!!hE(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OO(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OO(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lg="@firebase/app",fE="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new xf("@firebase/app"),jO="@firebase/app-compat",FO="@firebase/analytics-compat",qO="@firebase/analytics",BO="@firebase/app-check-compat",HO="@firebase/app-check",GO="@firebase/auth",zO="@firebase/auth-compat",$O="@firebase/database",JO="@firebase/data-connect",YO="@firebase/database-compat",KO="@firebase/functions",XO="@firebase/functions-compat",WO="@firebase/installations",QO="@firebase/installations-compat",ZO="@firebase/messaging",e5="@firebase/messaging-compat",t5="@firebase/performance",n5="@firebase/performance-compat",r5="@firebase/remote-config",s5="@firebase/remote-config-compat",i5="@firebase/storage",o5="@firebase/storage-compat",a5="@firebase/firestore",l5="@firebase/ai",c5="@firebase/firestore-compat",u5="firebase",d5="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="[DEFAULT]",h5={[Lg]:"fire-core",[jO]:"fire-core-compat",[qO]:"fire-analytics",[FO]:"fire-analytics-compat",[HO]:"fire-app-check",[BO]:"fire-app-check-compat",[GO]:"fire-auth",[zO]:"fire-auth-compat",[$O]:"fire-rtdb",[JO]:"fire-data-connect",[YO]:"fire-rtdb-compat",[KO]:"fire-fn",[XO]:"fire-fn-compat",[WO]:"fire-iid",[QO]:"fire-iid-compat",[ZO]:"fire-fcm",[e5]:"fire-fcm-compat",[t5]:"fire-perf",[n5]:"fire-perf-compat",[r5]:"fire-rc",[s5]:"fire-rc-compat",[i5]:"fire-gcs",[o5]:"fire-gcs-compat",[a5]:"fire-fst",[c5]:"fire-fst-compat",[l5]:"fire-vertex","fire-js":"fire-js",[u5]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vh=new Map,f5=new Map,Ug=new Map;function mE(n,e){try{n.container.addComponent(e)}catch(t){ci.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kr(n){const e=n.name;if(Ug.has(e))return ci.debug(`There were multiple attempts to register component ${e}.`),!1;Ug.set(e,n);for(const t of Vh.values())mE(t,n);for(const t of f5.values())mE(t,n);return!0}function Pl(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Gr(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m5={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},oo=new ua("app","Firebase",m5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw oo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const da=d5;function PA(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r={name:Vg,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw oo.create("bad-app-name",{appName:String(i)});if(t||(t=SA()),!t)throw oo.create("no-options");const a=Vh.get(i);if(a){if(uo(t,a.options)&&uo(r,a.config))return a;throw oo.create("duplicate-app",{appName:i})}const l=new TO(i);for(const f of Ug.values())l.addComponent(f);const d=new p5(t,r,l);return Vh.set(i,d),d}function Cy(n=Vg){const e=Vh.get(n);if(!e&&n===Vg&&SA())return PA();if(!e)throw oo.create("no-app",{appName:n});return e}function Yn(n,e,t){let r=h5[n]??n;t&&(r+=`-${t}`);const i=r.match(/\s|\//),a=e.match(/\s|\//);if(i||a){const l=[`Unable to register library "${r}" with version "${e}":`];i&&l.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ci.warn(l.join(" "));return}Kr(new kr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="firebase-heartbeat-database",y5=1,uu="firebase-heartbeat-store";let Zp=null;function LA(){return Zp||(Zp=MA(g5,y5,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(uu)}catch(t){console.warn(t)}}}}).catch(n=>{throw oo.create("idb-open",{originalErrorMessage:n.message})})),Zp}async function v5(n){try{const t=(await LA()).transaction(uu),r=await t.objectStore(uu).get(VA(n));return await t.done,r}catch(e){if(e instanceof Mr)ci.warn(e.message);else{const t=oo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ci.warn(t.message)}}}async function pE(n,e){try{const r=(await LA()).transaction(uu,"readwrite");await r.objectStore(uu).put(e,VA(n)),await r.done}catch(t){if(t instanceof Mr)ci.warn(t.message);else{const r=oo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});ci.warn(r.message)}}}function VA(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x5=1024,_5=30;class b5{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new E5(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=gE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:i}),this._heartbeatsCache.heartbeats.length>_5){const l=w5(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ci.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=gE(),{heartbeatsToSend:r,unsentEntries:i}=T5(this._heartbeatsCache.heartbeats),a=Lh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return ci.warn(t),""}}}function gE(){return new Date().toISOString().substring(0,10)}function T5(n,e=x5){const t=[];let r=n.slice();for(const i of n){const a=t.find(l=>l.agent===i.agent);if(a){if(a.dates.push(i.date),yE(t)>e){a.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),yE(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class E5{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return IA()?RA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await v5(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return pE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function yE(n){return Lh(JSON.stringify({version:2,heartbeats:n})).length}function w5(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S5(n){Kr(new kr("platform-logger",e=>new UO(e),"PRIVATE")),Kr(new kr("heartbeat",e=>new b5(e),"PRIVATE")),Yn(Lg,fE,n),Yn(Lg,fE,"esm2020"),Yn("fire-js","")}S5("");var vE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ao,UA;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(k,M){function R(){}R.prototype=M.prototype,k.F=M.prototype,k.prototype=new R,k.prototype.constructor=k,k.D=function(L,O,H){for(var V=Array(arguments.length-2),Ae=2;Ae<arguments.length;Ae++)V[Ae-2]=arguments[Ae];return M.prototype[O].apply(L,V)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,t),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(k,M,R){R||(R=0);const L=Array(16);if(typeof M=="string")for(var O=0;O<16;++O)L[O]=M.charCodeAt(R++)|M.charCodeAt(R++)<<8|M.charCodeAt(R++)<<16|M.charCodeAt(R++)<<24;else for(O=0;O<16;++O)L[O]=M[R++]|M[R++]<<8|M[R++]<<16|M[R++]<<24;M=k.g[0],R=k.g[1],O=k.g[2];let H=k.g[3],V;V=M+(H^R&(O^H))+L[0]+3614090360&4294967295,M=R+(V<<7&4294967295|V>>>25),V=H+(O^M&(R^O))+L[1]+3905402710&4294967295,H=M+(V<<12&4294967295|V>>>20),V=O+(R^H&(M^R))+L[2]+606105819&4294967295,O=H+(V<<17&4294967295|V>>>15),V=R+(M^O&(H^M))+L[3]+3250441966&4294967295,R=O+(V<<22&4294967295|V>>>10),V=M+(H^R&(O^H))+L[4]+4118548399&4294967295,M=R+(V<<7&4294967295|V>>>25),V=H+(O^M&(R^O))+L[5]+1200080426&4294967295,H=M+(V<<12&4294967295|V>>>20),V=O+(R^H&(M^R))+L[6]+2821735955&4294967295,O=H+(V<<17&4294967295|V>>>15),V=R+(M^O&(H^M))+L[7]+4249261313&4294967295,R=O+(V<<22&4294967295|V>>>10),V=M+(H^R&(O^H))+L[8]+1770035416&4294967295,M=R+(V<<7&4294967295|V>>>25),V=H+(O^M&(R^O))+L[9]+2336552879&4294967295,H=M+(V<<12&4294967295|V>>>20),V=O+(R^H&(M^R))+L[10]+4294925233&4294967295,O=H+(V<<17&4294967295|V>>>15),V=R+(M^O&(H^M))+L[11]+2304563134&4294967295,R=O+(V<<22&4294967295|V>>>10),V=M+(H^R&(O^H))+L[12]+1804603682&4294967295,M=R+(V<<7&4294967295|V>>>25),V=H+(O^M&(R^O))+L[13]+4254626195&4294967295,H=M+(V<<12&4294967295|V>>>20),V=O+(R^H&(M^R))+L[14]+2792965006&4294967295,O=H+(V<<17&4294967295|V>>>15),V=R+(M^O&(H^M))+L[15]+1236535329&4294967295,R=O+(V<<22&4294967295|V>>>10),V=M+(O^H&(R^O))+L[1]+4129170786&4294967295,M=R+(V<<5&4294967295|V>>>27),V=H+(R^O&(M^R))+L[6]+3225465664&4294967295,H=M+(V<<9&4294967295|V>>>23),V=O+(M^R&(H^M))+L[11]+643717713&4294967295,O=H+(V<<14&4294967295|V>>>18),V=R+(H^M&(O^H))+L[0]+3921069994&4294967295,R=O+(V<<20&4294967295|V>>>12),V=M+(O^H&(R^O))+L[5]+3593408605&4294967295,M=R+(V<<5&4294967295|V>>>27),V=H+(R^O&(M^R))+L[10]+38016083&4294967295,H=M+(V<<9&4294967295|V>>>23),V=O+(M^R&(H^M))+L[15]+3634488961&4294967295,O=H+(V<<14&4294967295|V>>>18),V=R+(H^M&(O^H))+L[4]+3889429448&4294967295,R=O+(V<<20&4294967295|V>>>12),V=M+(O^H&(R^O))+L[9]+568446438&4294967295,M=R+(V<<5&4294967295|V>>>27),V=H+(R^O&(M^R))+L[14]+3275163606&4294967295,H=M+(V<<9&4294967295|V>>>23),V=O+(M^R&(H^M))+L[3]+4107603335&4294967295,O=H+(V<<14&4294967295|V>>>18),V=R+(H^M&(O^H))+L[8]+1163531501&4294967295,R=O+(V<<20&4294967295|V>>>12),V=M+(O^H&(R^O))+L[13]+2850285829&4294967295,M=R+(V<<5&4294967295|V>>>27),V=H+(R^O&(M^R))+L[2]+4243563512&4294967295,H=M+(V<<9&4294967295|V>>>23),V=O+(M^R&(H^M))+L[7]+1735328473&4294967295,O=H+(V<<14&4294967295|V>>>18),V=R+(H^M&(O^H))+L[12]+2368359562&4294967295,R=O+(V<<20&4294967295|V>>>12),V=M+(R^O^H)+L[5]+4294588738&4294967295,M=R+(V<<4&4294967295|V>>>28),V=H+(M^R^O)+L[8]+2272392833&4294967295,H=M+(V<<11&4294967295|V>>>21),V=O+(H^M^R)+L[11]+1839030562&4294967295,O=H+(V<<16&4294967295|V>>>16),V=R+(O^H^M)+L[14]+4259657740&4294967295,R=O+(V<<23&4294967295|V>>>9),V=M+(R^O^H)+L[1]+2763975236&4294967295,M=R+(V<<4&4294967295|V>>>28),V=H+(M^R^O)+L[4]+1272893353&4294967295,H=M+(V<<11&4294967295|V>>>21),V=O+(H^M^R)+L[7]+4139469664&4294967295,O=H+(V<<16&4294967295|V>>>16),V=R+(O^H^M)+L[10]+3200236656&4294967295,R=O+(V<<23&4294967295|V>>>9),V=M+(R^O^H)+L[13]+681279174&4294967295,M=R+(V<<4&4294967295|V>>>28),V=H+(M^R^O)+L[0]+3936430074&4294967295,H=M+(V<<11&4294967295|V>>>21),V=O+(H^M^R)+L[3]+3572445317&4294967295,O=H+(V<<16&4294967295|V>>>16),V=R+(O^H^M)+L[6]+76029189&4294967295,R=O+(V<<23&4294967295|V>>>9),V=M+(R^O^H)+L[9]+3654602809&4294967295,M=R+(V<<4&4294967295|V>>>28),V=H+(M^R^O)+L[12]+3873151461&4294967295,H=M+(V<<11&4294967295|V>>>21),V=O+(H^M^R)+L[15]+530742520&4294967295,O=H+(V<<16&4294967295|V>>>16),V=R+(O^H^M)+L[2]+3299628645&4294967295,R=O+(V<<23&4294967295|V>>>9),V=M+(O^(R|~H))+L[0]+4096336452&4294967295,M=R+(V<<6&4294967295|V>>>26),V=H+(R^(M|~O))+L[7]+1126891415&4294967295,H=M+(V<<10&4294967295|V>>>22),V=O+(M^(H|~R))+L[14]+2878612391&4294967295,O=H+(V<<15&4294967295|V>>>17),V=R+(H^(O|~M))+L[5]+4237533241&4294967295,R=O+(V<<21&4294967295|V>>>11),V=M+(O^(R|~H))+L[12]+1700485571&4294967295,M=R+(V<<6&4294967295|V>>>26),V=H+(R^(M|~O))+L[3]+2399980690&4294967295,H=M+(V<<10&4294967295|V>>>22),V=O+(M^(H|~R))+L[10]+4293915773&4294967295,O=H+(V<<15&4294967295|V>>>17),V=R+(H^(O|~M))+L[1]+2240044497&4294967295,R=O+(V<<21&4294967295|V>>>11),V=M+(O^(R|~H))+L[8]+1873313359&4294967295,M=R+(V<<6&4294967295|V>>>26),V=H+(R^(M|~O))+L[15]+4264355552&4294967295,H=M+(V<<10&4294967295|V>>>22),V=O+(M^(H|~R))+L[6]+2734768916&4294967295,O=H+(V<<15&4294967295|V>>>17),V=R+(H^(O|~M))+L[13]+1309151649&4294967295,R=O+(V<<21&4294967295|V>>>11),V=M+(O^(R|~H))+L[4]+4149444226&4294967295,M=R+(V<<6&4294967295|V>>>26),V=H+(R^(M|~O))+L[11]+3174756917&4294967295,H=M+(V<<10&4294967295|V>>>22),V=O+(M^(H|~R))+L[2]+718787259&4294967295,O=H+(V<<15&4294967295|V>>>17),V=R+(H^(O|~M))+L[9]+3951481745&4294967295,k.g[0]=k.g[0]+M&4294967295,k.g[1]=k.g[1]+(O+(V<<21&4294967295|V>>>11))&4294967295,k.g[2]=k.g[2]+O&4294967295,k.g[3]=k.g[3]+H&4294967295}r.prototype.v=function(k,M){M===void 0&&(M=k.length);const R=M-this.blockSize,L=this.C;let O=this.h,H=0;for(;H<M;){if(O==0)for(;H<=R;)i(this,k,H),H+=this.blockSize;if(typeof k=="string"){for(;H<M;)if(L[O++]=k.charCodeAt(H++),O==this.blockSize){i(this,L),O=0;break}}else for(;H<M;)if(L[O++]=k[H++],O==this.blockSize){i(this,L),O=0;break}}this.h=O,this.o+=M},r.prototype.A=function(){var k=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);k[0]=128;for(var M=1;M<k.length-8;++M)k[M]=0;M=this.o*8;for(var R=k.length-8;R<k.length;++R)k[R]=M&255,M/=256;for(this.v(k),k=Array(16),M=0,R=0;R<4;++R)for(let L=0;L<32;L+=8)k[M++]=this.g[R]>>>L&255;return k};function a(k,M){var R=d;return Object.prototype.hasOwnProperty.call(R,k)?R[k]:R[k]=M(k)}function l(k,M){this.h=M;const R=[];let L=!0;for(let O=k.length-1;O>=0;O--){const H=k[O]|0;L&&H==M||(R[O]=H,L=!1)}this.g=R}var d={};function f(k){return-128<=k&&k<128?a(k,function(M){return new l([M|0],M<0?-1:0)}):new l([k|0],k<0?-1:0)}function m(k){if(isNaN(k)||!isFinite(k))return b;if(k<0)return N(m(-k));const M=[];let R=1;for(let L=0;k>=R;L++)M[L]=k/R|0,R*=4294967296;return new l(M,0)}function v(k,M){if(k.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(k.charAt(0)=="-")return N(v(k.substring(1),M));if(k.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=m(Math.pow(M,8));let L=b;for(let H=0;H<k.length;H+=8){var O=Math.min(8,k.length-H);const V=parseInt(k.substring(H,H+O),M);O<8?(O=m(Math.pow(M,O)),L=L.j(O).add(m(V))):(L=L.j(R),L=L.add(m(V)))}return L}var b=f(0),T=f(1),S=f(16777216);n=l.prototype,n.m=function(){if(D(this))return-N(this).m();let k=0,M=1;for(let R=0;R<this.g.length;R++){const L=this.i(R);k+=(L>=0?L:4294967296+L)*M,M*=4294967296}return k},n.toString=function(k){if(k=k||10,k<2||36<k)throw Error("radix out of range: "+k);if(I(this))return"0";if(D(this))return"-"+N(this).toString(k);const M=m(Math.pow(k,6));var R=this;let L="";for(;;){const O=Q(R,M).g;R=U(R,O.j(M));let H=((R.g.length>0?R.g[0]:R.h)>>>0).toString(k);if(R=O,I(R))return H+L;for(;H.length<6;)H="0"+H;L=H+L}},n.i=function(k){return k<0?0:k<this.g.length?this.g[k]:this.h};function I(k){if(k.h!=0)return!1;for(let M=0;M<k.g.length;M++)if(k.g[M]!=0)return!1;return!0}function D(k){return k.h==-1}n.l=function(k){return k=U(this,k),D(k)?-1:I(k)?0:1};function N(k){const M=k.g.length,R=[];for(let L=0;L<M;L++)R[L]=~k.g[L];return new l(R,~k.h).add(T)}n.abs=function(){return D(this)?N(this):this},n.add=function(k){const M=Math.max(this.g.length,k.g.length),R=[];let L=0;for(let O=0;O<=M;O++){let H=L+(this.i(O)&65535)+(k.i(O)&65535),V=(H>>>16)+(this.i(O)>>>16)+(k.i(O)>>>16);L=V>>>16,H&=65535,V&=65535,R[O]=V<<16|H}return new l(R,R[R.length-1]&-2147483648?-1:0)};function U(k,M){return k.add(N(M))}n.j=function(k){if(I(this)||I(k))return b;if(D(this))return D(k)?N(this).j(N(k)):N(N(this).j(k));if(D(k))return N(this.j(N(k)));if(this.l(S)<0&&k.l(S)<0)return m(this.m()*k.m());const M=this.g.length+k.g.length,R=[];for(var L=0;L<2*M;L++)R[L]=0;for(L=0;L<this.g.length;L++)for(let O=0;O<k.g.length;O++){const H=this.i(L)>>>16,V=this.i(L)&65535,Ae=k.i(O)>>>16,$e=k.i(O)&65535;R[2*L+2*O]+=V*$e,B(R,2*L+2*O),R[2*L+2*O+1]+=H*$e,B(R,2*L+2*O+1),R[2*L+2*O+1]+=V*Ae,B(R,2*L+2*O+1),R[2*L+2*O+2]+=H*Ae,B(R,2*L+2*O+2)}for(k=0;k<M;k++)R[k]=R[2*k+1]<<16|R[2*k];for(k=M;k<2*M;k++)R[k]=0;return new l(R,0)};function B(k,M){for(;(k[M]&65535)!=k[M];)k[M+1]+=k[M]>>>16,k[M]&=65535,M++}function F(k,M){this.g=k,this.h=M}function Q(k,M){if(I(M))throw Error("division by zero");if(I(k))return new F(b,b);if(D(k))return M=Q(N(k),M),new F(N(M.g),N(M.h));if(D(M))return M=Q(k,N(M)),new F(N(M.g),M.h);if(k.g.length>30){if(D(k)||D(M))throw Error("slowDivide_ only works with positive integers.");for(var R=T,L=M;L.l(k)<=0;)R=J(R),L=J(L);var O=re(R,1),H=re(L,1);for(L=re(L,2),R=re(R,2);!I(L);){var V=H.add(L);V.l(k)<=0&&(O=O.add(R),H=V),L=re(L,1),R=re(R,1)}return M=U(k,O.j(M)),new F(O,M)}for(O=b;k.l(M)>=0;){for(R=Math.max(1,Math.floor(k.m()/M.m())),L=Math.ceil(Math.log(R)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),H=m(R),V=H.j(M);D(V)||V.l(k)>0;)R-=L,H=m(R),V=H.j(M);I(H)&&(H=T),O=O.add(H),k=U(k,V)}return new F(O,k)}n.B=function(k){return Q(this,k).h},n.and=function(k){const M=Math.max(this.g.length,k.g.length),R=[];for(let L=0;L<M;L++)R[L]=this.i(L)&k.i(L);return new l(R,this.h&k.h)},n.or=function(k){const M=Math.max(this.g.length,k.g.length),R=[];for(let L=0;L<M;L++)R[L]=this.i(L)|k.i(L);return new l(R,this.h|k.h)},n.xor=function(k){const M=Math.max(this.g.length,k.g.length),R=[];for(let L=0;L<M;L++)R[L]=this.i(L)^k.i(L);return new l(R,this.h^k.h)};function J(k){const M=k.g.length+1,R=[];for(let L=0;L<M;L++)R[L]=k.i(L)<<1|k.i(L-1)>>>31;return new l(R,k.h)}function re(k,M){const R=M>>5;M%=32;const L=k.g.length-R,O=[];for(let H=0;H<L;H++)O[H]=M>0?k.i(H+R)>>>M|k.i(H+R+1)<<32-M:k.i(H+R);return new l(O,k.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,UA=r,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,ao=l}).apply(typeof vE<"u"?vE:typeof self<"u"?self:typeof window<"u"?window:{});var ih=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OA,Kc,jA,vh,Og,FA,qA,BA;(function(){var n,e=Object.defineProperty;function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof ih=="object"&&ih];for(var E=0;E<y.length;++E){var A=y[E];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var r=t(this);function i(y,E){if(E)e:{var A=r;y=y.split(".");for(var P=0;P<y.length-1;P++){var X=y[P];if(!(X in A))break e;A=A[X]}y=y[y.length-1],P=A[y],E=E(P),E!=P&&E!=null&&e(A,y,{configurable:!0,writable:!0,value:E})}}i("Symbol.dispose",function(y){return y||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(y){return y||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(y){return y||function(E){var A=[],P;for(P in E)Object.prototype.hasOwnProperty.call(E,P)&&A.push([P,E[P]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function d(y){var E=typeof y;return E=="object"&&y!=null||E=="function"}function f(y,E,A){return y.call.apply(y.bind,arguments)}function m(y,E,A){return m=f,m.apply(null,arguments)}function v(y,E){var A=Array.prototype.slice.call(arguments,1);return function(){var P=A.slice();return P.push.apply(P,arguments),y.apply(this,P)}}function b(y,E){function A(){}A.prototype=E.prototype,y.Z=E.prototype,y.prototype=new A,y.prototype.constructor=y,y.Ob=function(P,X,te){for(var me=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)me[Be-2]=arguments[Be];return E.prototype[X].apply(P,me)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?y=>y&&AsyncContext.Snapshot.wrap(y):y=>y;function S(y){const E=y.length;if(E>0){const A=Array(E);for(let P=0;P<E;P++)A[P]=y[P];return A}return[]}function I(y,E){for(let P=1;P<arguments.length;P++){const X=arguments[P];var A=typeof X;if(A=A!="object"?A:X?Array.isArray(X)?"array":A:"null",A=="array"||A=="object"&&typeof X.length=="number"){A=y.length||0;const te=X.length||0;y.length=A+te;for(let me=0;me<te;me++)y[A+me]=X[me]}else y.push(X)}}class D{constructor(E,A){this.i=E,this.j=A,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function N(y){l.setTimeout(()=>{throw y},0)}function U(){var y=k;let E=null;return y.g&&(E=y.g,y.g=y.g.next,y.g||(y.h=null),E.next=null),E}class B{constructor(){this.h=this.g=null}add(E,A){const P=F.get();P.set(E,A),this.h?this.h.next=P:this.g=P,this.h=P}}var F=new D(()=>new Q,y=>y.reset());class Q{constructor(){this.next=this.g=this.h=null}set(E,A){this.h=E,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let J,re=!1,k=new B,M=()=>{const y=Promise.resolve(void 0);J=()=>{y.then(R)}};function R(){for(var y;y=U();){try{y.h.call(y.g)}catch(A){N(A)}var E=F;E.j(y),E.h<100&&(E.h++,y.next=E.g,E.g=y)}re=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(y,E){this.type=y,this.g=this.target=E,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var H=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var y=!1,E=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const A=()=>{};l.addEventListener("test",A,E),l.removeEventListener("test",A,E)}catch{}return y})();function V(y){return/^[\s\xa0]*$/.test(y)}function Ae(y,E){O.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y&&this.init(y,E)}b(Ae,O),Ae.prototype.init=function(y,E){const A=this.type=y.type,P=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;this.target=y.target||y.srcElement,this.g=E,E=y.relatedTarget,E||(A=="mouseover"?E=y.fromElement:A=="mouseout"&&(E=y.toElement)),this.relatedTarget=E,P?(this.clientX=P.clientX!==void 0?P.clientX:P.pageX,this.clientY=P.clientY!==void 0?P.clientY:P.pageY,this.screenX=P.screenX||0,this.screenY=P.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=y.pointerType,this.state=y.state,this.i=y,y.defaultPrevented&&Ae.Z.h.call(this)},Ae.prototype.h=function(){Ae.Z.h.call(this);const y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var $e="closure_listenable_"+(Math.random()*1e6|0),G=0;function ae(y,E,A,P,X){this.listener=y,this.proxy=null,this.src=E,this.type=A,this.capture=!!P,this.ha=X,this.key=++G,this.da=this.fa=!1}function _e(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function he(y,E,A){for(const P in y)E.call(A,y[P],P,y)}function qe(y,E){for(const A in y)E.call(void 0,y[A],A,y)}function z(y){const E={};for(const A in y)E[A]=y[A];return E}const ie="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(y,E){let A,P;for(let X=1;X<arguments.length;X++){P=arguments[X];for(A in P)y[A]=P[A];for(let te=0;te<ie.length;te++)A=ie[te],Object.prototype.hasOwnProperty.call(P,A)&&(y[A]=P[A])}}function ve(y){this.src=y,this.g={},this.h=0}ve.prototype.add=function(y,E,A,P,X){const te=y.toString();y=this.g[te],y||(y=this.g[te]=[],this.h++);const me=Le(y,E,P,X);return me>-1?(E=y[me],A||(E.fa=!1)):(E=new ae(E,this.src,te,!!P,X),E.fa=A,y.push(E)),E};function ke(y,E){const A=E.type;if(A in y.g){var P=y.g[A],X=Array.prototype.indexOf.call(P,E,void 0),te;(te=X>=0)&&Array.prototype.splice.call(P,X,1),te&&(_e(E),y.g[A].length==0&&(delete y.g[A],y.h--))}}function Le(y,E,A,P){for(let X=0;X<y.length;++X){const te=y[X];if(!te.da&&te.listener==E&&te.capture==!!A&&te.ha==P)return X}return-1}var de="closure_lm_"+(Math.random()*1e6|0),ge={};function De(y,E,A,P,X){if(Array.isArray(E)){for(let te=0;te<E.length;te++)De(y,E[te],A,P,X);return null}return A=Ln(A),y&&y[$e]?y.J(E,A,d(P)?!!P.capture:!1,X):jt(y,E,A,!1,P,X)}function jt(y,E,A,P,X,te){if(!E)throw Error("Invalid event type");const me=d(X)?!!X.capture:!!X;let Be=Kn(y);if(Be||(y[de]=Be=new ve(y)),A=Be.add(E,A,P,me,te),A.proxy)return A;if(P=Gt(),A.proxy=P,P.src=y,P.listener=A,y.addEventListener)H||(X=me),X===void 0&&(X=!1),y.addEventListener(E.toString(),P,X);else if(y.attachEvent)y.attachEvent(Pn(E.toString()),P);else if(y.addListener&&y.removeListener)y.addListener(P);else throw Error("addEventListener and attachEvent are unavailable.");return A}function Gt(){function y(A){return E.call(y.src,y.listener,A)}const E=Zr;return y}function ks(y,E,A,P,X){if(Array.isArray(E))for(var te=0;te<E.length;te++)ks(y,E[te],A,P,X);else P=d(P)?!!P.capture:!!P,A=Ln(A),y&&y[$e]?(y=y.i,te=String(E).toString(),te in y.g&&(E=y.g[te],A=Le(E,A,P,X),A>-1&&(_e(E[A]),Array.prototype.splice.call(E,A,1),E.length==0&&(delete y.g[te],y.h--)))):y&&(y=Kn(y))&&(E=y.g[E.toString()],y=-1,E&&(y=Le(E,A,P,X)),(A=y>-1?E[y]:null)&&Qr(A))}function Qr(y){if(typeof y!="number"&&y&&!y.da){var E=y.src;if(E&&E[$e])ke(E.i,y);else{var A=y.type,P=y.proxy;E.removeEventListener?E.removeEventListener(A,P,y.capture):E.detachEvent?E.detachEvent(Pn(A),P):E.addListener&&E.removeListener&&E.removeListener(P),(A=Kn(E))?(ke(A,y),A.h==0&&(A.src=null,E[de]=null)):_e(y)}}}function Pn(y){return y in ge?ge[y]:ge[y]="on"+y}function Zr(y,E){if(y.da)y=!0;else{E=new Ae(E,this);const A=y.listener,P=y.ha||y.src;y.fa&&Qr(y),y=A.call(P,E)}return y}function Kn(y){return y=y[de],y instanceof ve?y:null}var Pr="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ln(y){return typeof y=="function"?y:(y[Pr]||(y[Pr]=function(E){return y.handleEvent(E)}),y[Pr])}function Rt(){L.call(this),this.i=new ve(this),this.M=this,this.G=null}b(Rt,L),Rt.prototype[$e]=!0,Rt.prototype.removeEventListener=function(y,E,A,P){ks(this,y,E,A,P)};function kt(y,E){var A,P=y.G;if(P)for(A=[];P;P=P.G)A.push(P);if(y=y.M,P=E.type||E,typeof E=="string")E=new O(E,y);else if(E instanceof O)E.target=E.target||y;else{var X=E;E=new O(P,y),pe(E,X)}X=!0;let te,me;if(A)for(me=A.length-1;me>=0;me--)te=E.g=A[me],X=es(te,P,!0,E)&&X;if(te=E.g=y,X=es(te,P,!0,E)&&X,X=es(te,P,!1,E)&&X,A)for(me=0;me<A.length;me++)te=E.g=A[me],X=es(te,P,!1,E)&&X}Rt.prototype.N=function(){if(Rt.Z.N.call(this),this.i){var y=this.i;for(const E in y.g){const A=y.g[E];for(let P=0;P<A.length;P++)_e(A[P]);delete y.g[E],y.h--}}this.G=null},Rt.prototype.J=function(y,E,A,P){return this.i.add(String(y),E,!1,A,P)},Rt.prototype.K=function(y,E,A,P){return this.i.add(String(y),E,!0,A,P)};function es(y,E,A,P){if(E=y.i.g[String(E)],!E)return!0;E=E.concat();let X=!0;for(let te=0;te<E.length;++te){const me=E[te];if(me&&!me.da&&me.capture==A){const Be=me.listener,Ft=me.ha||me.src;me.fa&&ke(y.i,me),X=Be.call(Ft,P)!==!1&&X}}return X&&!P.defaultPrevented}function Bl(y,E){if(typeof y!="function")if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:l.setTimeout(y,E||0)}function yi(y){y.g=Bl(()=>{y.g=null,y.i&&(y.i=!1,yi(y))},y.l);const E=y.h;y.h=null,y.m.apply(null,E)}class st extends L{constructor(E,A){super(),this.m=E,this.l=A,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:yi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function fr(y){L.call(this),this.h=y,this.g={}}b(fr,L);var Xn=[];function Lr(y){he(y.g,function(E,A){this.g.hasOwnProperty(A)&&Qr(E)},y),y.g={}}fr.prototype.N=function(){fr.Z.N.call(this),Lr(this)},fr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ts=l.JSON.stringify,vi=l.JSON.parse,Ds=class{stringify(y){return l.JSON.stringify(y,void 0)}parse(y){return l.JSON.parse(y,void 0)}};function xi(){}function bo(){}var Vn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ut(){O.call(this,"d")}b(ut,O);function ln(){O.call(this,"c")}b(ln,O);var dt={},ma=null;function _i(){return ma=ma||new Rt}dt.Ia="serverreachability";function pa(y){O.call(this,dt.Ia,y)}b(pa,O);function mr(y){const E=_i();kt(E,new pa(E))}dt.STAT_EVENT="statevent";function Ms(y,E){O.call(this,dt.STAT_EVENT,y),this.stat=E}b(Ms,O);function Lt(y){const E=_i();kt(E,new Ms(E,y))}dt.Ja="timingevent";function pr(y,E){O.call(this,dt.Ja,y),this.size=E}b(pr,O);function Wn(y,E){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){y()},E)}function _n(){this.g=!0}_n.prototype.ua=function(){this.g=!1};function ga(y,E,A,P,X,te){y.info(function(){if(y.g)if(te){var me="",Be=te.split("&");for(let ht=0;ht<Be.length;ht++){var Ft=Be[ht].split("=");if(Ft.length>1){const Ct=Ft[0];Ft=Ft[1];const vr=Ct.split("_");me=vr.length>=2&&vr[1]=="type"?me+(Ct+"="+Ft+"&"):me+(Ct+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+P+") [attempt "+X+"]: "+E+`
`+A+`
`+me})}function Ps(y,E,A,P,X,te,me){y.info(function(){return"XMLHTTP RESP ("+P+") [ attempt "+X+"]: "+E+`
`+A+`
`+te+" "+me})}function Qn(y,E,A,P){y.info(function(){return"XMLHTTP TEXT ("+E+"): "+Hl(y,A)+(P?" "+P:"")})}function ns(y,E){y.info(function(){return"TIMEOUT: "+E})}_n.prototype.info=function(){};function Hl(y,E){if(!y.g)return E;if(!E)return null;try{const te=JSON.parse(E);if(te){for(y=0;y<te.length;y++)if(Array.isArray(te[y])){var A=te[y];if(!(A.length<2)){var P=A[1];if(Array.isArray(P)&&!(P.length<1)){var X=P[0];if(X!="noop"&&X!="stop"&&X!="close")for(let me=1;me<P.length;me++)P[me]=""}}}}return ts(te)}catch{return E}}var Ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},bi={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},rs;function Vs(){}b(Vs,xi),Vs.prototype.g=function(){return new XMLHttpRequest},rs=new Vs;function Zn(y){return encodeURIComponent(String(y))}function ya(y){var E=1;y=y.split(":");const A=[];for(;E>0&&y.length;)A.push(y.shift()),E--;return y.length&&A.push(y.join(":")),A}function er(y,E,A,P){this.j=y,this.i=E,this.l=A,this.S=P||1,this.V=new fr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Un}function Un(){this.i=null,this.g="",this.h=!1}var Dt={},K={};function fe(y,E,A){y.M=1,y.A=To(zt(E)),y.u=A,y.R=!0,ye(y,null)}function ye(y,E){y.F=Date.now(),vt(y),y.B=zt(y.A);var A=y.B,P=y.S;Array.isArray(P)||(P=[String(P)]),_a(A.i,"t",P),y.C=0,A=y.j.L,y.h=new Un,y.g=zu(y.j,A?E:null,!y.u),y.P>0&&(y.O=new st(m(y.Y,y,y.g),y.P)),E=y.V,A=y.g,P=y.ba;var X="readystatechange";Array.isArray(X)||(X&&(Xn[0]=X.toString()),X=Xn);for(let te=0;te<X.length;te++){const me=De(A,X[te],P||E.handleEvent,!1,E.h||E);if(!me)break;E.g[me.key]=me}E=y.J?z(y.J):{},y.u?(y.v||(y.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.B,y.v,y.u,E)):(y.v="GET",y.g.ea(y.B,y.v,null,E)),mr(),ga(y.i,y.v,y.B,y.l,y.S,y.u)}er.prototype.ba=function(y){y=y.target;const E=this.O;E&&Or(y)==3?E.j():this.Y(y)},er.prototype.Y=function(y){try{if(y==this.g)e:{const Be=Or(this.g),Ft=this.g.ya(),ht=this.g.ca();if(!(Be<3)&&(Be!=3||this.g&&(this.h.h||this.g.la()||un(this.g)))){this.K||Be!=4||Ft==7||(Ft==8||ht<=0?mr(3):mr(2)),bn(this);var E=this.g.ca();this.X=E;var A=Ee(this);if(this.o=E==200,Ps(this.i,this.v,this.B,this.l,this.S,Be,E),this.o){if(this.U&&!this.L){t:{if(this.g){var P,X=this.g;if((P=X.g?X.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!V(P)){var te=P;break t}}te=null}if(y=te)Qn(this.i,this.l,y,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tr(this,y);else{this.o=!1,this.m=3,Lt(12),cn(this),On(this);break e}}if(this.R){y=!0;let Ct;for(;!this.K&&this.C<A.length;)if(Ct=Oe(this,A),Ct==K){Be==4&&(this.m=4,Lt(14),y=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ct==Dt){this.m=4,Lt(15),Qn(this.i,this.l,A,"[Invalid Chunk]"),y=!1;break}else Qn(this.i,this.l,Ct,null),tr(this,Ct);if(Ie(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Be!=4||A.length!=0||this.h.h||(this.m=1,Lt(16),y=!1),this.o=this.o&&y,!y)Qn(this.i,this.l,A,"[Invalid Chunked Response]"),cn(this),On(this);else if(A.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),sc(me),me.P=!0,Lt(11))}}else Qn(this.i,this.l,A,null),tr(this,A);Be==4&&cn(this),this.o&&!this.K&&(Be==4?qu(this.j,this):(this.o=!1,vt(this)))}else js(this.g),E==400&&A.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),cn(this),On(this)}}}catch{}finally{}};function Ee(y){if(!Ie(y))return y.g.la();const E=un(y.g);if(E==="")return"";let A="";const P=E.length,X=Or(y.g)==4;if(!y.h.i){if(typeof TextDecoder>"u")return cn(y),On(y),"";y.h.i=new l.TextDecoder}for(let te=0;te<P;te++)y.h.h=!0,A+=y.h.i.decode(E[te],{stream:!(X&&te==P-1)});return E.length=0,y.h.g+=A,y.C=0,y.h.g}function Ie(y){return y.g?y.v=="GET"&&y.M!=2&&y.j.Aa:!1}function Oe(y,E){var A=y.C,P=E.indexOf(`
`,A);return P==-1?K:(A=Number(E.substring(A,P)),isNaN(A)?Dt:(P+=1,P+A>E.length?K:(E=E.slice(P,P+A),y.C=P+A,E)))}er.prototype.cancel=function(){this.K=!0,cn(this)};function vt(y){y.T=Date.now()+y.H,Us(y,y.H)}function Us(y,E){if(y.D!=null)throw Error("WatchDog timer not null");y.D=Wn(m(y.aa,y),E)}function bn(y){y.D&&(l.clearTimeout(y.D),y.D=null)}er.prototype.aa=function(){this.D=null;const y=Date.now();y-this.T>=0?(ns(this.i,this.B),this.M!=2&&(mr(),Lt(17)),cn(this),this.m=2,On(this)):Us(this,this.T-y)};function On(y){y.j.I==0||y.K||qu(y.j,y)}function cn(y){bn(y);var E=y.O;E&&typeof E.dispose=="function"&&E.dispose(),y.O=null,Lr(y.V),y.g&&(E=y.g,y.g=null,E.abort(),E.dispose())}function tr(y,E){try{var A=y.j;if(A.I!=0&&(A.g==y||is(A.h,y))){if(!y.L&&is(A.h,y)&&A.I==3){try{var P=A.Ba.g.parse(E)}catch{P=null}if(Array.isArray(P)&&P.length==3){var X=P;if(X[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<y.F)Sa(A),Ii(A);else break e;Io(A),Lt(18)}}else A.xa=X[1],0<A.xa-A.K&&X[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Wn(m(A.Va,A),6e3));ss(A.h)<=1&&A.ta&&(A.ta=void 0)}else ds(A,11)}else if((y.L||A.g==y)&&Sa(A),!V(E))for(X=A.Ba.g.parse(E),E=0;E<X.length;E++){let ht=X[E];const Ct=ht[0];if(!(Ct<=A.K))if(A.K=Ct,ht=ht[1],A.I==2)if(ht[0]=="c"){A.M=ht[1],A.ba=ht[2];const vr=ht[3];vr!=null&&(A.ka=vr,A.j.info("VER="+A.ka));const hs=ht[4];hs!=null&&(A.za=hs,A.j.info("SVER="+A.za));const jr=ht[5];jr!=null&&typeof jr=="number"&&jr>0&&(P=1.5*jr,A.O=P,A.j.info("backChannelRequestTimeoutMs_="+P)),P=A;const Fr=y.g;if(Fr){const Ro=Fr.g?Fr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ro){var te=P.h;te.g||Ro.indexOf("spdy")==-1&&Ro.indexOf("quic")==-1&&Ro.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&($l(te,te.h),te.h=null))}if(P.G){const Aa=Fr.g?Fr.g.getResponseHeader("X-HTTP-Session-Id"):null;Aa&&(P.wa=Aa,pt(P.J,P.G,Aa))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-y.F,A.j.info("Handshake RTT: "+A.T+"ms")),P=A;var me=y;if(P.na=Gu(P,P.L?P.ba:null,P.W),me.L){Jl(P.h,me);var Be=me,Ft=P.O;Ft&&(Be.H=Ft),Be.D&&(bn(Be),vt(Be)),P.g=me}else ju(P);A.i.length>0&&us(A)}else ht[0]!="stop"&&ht[0]!="close"||ds(A,7);else A.I==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?ds(A,7):nc(A):ht[0]!="noop"&&A.l&&A.l.qa(ht),A.A=0)}}mr(4)}catch{}}var Vt=class{constructor(y,E){this.g=y,this.map=E}};function Gl(y){this.l=y||10,l.PerformanceNavigationTiming?(y=l.performance.getEntriesByType("navigation"),y=y.length>0&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zl(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function ss(y){return y.h?1:y.g?y.g.size:0}function is(y,E){return y.h?y.h==E:y.g?y.g.has(E):!1}function $l(y,E){y.g?y.g.add(E):y.h=E}function Jl(y,E){y.h&&y.h==E?y.h=null:y.g&&y.g.has(E)&&y.g.delete(E)}Gl.prototype.cancel=function(){if(this.i=Yl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Yl(y){if(y.h!=null)return y.i.concat(y.h.G);if(y.g!=null&&y.g.size!==0){let E=y.i;for(const A of y.g.values())E=E.concat(A.G);return E}return S(y.i)}var Mu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function va(y,E){if(y){y=y.split("&");for(let A=0;A<y.length;A++){const P=y[A].indexOf("=");let X,te=null;P>=0?(X=y[A].substring(0,P),te=y[A].substring(P+1)):X=y[A],E(X,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function nr(y){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;y instanceof nr?(this.l=y.l,rn(this,y.j),this.o=y.o,this.g=y.g,Ti(this,y.u),this.h=y.h,Kl(this,Uu(y.i)),this.m=y.m):y&&(E=String(y).match(Mu))?(this.l=!1,rn(this,E[1]||"",!0),this.o=os(E[2]||""),this.g=os(E[3]||"",!0),Ti(this,E[4]),this.h=os(E[5]||"",!0),Kl(this,E[6]||"",!0),this.m=os(E[7]||"")):(this.l=!1,this.i=new wi(null,this.l))}nr.prototype.toString=function(){const y=[];var E=this.j;E&&y.push(Eo(E,xa,!0),":");var A=this.g;return(A||E=="file")&&(y.push("//"),(E=this.o)&&y.push(Eo(E,xa,!0),"@"),y.push(Zn(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&y.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&y.push("/"),y.push(Eo(A,A.charAt(0)=="/"?Xl:Pu,!0))),(A=this.i.toString())&&y.push("?",A),(A=this.m)&&y.push("#",Eo(A,Lu)),y.join("")},nr.prototype.resolve=function(y){const E=zt(this);let A=!!y.j;A?rn(E,y.j):A=!!y.o,A?E.o=y.o:A=!!y.g,A?E.g=y.g:A=y.u!=null;var P=y.h;if(A)Ti(E,y.u);else if(A=!!y.h){if(P.charAt(0)!="/")if(this.g&&!this.h)P="/"+P;else{var X=E.h.lastIndexOf("/");X!=-1&&(P=E.h.slice(0,X+1)+P)}if(X=P,X==".."||X==".")P="";else if(X.indexOf("./")!=-1||X.indexOf("/.")!=-1){P=X.lastIndexOf("/",0)==0,X=X.split("/");const te=[];for(let me=0;me<X.length;){const Be=X[me++];Be=="."?P&&me==X.length&&te.push(""):Be==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),P&&me==X.length&&te.push("")):(te.push(Be),P=!0)}P=te.join("/")}else P=X}return A?E.h=P:A=y.i.toString()!=="",A?Kl(E,Uu(y.i)):A=!!y.m,A&&(E.m=y.m),E};function zt(y){return new nr(y)}function rn(y,E,A){y.j=A?os(E,!0):E,y.j&&(y.j=y.j.replace(/:$/,""))}function Ti(y,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);y.u=E}else y.u=null}function Kl(y,E,A){E instanceof wi?(y.i=E,ba(y.i,y.l)):(A||(E=Eo(E,Ei)),y.i=new wi(E,y.l))}function pt(y,E,A){y.i.set(E,A)}function To(y){return pt(y,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),y}function os(y,E){return y?E?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Eo(y,E,A){return typeof y=="string"?(y=encodeURI(y).replace(E,jn),A&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function jn(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var xa=/[#\/\?@]/g,Pu=/[#\?:]/g,Xl=/[#\?]/g,Ei=/[#\?@]/g,Lu=/#/g;function wi(y,E){this.h=this.g=null,this.i=y||null,this.j=!!E}function Fn(y){y.g||(y.g=new Map,y.h=0,y.i&&va(y.i,function(E,A){y.add(decodeURIComponent(E.replace(/\+/g," ")),A)}))}n=wi.prototype,n.add=function(y,E){Fn(this),this.i=null,y=Si(this,y);let A=this.g.get(y);return A||this.g.set(y,A=[]),A.push(E),this.h+=1,this};function Vu(y,E){Fn(y),E=Si(y,E),y.g.has(E)&&(y.i=null,y.h-=y.g.get(E).length,y.g.delete(E))}function Wl(y,E){return Fn(y),E=Si(y,E),y.g.has(E)}n.forEach=function(y,E){Fn(this),this.g.forEach(function(A,P){A.forEach(function(X){y.call(E,X,P,this)},this)},this)};function Ql(y,E){Fn(y);let A=[];if(typeof E=="string")Wl(y,E)&&(A=A.concat(y.g.get(Si(y,E))));else for(y=Array.from(y.g.values()),E=0;E<y.length;E++)A=A.concat(y[E]);return A}n.set=function(y,E){return Fn(this),this.i=null,y=Si(this,y),Wl(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[E]),this.h+=1,this},n.get=function(y,E){return y?(y=Ql(this,y),y.length>0?String(y[0]):E):E};function _a(y,E,A){Vu(y,E),A.length>0&&(y.i=null,y.g.set(Si(y,E),S(A)),y.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],E=Array.from(this.g.keys());for(let P=0;P<E.length;P++){var A=E[P];const X=Zn(A);A=Ql(this,A);for(let te=0;te<A.length;te++){let me=X;A[te]!==""&&(me+="="+Zn(A[te])),y.push(me)}}return this.i=y.join("&")};function Uu(y){const E=new wi;return E.i=y.i,y.g&&(E.g=new Map(y.g),E.h=y.h),E}function Si(y,E){return E=String(E),y.j&&(E=E.toLowerCase()),E}function ba(y,E){E&&!y.j&&(Fn(y),y.i=null,y.g.forEach(function(A,P){const X=P.toLowerCase();P!=X&&(Vu(this,P),_a(this,X,A))},y)),y.j=E}function Vr(y,E){const A=new _n;if(l.Image){const P=new Image;P.onload=v(gr,A,"TestLoadImage: loaded",!0,E,P),P.onerror=v(gr,A,"TestLoadImage: error",!1,E,P),P.onabort=v(gr,A,"TestLoadImage: abort",!1,E,P),P.ontimeout=v(gr,A,"TestLoadImage: timeout",!1,E,P),l.setTimeout(function(){P.ontimeout&&P.ontimeout()},1e4),P.src=y}else E(!1)}function Zl(y,E){const A=new _n,P=new AbortController,X=setTimeout(()=>{P.abort(),gr(A,"TestPingServer: timeout",!1,E)},1e4);fetch(y,{signal:P.signal}).then(te=>{clearTimeout(X),te.ok?gr(A,"TestPingServer: ok",!0,E):gr(A,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(X),gr(A,"TestPingServer: error",!1,E)})}function gr(y,E,A,P,X){try{X&&(X.onload=null,X.onerror=null,X.onabort=null,X.ontimeout=null),P(A)}catch{}}function Ai(){this.g=new Ds}function as(y){this.i=y.Sb||null,this.h=y.ab||!1}b(as,xi),as.prototype.g=function(){return new wo(this.i,this.h)};function wo(y,E){Rt.call(this),this.H=y,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}b(wo,Rt),n=wo.prototype,n.open=function(y,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=y,this.D=E,this.readyState=1,Ur(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};y&&(E.body=y),(this.H||l).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ni(this)),this.readyState=0},n.Pa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ur(this)),this.g&&(this.readyState=3,Ur(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ta(this)}else y.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ta(y){y.j.read().then(y.Ma.bind(y)).catch(y.ga.bind(y))}n.Ma=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var E=y.value?y.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!y.done}))&&(this.response=this.responseText+=E)}y.done?Ni(this):Ur(this),this.readyState==3&&Ta(this)}},n.Oa=function(y){this.g&&(this.response=this.responseText=y,Ni(this))},n.Na=function(y){this.g&&(this.response=y,Ni(this))},n.ga=function(){this.g&&Ni(this)};function Ni(y){y.readyState=4,y.l=null,y.j=null,y.B=null,Ur(y)}n.setRequestHeader=function(y,E){this.A.append(y,E)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],E=this.h.entries();for(var A=E.next();!A.done;)A=A.value,y.push(A[0]+": "+A[1]),A=E.next();return y.join(`\r
`)};function Ur(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(wo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function yr(y){let E="";return he(y,function(A,P){E+=P,E+=":",E+=A,E+=`\r
`}),E}function So(y,E,A){e:{for(P in A){var P=!1;break e}P=!0}P||(A=yr(A),typeof y=="string"?A!=null&&Zn(A):pt(y,E,A))}function xt(y){Rt.call(this),this.headers=new Map,this.L=y||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}b(xt,Rt);var ls=/^https?$/i,ec=["POST","PUT"];n=xt.prototype,n.Fa=function(y){this.H=y},n.ea=function(y,E,A,P){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);E=E?E.toUpperCase():"GET",this.D=y,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():rs.g(),this.g.onreadystatechange=T(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(y),!0),this.B=!1}catch(te){Ao(this,te);return}if(y=A||"",A=new Map(this.headers),P)if(Object.getPrototypeOf(P)===Object.prototype)for(var X in P)A.set(X,P[X]);else if(typeof P.keys=="function"&&typeof P.get=="function")for(const te of P.keys())A.set(te,P.get(te));else throw Error("Unknown input type for opt_headers: "+String(P));P=Array.from(A.keys()).find(te=>te.toLowerCase()=="content-type"),X=l.FormData&&y instanceof l.FormData,!(Array.prototype.indexOf.call(ec,E,void 0)>=0)||P||X||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of A)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(y),this.v=!1}catch(te){Ao(this,te)}};function Ao(y,E){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=E,y.o=5,tc(y),Os(y)}function tc(y){y.A||(y.A=!0,kt(y,"complete"),kt(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=y||7,kt(this,"complete"),kt(this,"abort"),Os(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Os(this,!0)),xt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?No(this):this.Xa())},n.Xa=function(){No(this)};function No(y){if(y.h&&typeof a<"u"){if(y.v&&Or(y)==4)setTimeout(y.Ca.bind(y),0);else if(kt(y,"readystatechange"),Or(y)==4){y.h=!1;try{const te=y.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var A;if(!(A=E)){var P;if(P=te===0){let me=String(y.D).match(Mu)[1]||null;!me&&l.self&&l.self.location&&(me=l.self.location.protocol.slice(0,-1)),P=!ls.test(me?me.toLowerCase():"")}A=P}if(A)kt(y,"complete"),kt(y,"success");else{y.o=6;try{var X=Or(y)>2?y.g.statusText:""}catch{X=""}y.l=X+" ["+y.ca()+"]",tc(y)}}finally{Os(y)}}}}function Os(y,E){if(y.g){y.m&&(clearTimeout(y.m),y.m=null);const A=y.g;y.g=null,E||kt(y,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Or(y){return y.g?y.g.readyState:0}n.ca=function(){try{return Or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(y){if(this.g){var E=this.g.responseText;return y&&E.indexOf(y)==0&&(E=E.substring(y.length)),vi(E)}};function un(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.F){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function js(y){const E={};y=(y.g&&Or(y)>=2&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let P=0;P<y.length;P++){if(V(y[P]))continue;var A=ya(y[P]);const X=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const te=E[X]||[];E[X]=te,te.push(A)}qe(E,function(P){return P.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function cs(y,E,A){return A&&A.internalChannelParams&&A.internalChannelParams[y]||E}function Ci(y){this.za=0,this.i=[],this.j=new _n,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=cs("failFast",!1,y),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=cs("baseRetryDelayMs",5e3,y),this.Za=cs("retryDelaySeedMs",1e4,y),this.Ta=cs("forwardChannelMaxRetries",2,y),this.va=cs("forwardChannelRequestTimeoutMs",2e4,y),this.ma=y&&y.xmlHttpFactory||void 0,this.Ua=y&&y.Rb||void 0,this.Aa=y&&y.useFetchStreams||!1,this.O=void 0,this.L=y&&y.supportsCrossDomainXhr||!1,this.M="",this.h=new Gl(y&&y.concurrentRequestLimit),this.Ba=new Ai,this.S=y&&y.fastHandshake||!1,this.R=y&&y.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=y&&y.Pb||!1,y&&y.ua&&this.j.ua(),y&&y.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&y&&y.detectBufferingProxy||!1,this.ia=void 0,y&&y.longPollingTimeout&&y.longPollingTimeout>0&&(this.ia=y.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Ci.prototype,n.ka=8,n.I=1,n.connect=function(y,E,A,P){Lt(0),this.W=y,this.H=E||{},A&&P!==void 0&&(this.H.OSID=A,this.H.OAID=P),this.F=this.X,this.J=Gu(this,null,this.W),us(this)};function nc(y){if(Ea(y),y.I==3){var E=y.V++,A=zt(y.J);if(pt(A,"SID",y.M),pt(A,"RID",E),pt(A,"TYPE","terminate"),Co(y,A),E=new er(y,y.j,E),E.M=2,E.A=To(zt(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(E.A.toString(),"")}catch{}!A&&l.Image&&(new Image().src=E.A,A=!0),A||(E.g=zu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),vt(E)}Hu(y)}function Ii(y){y.g&&(sc(y),y.g.cancel(),y.g=null)}function Ea(y){Ii(y),y.v&&(l.clearTimeout(y.v),y.v=null),Sa(y),y.h.cancel(),y.m&&(typeof y.m=="number"&&l.clearTimeout(y.m),y.m=null)}function us(y){if(!zl(y.h)&&!y.m){y.m=!0;var E=y.Ea;J||M(),re||(J(),re=!0),k.add(E,y),y.D=0}}function wa(y,E){return ss(y.h)>=y.h.j-(y.m?1:0)?!1:y.m?(y.i=E.G.concat(y.i),!0):y.I==1||y.I==2||y.D>=(y.Sa?0:y.Ta)?!1:(y.m=Wn(m(y.Ea,y,E),Bu(y,y.D)),y.D++,!0)}n.Ea=function(y){if(this.m)if(this.m=null,this.I==1){if(!y){this.V=Math.floor(Math.random()*1e5),y=this.V++;const X=new er(this,this.j,y);let te=this.o;if(this.U&&(te?(te=z(te),pe(te,this.U)):te=this.U),this.u!==null||this.R||(X.J=te,te=null),this.S)e:{for(var E=0,A=0;A<this.i.length;A++){t:{var P=this.i[A];if("__data__"in P.map&&(P=P.map.__data__,typeof P=="string")){P=P.length;break t}P=void 0}if(P===void 0)break;if(E+=P,E>4096){E=A;break e}if(E===4096||A===this.i.length-1){E=A+1;break e}}E=1e3}else E=1e3;E=Ou(this,X,E),A=zt(this.J),pt(A,"RID",y),pt(A,"CVER",22),this.G&&pt(A,"X-HTTP-Session-Id",this.G),Co(this,A),te&&(this.R?E="headers="+Zn(yr(te))+"&"+E:this.u&&So(A,this.u,te)),$l(this.h,X),this.Ra&&pt(A,"TYPE","init"),this.S?(pt(A,"$req",E),pt(A,"SID","null"),X.U=!0,fe(X,A,null)):fe(X,A,E),this.I=2}}else this.I==3&&(y?rc(this,y):this.i.length==0||zl(this.h)||rc(this))};function rc(y,E){var A;E?A=E.l:A=y.V++;const P=zt(y.J);pt(P,"SID",y.M),pt(P,"RID",A),pt(P,"AID",y.K),Co(y,P),y.u&&y.o&&So(P,y.u,y.o),A=new er(y,y.j,A,y.D+1),y.u===null&&(A.J=y.o),E&&(y.i=E.G.concat(y.i)),E=Ou(y,A,1e3),A.H=Math.round(y.va*.5)+Math.round(y.va*.5*Math.random()),$l(y.h,A),fe(A,P,E)}function Co(y,E){y.H&&he(y.H,function(A,P){pt(E,P,A)}),y.l&&he({},function(A,P){pt(E,P,A)})}function Ou(y,E,A){A=Math.min(y.i.length,A);const P=y.l?m(y.l.Ka,y.l,y):null;e:{var X=y.i;let Be=-1;for(;;){const Ft=["count="+A];Be==-1?A>0?(Be=X[0].g,Ft.push("ofs="+Be)):Be=0:Ft.push("ofs="+Be);let ht=!0;for(let Ct=0;Ct<A;Ct++){var te=X[Ct].g;const vr=X[Ct].map;if(te-=Be,te<0)Be=Math.max(0,X[Ct].g-100),ht=!1;else try{te="req"+te+"_"||"";try{var me=vr instanceof Map?vr:Object.entries(vr);for(const[hs,jr]of me){let Fr=jr;d(jr)&&(Fr=ts(jr)),Ft.push(te+hs+"="+encodeURIComponent(Fr))}}catch(hs){throw Ft.push(te+"type="+encodeURIComponent("_badmap")),hs}}catch{P&&P(vr)}}if(ht){me=Ft.join("&");break e}}me=void 0}return y=y.i.splice(0,A),E.G=y,me}function ju(y){if(!y.g&&!y.v){y.Y=1;var E=y.Da;J||M(),re||(J(),re=!0),k.add(E,y),y.A=0}}function Io(y){return y.g||y.v||y.A>=3?!1:(y.Y++,y.v=Wn(m(y.Da,y),Bu(y,y.A)),y.A++,!0)}n.Da=function(){if(this.v=null,Fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var y=4*this.T;this.j.info("BP detection timer enabled: "+y),this.B=Wn(m(this.Wa,this),y)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Ii(this),Fu(this))};function sc(y){y.B!=null&&(l.clearTimeout(y.B),y.B=null)}function Fu(y){y.g=new er(y,y.j,"rpc",y.Y),y.u===null&&(y.g.J=y.o),y.g.P=0;var E=zt(y.na);pt(E,"RID","rpc"),pt(E,"SID",y.M),pt(E,"AID",y.K),pt(E,"CI",y.F?"0":"1"),!y.F&&y.ia&&pt(E,"TO",y.ia),pt(E,"TYPE","xmlhttp"),Co(y,E),y.u&&y.o&&So(E,y.u,y.o),y.O&&(y.g.H=y.O);var A=y.g;y=y.ba,A.M=1,A.A=To(zt(E)),A.u=null,A.R=!0,ye(A,y)}n.Va=function(){this.C!=null&&(this.C=null,Ii(this),Io(this),Lt(19))};function Sa(y){y.C!=null&&(l.clearTimeout(y.C),y.C=null)}function qu(y,E){var A=null;if(y.g==E){Sa(y),sc(y),y.g=null;var P=2}else if(is(y.h,E))A=E.G,Jl(y.h,E),P=1;else return;if(y.I!=0){if(E.o)if(P==1){A=E.u?E.u.length:0,E=Date.now()-E.F;var X=y.D;P=_i(),kt(P,new pr(P,A)),us(y)}else ju(y);else if(X=E.m,X==3||X==0&&E.X>0||!(P==1&&wa(y,E)||P==2&&Io(y)))switch(A&&A.length>0&&(E=y.h,E.i=E.i.concat(A)),X){case 1:ds(y,5);break;case 4:ds(y,10);break;case 3:ds(y,6);break;default:ds(y,2)}}}function Bu(y,E){let A=y.Qa+Math.floor(Math.random()*y.Za);return y.isActive()||(A*=2),A*E}function ds(y,E){if(y.j.info("Error code "+E),E==2){var A=m(y.bb,y),P=y.Ua;const X=!P;P=new nr(P||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||rn(P,"https"),To(P),X?Vr(P.toString(),A):Zl(P.toString(),A)}else Lt(2);y.I=0,y.l&&y.l.pa(E),Hu(y),Ea(y)}n.bb=function(y){y?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function Hu(y){if(y.I=0,y.ja=[],y.l){const E=Yl(y.h);(E.length!=0||y.i.length!=0)&&(I(y.ja,E),I(y.ja,y.i),y.h.i.length=0,S(y.i),y.i.length=0),y.l.oa()}}function Gu(y,E,A){var P=A instanceof nr?zt(A):new nr(A);if(P.g!="")E&&(P.g=E+"."+P.g),Ti(P,P.u);else{var X=l.location;P=X.protocol,E=E?E+"."+X.hostname:X.hostname,X=+X.port;const te=new nr(null);P&&rn(te,P),E&&(te.g=E),X&&Ti(te,X),A&&(te.h=A),P=te}return A=y.G,E=y.wa,A&&E&&pt(P,A,E),pt(P,"VER",y.ka),Co(y,P),P}function zu(y,E,A){if(E&&!y.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=y.Aa&&!y.ma?new xt(new as({ab:A})):new xt(y.ma),E.Fa(y.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}n=$u.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function Ri(){}Ri.prototype.g=function(y,E){return new In(y,E)};function In(y,E){Rt.call(this),this.g=new Ci(E),this.l=y,this.h=E&&E.messageUrlParams||null,y=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(y?y["X-WebChannel-Content-Type"]=E.messageContentType:y={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(y?y["X-WebChannel-Client-Profile"]=E.sa:y={"X-WebChannel-Client-Profile":E.sa}),this.g.U=y,(y=E&&E.Qb)&&!V(y)&&(this.g.u=y),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!V(E)&&(this.g.G=E,y=this.h,y!==null&&E in y&&(y=this.h,E in y&&delete y[E])),this.j=new Fs(this)}b(In,Rt),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){nc(this.g)},In.prototype.o=function(y){var E=this.g;if(typeof y=="string"){var A={};A.__data__=y,y=A}else this.v&&(A={},A.__data__=ts(y),y=A);E.i.push(new Vt(E.Ya++,y)),E.I==3&&us(E)},In.prototype.N=function(){this.g.l=null,delete this.j,nc(this.g),delete this.g,In.Z.N.call(this)};function Ju(y){ut.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var E=y.__sm__;if(E){e:{for(const A in E){y=A;break e}y=void 0}(this.i=y)&&(y=this.i,E=E!==null&&y in E?E[y]:void 0),this.data=E}else this.data=y}b(Ju,ut);function Yu(){ln.call(this),this.status=1}b(Yu,ln);function Fs(y){this.g=y}b(Fs,$u),Fs.prototype.ra=function(){kt(this.g,"a")},Fs.prototype.qa=function(y){kt(this.g,new Ju(y))},Fs.prototype.pa=function(y){kt(this.g,new Yu)},Fs.prototype.oa=function(){kt(this.g,"b")},Ri.prototype.createWebChannel=Ri.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,BA=function(){return new Ri},qA=function(){return _i()},FA=dt,Og={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ls.NO_ERROR=0,Ls.TIMEOUT=8,Ls.HTTP_ERROR=6,vh=Ls,bi.COMPLETE="complete",jA=bi,bo.EventType=Vn,Vn.OPEN="a",Vn.CLOSE="b",Vn.ERROR="c",Vn.MESSAGE="d",Rt.prototype.listen=Rt.prototype.J,Kc=bo,xt.prototype.listenOnce=xt.prototype.K,xt.prototype.getLastError=xt.prototype.Ha,xt.prototype.getLastErrorCode=xt.prototype.ya,xt.prototype.getStatus=xt.prototype.ca,xt.prototype.getResponseJson=xt.prototype.La,xt.prototype.getResponseText=xt.prototype.la,xt.prototype.send=xt.prototype.ea,xt.prototype.setWithCredentials=xt.prototype.Fa,OA=xt}).apply(typeof ih<"u"?ih:typeof self<"u"?self:typeof window<"u"?window:{});const xE="@firebase/firestore",_E="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sn.UNAUTHENTICATED=new Sn(null),Sn.GOOGLE_CREDENTIALS=new Sn("google-credentials-uid"),Sn.FIRST_PARTY=new Sn("first-party-uid"),Sn.MOCK_USER=new Sn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ll="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new xf("@firebase/firestore");function il(){return ta.logLevel}function Te(n,...e){if(ta.logLevel<=We.DEBUG){const t=e.map(Iy);ta.debug(`Firestore (${Ll}): ${n}`,...t)}}function ui(n,...e){if(ta.logLevel<=We.ERROR){const t=e.map(Iy);ta.error(`Firestore (${Ll}): ${n}`,...t)}}function bl(n,...e){if(ta.logLevel<=We.WARN){const t=e.map(Iy);ta.warn(`Firestore (${Ll}): ${n}`,...t)}}function Iy(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Me(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,HA(n,r,t)}function HA(n,e,t){let r=`FIRESTORE (${Ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ui(r),new Error(r)}function mt(n,e,t,r){let i="Unexpected state";typeof t=="string"?i=t:r=t,n||HA(e,i,r)}function Fe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class be extends Mr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class A5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sn.UNAUTHENTICATED)))}shutdown(){}}class N5{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class C5{constructor(e){this.t=e,this.currentUser=Sn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){mt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,t(f)):Promise.resolve();let a=new lo;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new lo,e.enqueueRetryable((()=>i(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},d=f=>{Te("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(Te("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new lo)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(Te("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(mt(typeof r.accessToken=="string",31837,{l:r}),new GA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return mt(e===null||typeof e=="string",2055,{h:e}),new Sn(e)}}class I5{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=Sn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class R5{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new I5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Sn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class k5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Gr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){mt(this.o===void 0,3512);const r=a=>{a.error!=null&&Te("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,Te("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>r(a)))};const i=a=>{Te("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>i(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?i(a):Te("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(mt(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new bE(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=D5(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%62))}return r}}function Ze(n,e){return n<e?-1:n>e?1:0}function jg(n,e){const t=Math.min(n.length,e.length);for(let r=0;r<t;r++){const i=n.charAt(r),a=e.charAt(r);if(i!==a)return eg(i)===eg(a)?Ze(i,a):eg(i)?1:-1}return Ze(n.length,e.length)}const M5=55296,P5=57343;function eg(n){const e=n.charCodeAt(0);return e>=M5&&e<=P5}function Tl(n,e,t){return n.length===e.length&&n.every(((r,i)=>t(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="__name__";class ys{constructor(e,t,r){t===void 0?t=0:t>e.length&&Me(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Me(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return ys.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ys?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=ys.compareSegments(e.get(i),t.get(i));if(a!==0)return a}return Ze(e.length,t.length)}static compareSegments(e,t){const r=ys.isNumericId(e),i=ys.isNumericId(t);return r&&!i?-1:!r&&i?1:r&&i?ys.extractNumericId(e).compare(ys.extractNumericId(t)):jg(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ao.fromString(e.substring(4,e.length-2))}}class St extends ys{construct(e,t,r){return new St(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new be(le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((i=>i.length>0)))}return new St(t)}static emptyPath(){return new St([])}}const L5=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yn extends ys{construct(e,t,r){return new yn(e,t,r)}static isValidIdentifier(e){return L5.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===TE}static keyField(){return new yn([TE])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(r.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if(d==="\\"){if(i+1===e.length)throw new be(le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new be(le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else d==="`"?(l=!l,i++):d!=="."||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new be(le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yn(t)}static emptyPath(){return new yn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.path=e}static fromPath(e){return new Ce(St.fromString(e))}static fromName(e){return new Ce(St.fromString(e).popFirst(5))}static empty(){return new Ce(St.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&St.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return St.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ce(new St(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zA(n,e,t){if(!t)throw new be(le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V5(n,e,t,r){if(e===!0&&r===!0)throw new be(le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function EE(n){if(!Ce.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function wE(n){if(Ce.isDocumentKey(n))throw new be(le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function $A(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function _f(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Me(12329,{type:typeof n})}function oi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new be(le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=_f(n);throw new be(le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function U5(n,e){if(e<=0)throw new be(le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(n,e){const t={typeString:n};return e&&(t.value=e),t}function wu(n,e){if(!$A(n))throw new be(le.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const i=e[r].typeString,a="value"in e[r]?{value:e[r].value}:void 0;if(!(r in n)){t=`JSON missing required field: '${r}'`;break}const l=n[r];if(i&&typeof l!==i){t=`JSON field '${r}' must be a ${i}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${r}' field to equal '${a.value}'`;break}}if(t)throw new be(le.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE=-62135596800,AE=1e6;class wt{static now(){return wt.fromMillis(Date.now())}static fromDate(e){return wt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*AE);return new wt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new be(le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<SE)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new be(le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/AE}_compareTo(e){return this.seconds===e.seconds?Ze(this.nanoseconds,e.nanoseconds):Ze(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:wt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wu(e,wt._jsonSchema))return new wt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-SE;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}wt._jsonSchemaVersion="firestore/timestamp/1.0",wt._jsonSchema={type:Qt("string",wt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{static fromTimestamp(e){return new Ue(e)}static min(){return new Ue(new wt(0,0))}static max(){return new Ue(new wt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const du=-1;function O5(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ue.fromTimestamp(r===1e9?new wt(t+1,0):new wt(t,r));return new ho(i,Ce.empty(),e)}function j5(n){return new ho(n.readTime,n.key,du)}class ho{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ho(Ue.min(),Ce.empty(),du)}static max(){return new ho(Ue.max(),Ce.empty(),du)}}function F5(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ce.comparator(n.documentKey,e.documentKey),t!==0?t:Ze(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q5="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class B5{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vl(n){if(n.code!==le.FAILED_PRECONDITION||n.message!==q5)throw n;Te("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue(((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):ue.reject(t)}static resolve(e){return new ue(((t,r)=>{t(e)}))}static reject(e){return new ue(((t,r)=>{r(e)}))}static waitFor(e){return new ue(((t,r)=>{let i=0,a=0,l=!1;e.forEach((d=>{++i,d.next((()=>{++a,l&&a===i&&t()}),(f=>r(f)))})),l=!0,a===i&&t()}))}static or(e){let t=ue.resolve(!1);for(const r of e)t=t.next((i=>i?ue.resolve(i):r()));return t}static forEach(e,t){const r=[];return e.forEach(((i,a)=>{r.push(t.call(this,i,a))})),this.waitFor(r)}static mapArray(e,t){return new ue(((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const m=f;t(e[m]).next((v=>{l[m]=v,++d,d===a&&r(l)}),(v=>i(v)))}}))}static doWhile(e,t){return new ue(((r,i)=>{const a=()=>{e()===!0?t().next((()=>{a()}),i):r()};a()}))}}function H5(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ul(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>t.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}bf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=-1;function Tf(n){return n==null}function Uh(n){return n===0&&1/n==-1/0}function G5(n){return typeof n=="number"&&Number.isInteger(n)&&!Uh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="";function z5(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=NE(e)),e=$5(n.get(t),e);return NE(e)}function $5(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="";break;case JA:t+="";break;default:t+=a}}return t}function NE(n){return n+JA+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xo(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function YA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e,t){this.comparator=e,this.root=t||gn.EMPTY}insert(e,t){return new Pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gn.BLACK,null,null))}remove(e){return new Pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new oh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new oh(this.root,e,this.comparator,!1)}getReverseIterator(){return new oh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new oh(this.root,e,this.comparator,!0)}}class oh{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gn{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??gn.RED,this.left=i??gn.EMPTY,this.right=a??gn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new gn(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):a===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return gn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Me(27949);return e+(this.isRed()?0:1)}}gn.EMPTY=null,gn.RED=!0,gn.BLACK=!1;gn.EMPTY=new class{constructor(){this.size=0}get key(){throw Me(57766)}get value(){throw Me(16141)}get color(){throw Me(16727)}get left(){throw Me(29726)}get right(){throw Me(36894)}copy(e,t,r,i,a){return this}insert(e,t,r){return new gn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.comparator=e,this.data=new Pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new IE(this.data.getIterator())}getIteratorFrom(e){return new IE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof tn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(this.comparator(i,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new tn(this.comparator);return t.data=e,t}}class IE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.fields=e,e.sort(yn.comparator)}static empty(){return new dr([])}unionWith(e){let t=new tn(yn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new dr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Tl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(i){try{return atob(i)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new KA("Invalid base64 string: "+a):a}})(e);return new vn(t)}static fromUint8Array(e){const t=(function(i){let a="";for(let l=0;l<i.length;++l)a+=String.fromCharCode(i[l]);return a})(e);return new vn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ze(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vn.EMPTY_BYTE_STRING=new vn("");const J5=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fo(n){if(mt(!!n,39018),typeof n=="string"){let e=0;const t=J5.exec(n);if(mt(!!t,46558,{timestamp:n}),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ht(n.seconds),nanos:Ht(n.nanos)}}function Ht(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mo(n){return typeof n=="string"?vn.fromBase64String(n):vn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="server_timestamp",WA="__type__",QA="__previous_value__",ZA="__local_write_time__";function Dy(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[WA])==null?void 0:r.stringValue)===XA}function Ef(n){const e=n.mapValue.fields[QA];return Dy(e)?Ef(e):e}function hu(n){const e=fo(n.mapValue.fields[ZA].timestampValue);return new wt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e,t,r,i,a,l,d,f,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=m,this.isUsingEmulator=v}}const Oh="(default)";class fu{constructor(e,t){this.projectId=e,this.database=t||Oh}static empty(){return new fu("","")}get isDefaultDatabase(){return this.database===Oh}isEqual(e){return e instanceof fu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="__type__",K5="__max__",ah={mapValue:{}},tN="__vector__",jh="value";function po(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Dy(n)?4:W5(n)?9007199254740991:X5(n)?10:11:Me(28295,{value:n})}function Ss(n,e){if(n===e)return!0;const t=po(n);if(t!==po(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return hu(n).isEqual(hu(e));case 3:return(function(i,a){if(typeof i.timestampValue=="string"&&typeof a.timestampValue=="string"&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const l=fo(i.timestampValue),d=fo(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(i,a){return mo(i.bytesValue).isEqual(mo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(i,a){return Ht(i.geoPointValue.latitude)===Ht(a.geoPointValue.latitude)&&Ht(i.geoPointValue.longitude)===Ht(a.geoPointValue.longitude)})(n,e);case 2:return(function(i,a){if("integerValue"in i&&"integerValue"in a)return Ht(i.integerValue)===Ht(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const l=Ht(i.doubleValue),d=Ht(a.doubleValue);return l===d?Uh(l)===Uh(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return Tl(n.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:case 11:return(function(i,a){const l=i.mapValue.fields||{},d=a.mapValue.fields||{};if(CE(l)!==CE(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!Ss(l[f],d[f])))return!1;return!0})(n,e);default:return Me(52216,{left:n})}}function mu(n,e){return(n.values||[]).find((t=>Ss(t,e)))!==void 0}function El(n,e){if(n===e)return 0;const t=po(n),r=po(e);if(t!==r)return Ze(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ze(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=Ht(a.integerValue||a.doubleValue),f=Ht(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return RE(n.timestampValue,e.timestampValue);case 4:return RE(hu(n),hu(e));case 5:return jg(n.stringValue,e.stringValue);case 6:return(function(a,l){const d=mo(a),f=mo(l);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),f=l.split("/");for(let m=0;m<d.length&&m<f.length;m++){const v=Ze(d[m],f[m]);if(v!==0)return v}return Ze(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=Ze(Ht(a.latitude),Ht(l.latitude));return d!==0?d:Ze(Ht(a.longitude),Ht(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return kE(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var T,S,I,D;const d=a.fields||{},f=l.fields||{},m=(T=d[jh])==null?void 0:T.arrayValue,v=(S=f[jh])==null?void 0:S.arrayValue,b=Ze(((I=m==null?void 0:m.values)==null?void 0:I.length)||0,((D=v==null?void 0:v.values)==null?void 0:D.length)||0);return b!==0?b:kE(m,v)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===ah.mapValue&&l===ah.mapValue)return 0;if(a===ah.mapValue)return 1;if(l===ah.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),m=l.fields||{},v=Object.keys(m);f.sort(),v.sort();for(let b=0;b<f.length&&b<v.length;++b){const T=jg(f[b],v[b]);if(T!==0)return T;const S=El(d[f[b]],m[v[b]]);if(S!==0)return S}return Ze(f.length,v.length)})(n.mapValue,e.mapValue);default:throw Me(23264,{he:t})}}function RE(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ze(n,e);const t=fo(n),r=fo(e),i=Ze(t.seconds,r.seconds);return i!==0?i:Ze(t.nanos,r.nanos)}function kE(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const a=El(t[i],r[i]);if(a)return a}return Ze(t.length,r.length)}function wl(n){return Fg(n)}function Fg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const r=fo(t);return`time(${r.seconds},${r.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return mo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ce.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let r="[",i=!0;for(const a of t.values||[])i?i=!1:r+=",",r+=Fg(a);return r+"]"})(n.arrayValue):"mapValue"in n?(function(t){const r=Object.keys(t.fields||{}).sort();let i="{",a=!0;for(const l of r)a?a=!1:i+=",",i+=`${l}:${Fg(t.fields[l])}`;return i+"}"})(n.mapValue):Me(61005,{value:n})}function xh(n){switch(po(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ef(n);return e?16+xh(e):16;case 5:return 2*n.stringValue.length;case 6:return mo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,a)=>i+xh(a)),0)})(n.arrayValue);case 10:case 11:return(function(r){let i=0;return xo(r.fields,((a,l)=>{i+=a.length+xh(l)})),i})(n.mapValue);default:throw Me(13486,{value:n})}}function DE(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function qg(n){return!!n&&"integerValue"in n}function My(n){return!!n&&"arrayValue"in n}function ME(n){return!!n&&"nullValue"in n}function PE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function _h(n){return!!n&&"mapValue"in n}function X5(n){var t,r;return((r=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[eN])==null?void 0:r.stringValue)===tN}function tu(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return xo(n.mapValue.fields,((t,r)=>e.mapValue.fields[t]=tu(r))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tu(n.arrayValue.values[t]);return e}return{...n}}function W5(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===K5}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!_h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(t)}setAll(e){let t=yn.emptyPath(),r={},i=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=tu(l):i.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());_h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];_h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xo(t,((i,a)=>e[i]=a));for(const i of r)delete e[i]}clone(){return new Jn(tu(this.value))}}function nN(n){const e=[];return xo(n.fields,((t,r)=>{const i=new yn([t]);if(_h(r)){const a=nN(r.mapValue).fields;if(a.length===0)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)})),new dr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,t,r,i,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new An(e,0,Ue.min(),Ue.min(),Ue.min(),Jn.empty(),0)}static newFoundDocument(e,t,r,i){return new An(e,1,t,Ue.min(),r,i,0)}static newNoDocument(e,t){return new An(e,2,t,Ue.min(),Ue.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new An(e,3,t,Ue.min(),Ue.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof An&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new An(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fh{constructor(e,t){this.position=e,this.inclusive=t}}function LE(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(a.field.isKeyField()?r=Ce.comparator(Ce.fromName(l.referenceValue),t.key):r=El(l,t.data.field(a.field)),a.dir==="desc"&&(r*=-1),r!==0)break}return r}function VE(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ss(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Q5(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{}class Wt extends rN{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new e6(e,t,r):t==="array-contains"?new r6(e,r):t==="in"?new s6(e,r):t==="not-in"?new i6(e,r):t==="array-contains-any"?new o6(e,r):new Wt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new t6(e,r):new n6(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(El(t,this.value)):t!==null&&po(this.value)===po(t)&&this.matchesComparison(El(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xr extends rN{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xr(e,t)}matches(e){return sN(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function sN(n){return n.op==="and"}function iN(n){return Z5(n)&&sN(n)}function Z5(n){for(const e of n.filters)if(e instanceof Xr)return!1;return!0}function Bg(n){if(n instanceof Wt)return n.field.canonicalString()+n.op.toString()+wl(n.value);if(iN(n))return n.filters.map((e=>Bg(e))).join(",");{const e=n.filters.map((t=>Bg(t))).join(",");return`${n.op}(${e})`}}function oN(n,e){return n instanceof Wt?(function(r,i){return i instanceof Wt&&r.op===i.op&&r.field.isEqual(i.field)&&Ss(r.value,i.value)})(n,e):n instanceof Xr?(function(r,i){return i instanceof Xr&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((a,l,d)=>a&&oN(l,i.filters[d])),!0):!1})(n,e):void Me(19439)}function aN(n){return n instanceof Wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${wl(t.value)}`})(n):n instanceof Xr?(function(t){return t.op.toString()+" {"+t.getFilters().map(aN).join(" ,")+"}"})(n):"Filter"}class e6 extends Wt{constructor(e,t,r){super(e,t,r),this.key=Ce.fromName(r.referenceValue)}matches(e){const t=Ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class t6 extends Wt{constructor(e,t){super(e,"in",t),this.keys=lN("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class n6 extends Wt{constructor(e,t){super(e,"not-in",t),this.keys=lN("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function lN(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((r=>Ce.fromName(r.referenceValue)))}class r6 extends Wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return My(t)&&mu(t.arrayValue,this.value)}}class s6 extends Wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&mu(this.value.arrayValue,t)}}class i6 extends Wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(mu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!mu(this.value.arrayValue,t)}}class o6 extends Wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!My(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>mu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a6{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.Te=null}}function UE(n,e=null,t=[],r=[],i=null,a=null,l=null){return new a6(n,e,t,r,i,a,l)}function Py(n){const e=Fe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Bg(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(a){return a.field.canonicalString()+a.dir})(r))).join(","),Tf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>wl(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>wl(r))).join(",")),e.Te=t}return e.Te}function Ly(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Q5(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!oN(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!VE(n.startAt,e.startAt)&&VE(n.endAt,e.endAt)}function Hg(n){return Ce.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function l6(n,e,t,r,i,a,l,d){return new Ol(n,e,t,r,i,a,l,d)}function Vy(n){return new Ol(n)}function OE(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function cN(n){return n.collectionGroup!==null}function nu(n){const e=Fe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new tn(yn.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((m=>{m.isInequality()&&(d=d.add(m.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new pu(a,r))})),t.has(yn.keyField().canonicalString())||e.Ie.push(new pu(yn.keyField(),r))}return e.Ie}function vs(n){const e=Fe(n);return e.Ee||(e.Ee=c6(e,nu(n))),e.Ee}function c6(n,e){if(n.limitType==="F")return UE(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((i=>{const a=i.dir==="desc"?"asc":"desc";return new pu(i.field,a)}));const t=n.endAt?new Fh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Fh(n.startAt.position,n.startAt.inclusive):null;return UE(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Gg(n,e){const t=n.filters.concat([e]);return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function qh(n,e,t){return new Ol(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function wf(n,e){return Ly(vs(n),vs(e))&&n.limitType===e.limitType}function uN(n){return`${Py(vs(n))}|lt:${n.limitType}`}function ol(n){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((i=>aN(i))).join(", ")}]`),Tf(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((i=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(i))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((i=>wl(i))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((i=>wl(i))).join(",")),`Target(${r})`})(vs(n))}; limitType=${n.limitType})`}function Sf(n,e){return e.isFoundDocument()&&(function(r,i){const a=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(a):Ce.isDocumentKey(r.path)?r.path.isEqual(a):r.path.isImmediateParentOf(a)})(n,e)&&(function(r,i){for(const a of nu(r))if(!a.field.isKeyField()&&i.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(r,i){for(const a of r.filters)if(!a.matches(i))return!1;return!0})(n,e)&&(function(r,i){return!(r.startAt&&!(function(l,d,f){const m=LE(l,d,f);return l.inclusive?m<=0:m<0})(r.startAt,nu(r),i)||r.endAt&&!(function(l,d,f){const m=LE(l,d,f);return l.inclusive?m>=0:m>0})(r.endAt,nu(r),i))})(n,e)}function u6(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function dN(n){return(e,t)=>{let r=!1;for(const i of nu(n)){const a=d6(i,e,t);if(a!==0)return a;r=r||i.field.isKeyField()}return 0}}function d6(n,e,t){const r=n.field.isKeyField()?Ce.comparator(e.key,t.key):(function(a,l,d){const f=l.data.field(a),m=d.data.field(a);return f!==null&&m!==null?El(f,m):Me(42886)})(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,a]of r)if(this.equalsFn(i,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,((t,r)=>{for(const[i,a]of r)e(i,a)}))}isEmpty(){return YA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6=new Pt(Ce.comparator);function di(){return h6}const hN=new Pt(Ce.comparator);function Xc(...n){let e=hN;for(const t of n)e=e.insert(t.key,t);return e}function fN(n){let e=hN;return n.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Xo(){return ru()}function mN(){return ru()}function ru(){return new ha((n=>n.toString()),((n,e)=>n.isEqual(e)))}const f6=new Pt(Ce.comparator),m6=new tn(Ce.comparator);function et(...n){let e=m6;for(const t of n)e=e.add(t);return e}const p6=new tn(Ze);function g6(){return p6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uh(e)?"-0":e}}function pN(n){return{integerValue:""+n}}function gN(n,e){return G5(e)?pN(e):Uy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(){this._=void 0}}function y6(n,e,t){return n instanceof Bh?(function(i,a){const l={fields:{[WA]:{stringValue:XA},[ZA]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&Dy(a)&&(a=Ef(a)),a&&(l.fields[QA]=a),{mapValue:l}})(t,e):n instanceof Sl?vN(n,e):n instanceof gu?xN(n,e):(function(i,a){const l=yN(i,a),d=jE(l)+jE(i.Ae);return qg(l)&&qg(i.Ae)?pN(d):Uy(i.serializer,d)})(n,e)}function v6(n,e,t){return n instanceof Sl?vN(n,e):n instanceof gu?xN(n,e):t}function yN(n,e){return n instanceof yu?(function(r){return qg(r)||(function(a){return!!a&&"doubleValue"in a})(r)})(e)?e:{integerValue:0}:null}class Bh extends Af{}class Sl extends Af{constructor(e){super(),this.elements=e}}function vN(n,e){const t=_N(e);for(const r of n.elements)t.some((i=>Ss(i,r)))||t.push(r);return{arrayValue:{values:t}}}class gu extends Af{constructor(e){super(),this.elements=e}}function xN(n,e){let t=_N(e);for(const r of n.elements)t=t.filter((i=>!Ss(i,r)));return{arrayValue:{values:t}}}class yu extends Af{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function jE(n){return Ht(n.integerValue||n.doubleValue)}function _N(n){return My(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t){this.field=e,this.transform=t}}function x6(n,e){return n.field.isEqual(e.field)&&(function(r,i){return r instanceof Sl&&i instanceof Sl||r instanceof gu&&i instanceof gu?Tl(r.elements,i.elements,Ss):r instanceof yu&&i instanceof yu?Ss(r.Ae,i.Ae):r instanceof Bh&&i instanceof Bh})(n.transform,e.transform)}class _6{constructor(e,t){this.version=e,this.transformResults=t}}class xs{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xs}static exists(e){return new xs(void 0,e)}static updateTime(e){return new xs(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function bh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Nf{}function TN(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new wN(n.key,xs.none()):new Su(n.key,n.data,xs.none());{const t=n.data,r=Jn.empty();let i=new tn(yn.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?r.delete(a):r.set(a,l),i=i.add(a)}return new _o(n.key,r,new dr(i.toArray()),xs.none())}}function b6(n,e,t){n instanceof Su?(function(i,a,l){const d=i.value.clone(),f=qE(i.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof _o?(function(i,a,l){if(!bh(i.precondition,a))return void a.convertToUnknownDocument(l.version);const d=qE(i.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(EN(i)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(i,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function su(n,e,t,r){return n instanceof Su?(function(a,l,d,f){if(!bh(a.precondition,l))return d;const m=a.value.clone(),v=BE(a.fieldTransforms,f,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null})(n,e,t,r):n instanceof _o?(function(a,l,d,f){if(!bh(a.precondition,l))return d;const m=BE(a.fieldTransforms,f,l),v=l.data;return v.setAll(EN(a)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((b=>b.field)))})(n,e,t,r):(function(a,l,d){return bh(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function T6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=yN(r.transform,i||null);a!=null&&(t===null&&(t=Jn.empty()),t.set(r.field,a))}return t||null}function FE(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Tl(r,i,((a,l)=>x6(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Su extends Nf{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class _o extends Nf{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function EN(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}})),e}function qE(n,e,t){const r=new Map;mt(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,v6(l,d,t[i]))}return r}function BE(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,y6(a,l,e))}return r}class wN extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class E6 extends Nf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&b6(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=su(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=su(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=mN();return this.mutations.forEach((i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const f=TN(l,d);f!==null&&r.set(i.key,f),l.isValidDocument()||l.convertToNoDocument(Ue.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),et())}isEqual(e){return this.batchId===e.batchId&&Tl(this.mutations,e.mutations,((t,r)=>FE(t,r)))&&Tl(this.baseMutations,e.baseMutations,((t,r)=>FE(t,r)))}}class Oy{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return f6})();const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Oy(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xt,rt;function N6(n){switch(n){case le.OK:return Me(64938);case le.CANCELLED:case le.UNKNOWN:case le.DEADLINE_EXCEEDED:case le.RESOURCE_EXHAUSTED:case le.INTERNAL:case le.UNAVAILABLE:case le.UNAUTHENTICATED:return!1;case le.INVALID_ARGUMENT:case le.NOT_FOUND:case le.ALREADY_EXISTS:case le.PERMISSION_DENIED:case le.FAILED_PRECONDITION:case le.ABORTED:case le.OUT_OF_RANGE:case le.UNIMPLEMENTED:case le.DATA_LOSS:return!0;default:return Me(15467,{code:n})}}function SN(n){if(n===void 0)return ui("GRPC error has no .code"),le.UNKNOWN;switch(n){case Xt.OK:return le.OK;case Xt.CANCELLED:return le.CANCELLED;case Xt.UNKNOWN:return le.UNKNOWN;case Xt.DEADLINE_EXCEEDED:return le.DEADLINE_EXCEEDED;case Xt.RESOURCE_EXHAUSTED:return le.RESOURCE_EXHAUSTED;case Xt.INTERNAL:return le.INTERNAL;case Xt.UNAVAILABLE:return le.UNAVAILABLE;case Xt.UNAUTHENTICATED:return le.UNAUTHENTICATED;case Xt.INVALID_ARGUMENT:return le.INVALID_ARGUMENT;case Xt.NOT_FOUND:return le.NOT_FOUND;case Xt.ALREADY_EXISTS:return le.ALREADY_EXISTS;case Xt.PERMISSION_DENIED:return le.PERMISSION_DENIED;case Xt.FAILED_PRECONDITION:return le.FAILED_PRECONDITION;case Xt.ABORTED:return le.ABORTED;case Xt.OUT_OF_RANGE:return le.OUT_OF_RANGE;case Xt.UNIMPLEMENTED:return le.UNIMPLEMENTED;case Xt.DATA_LOSS:return le.DATA_LOSS;default:return Me(39323,{code:n})}}(rt=Xt||(Xt={}))[rt.OK=0]="OK",rt[rt.CANCELLED=1]="CANCELLED",rt[rt.UNKNOWN=2]="UNKNOWN",rt[rt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rt[rt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rt[rt.NOT_FOUND=5]="NOT_FOUND",rt[rt.ALREADY_EXISTS=6]="ALREADY_EXISTS",rt[rt.PERMISSION_DENIED=7]="PERMISSION_DENIED",rt[rt.UNAUTHENTICATED=16]="UNAUTHENTICATED",rt[rt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rt[rt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rt[rt.ABORTED=10]="ABORTED",rt[rt.OUT_OF_RANGE=11]="OUT_OF_RANGE",rt[rt.UNIMPLEMENTED=12]="UNIMPLEMENTED",rt[rt.INTERNAL=13]="INTERNAL",rt[rt.UNAVAILABLE=14]="UNAVAILABLE",rt[rt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C6(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I6=new ao([4294967295,4294967295],0);function HE(n){const e=C6().encode(n),t=new UA;return t.update(e),new Uint8Array(t.digest())}function GE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ao([t,r],0),new ao([i,a],0)]}class jy{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Wc(`Invalid padding: ${t}`);if(r<0)throw new Wc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Wc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ao.fromNumber(this.ge)}ye(e,t,r){let i=e.add(t.multiply(ao.fromNumber(r)));return i.compare(I6)===1&&(i=new ao([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=HE(e),[r,i]=GE(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);if(!this.we(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new jy(a,i,t);return r.forEach((d=>l.insert(d))),l}insert(e){if(this.ge===0)return;const t=HE(e),[r,i]=GE(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(r,i,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Cf(Ue.min(),i,new Pt(Ze),di(),et())}}class Au{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Au(r,t,et(),et(),et())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t,r,i){this.be=e,this.removedTargetIds=t,this.key=r,this.De=i}}class AN{constructor(e,t){this.targetId=e,this.Ce=t}}class NN{constructor(e,t,r=vn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zE{constructor(){this.ve=0,this.Fe=$E(),this.Me=vn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=et(),t=et(),r=et();return this.Fe.forEach(((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Me(38017,{changeType:a})}})),new Au(this.Me,this.xe,e,t,r)}qe(){this.Oe=!1,this.Fe=$E()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,mt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class R6{constructor(e){this.Ge=e,this.ze=new Map,this.je=di(),this.Je=lh(),this.He=lh(),this.Ye=new Pt(Ze)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:Me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((r,i)=>{this.rt(i)&&t(i)}))}st(e){const t=e.targetId,r=e.Ce.count,i=this.ot(t);if(i){const a=i.target;if(Hg(a))if(r===0){const l=new Ce(a.path);this.et(t,l,An.newNoDocument(l,Ue.min()))}else mt(r===1,20013,{expectedCount:r});else{const l=this._t(t);if(l!==r){const d=this.ut(e),f=d?this.ct(d,e,l):1;if(f!==0){this.it(t);const m=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:a=0}=t;let l,d;try{l=mo(r).toUint8Array()}catch(f){if(f instanceof KA)return bl("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new jy(l,i,a)}catch(f){return bl(f instanceof Wc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,r){return t.Ce.count===r-this.Pt(e,t.targetId)?0:2}Pt(e,t){const r=this.Ge.getRemoteKeysForTarget(t);let i=0;return r.forEach((a=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),i++)})),i}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const d=this.ot(l);if(d){if(a.current&&Hg(d.target)){const f=new Ce(d.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,An.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let r=et();this.He.forEach(((a,l)=>{let d=!0;l.forEachWhile((f=>{const m=this.ot(f);return!m||m.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(r=r.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const i=new Cf(e,t,this.Ye,this.je,r);return this.je=di(),this.Je=lh(),this.He=lh(),this.Ye=new Pt(Ze),i}Xe(e,t){if(!this.rt(e))return;const r=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,r),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,t)?i.Qe(t,1):i.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new zE,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new tn(Ze),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new tn(Ze),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||Te("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new zE),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lh(){return new Pt(Ce.comparator)}function $E(){return new Pt(Ce.comparator)}const k6={asc:"ASCENDING",desc:"DESCENDING"},D6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},M6={and:"AND",or:"OR"};class P6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zg(n,e){return n.useProto3Json||Tf(e)?e:{value:e}}function Hh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function CN(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function L6(n,e){return Hh(n,e.toTimestamp())}function _s(n){return mt(!!n,49232),Ue.fromTimestamp((function(t){const r=fo(t);return new wt(r.seconds,r.nanos)})(n))}function Fy(n,e){return $g(n,e).canonicalString()}function $g(n,e){const t=(function(i){return new St(["projects",i.projectId,"databases",i.database])})(n).child("documents");return e===void 0?t:t.child(e)}function IN(n){const e=St.fromString(n);return mt(PN(e),10190,{key:e.toString()}),e}function Jg(n,e){return Fy(n.databaseId,e.path)}function tg(n,e){const t=IN(e);if(t.get(1)!==n.databaseId.projectId)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new be(le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ce(kN(t))}function RN(n,e){return Fy(n.databaseId,e)}function V6(n){const e=IN(n);return e.length===4?St.emptyPath():kN(e)}function Yg(n){return new St(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kN(n){return mt(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function JE(n,e,t){return{name:Jg(n,e),fields:t.value.mapValue.fields}}function U6(n,e){let t;if("targetChange"in e){e.targetChange;const r=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Me(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],a=(function(m,v){return m.useProto3Json?(mt(v===void 0||typeof v=="string",58123),vn.fromBase64String(v||"")):(mt(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),vn.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(m){const v=m.code===void 0?le.UNKNOWN:SN(m.code);return new be(v,m.message||"")})(l);t=new NN(r,i,a,d||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=tg(n,r.document.name),a=_s(r.document.updateTime),l=r.document.createTime?_s(r.document.createTime):Ue.min(),d=new Jn({mapValue:{fields:r.document.fields}}),f=An.newFoundDocument(i,a,l,d),m=r.targetIds||[],v=r.removedTargetIds||[];t=new Th(m,v,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=tg(n,r.document),a=r.readTime?_s(r.readTime):Ue.min(),l=An.newNoDocument(i,a),d=r.removedTargetIds||[];t=new Th([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=tg(n,r.document),a=r.removedTargetIds||[];t=new Th([],a,i,null)}else{if(!("filter"in e))return Me(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:a}=r,l=new A6(i,a),d=r.targetId;t=new AN(d,l)}}return t}function O6(n,e){let t;if(e instanceof Su)t={update:JE(n,e.key,e.value)};else if(e instanceof wN)t={delete:Jg(n,e.key)};else if(e instanceof _o)t={update:JE(n,e.key,e.data),updateMask:J6(e.fieldMask)};else{if(!(e instanceof E6))return Me(16599,{Vt:e.type});t={verify:Jg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(a,l){const d=l.transform;if(d instanceof Bh)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Sl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof gu)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof yu)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw Me(20930,{transform:l.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(i,a){return a.updateTime!==void 0?{updateTime:L6(i,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Me(27497)})(n,e.precondition)),t}function j6(n,e){return n&&n.length>0?(mt(e!==void 0,14353),n.map((t=>(function(i,a){let l=i.updateTime?_s(i.updateTime):_s(a);return l.isEqual(Ue.min())&&(l=_s(a)),new _6(l,i.transformResults||[])})(t,e)))):[]}function F6(n,e){return{documents:[RN(n,e.path)]}}function q6(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=RN(n,i);const a=(function(m){if(m.length!==0)return MN(Xr.create(m,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(m){if(m.length!==0)return m.map((v=>(function(T){return{field:al(T.field),direction:G6(T.dir)}})(v)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=zg(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:i}}function B6(n){let e=V6(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){mt(r===1,65062);const v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let a=[];t.where&&(a=(function(b){const T=DN(b);return T instanceof Xr&&iN(T)?T.getFilters():[T]})(t.where));let l=[];t.orderBy&&(l=(function(b){return b.map((T=>(function(I){return new pu(ll(I.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(I.direction))})(T)))})(t.orderBy));let d=null;t.limit&&(d=(function(b){let T;return T=typeof b=="object"?b.value:b,Tf(T)?null:T})(t.limit));let f=null;t.startAt&&(f=(function(b){const T=!!b.before,S=b.values||[];return new Fh(S,T)})(t.startAt));let m=null;return t.endAt&&(m=(function(b){const T=!b.before,S=b.values||[];return new Fh(S,T)})(t.endAt)),l6(e,i,l,a,d,"F",f,m)}function H6(n,e){const t=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Me(28987,{purpose:i})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function DN(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=ll(t.unaryFilter.field);return Wt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ll(t.unaryFilter.field);return Wt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ll(t.unaryFilter.field);return Wt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ll(t.unaryFilter.field);return Wt.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Me(61313);default:return Me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Wt.create(ll(t.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Me(58110);default:return Me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Xr.create(t.compositeFilter.filters.map((r=>DN(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Me(1026)}})(t.compositeFilter.op))})(n):Me(30097,{filter:n})}function G6(n){return k6[n]}function z6(n){return D6[n]}function $6(n){return M6[n]}function al(n){return{fieldPath:n.canonicalString()}}function ll(n){return yn.fromServerFormat(n.fieldPath)}function MN(n){return n instanceof Wt?(function(t){if(t.op==="=="){if(PE(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NAN"}};if(ME(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PE(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NAN"}};if(ME(t.value))return{unaryFilter:{field:al(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:al(t.field),op:z6(t.op),value:t.value}}})(n):n instanceof Xr?(function(t){const r=t.getFilters().map((i=>MN(i)));return r.length===1?r[0]:{compositeFilter:{op:$6(t.op),filters:r}}})(n):Me(54877,{filter:n})}function J6(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function PN(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,t,r,i,a=Ue.min(),l=Ue.min(),d=vn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new so(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new so(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(e){this.yt=e}}function K6(n){const e=B6({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?qh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.Cn=new W6}addToCollectionParentIndex(e,t){return this.Cn.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}deleteAllFieldIndexes(e){return ue.resolve()}createTargetIndexes(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(ho.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(ho.min())}updateCollectionGroup(e,t,r){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class W6{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new tn(St.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new tn(St.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},LN=41943040;class $n{static withCacheSize(e){return new $n(e,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(LN,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Al{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Al(0)}static cr(){return new Al(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE="LruGarbageCollector",Q6=1048576;function XE([n,e],[t,r]){const i=Ze(n,t);return i===0?Ze(e,r):i}class Z6{constructor(e){this.Ir=e,this.buffer=new tn(XE),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();XE(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class e9{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Te(KE,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Ul(t)?Te(KE,"Ignoring IndexedDB error during garbage collection: ",t):await Vl(t)}await this.Vr(3e5)}))}}class t9{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return ue.resolve(bf.ce);const r=new Z6(t);return this.mr.forEachTarget(e,(i=>r.Ar(i.sequenceNumber))).next((()=>this.mr.pr(e,(i=>r.Ar(i))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.mr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Te("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(YE)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Te("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YE):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let r,i,a,l,d,f,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((b=>(b>this.params.maximumSequenceNumbersToCollect?(Te("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${b}`),i=this.params.maximumSequenceNumbersToCollect):i=b,l=Date.now(),this.nthSequenceNumber(e,i)))).next((b=>(r=b,d=Date.now(),this.removeTargets(e,r,t)))).next((b=>(a=b,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((b=>(m=Date.now(),il()<=We.DEBUG&&Te("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-v}ms
	Determined least recently used ${i} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${b} documents in `+(m-f)+`ms
Total Duration: ${m-v}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:b}))))}}function n9(n,e){return new t9(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r9{constructor(){this.changes=new ha((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,An.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ue.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s9{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i9{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,t)))).next((i=>(r!==null&&su(r.mutation,i,dr.empty(),wt.now()),i)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,et()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=et()){const i=Xo();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,r).next((a=>{let l=Xc();return a.forEach(((d,f)=>{l=l.insert(d,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const r=Xo();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,et())))}populateOverlays(e,t,r){const i=[];return r.forEach((a=>{t.has(a)||i.push(a)})),this.documentOverlayCache.getOverlays(e,i).next((a=>{a.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,r,i){let a=di();const l=ru(),d=(function(){return ru()})();return t.forEach(((f,m)=>{const v=r.get(m.key);i.has(m.key)&&(v===void 0||v.mutation instanceof _o)?a=a.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),su(v.mutation,m,v.mutation.getFieldMask(),wt.now())):l.set(m.key,dr.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((m,v)=>l.set(m,v))),t.forEach(((m,v)=>d.set(m,new s9(v,l.get(m)??null)))),d)))}recalculateAndSaveOverlays(e,t){const r=ru();let i=new Pt(((l,d)=>l-d)),a=et();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((f=>{const m=t.get(f);if(m===null)return;let v=r.get(f)||dr.empty();v=d.applyToLocalView(m,v),r.set(f,v);const b=(i.get(d.batchId)||et()).add(f);i=i.insert(d.batchId,b)}))})).next((()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),m=f.key,v=f.value,b=mN();v.forEach((T=>{if(!a.has(T)){const S=TN(t.get(T),r.get(T));S!==null&&b.set(T,S),a=a.add(T)}})),l.push(this.documentOverlayCache.saveOverlays(e,m,b))}return ue.waitFor(l)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,i){return(function(l){return Ce.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):cN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next((a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):ue.resolve(Xo());let d=du,f=a;return l.next((m=>ue.forEach(m,((v,b)=>(d<b.largestBatchId&&(d=b.largestBatchId),a.get(v)?ue.resolve():this.remoteDocumentCache.getEntry(e,v).next((T=>{f=f.insert(v,T)}))))).next((()=>this.populateOverlays(e,m,a))).next((()=>this.computeViews(e,f,m,et()))).next((v=>({batchId:d,changes:fN(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ce(t)).next((r=>{let i=Xc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const a=t.collectionGroup;let l=Xc();return this.indexManager.getCollectionParents(e,a).next((d=>ue.forEach(d,(f=>{const m=(function(b,T){return new Ol(T,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,m,r,i).next((v=>{v.forEach(((b,T)=>{l=l.insert(b,T)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,r,i){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,a,i)))).next((l=>{a.forEach(((f,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,An.newInvalidDocument(v)))}));let d=Xc();return l.forEach(((f,m)=>{const v=a.get(f);v!==void 0&&su(v.mutation,m,dr.empty(),wt.now()),Sf(t,m)&&(d=d.insert(f,m))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o9{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ue.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(i){return{id:i.id,version:i.version,createTime:_s(i.createTime)}})(t)),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(i){return{name:i.name,query:K6(i.bundledQuery),readTime:_s(i.readTime)}})(t)),ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a9{constructor(){this.overlays=new Pt(Ce.comparator),this.qr=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Xo();return ue.forEach(t,(i=>this.getOverlay(e,i).next((a=>{a!==null&&r.set(i,a)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((i,a)=>{this.St(e,t,a)})),ue.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(r)),ue.resolve()}getOverlaysForCollection(e,t,r){const i=Xo(),a=t.length+1,l=new Ce(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,m=f.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===a&&f.largestBatchId>r&&i.set(f.getKey(),f)}return ue.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Pt(((m,v)=>m-v));const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>r){let v=a.get(m.largestBatchId);v===null&&(v=Xo(),a=a.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const d=Xo(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((m,v)=>d.set(m,v))),!(d.size()>=i)););return ue.resolve(d)}St(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const l=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new S6(t,r));let a=this.qr.get(t);a===void 0&&(a=et(),this.qr.set(t,a)),this.qr.set(t,a.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l9{constructor(){this.sessionToken=vn.EMPTY_BYTE_STRING}getSessionToken(e){return ue.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(){this.Qr=new tn(on.$r),this.Ur=new tn(on.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const r=new on(e,t);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Gr(new on(e,t))}zr(e,t){e.forEach((r=>this.removeReference(r,t)))}jr(e){const t=new Ce(new St([])),r=new on(t,e),i=new on(t,e+1),a=[];return this.Ur.forEachInRange([r,i],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ce(new St([])),r=new on(t,e),i=new on(t,e+1);let a=et();return this.Ur.forEachInRange([r,i],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new on(e,0),r=this.Qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class on{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ce.comparator(e.key,t.key)||Ze(e.Yr,t.Yr)}static Kr(e,t){return Ze(e.Yr,t.Yr)||Ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c9{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new tn(on.$r)}checkEmpty(e){return ue.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new w6(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.Zr=this.Zr.add(new on(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(l)}lookupMutationBatch(e,t){return ue.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.ei(r),a=i<0?0:i;return ue.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(this.mutationQueue.length===0?ky:this.tr-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new on(t,0),i=new on(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([r,i],(l=>{const d=this.Xr(l.Yr);a.push(d)})),ue.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new tn(Ze);return t.forEach((i=>{const a=new on(i,0),l=new on(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(d=>{r=r.add(d.Yr)}))})),ue.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ce.isDocumentKey(a)||(a=a.child(""));const l=new on(new Ce(a),0);let d=new tn(Ze);return this.Zr.forEachWhile((f=>{const m=f.key.path;return!!r.isPrefixOf(m)&&(m.length===i&&(d=d.add(f.Yr)),!0)}),l),ue.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((r=>{const i=this.Xr(r);i!==null&&t.push(i)})),t}removeMutationBatch(e,t){mt(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ue.forEach(t.mutations,(i=>{const a=new on(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,t){const r=new on(t,0),i=this.Zr.firstAfterOrEqual(r);return ue.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,ue.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u9{constructor(e){this.ri=e,this.docs=(function(){return new Pt(Ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.ri(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ue.resolve(r?r.document.mutableCopy():An.newInvalidDocument(t))}getEntries(e,t){let r=di();return t.forEach((i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():An.newInvalidDocument(i))})),ue.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=di();const l=t.path,d=new Ce(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:m,value:{document:v}}=f.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||F5(j5(v),r)<=0||(i.has(v.key)||Sf(t,v))&&(a=a.insert(v.key,v.mutableCopy()))}return ue.resolve(a)}getAllFromCollectionGroup(e,t,r,i){Me(9500)}ii(e,t){return ue.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new d9(this)}getSize(e){return ue.resolve(this.size)}}class d9 extends r9{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?t.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)})),ue.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h9{constructor(e){this.persistence=e,this.si=new ha((t=>Py(t)),Ly),this.lastRemoteSnapshotVersion=Ue.min(),this.highestTargetId=0,this.oi=0,this._i=new qy,this.targetCount=0,this.ai=Al.ur()}forEachTarget(e,t){return this.si.forEach(((r,i)=>t(i))),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.oi&&(this.oi=t),ue.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Al(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Pr(t),ue.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.si.forEach(((l,d)=>{d.sequenceNumber<=t&&r.get(d.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)})),ue.waitFor(a).next((()=>i))}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const r=this.si.get(t)||null;return ue.resolve(r)}addMatchingKeys(e,t,r){return this._i.Wr(t,r),ue.resolve()}removeMatchingKeys(e,t,r){this._i.zr(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach((l=>{a.push(i.markPotentiallyOrphaned(e,l))})),ue.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const r=this._i.Hr(t);return ue.resolve(r)}containsKey(e,t){return ue.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VN{constructor(e,t){this.ui={},this.overlays={},this.ci=new bf(0),this.li=!1,this.li=!0,this.hi=new l9,this.referenceDelegate=e(this),this.Pi=new h9(this),this.indexManager=new X6,this.remoteDocumentCache=(function(i){return new u9(i)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new Y6(t),this.Ii=new o9(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new a9,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ui[e.toKey()];return r||(r=new c9(t,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,r){Te("MemoryPersistence","Starting transaction:",e);const i=new f9(this.ci.next());return this.referenceDelegate.Ei(),r(i).next((a=>this.referenceDelegate.di(i).next((()=>a)))).toPromise().then((a=>(i.raiseOnCommittedEvent(),a)))}Ai(e,t){return ue.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,t))))}}class f9 extends B5{constructor(e){super(),this.currentSequenceNumber=e}}class By{constructor(e){this.persistence=e,this.Ri=new qy,this.Vi=null}static mi(e){return new By(e)}get fi(){if(this.Vi)return this.Vi;throw Me(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.fi.delete(r.toString()),ue.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.fi.add(r.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((i=>this.fi.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((i=>{i.forEach((a=>this.fi.add(a.toString())))})).next((()=>r.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.fi,(r=>{const i=Ce.fromPath(r);return this.gi(e,i).next((a=>{a||t.removeEntry(i,Ue.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((r=>{r?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return ue.or([()=>ue.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gh{constructor(e,t){this.persistence=e,this.pi=new ha((r=>z5(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=n9(this,t)}static mi(e,t){return new Gh(e,t)}Ei(){}di(e){return ue.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((i=>r+i))))}wr(e){let t=0;return this.pr(e,(r=>{t++})).next((()=>t))}pr(e,t){return ue.forEach(this.pi,((r,i)=>this.br(e,r,i).next((a=>a?ue.resolve():t(i)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const i=this.persistence.getRemoteDocumentCache(),a=i.newChangeBuffer();return i.ii(e,(l=>this.br(e,l,t).next((d=>{d||(r++,a.removeEntry(l,Ue.min()))})))).next((()=>a.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}removeReference(e,t,r){return this.pi.set(r,e.currentSequenceNumber),ue.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ue.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xh(e.data.value)),t}br(e,t,r){return ue.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const i=this.pi.get(t);return ue.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hy{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Es=r,this.ds=i}static As(e,t){let r=et(),i=et();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Hy(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m9{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p9{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return oO()?8:H5(Cn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,i){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,i,r).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new m9;return this.Ss(e,t,l).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,l,d.size)}))})).next((()=>a.result))}bs(e,t,r,i){return r.documentReadCount<this.fs?(il()<=We.DEBUG&&Te("QueryEngine","SDK will not create cache indexes for query:",ol(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ue.resolve()):(il()<=We.DEBUG&&Te("QueryEngine","Query:",ol(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(il()<=We.DEBUG&&Te("QueryEngine","The SDK decides to create cache indexes for query:",ol(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,vs(t))):ue.resolve())}ys(e,t){if(OE(t))return ue.resolve(null);let r=vs(t);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(t.limit!==null&&i===1&&(t=qh(t,null,"F"),r=vs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((a=>{const l=et(...a);return this.ps.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,r).next((f=>{const m=this.Ds(t,d);return this.Cs(t,m,l,f.readTime)?this.ys(e,qh(t,null,"F")):this.vs(e,m,t,f)}))))})))))}ws(e,t,r,i){return OE(t)||i.isEqual(Ue.min())?ue.resolve(null):this.ps.getDocuments(e,r).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,r,i)?ue.resolve(null):(il()<=We.DEBUG&&Te("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ol(t)),this.vs(e,l,t,O5(i,du)).next((d=>d)))}))}Ds(e,t){let r=new tn(dN(e));return t.forEach(((i,a)=>{Sf(e,a)&&(r=r.add(a))})),r}Cs(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ss(e,t,r){return il()<=We.DEBUG&&Te("QueryEngine","Using full collection scan to execute query:",ol(t)),this.ps.getDocumentsMatchingQuery(e,t,ho.min(),r)}vs(e,t,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy="LocalStore",g9=3e8;class y9{constructor(e,t,r,i){this.persistence=e,this.Fs=t,this.serializer=i,this.Ms=new Pt(Ze),this.xs=new ha((a=>Py(a)),Ly),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new i9(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function v9(n,e,t,r){return new y9(n,e,t,r)}async function UN(n,e){const t=Fe(n);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next((a=>(i=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(r)))).next((a=>{const l=[],d=[];let f=et();for(const m of i){l.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}for(const m of a){d.push(m.batchId);for(const v of m.mutations)f=f.add(v.key)}return t.localDocuments.getDocuments(r,f).next((m=>({Ls:m,removedBatchIds:l,addedBatchIds:d})))}))}))}function x9(n,e){const t=Fe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,m,v){const b=m.batch,T=b.keys();let S=ue.resolve();return T.forEach((I=>{S=S.next((()=>v.getEntry(f,I))).next((D=>{const N=m.docVersions.get(I);mt(N!==null,48541),D.version.compareTo(N)<0&&(b.applyToRemoteDocument(D,m),D.isValidDocument()&&(D.setReadTime(m.commitVersion),v.addEntry(D)))}))})),S.next((()=>d.mutationQueue.removeMutationBatch(f,b)))})(t,r,e,a).next((()=>a.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(d){let f=et();for(let m=0;m<d.mutationResults.length;++m)d.mutationResults[m].transformResults.length>0&&(f=f.add(d.batch.mutations[m].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(r,i)))}))}function ON(n){const e=Fe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function _9(n,e){const t=Fe(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});i=t.Ms;const d=[];e.targetChanges.forEach(((v,b)=>{const T=i.get(b);if(!T)return;d.push(t.Pi.removeMatchingKeys(a,v.removedDocuments,b).next((()=>t.Pi.addMatchingKeys(a,v.addedDocuments,b))));let S=T.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(b)!==null?S=S.withResumeToken(vn.EMPTY_BYTE_STRING,Ue.min()).withLastLimboFreeSnapshotVersion(Ue.min()):v.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(v.resumeToken,r)),i=i.insert(b,S),(function(D,N,U){return D.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=g9?!0:U.addedDocuments.size+U.modifiedDocuments.size+U.removedDocuments.size>0})(T,S,v)&&d.push(t.Pi.updateTargetData(a,S))}));let f=di(),m=et();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,v))})),d.push(b9(a,l,e.documentUpdates).next((v=>{f=v.ks,m=v.qs}))),!r.isEqual(Ue.min())){const v=t.Pi.getLastRemoteSnapshotVersion(a).next((b=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,r)));d.push(v)}return ue.waitFor(d).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,m))).next((()=>f))})).then((a=>(t.Ms=i,a)))}function b9(n,e,t){let r=et(),i=et();return t.forEach((a=>r=r.add(a))),e.getEntries(n,r).next((a=>{let l=di();return t.forEach(((d,f)=>{const m=a.get(d);f.isFoundDocument()!==m.isFoundDocument()&&(i=i.add(d)),f.isNoDocument()&&f.version.isEqual(Ue.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!m.isValidDocument()||f.version.compareTo(m.version)>0||f.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):Te(Gy,"Ignoring outdated watch update for ",d,". Current version:",m.version," Watch version:",f.version)})),{ks:l,qs:i}}))}function T9(n,e){const t=Fe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ky),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function E9(n,e){const t=Fe(n);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return t.Pi.getTargetData(r,e).next((a=>a?(i=a,ue.resolve(i)):t.Pi.allocateTargetId(r).next((l=>(i=new so(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Pi.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=t.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.xs.set(e,r.targetId)),r}))}async function Kg(n,e,t){const r=Fe(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",a,(l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Ul(l))throw l;Te(Gy,`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function WE(n,e,t){const r=Fe(n);let i=Ue.min(),a=et();return r.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,m,v){const b=Fe(f),T=b.xs.get(v);return T!==void 0?ue.resolve(b.Ms.get(T)):b.Pi.getTargetData(m,v)})(r,l,vs(e)).next((d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(l,d.targetId).next((f=>{a=f}))})).next((()=>r.Fs.getDocumentsMatchingQuery(l,e,t?i:Ue.min(),t?a:et()))).next((d=>(w9(r,u6(e),d),{documents:d,Qs:a})))))}function w9(n,e,t){let r=n.Os.get(e)||Ue.min();t.forEach(((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)})),n.Os.set(e,r)}class QE{constructor(){this.activeTargetIds=g6()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class S9{constructor(){this.Mo=new QE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,r){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new QE,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A9{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="ConnectivityMonitor";class ew{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Te(ZE,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Te(ZE,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ch=null;function Xg(){return ch===null?ch=(function(){return 268435456+Math.round(2147483648*Math.random())})():ch++,"0x"+ch.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ng="RestConnection",N9={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class C9{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Oh?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,t,r,i,a){const l=Xg(),d=this.zo(e,t.toUriEncodedString());Te(ng,`Sending RPC '${e}' ${l}:`,d,r);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,i,a);const{host:m}=new URL(d),v=ca(m);return this.Jo(e,d,f,r,v).then((b=>(Te(ng,`Received RPC '${e}' ${l}: `,b),b)),(b=>{throw bl(ng,`RPC '${e}' ${l} failed with error: `,b,"url: ",d,"request:",r),b}))}Ho(e,t,r,i,a,l){return this.Go(e,t,r,i,a)}jo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Ll})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((i,a)=>e[a]=i)),r&&r.headers.forEach(((i,a)=>e[a]=i))}zo(e,t){const r=N9[e];return`${this.Uo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I9{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class R9 extends C9{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,r,i,a){const l=Xg();return new Promise(((d,f)=>{const m=new OA;m.setWithCredentials(!0),m.listenOnce(jA.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case vh.NO_ERROR:const b=m.getResponseJson();Te(En,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(b)),d(b);break;case vh.TIMEOUT:Te(En,`RPC '${e}' ${l} timed out`),f(new be(le.DEADLINE_EXCEEDED,"Request time out"));break;case vh.HTTP_ERROR:const T=m.getStatus();if(Te(En,`RPC '${e}' ${l} failed with status:`,T,"response text:",m.getResponseText()),T>0){let S=m.getResponseJson();Array.isArray(S)&&(S=S[0]);const I=S==null?void 0:S.error;if(I&&I.status&&I.message){const D=(function(U){const B=U.toLowerCase().replace(/_/g,"-");return Object.values(le).indexOf(B)>=0?B:le.UNKNOWN})(I.status);f(new be(D,I.message))}else f(new be(le.UNKNOWN,"Server responded with status "+m.getStatus()))}else f(new be(le.UNAVAILABLE,"Connection failed."));break;default:Me(9055,{l_:e,streamId:l,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{Te(En,`RPC '${e}' ${l} completed.`)}}));const v=JSON.stringify(i);Te(En,`RPC '${e}' ${l} sending request:`,i),m.send(t,"POST",v,r,15)}))}T_(e,t,r){const i=Xg(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=BA(),d=qA(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(f.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,r),f.encodeInitMessageHeaders=!0;const v=a.join("");Te(En,`Creating RPC '${e}' stream ${i}: ${v}`,f);const b=l.createWebChannel(v,f);this.I_(b);let T=!1,S=!1;const I=new I9({Yo:N=>{S?Te(En,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(T||(Te(En,`Opening RPC '${e}' stream ${i} transport.`),b.open(),T=!0),Te(En,`RPC '${e}' stream ${i} sending:`,N),b.send(N))},Zo:()=>b.close()}),D=(N,U,B)=>{N.listen(U,(F=>{try{B(F)}catch(Q){setTimeout((()=>{throw Q}),0)}}))};return D(b,Kc.EventType.OPEN,(()=>{S||(Te(En,`RPC '${e}' stream ${i} transport opened.`),I.o_())})),D(b,Kc.EventType.CLOSE,(()=>{S||(S=!0,Te(En,`RPC '${e}' stream ${i} transport closed`),I.a_(),this.E_(b))})),D(b,Kc.EventType.ERROR,(N=>{S||(S=!0,bl(En,`RPC '${e}' stream ${i} transport errored. Name:`,N.name,"Message:",N.message),I.a_(new be(le.UNAVAILABLE,"The operation could not be completed")))})),D(b,Kc.EventType.MESSAGE,(N=>{var U;if(!S){const B=N.data[0];mt(!!B,16349);const F=B,Q=(F==null?void 0:F.error)||((U=F[0])==null?void 0:U.error);if(Q){Te(En,`RPC '${e}' stream ${i} received error:`,Q);const J=Q.status;let re=(function(R){const L=Xt[R];if(L!==void 0)return SN(L)})(J),k=Q.message;re===void 0&&(re=le.INTERNAL,k="Unknown error status: "+J+" with message "+Q.message),S=!0,I.a_(new be(re,k)),b.close()}else Te(En,`RPC '${e}' stream ${i} received:`,B),I.u_(B)}})),D(d,FA.STAT_EVENT,(N=>{N.stat===Og.PROXY?Te(En,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Og.NOPROXY&&Te(En,`RPC '${e}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{I.__()}),0),I}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function rg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(n){return new P6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jN{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=r,this.A_=i,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,t-r);i>0&&Te("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tw="PersistentStream";class FN{constructor(e,t,r,i,a,l,d,f){this.Mi=e,this.S_=r,this.b_=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jN(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===le.RESOURCE_EXHAUSTED?(ui(t.toString()),ui("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===t&&this.G_(r,i)}),(r=>{e((()=>{const i=new be(le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,t){const r=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.J_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Te(tw,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(Te(tw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class k9 extends FN{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=U6(this.serializer,e),r=(function(a){if(!("targetChange"in a))return Ue.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Ue.min():l.readTime?_s(l.readTime):Ue.min()})(e);return this.listener.H_(t,r)}Y_(e){const t={};t.database=Yg(this.serializer),t.addTarget=(function(a,l){let d;const f=l.target;if(d=Hg(f)?{documents:F6(a,f)}:{query:q6(a,f).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=CN(a,l.resumeToken);const m=zg(a,l.expectedCount);m!==null&&(d.expectedCount=m)}else if(l.snapshotVersion.compareTo(Ue.min())>0){d.readTime=Hh(a,l.snapshotVersion.toTimestamp());const m=zg(a,l.expectedCount);m!==null&&(d.expectedCount=m)}return d})(this.serializer,e);const r=H6(this.serializer,e);r&&(t.labels=r),this.q_(t)}Z_(e){const t={};t.database=Yg(this.serializer),t.removeTarget=e,this.q_(t)}}class D9 extends FN{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=j6(e.writeResults,e.commitTime),r=_s(e.commitTime);return this.listener.na(r,t)}ra(){const e={};e.database=Yg(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>O6(this.serializer,r)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{}class P9 extends M9{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,$g(t,r),i,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new be(le.UNKNOWN,a.toString())}))}Ho(e,t,r,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Ho(e,$g(t,r),i,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new be(le.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class L9{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(ui(t),this.aa=!1):Te("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="RemoteStore";class V9{constructor(e,t,r,i,a){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{r.enqueueAndForget((async()=>{fa(this)&&(Te(na,"Restarting streams for network reachability change."),await(async function(f){const m=Fe(f);m.Ea.add(4),await Nu(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Rf(m)})(this))}))})),this.Ra=new L9(r,i)}}async function Rf(n){if(fa(n))for(const e of n.da)await e(!0)}async function Nu(n){for(const e of n.da)await e(!1)}function qN(n,e){const t=Fe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Yy(t)?Jy(t):jl(t).O_()&&$y(t,e))}function zy(n,e){const t=Fe(n),r=jl(t);t.Ia.delete(e),r.O_()&&BN(t,e),t.Ia.size===0&&(r.O_()?r.L_():fa(t)&&t.Ra.set("Unknown"))}function $y(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ue.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}jl(n).Y_(e)}function BN(n,e){n.Va.Ue(e),jl(n).Z_(e)}function Jy(n){n.Va=new R6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),jl(n).start(),n.Ra.ua()}function Yy(n){return fa(n)&&!jl(n).x_()&&n.Ia.size>0}function fa(n){return Fe(n).Ea.size===0}function HN(n){n.Va=void 0}async function U9(n){n.Ra.set("Online")}async function O9(n){n.Ia.forEach(((e,t)=>{$y(n,e)}))}async function j9(n,e){HN(n),Yy(n)?(n.Ra.ha(e),Jy(n)):n.Ra.set("Unknown")}async function F9(n,e,t){if(n.Ra.set("Online"),e instanceof NN&&e.state===2&&e.cause)try{await(async function(i,a){const l=a.cause;for(const d of a.targetIds)i.Ia.has(d)&&(await i.remoteSyncer.rejectListen(d,l),i.Ia.delete(d),i.Va.removeTarget(d))})(n,e)}catch(r){Te(na,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zh(n,r)}else if(e instanceof Th?n.Va.Ze(e):e instanceof AN?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ue.min()))try{const r=await ON(n.localStore);t.compareTo(r)>=0&&await(function(a,l){const d=a.Va.Tt(l);return d.targetChanges.forEach(((f,m)=>{if(f.resumeToken.approximateByteSize()>0){const v=a.Ia.get(m);v&&a.Ia.set(m,v.withResumeToken(f.resumeToken,l))}})),d.targetMismatches.forEach(((f,m)=>{const v=a.Ia.get(f);if(!v)return;a.Ia.set(f,v.withResumeToken(vn.EMPTY_BYTE_STRING,v.snapshotVersion)),BN(a,f);const b=new so(v.target,f,m,v.sequenceNumber);$y(a,b)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(r){Te(na,"Failed to raise snapshot:",r),await zh(n,r)}}async function zh(n,e,t){if(!Ul(e))throw e;n.Ea.add(1),await Nu(n),n.Ra.set("Offline"),t||(t=()=>ON(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{Te(na,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Rf(n)}))}function GN(n,e){return e().catch((t=>zh(n,t,e)))}async function kf(n){const e=Fe(n),t=go(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ky;for(;q9(e);)try{const i=await T9(e.localStore,r);if(i===null){e.Ta.length===0&&t.L_();break}r=i.batchId,B9(e,i)}catch(i){await zh(e,i)}zN(e)&&$N(e)}function q9(n){return fa(n)&&n.Ta.length<10}function B9(n,e){n.Ta.push(e);const t=go(n);t.O_()&&t.X_&&t.ea(e.mutations)}function zN(n){return fa(n)&&!go(n).x_()&&n.Ta.length>0}function $N(n){go(n).start()}async function H9(n){go(n).ra()}async function G9(n){const e=go(n);for(const t of n.Ta)e.ea(t.mutations)}async function z9(n,e,t){const r=n.Ta.shift(),i=Oy.from(r,e,t);await GN(n,(()=>n.remoteSyncer.applySuccessfulWrite(i))),await kf(n)}async function $9(n,e){e&&go(n).X_&&await(async function(r,i){if((function(l){return N6(l)&&l!==le.ABORTED})(i.code)){const a=r.Ta.shift();go(r).B_(),await GN(r,(()=>r.remoteSyncer.rejectFailedWrite(a.batchId,i))),await kf(r)}})(n,e),zN(n)&&$N(n)}async function nw(n,e){const t=Fe(n);t.asyncQueue.verifyOperationInProgress(),Te(na,"RemoteStore received new credentials");const r=fa(t);t.Ea.add(3),await Nu(t),r&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Rf(t)}async function J9(n,e){const t=Fe(n);e?(t.Ea.delete(2),await Rf(t)):e||(t.Ea.add(2),await Nu(t),t.Ra.set("Unknown"))}function jl(n){return n.ma||(n.ma=(function(t,r,i){const a=Fe(t);return a.sa(),new k9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:U9.bind(null,n),t_:O9.bind(null,n),r_:j9.bind(null,n),H_:F9.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Yy(n)?Jy(n):n.Ra.set("Unknown")):(await n.ma.stop(),HN(n))}))),n.ma}function go(n){return n.fa||(n.fa=(function(t,r,i){const a=Fe(t);return a.sa(),new D9(r,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,i)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:H9.bind(null,n),r_:$9.bind(null,n),ta:G9.bind(null,n),na:z9.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await kf(n)):(await n.fa.stop(),n.Ta.length>0&&(Te(na,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new lo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new Ky(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new be(le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xy(n,e){if(ui("AsyncQueue",`${e}: ${n}`),Ul(n))return new be(le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ml{static emptySet(e){return new ml(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ce.comparator(t.key,r.key):(t,r)=>Ce.comparator(t.key,r.key),this.keyedMap=Xc(),this.sortedSet=new Pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rw{constructor(){this.ga=new Pt(Ce.comparator)}track(e){const t=e.doc.key,r=this.ga.get(t);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(t,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(t):e.type===1&&r.type===2?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Me(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,r)=>{e.push(r)})),e}}class Nl{constructor(e,t,r,i,a,l,d,f,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=m}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new Nl(e,t,ml.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y9{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class K9{constructor(){this.queries=sw(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,r){const i=Fe(t),a=i.queries;i.queries=sw(),a.forEach(((l,d)=>{for(const f of d.Sa)f.onError(r)}))})(this,new be(le.ABORTED,"Firestore shutting down"))}}function sw(){return new ha((n=>uN(n)),wf)}async function JN(n,e){const t=Fe(n);let r=3;const i=e.query;let a=t.queries.get(i);a?!a.ba()&&e.Da()&&(r=2):(a=new Y9,r=e.Da()?0:1);try{switch(r){case 0:a.wa=await t.onListen(i,!0);break;case 1:a.wa=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(l){const d=Xy(l,`Initialization of query '${ol(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&Wy(t)}async function YN(n,e){const t=Fe(n),r=e.query;let i=3;const a=t.queries.get(r);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?i=e.Da()?0:1:!a.ba()&&e.Da()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function X9(n,e){const t=Fe(n);let r=!1;for(const i of e){const a=i.query,l=t.queries.get(a);if(l){for(const d of l.Sa)d.Fa(i)&&(r=!0);l.wa=i}}r&&Wy(t)}function W9(n,e,t){const r=Fe(n),i=r.queries.get(e);if(i)for(const a of i.Sa)a.onError(t);r.queries.delete(e)}function Wy(n){n.Ca.forEach((e=>{e.next()}))}var Wg,iw;(iw=Wg||(Wg={})).Ma="default",iw.Cache="cache";class KN{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Nl(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const r=t!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e){this.key=e}}class WN{constructor(e){this.key=e}}class Q9{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=et(),this.mutatedKeys=et(),this.eu=dN(e),this.tu=new ml(this.eu)}get nu(){return this.Ya}ru(e,t){const r=t?t.iu:new rw,i=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,m=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((v,b)=>{const T=i.get(v),S=Sf(this.query,b)?b:null,I=!!T&&this.mutatedKeys.has(T.key),D=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let N=!1;T&&S?T.data.isEqual(S.data)?I!==D&&(r.track({type:3,doc:S}),N=!0):this.su(T,S)||(r.track({type:2,doc:S}),N=!0,(f&&this.eu(S,f)>0||m&&this.eu(S,m)<0)&&(d=!0)):!T&&S?(r.track({type:0,doc:S}),N=!0):T&&!S&&(r.track({type:1,doc:T}),N=!0,(f||m)&&(d=!0)),N&&(S?(l=l.add(S),a=D?a.add(v):a.delete(v)):(l=l.delete(v),a=a.delete(v)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),a=a.delete(v.key),r.track({type:1,doc:v})}return{tu:l,iu:r,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((v,b)=>(function(S,I){const D=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Me(20277,{Rt:N})}};return D(S)-D(I)})(v.type,b.type)||this.eu(v.doc,b.doc))),this.ou(r),i=i??!1;const d=t&&!i?this._u():[],f=this.Xa.size===0&&this.current&&!i?1:0,m=f!==this.Za;return this.Za=f,l.length!==0||m?{snapshot:new Nl(this.query,e.tu,a,l,e.mutatedKeys,f===0,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rw,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=et(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const t=[];return e.forEach((r=>{this.Xa.has(r)||t.push(new WN(r))})),this.Xa.forEach((r=>{e.has(r)||t.push(new XN(r))})),t}cu(e){this.Ya=e.Qs,this.Xa=et();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qy="SyncEngine";class Z9{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ej{constructor(e){this.key=e,this.hu=!1}}class tj{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ha((d=>uN(d)),wf),this.Iu=new Map,this.Eu=new Set,this.du=new Pt(Ce.comparator),this.Au=new Map,this.Ru=new qy,this.Vu={},this.mu=new Map,this.fu=Al.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nj(n,e,t=!0){const r=rC(n);let i;const a=r.Tu.get(e);return a?(r.sharedClientState.addLocalQueryTarget(a.targetId),i=a.view.lu()):i=await QN(r,e,t,!0),i}async function rj(n,e){const t=rC(n);await QN(t,e,!0,!1)}async function QN(n,e,t,r){const i=await E9(n.localStore,vs(e)),a=i.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let d;return r&&(d=await sj(n,e,a,l==="current",i.resumeToken)),n.isPrimaryClient&&t&&qN(n.remoteStore,i),d}async function sj(n,e,t,r,i){n.pu=(b,T,S)=>(async function(D,N,U,B){let F=N.view.ru(U);F.Cs&&(F=await WE(D.localStore,N.query,!1).then((({documents:k})=>N.view.ru(k,F))));const Q=B&&B.targetChanges.get(N.targetId),J=B&&B.targetMismatches.get(N.targetId)!=null,re=N.view.applyChanges(F,D.isPrimaryClient,Q,J);return aw(D,N.targetId,re.au),re.snapshot})(n,b,T,S);const a=await WE(n.localStore,e,!0),l=new Q9(e,a.Qs),d=l.ru(a.documents),f=Au.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),m=l.applyChanges(d,n.isPrimaryClient,f);aw(n,t,m.au);const v=new Z9(e,t,l);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function ij(n,e,t){const r=Fe(n),i=r.Tu.get(e),a=r.Iu.get(i.targetId);if(a.length>1)return r.Iu.set(i.targetId,a.filter((l=>!wf(l,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Kg(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),t&&zy(r.remoteStore,i.targetId),Qg(r,i.targetId)})).catch(Vl)):(Qg(r,i.targetId),await Kg(r.localStore,i.targetId,!0))}async function oj(n,e){const t=Fe(n),r=t.Tu.get(e),i=t.Iu.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),zy(t.remoteStore,r.targetId))}async function aj(n,e,t){const r=mj(n);try{const i=await(function(l,d){const f=Fe(l),m=wt.now(),v=d.reduce(((S,I)=>S.add(I.key)),et());let b,T;return f.persistence.runTransaction("Locally write mutations","readwrite",(S=>{let I=di(),D=et();return f.Ns.getEntries(S,v).next((N=>{I=N,I.forEach(((U,B)=>{B.isValidDocument()||(D=D.add(U))}))})).next((()=>f.localDocuments.getOverlayedDocuments(S,I))).next((N=>{b=N;const U=[];for(const B of d){const F=T6(B,b.get(B.key).overlayedDocument);F!=null&&U.push(new _o(B.key,F,nN(F.value.mapValue),xs.exists(!0)))}return f.mutationQueue.addMutationBatch(S,m,U,d)})).next((N=>{T=N;const U=N.applyToLocalDocumentSet(b,D);return f.documentOverlayCache.saveOverlays(S,N.batchId,U)}))})).then((()=>({batchId:T.batchId,changes:fN(b)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(l,d,f){let m=l.Vu[l.currentUser.toKey()];m||(m=new Pt(Ze)),m=m.insert(d,f),l.Vu[l.currentUser.toKey()]=m})(r,i.batchId,t),await Cu(r,i.changes),await kf(r.remoteStore)}catch(i){const a=Xy(i,"Failed to persist write");t.reject(a)}}async function ZN(n,e){const t=Fe(n);try{const r=await _9(t.localStore,e);e.targetChanges.forEach(((i,a)=>{const l=t.Au.get(a);l&&(mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?l.hu=!0:i.modifiedDocuments.size>0?mt(l.hu,14607):i.removedDocuments.size>0&&(mt(l.hu,42227),l.hu=!1))})),await Cu(t,r,e)}catch(r){await Vl(r)}}function ow(n,e,t){const r=Fe(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Tu.forEach(((a,l)=>{const d=l.view.va(e);d.snapshot&&i.push(d.snapshot)})),(function(l,d){const f=Fe(l);f.onlineState=d;let m=!1;f.queries.forEach(((v,b)=>{for(const T of b.Sa)T.va(d)&&(m=!0)})),m&&Wy(f)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lj(n,e,t){const r=Fe(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Au.get(e),a=i&&i.key;if(a){let l=new Pt(Ce.comparator);l=l.insert(a,An.newNoDocument(a,Ue.min()));const d=et().add(a),f=new Cf(Ue.min(),new Map,new Pt(Ze),l,d);await ZN(r,f),r.du=r.du.remove(a),r.Au.delete(e),Zy(r)}else await Kg(r.localStore,e,!1).then((()=>Qg(r,e,t))).catch(Vl)}async function cj(n,e){const t=Fe(n),r=e.batch.batchId;try{const i=await x9(t.localStore,e);tC(t,r,null),eC(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(t,i)}catch(i){await Vl(i)}}async function uj(n,e,t){const r=Fe(n);try{const i=await(function(l,d){const f=Fe(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return f.mutationQueue.lookupMutationBatch(m,d).next((b=>(mt(b!==null,37113),v=b.keys(),f.mutationQueue.removeMutationBatch(m,b)))).next((()=>f.mutationQueue.performConsistencyCheck(m))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(m,v,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>f.localDocuments.getDocuments(m,v)))}))})(r.localStore,e);tC(r,e,t),eC(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Cu(r,i)}catch(i){await Vl(i)}}function eC(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function tC(n,e,t){const r=Fe(n);let i=r.Vu[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Qg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Iu.get(e))n.Tu.delete(r),t&&n.Pu.yu(r,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((r=>{n.Ru.containsKey(r)||nC(n,r)}))}function nC(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(zy(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Zy(n))}function aw(n,e,t){for(const r of t)r instanceof XN?(n.Ru.addReference(r.key,e),dj(n,r)):r instanceof WN?(Te(Qy,"Document no longer in limbo: "+r.key),n.Ru.removeReference(r.key,e),n.Ru.containsKey(r.key)||nC(n,r.key)):Me(19791,{wu:r})}function dj(n,e){const t=e.key,r=t.path.canonicalString();n.du.get(t)||n.Eu.has(r)||(Te(Qy,"New document in limbo: "+t),n.Eu.add(r),Zy(n))}function Zy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ce(St.fromString(e)),r=n.fu.next();n.Au.set(r,new ej(t)),n.du=n.du.insert(t,r),qN(n.remoteStore,new so(vs(Vy(t.path)),r,"TargetPurposeLimboResolution",bf.ce))}}async function Cu(n,e,t){const r=Fe(n),i=[],a=[],l=[];r.Tu.isEmpty()||(r.Tu.forEach(((d,f)=>{l.push(r.pu(f,e,t).then((m=>{var v;if((m||t)&&r.isPrimaryClient){const b=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:v.current;r.sharedClientState.updateQueryState(f.targetId,b?"current":"not-current")}if(m){i.push(m);const b=Hy.As(f.targetId,m);a.push(b)}})))})),await Promise.all(l),r.Pu.H_(i),await(async function(f,m){const v=Fe(f);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(b=>ue.forEach(m,(T=>ue.forEach(T.Es,(S=>v.persistence.referenceDelegate.addReference(b,T.targetId,S))).next((()=>ue.forEach(T.ds,(S=>v.persistence.referenceDelegate.removeReference(b,T.targetId,S)))))))))}catch(b){if(!Ul(b))throw b;Te(Gy,"Failed to update sequence numbers: "+b)}for(const b of m){const T=b.targetId;if(!b.fromCache){const S=v.Ms.get(T),I=S.snapshotVersion,D=S.withLastLimboFreeSnapshotVersion(I);v.Ms=v.Ms.insert(T,D)}}})(r.localStore,a))}async function hj(n,e){const t=Fe(n);if(!t.currentUser.isEqual(e)){Te(Qy,"User change. New user:",e.toKey());const r=await UN(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((d=>{d.forEach((f=>{f.reject(new be(le.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Cu(t,r.Ls)}}function fj(n,e){const t=Fe(n),r=t.Au.get(e);if(r&&r.hu)return et().add(r.key);{let i=et();const a=t.Iu.get(e);if(!a)return i;for(const l of a){const d=t.Tu.get(l);i=i.unionWith(d.view.nu)}return i}}function rC(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lj.bind(null,e),e.Pu.H_=X9.bind(null,e.eventManager),e.Pu.yu=W9.bind(null,e.eventManager),e}function mj(n){const e=Fe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=uj.bind(null,e),e}class $h{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=If(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return v9(this.persistence,new p9,e.initialUser,this.serializer)}Cu(e){return new VN(By.mi,this.serializer)}Du(e){return new S9}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$h.provider={build:()=>new $h};class pj extends $h{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){mt(this.persistence.referenceDelegate instanceof Gh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new e9(r,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?$n.withCacheSize(this.cacheSizeBytes):$n.DEFAULT;return new VN((r=>Gh.mi(r,t)),this.serializer)}}class Zg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ow(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=hj.bind(null,this.syncEngine),await J9(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new K9})()}createDatastore(e){const t=If(e.databaseInfo.databaseId),r=(function(a){return new R9(a)})(e.databaseInfo);return(function(a,l,d,f){return new P9(a,l,d,f)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,i,a,l,d){return new V9(r,i,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>ow(this.syncEngine,t,0)),(function(){return ew.v()?new ew:new A9})())}createSyncEngine(e,t){return(function(i,a,l,d,f,m,v){const b=new tj(i,a,l,d,f,m);return v&&(b.gu=!0),b})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(i){const a=Fe(i);Te(na,"RemoteStore shutting down."),a.Ea.add(5),await Nu(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Zg.provider={build:()=>new Zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):ui("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo="FirestoreClient";class gj{constructor(e,t,r,i,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Sn.UNAUTHENTICATED,this.clientId=Ry.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(r,(async l=>{Te(yo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(r,(l=>(Te(yo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new lo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Xy(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function sg(n,e){n.asyncQueue.verifyOperationInProgress(),Te(yo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener((async i=>{r.isEqual(i)||(await UN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function lw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await yj(n);Te(yo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((r=>nw(e.remoteStore,r))),n.setAppCheckTokenChangeListener(((r,i)=>nw(e.remoteStore,i))),n._onlineComponents=e}async function yj(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Te(yo,"Using user provided OfflineComponentProvider");try{await sg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(i){return i.name==="FirebaseError"?i.code===le.FAILED_PRECONDITION||i.code===le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(t))throw t;bl("Error using user provided cache. Falling back to memory cache: "+t),await sg(n,new $h)}}else Te(yo,"Using default OfflineComponentProvider"),await sg(n,new pj(void 0));return n._offlineComponents}async function iC(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Te(yo,"Using user provided OnlineComponentProvider"),await lw(n,n._uninitializedComponentsProvider._online)):(Te(yo,"Using default OnlineComponentProvider"),await lw(n,new Zg))),n._onlineComponents}function vj(n){return iC(n).then((e=>e.syncEngine))}async function ey(n){const e=await iC(n),t=e.eventManager;return t.onListen=nj.bind(null,e.syncEngine),t.onUnlisten=ij.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rj.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oj.bind(null,e.syncEngine),t}function xj(n,e,t={}){const r=new lo;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,f,m){const v=new sC({next:T=>{v.Nu(),l.enqueueAndForget((()=>YN(a,b))),T.fromCache&&f.source==="server"?m.reject(new be(le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(T)},error:T=>m.reject(T)}),b=new KN(d,v,{includeMetadataChanges:!0,qa:!0});return JN(a,b)})(await ey(n),n.asyncQueue,e,t,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aC="firestore.googleapis.com",uw=!0;class dw{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new be(le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aC,this.ssl=uw}else this.host=e.host,this.ssl=e.ssl??uw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=LN;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Q6)throw new be(le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V5("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oC(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new be(le.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dw({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new be(le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new be(le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dw(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new A5;switch(r.type){case"firstParty":return new R5(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new be(le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=cw.get(t);r&&(Te("ComponentProvider","Removing Datastore"),cw.delete(t),r.terminate())})(this),Promise.resolve()}}function _j(n,e,t,r={}){var m;n=oi(n,Df);const i=ca(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;i&&(Sy(`https://${d}`),Ay("Firestore",!0)),a.host!==aC&&a.host!==d&&bl("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:d,ssl:i,emulatorOptions:r};if(!uo(f,l)&&(n._setSettings(f),r.mockUserToken)){let v,b;if(typeof r.mockUserToken=="string")v=r.mockUserToken,b=Sn.MOCK_USER;else{v=NA(r.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new be(le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");b=new Sn(T)}n._authCredentials=new N5(new GA(v,b))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new gi(this.firestore,e,this._query)}}class Zt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new co(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zt(this.firestore,e,this._key)}toJSON(){return{type:Zt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(wu(t,Zt._jsonSchema))return new Zt(e,r||null,new Ce(St.fromString(t.referencePath)))}}Zt._jsonSchemaVersion="firestore/documentReference/1.0",Zt._jsonSchema={type:Qt("string",Zt._jsonSchemaVersion),referencePath:Qt("string")};class co extends gi{constructor(e,t,r){super(e,t,Vy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zt(this.firestore,null,new Ce(e))}withConverter(e){return new co(this.firestore,e,this._path)}}function ig(n,e,...t){if(n=nn(n),zA("collection","path",e),n instanceof Df){const r=St.fromString(e,...t);return wE(r),new co(n,null,r)}{if(!(n instanceof Zt||n instanceof co))throw new be(le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return wE(r),new co(n.firestore,null,r)}}function lC(n,e,...t){if(n=nn(n),arguments.length===1&&(e=Ry.newId()),zA("doc","path",e),n instanceof Df){const r=St.fromString(e,...t);return EE(r),new Zt(n,null,new Ce(r))}{if(!(n instanceof Zt||n instanceof co))throw new be(le.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(St.fromString(e,...t));return EE(r),new Zt(n.firestore,n instanceof co?n.converter:null,new Ce(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hw="AsyncQueue";class fw{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jN(this,"async_queue_retry"),this._c=()=>{const r=rg();r&&Te(hw,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const t=rg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=rg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new lo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ul(e))throw e;Te(hw,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,ui("INTERNAL UNHANDLED ERROR: ",mw(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const i=Ky.createAndSchedule(this,e,t,r,(a=>this.hc(a)));return this.tc.push(i),i}uc(){this.nc&&Me(47125,{Pc:mw(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function mw(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(n){return(function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const a of r)if(a in i&&typeof i[a]=="function")return!0;return!1})(n,["next","error","complete"])}class Cl extends Df{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new fw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fw(e),this._firestoreClient=void 0,await e}}}function bj(n,e){const t=typeof n=="object"?n:Cy(),r=typeof n=="string"?n:Oh,i=Pl(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const a=wA("firestore");a&&_j(i,...a)}return i}function e0(n){if(n._terminated)throw new be(le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Tj(n),n._firestoreClient}function Tj(n){var r,i,a;const e=n._freezeSettings(),t=(function(d,f,m,v){return new Y5(d,f,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,oC(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((r=n._app)==null?void 0:r.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gj(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Nr(vn.fromBase64String(e))}catch(t){throw new be(le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Nr(vn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Nr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wu(e,Nr._jsonSchema))return Nr.fromBase64String(e.bytes)}}Nr._jsonSchemaVersion="firestore/bytes/1.0",Nr._jsonSchema={type:Qt("string",Nr._jsonSchemaVersion),bytes:Qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new be(le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new be(le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new be(le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ze(this._lat,e._lat)||Ze(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:bs._jsonSchemaVersion}}static fromJSON(e){if(wu(e,bs._jsonSchema))return new bs(e.latitude,e.longitude)}}bs._jsonSchemaVersion="firestore/geoPoint/1.0",bs._jsonSchema={type:Qt("string",bs._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let a=0;a<r.length;++a)if(r[a]!==i[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Ts._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wu(e,Ts._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Ts(e.vectorValues);throw new be(le.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ts._jsonSchemaVersion="firestore/vectorValue/1.0",Ts._jsonSchema={type:Qt("string",Ts._jsonSchemaVersion),vectorValues:Qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=/^__.*__$/;class wj{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _o(e,this.data,this.fieldMask,t,this.fieldTransforms):new Su(e,this.data,t,this.fieldTransforms)}}class cC{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new _o(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function uC(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Me(40011,{Ac:n})}}class Pf{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Pf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.gc(e),r}yc(e){var i;const t=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:t,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uC(this.Ac)&&Ej.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Sj{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||If(e)}Cc(e,t,r,i=!1){return new Pf({Ac:e,methodName:t,Dc:r,path:yn.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function t0(n){const e=n._freezeSettings(),t=If(n._databaseId);return new Sj(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Aj(n,e,t,r,i,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,i);s0("Data must be an object, but it was:",l,r);const d=dC(r,l);let f,m;if(a.merge)f=new dr(l.fieldMask),m=l.fieldTransforms;else if(a.mergeFields){const v=[];for(const b of a.mergeFields){const T=ty(e,b,t);if(!l.contains(T))throw new be(le.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);fC(v,T)||v.push(T)}f=new dr(v),m=l.fieldTransforms.filter((b=>f.covers(b.field)))}else f=null,m=l.fieldTransforms;return new wj(new Jn(d),f,m)}class Lf extends Iu{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}function Nj(n,e,t){return new Pf({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n0 extends Iu{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=Nj(this,e,!0),r=this.vc.map((a=>Fl(a,t))),i=new Sl(r);return new bN(e.path,i)}isEqual(e){return e instanceof n0&&uo(this.vc,e.vc)}}class r0 extends Iu{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new yu(e.serializer,gN(e.serializer,this.Fc));return new bN(e.path,t)}isEqual(e){return e instanceof r0&&this.Fc===e.Fc}}function Cj(n,e,t,r){const i=n.Cc(1,e,t);s0("Data must be an object, but it was:",i,r);const a=[],l=Jn.empty();xo(r,((f,m)=>{const v=i0(e,f,t);m=nn(m);const b=i.yc(v);if(m instanceof Lf)a.push(v);else{const T=Fl(m,b);T!=null&&(a.push(v),l.set(v,T))}}));const d=new dr(a);return new cC(l,d,i.fieldTransforms)}function Ij(n,e,t,r,i,a){const l=n.Cc(1,e,t),d=[ty(e,r,t)],f=[i];if(a.length%2!=0)throw new be(le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let T=0;T<a.length;T+=2)d.push(ty(e,a[T])),f.push(a[T+1]);const m=[],v=Jn.empty();for(let T=d.length-1;T>=0;--T)if(!fC(m,d[T])){const S=d[T];let I=f[T];I=nn(I);const D=l.yc(S);if(I instanceof Lf)m.push(S);else{const N=Fl(I,D);N!=null&&(m.push(S),v.set(S,N))}}const b=new dr(m);return new cC(v,b,l.fieldTransforms)}function Rj(n,e,t,r=!1){return Fl(t,n.Cc(r?4:3,e))}function Fl(n,e){if(hC(n=nn(n)))return s0("Unsupported field value:",e,n),dC(n,e);if(n instanceof Iu)return(function(r,i){if(!uC(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const a=r._toFieldTransform(i);a&&i.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){const a=[];let l=0;for(const d of r){let f=Fl(d,i.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(r,i){if((r=nn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gN(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const a=wt.fromDate(r);return{timestampValue:Hh(i.serializer,a)}}if(r instanceof wt){const a=new wt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Hh(i.serializer,a)}}if(r instanceof bs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Nr)return{bytesValue:CN(i.serializer,r._byteString)};if(r instanceof Zt){const a=i.databaseId,l=r.firestore._databaseId;if(!l.isEqual(a))throw i.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Fy(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ts)return(function(l,d){return{mapValue:{fields:{[eN]:{stringValue:tN},[jh]:{arrayValue:{values:l.toArray().map((m=>{if(typeof m!="number")throw d.Sc("VectorValues must only contain numeric values.");return Uy(d.serializer,m)}))}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${_f(r)}`)})(n,e)}function dC(n,e){const t={};return YA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(n,((r,i)=>{const a=Fl(i,e.mc(r));a!=null&&(t[r]=a)})),{mapValue:{fields:t}}}function hC(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof wt||n instanceof bs||n instanceof Nr||n instanceof Zt||n instanceof Iu||n instanceof Ts)}function s0(n,e,t){if(!hC(t)||!$A(t)){const r=_f(t);throw r==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+r)}}function ty(n,e,t){if((e=nn(e))instanceof Mf)return e._internalPath;if(typeof e=="string")return i0(n,e);throw Jh("Field path arguments must be of type string or ",n,!1,void 0,t)}const kj=new RegExp("[~\\*/\\[\\]]");function i0(n,e,t){if(e.search(kj)>=0)throw Jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Mf(...e.split("."))._internalPath}catch{throw Jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jh(n,e,t,r,i){const a=r&&!r.isEmpty(),l=i!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${r}`),l&&(f+=` in document ${i}`),f+=")"),new be(le.INVALID_ARGUMENT,d+n+f)}function fC(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Zt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Dj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Vf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Dj extends mC{data(){return super.data()}}function Vf(n,e){return typeof e=="string"?i0(n,e):e instanceof Mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new be(le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o0{}class a0 extends o0{}function gw(n,e,...t){let r=[];e instanceof o0&&r.push(e),r=r.concat(t),(function(a){const l=a.filter((f=>f instanceof l0)).length,d=a.filter((f=>f instanceof Uf)).length;if(l>1||l>0&&d>0)throw new be(le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const i of r)n=i._apply(n);return n}class Uf extends a0{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Uf(e,t,r)}_apply(e){const t=this._parse(e);return gC(e._query,t),new gi(e.firestore,e.converter,Gg(e._query,t))}_parse(e){const t=t0(e.firestore);return(function(a,l,d,f,m,v,b){let T;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new be(le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){_w(b,v);const I=[];for(const D of b)I.push(xw(f,a,D));T={arrayValue:{values:I}}}else T=xw(f,a,b)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||_w(b,v),T=Rj(d,l,b,v==="in"||v==="not-in");return Wt.create(m,v,T)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function uh(n,e,t){const r=e,i=Vf("where",n);return Uf._create(i,r,t)}class l0 extends o0{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new l0(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:Xr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(i,a){let l=i;const d=a.getFlattenedFilters();for(const f of d)gC(l,f),l=Gg(l,f)})(e._query,t),new gi(e.firestore,e.converter,Gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class c0 extends a0{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new c0(e,t)}_apply(e){const t=(function(i,a,l){if(i.startAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new be(le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pu(a,l)})(e._query,this._field,this._direction);return new gi(e.firestore,e.converter,(function(i,a){const l=i.explicitOrderBy.concat([a]);return new Ol(i.path,i.collectionGroup,l,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)})(e._query,t))}}function yw(n,e="asc"){const t=e,r=Vf("orderBy",n);return c0._create(r,t)}class u0 extends a0{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new u0(e,t,r)}_apply(e){return new gi(e.firestore,e.converter,qh(e._query,this._limit,this._limitType))}}function vw(n){return U5("limit",n),u0._create("limit",n,"F")}function xw(n,e,t){if(typeof(t=nn(t))=="string"){if(t==="")throw new be(le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cN(e)&&t.indexOf("/")!==-1)throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(St.fromString(t));if(!Ce.isDocumentKey(r))throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return DE(n,new Ce(r))}if(t instanceof Zt)return DE(n,t._key);throw new be(le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${_f(t)}.`)}function _w(n,e){if(!Array.isArray(n)||n.length===0)throw new be(le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gC(n,e){const t=(function(i,a){for(const l of i)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new be(le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Mj{convertValue(e,t="none"){switch(po(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ht(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return xo(e,((i,a)=>{r[i]=this.convertValue(a,t)})),r}convertVectorValue(e){var r,i,a;const t=(a=(i=(r=e.fields)==null?void 0:r[jh].arrayValue)==null?void 0:i.values)==null?void 0:a.map((l=>Ht(l.doubleValue)));return new Ts(t)}convertGeoPoint(e){return new bs(Ht(e.latitude),Ht(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ef(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(hu(e));default:return null}}convertTimestamp(e){const t=fo(e);return new wt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=St.fromString(e);mt(PN(r),9688,{name:e});const i=new fu(r.get(1),r.get(3)),a=new Ce(r.popFirst(5));return i.isEqual(t)||ui(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(n,e,t){let r;return r=n?n.toFirestore(e):e,r}class Qc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qo extends mC{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Vf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Qo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Qo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Qo._jsonSchema={type:Qt("string",Qo._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Eh extends Qo{data(e={}){return super.data(e)}}class Zo{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Qc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Eh(this._firestore,this._userDataWriter,r.key,r,new Qc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new be(le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(i,a){if(i._snapshot.oldDocs.isEmpty()){let l=0;return i._snapshot.docChanges.map((d=>{const f=new Eh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Qc(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Eh(i._firestore,i._userDataWriter,d.doc.key,d.doc,new Qc(i._snapshot.mutatedKeys.has(d.doc.key),i._snapshot.fromCache),i.query.converter);let m=-1,v=-1;return d.type!==0&&(m=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),v=l.indexOf(d.doc.key)),{type:Lj(d.type),doc:f,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new be(le.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Zo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ry.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],i=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),r.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),i.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Lj(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Me(61501,{type:n})}}Zo._jsonSchemaVersion="firestore/querySnapshot/1.0",Zo._jsonSchema={type:Qt("string",Zo._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class d0 extends Mj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Nr(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zt(this.firestore,null,t)}}function Vj(n){n=oi(n,gi);const e=oi(n.firestore,Cl),t=e0(e),r=new d0(e);return pC(n._query),xj(t,n._query).then((i=>new Zo(e,r,n,i)))}function Uj(n,e,t,...r){n=oi(n,Zt);const i=oi(n.firestore,Cl),a=t0(i);let l;return l=typeof(e=nn(e))=="string"||e instanceof Mf?Ij(a,"updateDoc",n._key,e,t,r):Cj(a,"updateDoc",n._key,e),yC(i,[l.toMutation(n._key,xs.exists(!0))])}function Oj(n,e){const t=oi(n.firestore,Cl),r=lC(n),i=Pj(n.converter,e);return yC(t,[Aj(t0(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,xs.exists(!1))]).then((()=>r))}function jj(n,...e){var f,m,v;n=nn(n);let t={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||pw(e[r])||(t=e[r++]);const i={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(pw(e[r])){const b=e[r];e[r]=(f=b.next)==null?void 0:f.bind(b),e[r+1]=(m=b.error)==null?void 0:m.bind(b),e[r+2]=(v=b.complete)==null?void 0:v.bind(b)}let a,l,d;if(n instanceof Zt)l=oi(n.firestore,Cl),d=Vy(n._key.path),a={next:b=>{e[r]&&e[r](Fj(l,n,b))},error:e[r+1],complete:e[r+2]};else{const b=oi(n,gi);l=oi(b.firestore,Cl),d=b._query;const T=new d0(l);a={next:S=>{e[r]&&e[r](new Zo(l,T,b,S))},error:e[r+1],complete:e[r+2]},pC(n._query)}return(function(T,S,I,D){const N=new sC(D),U=new KN(S,N,I);return T.asyncQueue.enqueueAndForget((async()=>JN(await ey(T),U))),()=>{N.Nu(),T.asyncQueue.enqueueAndForget((async()=>YN(await ey(T),U)))}})(e0(l),d,i,a)}function yC(n,e){return(function(r,i){const a=new lo;return r.asyncQueue.enqueueAndForget((async()=>aj(await vj(r),i,a))),a.promise})(e0(n),e)}function Fj(n,e,t){const r=t.docs.get(e._key),i=new d0(n);return new Qo(n,i,e._key,r,new Qc(t.hasPendingWrites,t.fromCache),e.converter)}function qj(...n){return new n0("arrayUnion",n)}function Bj(n){return new r0("increment",n)}(function(e,t=!0){(function(i){Ll=i})(da),Kr(new kr("firestore",((r,{instanceIdentifier:i,options:a})=>{const l=r.getProvider("app").getImmediate(),d=new Cl(new C5(r.getProvider("auth-internal")),new k5(l,r.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new be(le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fu(m.options.projectId,v)})(l,i),l);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Yn(xE,_E,e),Yn(xE,_E,"esm2020")})();var Hj="firebase",Gj="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yn(Hj,Gj,"app");function vC(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zj=vC,xC=new ua("auth","Firebase",vC());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=new xf("@firebase/auth");function $j(n,...e){Yh.logLevel<=We.WARN&&Yh.warn(`Auth (${da}): ${n}`,...e)}function wh(n,...e){Yh.logLevel<=We.ERROR&&Yh.error(`Auth (${da}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(n,...e){throw h0(n,...e)}function Es(n,...e){return h0(n,...e)}function _C(n,e,t){const r={...zj(),[e]:t};return new ua("auth","Firebase",r).create(e,{appName:n.name})}function ea(n){return _C(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function h0(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return xC.create(n,...e)}function Pe(n,e,...t){if(!n)throw h0(e,...t)}function ri(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wh(e),new Error(e)}function fi(n,e){n||ri(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function Jj(){return bw()==="http:"||bw()==="https:"}function bw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Jj()||CA()||"connection"in navigator)?navigator.onLine:!0}function Kj(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,t){this.shortDelay=e,this.longDelay=t,fi(t>e,"Short delay should be less than long delay!"),this.isMobile=tO()||sO()}get(){return Yj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f0(n,e){fi(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ri("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ri("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ri("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qj=new Ru(3e4,6e4);function m0(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function ql(n,e,t,r,i={}){return TC(n,i,async()=>{let a={},l={};r&&(e==="GET"?l=r:a={body:JSON.stringify(r)});const d=Eu({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const m={method:e,headers:f,...a};return rO()||(m.referrerPolicy="no-referrer"),n.emulatorConfig&&ca(n.emulatorConfig.host)&&(m.credentials="include"),bC.fetch()(await EC(n,n.config.apiHost,t,d),m)})}async function TC(n,e,t){n._canInitEmulator=!1;const r={...Xj,...e};try{const i=new eF(n),a=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw dh(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,m]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw dh(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw dh(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw dh(n,"user-disabled",l);const v=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw _C(n,v,m);hi(n,v)}}catch(i){if(i instanceof Mr)throw i;hi(n,"network-request-failed",{message:String(i)})}}async function Zj(n,e,t,r,i={}){const a=await ql(n,e,t,r,i);return"mfaPendingCredential"in a&&hi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function EC(n,e,t,r){const i=`${e}${t}?${r}`,a=n,l=a.config.emulator?f0(n.config,i):`${n.config.apiScheme}://${i}`;return Wj.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class eF{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Es(this.auth,"network-request-failed")),Qj.get())})}}function dh(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Es(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(n,e){return ql(n,"POST","/v1/accounts:delete",e)}async function Kh(n,e){return ql(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function nF(n,e=!1){const t=nn(n),r=await t.getIdToken(e),i=p0(r);Pe(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const a=typeof i.firebase=="object"?i.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:i,token:r,authTime:iu(og(i.auth_time)),issuedAtTime:iu(og(i.iat)),expirationTime:iu(og(i.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function og(n){return Number(n)*1e3}function p0(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return wh("JWT malformed, contained fewer than 3 sections"),null;try{const i=TA(t);return i?JSON.parse(i):(wh("Failed to decode base64 JWT payload"),null)}catch(i){return wh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Tw(n){const e=p0(n);return Pe(e,"internal-error"),Pe(typeof e.exp<"u","internal-error"),Pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vu(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Mr&&rF(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function rF({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ry{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=iu(this.lastLoginAt),this.creationTime=iu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xh(n){var b;const e=n.auth,t=await n.getIdToken(),r=await vu(n,Kh(e,{idToken:t}));Pe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];n._notifyReloadListener(i);const a=(b=i.providerUserInfo)!=null&&b.length?wC(i.providerUserInfo):[],l=oF(n.providerData,a),d=n.isAnonymous,f=!(n.email&&i.passwordHash)&&!(l!=null&&l.length),m=d?f:!1,v={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new ry(i.createdAt,i.lastLoginAt),isAnonymous:m};Object.assign(n,v)}async function iF(n){const e=nn(n);await Xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function oF(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function wC(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aF(n,e){const t=await TC(n,{},async()=>{const r=Eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:a}=n.config,l=await EC(n,i,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:r};return n.emulatorConfig&&ca(n.emulatorConfig.host)&&(f.credentials="include"),bC.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function lF(n,e){return ql(n,"POST","/v2/accounts:revokeToken",m0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pe(e.idToken,"internal-error"),Pe(typeof e.idToken<"u","internal-error"),Pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Tw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pe(e.length!==0,"internal-error");const t=Tw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:a}=await aF(e,t);this.updateTokensAndExpiration(r,i,Number(a))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:a}=t,l=new pl;return r&&(Pe(typeof r=="string","internal-error",{appName:e}),l.refreshToken=r),i&&(Pe(typeof i=="string","internal-error",{appName:e}),l.accessToken=i),a&&(Pe(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pl,this.toJSON())}_performRefresh(){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(n,e){Pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class zr{constructor({uid:e,auth:t,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new sF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new ry(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await vu(this,this.stsTokenManager.getToken(this.auth,e));return Pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return nF(this,e)}reload(){return iF(this)}_assign(e){this!==e&&(Pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new zr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Gr(this.auth.app))return Promise.reject(ea(this.auth));const e=await this.getIdToken();return await vu(this,tF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const r=t.displayName??void 0,i=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,m=t.createdAt??void 0,v=t.lastLoginAt??void 0,{uid:b,emailVerified:T,isAnonymous:S,providerData:I,stsTokenManager:D}=t;Pe(b&&D,e,"internal-error");const N=pl.fromJSON(this.name,D);Pe(typeof b=="string",e,"internal-error"),Zi(r,e.name),Zi(i,e.name),Pe(typeof T=="boolean",e,"internal-error"),Pe(typeof S=="boolean",e,"internal-error"),Zi(a,e.name),Zi(l,e.name),Zi(d,e.name),Zi(f,e.name),Zi(m,e.name),Zi(v,e.name);const U=new zr({uid:b,auth:e,email:i,emailVerified:T,displayName:r,isAnonymous:S,photoURL:l,phoneNumber:a,tenantId:d,stsTokenManager:N,createdAt:m,lastLoginAt:v});return I&&Array.isArray(I)&&(U.providerData=I.map(B=>({...B}))),f&&(U._redirectEventId=f),U}static async _fromIdTokenResponse(e,t,r=!1){const i=new pl;i.updateFromServerResponse(t);const a=new zr({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Xh(a),a}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];Pe(i.localId!==void 0,"internal-error");const a=i.providerUserInfo!==void 0?wC(i.providerUserInfo):[],l=!(i.email&&i.passwordHash)&&!(a!=null&&a.length),d=new pl;d.updateFromIdToken(r);const f=new zr({uid:i.localId,auth:e,stsTokenManager:d,isAnonymous:l}),m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ry(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,m),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ew=new Map;function si(n){fi(n instanceof Function,"Expected a class definition");let e=Ew.get(n);return e?(fi(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ew.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SC.type="NONE";const ww=SC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(n,e,t){return`firebase:${n}:${e}:${t}`}class gl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:a}=this.auth;this.fullUserKey=Sh(this.userKey,i.apiKey,a),this.fullPersistenceKey=Sh("persistence",i.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kh(this.auth,{idToken:e}).catch(()=>{});return t?zr._fromGetAccountInfoResponse(this.auth,t,e):null}return zr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new gl(si(ww),e,r);const i=(await Promise.all(t.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let a=i[0]||si(ww);const l=Sh(r,e.config.apiKey,e.name);let d=null;for(const m of t)try{const v=await m._get(l);if(v){let b;if(typeof v=="string"){const T=await Kh(e,{idToken:v}).catch(()=>{});if(!T)break;b=await zr._fromGetAccountInfoResponse(e,T,v)}else b=zr._fromJSON(e,v);m!==a&&(d=b),a=m;break}}catch{}const f=i.filter(m=>m._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new gl(a,e,r):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async m=>{if(m!==a)try{await m._remove(l)}catch{}})),new gl(a,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(IC(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(AC(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kC(e))return"Blackberry";if(DC(e))return"Webos";if(NC(e))return"Safari";if((e.includes("chrome/")||CC(e))&&!e.includes("edge/"))return"Chrome";if(RC(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function AC(n=Cn()){return/firefox\//i.test(n)}function NC(n=Cn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function CC(n=Cn()){return/crios\//i.test(n)}function IC(n=Cn()){return/iemobile/i.test(n)}function RC(n=Cn()){return/android/i.test(n)}function kC(n=Cn()){return/blackberry/i.test(n)}function DC(n=Cn()){return/webos/i.test(n)}function g0(n=Cn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function cF(n=Cn()){var e;return g0(n)&&!!((e=window.navigator)!=null&&e.standalone)}function uF(){return iO()&&document.documentMode===10}function MC(n=Cn()){return g0(n)||RC(n)||DC(n)||kC(n)||/windows phone/i.test(n)||IC(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n,e=[]){let t;switch(n){case"Browser":t=Sw(Cn());break;case"Worker":t=`${Sw(Cn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${da}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dF{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hF(n,e={}){return ql(n,"GET","/v2/passwordPolicy",m0(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fF=6;class mF{constructor(e){var r;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??fF,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Aw(this),this.idTokenSubscription=new Aw(this),this.beforeStateQueue=new dF(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xC,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=si(t)),this._initializationPromise=this.queue(async()=>{var r,i,a;if(!this._deleted&&(this.persistenceManager=await gl.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kh(this,{idToken:e}),r=await zr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Gr(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let r=t,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(l){r=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Kj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Gr(this.app))return Promise.reject(ea(this));const t=e?nn(e):null;return t&&Pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Gr(this.app)?Promise.reject(ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Gr(this.app)?Promise.reject(ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await hF(this),t=new mF(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await lF(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&si(e)||this._popupRedirectResolver;Pe(t,this,"argument-error"),this.redirectPersistenceManager=await gl.create(this,[si(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pe(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,r,i);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PC(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var t;if(Gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&$j(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function y0(n){return nn(n)}class Aw{constructor(e){this.auth=e,this.observer=null,this.addObserver=hO(t=>this.observer=t)}get next(){return Pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let v0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function gF(n){v0=n}function yF(n){return v0.loadJS(n)}function vF(){return v0.gapiScript}function xF(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _F(n,e){const t=Pl(n,"auth");if(t.isInitialized()){const i=t.getImmediate(),a=t.getOptions();if(uo(a,e??{}))return i;hi(i,"already-initialized")}return t.initialize({options:e})}function bF(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(si);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function TF(n,e,t){const r=y0(n);Pe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,a=LC(e),{host:l,port:d}=EF(e),f=d===null?"":`:${d}`,m={url:`${a}//${l}${f}/`},v=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){Pe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Pe(uo(m,r.config.emulator)&&uo(v,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=m,r.emulatorConfig=v,r.settings.appVerificationDisabledForTesting=!0,ca(l)?(Sy(`${a}//${l}${f}`),Ay("Auth",!0)):wF()}function LC(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function EF(n){const e=LC(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const a=i[1];return{host:a,port:Nw(r.substr(a.length+1))}}else{const[a,l]=r.split(":");return{host:a,port:Nw(l)}}}function Nw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function wF(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ri("not implemented")}_getIdTokenResponse(e){return ri("not implemented")}_linkToIdToken(e,t){return ri("not implemented")}_getReauthenticationResolver(e){return ri("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yl(n,e){return Zj(n,"POST","/v1/accounts:signInWithIdp",m0(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SF="http://localhost";class ra extends VC{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):hi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...a}=t;if(!r||!i)return null;const l=new ra(r,i);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return yl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,yl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yl(e,t)}buildRequest(){const e={requestUri:SF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends UC{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to extends ku{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:to.PROVIDER_ID,signInMethod:to.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return to.credentialFromTaggedObject(e)}static credentialFromError(e){return to.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return to.credential(e.oauthAccessToken)}catch{return null}}}to.FACEBOOK_SIGN_IN_METHOD="facebook.com";to.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ra._fromParams({providerId:ni.PROVIDER_ID,signInMethod:ni.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ni.credentialFromTaggedObject(e)}static credentialFromError(e){return ni.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ni.credential(t,r)}catch{return null}}}ni.GOOGLE_SIGN_IN_METHOD="google.com";ni.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no extends ku{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:no.PROVIDER_ID,signInMethod:no.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return no.credentialFromTaggedObject(e)}static credentialFromError(e){return no.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return no.credential(e.oauthAccessToken)}catch{return null}}}no.GITHUB_SIGN_IN_METHOD="github.com";no.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro extends ku{constructor(){super("twitter.com")}static credential(e,t){return ra._fromParams({providerId:ro.PROVIDER_ID,signInMethod:ro.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ro.credentialFromTaggedObject(e)}static credentialFromError(e){return ro.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return ro.credential(t,r)}catch{return null}}}ro.TWITTER_SIGN_IN_METHOD="twitter.com";ro.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const a=await zr._fromIdTokenResponse(e,r,i),l=Cw(r);return new Il({user:a,providerId:l,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=Cw(r);return new Il({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function Cw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends Mr{constructor(e,t,r,i){super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Wh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new Wh(e,t,r,i)}}function OC(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Wh._fromErrorAndOperation(n,a,e,r):a})}async function AF(n,e,t=!1){const r=await vu(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Il._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NF(n,e,t=!1){const{auth:r}=n;if(Gr(r.app))return Promise.reject(ea(r));const i="reauthenticate";try{const a=await vu(n,OC(r,i,e,n),t);Pe(a.idToken,r,"internal-error");const l=p0(a.idToken);Pe(l,r,"internal-error");const{sub:d}=l;return Pe(n.uid===d,r,"user-mismatch"),Il._forOperation(n,i,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&hi(r,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CF(n,e,t=!1){if(Gr(n.app))return Promise.reject(ea(n));const r="signIn",i=await OC(n,r,e),a=await Il._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(a.user),a}function IF(n,e,t,r){return nn(n).onIdTokenChanged(e,t,r)}function RF(n,e,t){return nn(n).beforeAuthStateChanged(e,t)}const Qh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Qh,"1"),this.storage.removeItem(Qh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF=1e3,DF=10;class FC extends jC{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MC(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const l=this.storage.getItem(r);!t&&this.localCache[r]===l||this.notifyListeners(r,l)},a=this.storage.getItem(r);uF()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DF):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},kF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}FC.type="LOCAL";const MF=FC;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC extends jC{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}qC.type="SESSION";const BC=qC;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PF(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Of(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:a}=t.data,l=this.handlersMap[i];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const d=Array.from(l).map(async m=>m(t.origin,a)),f=await PF(d);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Of.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x0(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const m=x0("",20);i.port1.start();const v=setTimeout(()=>{f(new Error("unsupported_event"))},r);l={messageChannel:i,onMessage(b){const T=b;if(T.data.eventId===m)switch(T.data.status){case"ack":clearTimeout(v),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(T.data.response);break;default:clearTimeout(v),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),i.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:t},[i.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(){return window}function VF(n){ws().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HC(){return typeof ws().WorkerGlobalScope<"u"&&typeof ws().importScripts=="function"}async function UF(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OF(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function jF(){return HC()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC="firebaseLocalStorageDb",FF=1,Zh="firebaseLocalStorage",zC="fbase_key";class Du{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function jf(n,e){return n.transaction([Zh],e?"readwrite":"readonly").objectStore(Zh)}function qF(){const n=indexedDB.deleteDatabase(GC);return new Du(n).toPromise()}function sy(){const n=indexedDB.open(GC,FF);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(Zh,{keyPath:zC})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(Zh)?e(r):(r.close(),await qF(),e(await sy()))})})}async function Iw(n,e,t){const r=jf(n,!0).put({[zC]:e,value:t});return new Du(r).toPromise()}async function BF(n,e){const t=jf(n,!1).get(e),r=await new Du(t).toPromise();return r===void 0?null:r.value}function Rw(n,e){const t=jf(n,!0).delete(e);return new Du(t).toPromise()}const HF=800,GF=3;class $C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await sy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>GF)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return HC()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Of._getInstance(jF()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,r;if(this.activeServiceWorker=await UF(),!this.activeServiceWorker)return;this.sender=new LF(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OF()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await sy();return await Iw(e,Qh,"1"),await Rw(e,Qh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Iw(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>BF(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Rw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const a=jf(i,!1).getAll();return new Du(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:a}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(a)&&(this.notifyListeners(i,a),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HF)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}$C.type="LOCAL";const zF=$C;new Ru(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $F(n,e){return e?si(e):(Pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0 extends VC{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function JF(n){return CF(n.auth,new _0(n),n.bypassAuthState)}function YF(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),NF(t,new _0(n),n.bypassAuthState)}async function KF(n){const{auth:e,user:t}=n;return Pe(t,e,"internal-error"),AF(t,new _0(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t,r,i,a=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JF;case"linkViaPopup":case"linkViaRedirect":return KF;case"reauthViaPopup":case"reauthViaRedirect":return YF;default:hi(this.auth,"internal-error")}}resolve(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){fi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=new Ru(2e3,1e4);class dl extends JC{constructor(e,t,r,i,a){super(e,t,i,a),this.provider=r,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pe(e,this.auth,"internal-error"),e}async onExecution(){fi(this.filter.length===1,"Popup operations only handle one event");const e=x0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Es(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Es(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if((r=(t=this.authWindow)==null?void 0:t.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Es(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XF.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF="pendingRedirect",Ah=new Map;class QF extends JC{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Ah.get(this.auth._key());if(!e){try{const r=await ZF(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Ah.set(this.auth._key(),e)}return this.bypassAuthState||Ah.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ZF(n,e){const t=n8(e),r=t8(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}function e8(n,e){Ah.set(n._key(),e)}function t8(n){return si(n._redirectPersistence)}function n8(n){return Sh(WF,n.config.apiKey,n.name)}async function r8(n,e,t=!1){if(Gr(n.app))return Promise.reject(ea(n));const r=y0(n),i=$F(r,e),l=await new QF(r,i,t).execute();return l&&!t&&(delete l.user._redirectEventId,await r._persistUserIfCurrent(l.user),await r._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s8=600*1e3;class i8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!o8(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!YC(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";t.onError(Es(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=s8&&this.cachedEventUids.clear(),this.cachedEventUids.has(kw(e))}saveEventToCache(e){this.cachedEventUids.add(kw(e)),this.lastProcessedEventTime=Date.now()}}function kw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function YC({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function o8(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return YC(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8(n,e={}){return ql(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,c8=/^https?/;async function u8(n){if(n.config.emulator)return;const{authorizedDomains:e}=await a8(n);for(const t of e)try{if(d8(t))return}catch{}hi(n,"unauthorized-domain")}function d8(n){const e=ny(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===r}if(!c8.test(t))return!1;if(l8.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8=new Ru(3e4,6e4);function Dw(){const n=ws().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function f8(n){return new Promise((e,t)=>{var i,a,l;function r(){Dw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Dw(),t(Es(n,"network-request-failed"))},timeout:h8.get()})}if((a=(i=ws().gapi)==null?void 0:i.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=ws().gapi)!=null&&l.load)r();else{const d=xF("iframefcb");return ws()[d]=()=>{gapi.load?r():t(Es(n,"network-request-failed"))},yF(`${vF()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw Nh=null,e})}let Nh=null;function m8(n){return Nh=Nh||f8(n),Nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8=new Ru(5e3,15e3),g8="__/auth/iframe",y8="emulator/auth/iframe",v8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},x8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _8(n){const e=n.config;Pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?f0(e,y8):`https://${n.config.authDomain}/${g8}`,r={apiKey:e.apiKey,appName:n.name,v:da},i=x8.get(n.config.apiHost);i&&(r.eid=i);const a=n._getFrameworks();return a.length&&(r.fw=a.join(",")),`${t}?${Eu(r).slice(1)}`}async function b8(n){const e=await m8(n),t=ws().gapi;return Pe(t,n,"internal-error"),e.open({where:document.body,url:_8(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:v8,dontclear:!0},r=>new Promise(async(i,a)=>{await r.restyle({setHideOnLeave:!1});const l=Es(n,"network-request-failed"),d=ws().setTimeout(()=>{a(l)},p8.get());function f(){ws().clearTimeout(d),i(r)}r.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E8=500,w8=600,S8="_blank",A8="http://localhost";class Mw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N8(n,e,t,r=E8,i=w8){const a=Math.max((window.screen.availHeight-i)/2,0).toString(),l=Math.max((window.screen.availWidth-r)/2,0).toString();let d="";const f={...T8,width:r.toString(),height:i.toString(),top:a,left:l},m=Cn().toLowerCase();t&&(d=CC(m)?S8:t),AC(m)&&(e=e||A8,f.scrollbars="yes");const v=Object.entries(f).reduce((T,[S,I])=>`${T}${S}=${I},`,"");if(cF(m)&&d!=="_self")return C8(e||"",d),new Mw(null);const b=window.open(e||"",d,v);Pe(b,n,"popup-blocked");try{b.focus()}catch{}return new Mw(b)}function C8(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8="__/auth/handler",R8="emulator/auth/handler",k8=encodeURIComponent("fac");async function Pw(n,e,t,r,i,a){Pe(n.config.authDomain,n,"auth-domain-config-required"),Pe(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:da,eventId:i};if(e instanceof UC){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",dO(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,b]of Object.entries({}))l[v]=b}if(e instanceof ku){const v=e.getScopes().filter(b=>b!=="");v.length>0&&(l.scopes=v.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const v of Object.keys(d))d[v]===void 0&&delete d[v];const f=await n._getAppCheckToken(),m=f?`#${k8}=${encodeURIComponent(f)}`:"";return`${D8(n)}?${Eu(d).slice(1)}${m}`}function D8({config:n}){return n.emulator?f0(n,R8):`https://${n.authDomain}/${I8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ag="webStorageSupport";class M8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BC,this._completeRedirectFn=r8,this._overrideRedirectResult=e8}async _openPopup(e,t,r,i){var l;fi((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await Pw(e,t,r,ny(),i);return N8(e,a,x0())}async _openRedirect(e,t,r,i){await this._originValidation(e);const a=await Pw(e,t,r,ny(),i);return VF(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:a}=this.eventManagers[t];return i?Promise.resolve(i):(fi(a,"If manager is not set, promise should be"),a)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await b8(e),r=new i8(e);return t.register("authEvent",i=>(Pe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ag,{type:ag},i=>{var l;const a=(l=i==null?void 0:i[0])==null?void 0:l[ag];a!==void 0&&t(!!a),hi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=u8(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MC()||NC()||g0()}}const P8=M8;var Lw="@firebase/auth",Vw="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V8(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function U8(n){Kr(new kr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=r.options;Pe(l&&!l.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PC(n)},m=new pF(r,i,a,f);return bF(m,t),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Kr(new kr("auth-internal",e=>{const t=y0(e.getProvider("auth").getImmediate());return(r=>new L8(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yn(Lw,Vw,V8(n)),Yn(Lw,Vw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O8=300,j8=AA("authIdTokenMaxAge")||O8;let Uw=null;const F8=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>j8)return;const i=t==null?void 0:t.token;Uw!==i&&(Uw=i,await fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function q8(n=Cy()){const e=Pl(n,"auth");if(e.isInitialized())return e.getImmediate();const t=_F(n,{popupRedirectResolver:P8,persistence:[zF,MF,BC]}),r=AA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(r,location.origin);if(location.origin===a.origin){const l=F8(a.toString());RF(t,l,()=>l(t.currentUser)),IF(t,d=>l(d))}}const i=EA("auth");return i&&TF(t,`http://${i}`),t}function B8(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}gF({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const a=Es("internal-error");a.customData=i,t(a)},r.type="text/javascript",r.charset="UTF-8",B8().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});U8("Browser");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="firebasestorage.googleapis.com",H8="storageBucket",G8=120*1e3,z8=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends Mr{constructor(e,t,r=0){super(lg(e),`Firebase Storage: ${t} (${lg(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rs.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lg(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var As;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(As||(As={}));function lg(n){return"storage/"+n}function $8(){const n="An unknown error occurred, please check the error payload for server response.";return new Rs(As.UNKNOWN,n)}function J8(){return new Rs(As.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Y8(){return new Rs(As.CANCELED,"User canceled the upload/download.")}function K8(n){return new Rs(As.INVALID_URL,"Invalid URL '"+n+"'.")}function X8(n){return new Rs(As.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function Ow(n){return new Rs(As.INVALID_ARGUMENT,n)}function XC(){return new Rs(As.APP_DELETED,"The Firebase app was deleted.")}function W8(n){return new Rs(As.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=$r.makeFromUrl(e,t)}catch{return new $r(e,"")}if(r.path==="")return r;throw X8(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)";function a(Q){Q.path.charAt(Q.path.length-1)==="/"&&(Q.path_=Q.path_.slice(0,-1))}const l="(/(.*))?$",d=new RegExp("^gs://"+i+l,"i"),f={bucket:1,path:3};function m(Q){Q.path_=decodeURIComponent(Q.path)}const v="v[A-Za-z0-9_]+",b=t.replace(/[.]/g,"\\."),T="(/([^?#]*).*)?$",S=new RegExp(`^https?://${b}/${v}/b/${i}/o${T}`,"i"),I={bucket:1,path:3},D=t===KC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,N="([^?#]*)",U=new RegExp(`^https?://${D}/${i}/${N}`,"i"),F=[{regex:d,indices:f,postModify:a},{regex:S,indices:I,postModify:m},{regex:U,indices:{bucket:1,path:2},postModify:m}];for(let Q=0;Q<F.length;Q++){const J=F[Q],re=J.regex.exec(e);if(re){const k=re[J.indices.bucket];let M=re[J.indices.path];M||(M=""),r=new $r(k,M),J.postModify(r);break}}if(r==null)throw K8(e);return r}}class Q8{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function f(){return d===2}let m=!1;function v(...N){m||(m=!0,e.apply(null,N))}function b(N){i=setTimeout(()=>{i=null,n(S,f())},N)}function T(){a&&clearTimeout(a)}function S(N,...U){if(m){T();return}if(N){T(),v.call(null,N,...U);return}if(f()||l){T(),v.call(null,N,...U);return}r<64&&(r*=2);let F;d===1?(d=2,F=0):F=(r+Math.random())*1e3,b(F)}let I=!1;function D(N){I||(I=!0,T(),!m&&(i!==null?(N||(d=2),clearTimeout(i),b(0)):N||(d=1)))}return b(0),a=setTimeout(()=>{l=!0,D(!0)},t),D}function eq(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tq(n){return n!==void 0}function jw(n,e,t,r){if(r<e)throw Ow(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Ow(`Invalid value for '${n}'. Expected ${t} or less.`)}function nq(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const i=e(r)+"="+e(n[r]);t=t+i+"&"}return t=t.slice(0,-1),t}var ef;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(ef||(ef={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rq(n,e){const t=n>=500&&n<600,i=[408,429].indexOf(n)!==-1,a=e.indexOf(n)!==-1;return t||i||a}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sq{constructor(e,t,r,i,a,l,d,f,m,v,b,T=!0,S=!1){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=f,this.timeout_=m,this.progressCallback_=v,this.connectionFactory_=b,this.retry=T,this.isUsingEmulator=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((I,D)=>{this.resolve_=I,this.reject_=D,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new hh(!1,null,!0));return}const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{const f=d.loaded,m=d.lengthComputable?d.total:-1;this.progressCallback_!==null&&this.progressCallback_(f,m)};this.progressCallback_!==null&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===ef.NO_ERROR,f=a.getStatus();if(!d||rq(f,this.additionalRetryCodes_)&&this.retry){const v=a.getErrorCode()===ef.ABORT;r(!1,new hh(!1,null,v));return}const m=this.successCodes_.indexOf(f)!==-1;r(!0,new hh(m,a))})},t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());tq(f)?a(f):a()}catch(f){l(f)}else if(d!==null){const f=$8();f.serverResponse=d.getErrorText(),this.errorCallback_?l(this.errorCallback_(d,f)):l(f)}else if(i.canceled){const f=this.appDelete_?XC():Y8();l(f)}else{const f=J8();l(f)}};this.canceled_?t(!1,new hh(!1,null,!0)):this.backoffId_=Z8(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&eq(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class hh{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function iq(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function oq(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function aq(n,e){e&&(n["X-Firebase-GMPID"]=e)}function lq(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function cq(n,e,t,r,i,a,l=!0,d=!1){const f=nq(n.urlParams),m=n.url+f,v=Object.assign({},n.headers);return aq(v,e),iq(v,t),oq(v,a),lq(v,r),new sq(m,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l,d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function dq(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf{constructor(e,t){this._service=e,t instanceof $r?this._location=t:this._location=$r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new tf(e,t)}get root(){const e=new $r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dq(this._location.path)}get storage(){return this._service}get parent(){const e=uq(this._location.path);if(e===null)return null;const t=new $r(this._location.bucket,e);return new tf(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw W8(e)}}function Fw(n,e){const t=e==null?void 0:e[H8];return t==null?null:$r.makeFromBucketSpec(t,n)}function hq(n,e,t,r={}){n.host=`${e}:${t}`;const i=ca(e);i&&(Sy(`https://${n.host}/b`),Ay("Storage",!0)),n._isUsingEmulator=!0,n._protocol=i?"https":"http";const{mockUserToken:a}=r;a&&(n._overrideAuthToken=typeof a=="string"?a:NA(a,n.app.options.projectId))}class fq{constructor(e,t,r,i,a,l=!1){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._isUsingEmulator=l,this._bucket=null,this._host=KC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=G8,this._maxUploadRetryTime=z8,this._requests=new Set,i!=null?this._bucket=$r.makeFromBucketSpec(i,this._host):this._bucket=Fw(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=$r.makeFromBucketSpec(this._url,e):this._bucket=Fw(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){jw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(Gr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tf(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new Q8(XC());{const l=cq(e,this._appId,r,i,t,this._firebaseVersion,a,this._isUsingEmulator);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}async makeRequestWithTokens(e,t){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,i).getPromise()}}const qw="@firebase/storage",Bw="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WC="storage";function mq(n=Cy(),e){n=nn(n);const r=Pl(n,WC).getImmediate({identifier:e}),i=wA("storage");return i&&pq(r,...i),r}function pq(n,e,t,r={}){hq(n,e,t,r)}function gq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new fq(t,r,i,e,da)}function yq(){Kr(new kr(WC,gq,"PUBLIC").setMultipleInstances(!0)),Yn(qw,Bw,""),Yn(qw,Bw,"esm2020")}yq();const QC="@firebase/installations",b0="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=1e4,e1=`w:${b0}`,t1="FIS_v2",vq="https://firebaseinstallations.googleapis.com/v1",xq=3600*1e3,_q="installations",bq="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tq={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},sa=new ua(_q,bq,Tq);function n1(n){return n instanceof Mr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1({projectId:n}){return`${vq}/projects/${n}/installations`}function s1(n){return{token:n.token,requestStatus:2,expiresIn:wq(n.expiresIn),creationTime:Date.now()}}async function i1(n,e){const r=(await e.json()).error;return sa.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function o1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Eq(n,{refreshToken:e}){const t=o1(n);return t.append("Authorization",Sq(e)),t}async function a1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function wq(n){return Number(n.replace("s","000"))}function Sq(n){return`${t1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aq({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=r1(n),i=o1(n),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const l={fid:t,authVersion:t1,appId:n.appId,sdkVersion:e1},d={method:"POST",headers:i,body:JSON.stringify(l)},f=await a1(()=>fetch(r,d));if(f.ok){const m=await f.json();return{fid:m.fid||t,registrationStatus:2,refreshToken:m.refreshToken,authToken:s1(m.authToken)}}else throw await i1("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nq(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cq=/^[cdef][\w-]{21}$/,iy="";function Iq(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=Rq(n);return Cq.test(t)?t:iy}catch{return iy}}function Rq(n){return Nq(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c1=new Map;function u1(n,e){const t=Ff(n);d1(t,e),kq(t,e)}function d1(n,e){const t=c1.get(n);if(t)for(const r of t)r(e)}function kq(n,e){const t=Dq();t&&t.postMessage({key:n,fid:e}),Mq()}let Wo=null;function Dq(){return!Wo&&"BroadcastChannel"in self&&(Wo=new BroadcastChannel("[Firebase] FID Change"),Wo.onmessage=n=>{d1(n.data.key,n.data.fid)}),Wo}function Mq(){c1.size===0&&Wo&&(Wo.close(),Wo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pq="firebase-installations-database",Lq=1,ia="firebase-installations-store";let cg=null;function T0(){return cg||(cg=MA(Pq,Lq,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(ia)}}})),cg}async function nf(n,e){const t=Ff(n),i=(await T0()).transaction(ia,"readwrite"),a=i.objectStore(ia),l=await a.get(t);return await a.put(e,t),await i.done,(!l||l.fid!==e.fid)&&u1(n,e.fid),e}async function h1(n){const e=Ff(n),r=(await T0()).transaction(ia,"readwrite");await r.objectStore(ia).delete(e),await r.done}async function qf(n,e){const t=Ff(n),i=(await T0()).transaction(ia,"readwrite"),a=i.objectStore(ia),l=await a.get(t),d=e(l);return d===void 0?await a.delete(t):await a.put(d,t),await i.done,d&&(!l||l.fid!==d.fid)&&u1(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E0(n){let e;const t=await qf(n.appConfig,r=>{const i=Vq(r),a=Uq(n,i);return e=a.registrationPromise,a.installationEntry});return t.fid===iy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function Vq(n){const e=n||{fid:Iq(),registrationStatus:0};return f1(e)}function Uq(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(sa.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Oq(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:jq(n)}:{installationEntry:e}}async function Oq(n,e){try{const t=await Aq(n,e);return nf(n.appConfig,t)}catch(t){throw n1(t)&&t.customData.serverCode===409?await h1(n.appConfig):await nf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function jq(n){let e=await Hw(n.appConfig);for(;e.registrationStatus===1;)await l1(100),e=await Hw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await E0(n);return r||t}return e}function Hw(n){return qf(n,e=>{if(!e)throw sa.create("installation-not-found");return f1(e)})}function f1(n){return Fq(n)?{fid:n.fid,registrationStatus:0}:n}function Fq(n){return n.registrationStatus===1&&n.registrationTime+ZC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qq({appConfig:n,heartbeatServiceProvider:e},t){const r=Bq(n,t),i=Eq(n,t),a=e.getImmediate({optional:!0});if(a){const m=await a.getHeartbeatsHeader();m&&i.append("x-firebase-client",m)}const l={installation:{sdkVersion:e1,appId:n.appId}},d={method:"POST",headers:i,body:JSON.stringify(l)},f=await a1(()=>fetch(r,d));if(f.ok){const m=await f.json();return s1(m)}else throw await i1("Generate Auth Token",f)}function Bq(n,{fid:e}){return`${r1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w0(n,e=!1){let t;const r=await qf(n.appConfig,a=>{if(!m1(a))throw sa.create("not-registered");const l=a.authToken;if(!e&&zq(l))return a;if(l.requestStatus===1)return t=Hq(n,e),a;{if(!navigator.onLine)throw sa.create("app-offline");const d=Jq(a);return t=Gq(n,d),d}});return t?await t:r.authToken}async function Hq(n,e){let t=await Gw(n.appConfig);for(;t.authToken.requestStatus===1;)await l1(100),t=await Gw(n.appConfig);const r=t.authToken;return r.requestStatus===0?w0(n,e):r}function Gw(n){return qf(n,e=>{if(!m1(e))throw sa.create("not-registered");const t=e.authToken;return Yq(t)?{...e,authToken:{requestStatus:0}}:e})}async function Gq(n,e){try{const t=await qq(n,e),r={...e,authToken:t};return await nf(n.appConfig,r),t}catch(t){if(n1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await h1(n.appConfig);else{const r={...e,authToken:{requestStatus:0}};await nf(n.appConfig,r)}throw t}}function m1(n){return n!==void 0&&n.registrationStatus===2}function zq(n){return n.requestStatus===2&&!$q(n)}function $q(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+xq}function Jq(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function Yq(n){return n.requestStatus===1&&n.requestTime+ZC<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kq(n){const e=n,{installationEntry:t,registrationPromise:r}=await E0(e);return r?r.catch(console.error):w0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xq(n,e=!1){const t=n;return await Wq(t),(await w0(t,e)).token}async function Wq(n){const{registrationPromise:e}=await E0(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qq(n){if(!n||!n.options)throw ug("App Configuration");if(!n.name)throw ug("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ug(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ug(n){return sa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="installations",Zq="installations-internal",eB=n=>{const e=n.getProvider("app").getImmediate(),t=Qq(e),r=Pl(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},tB=n=>{const e=n.getProvider("app").getImmediate(),t=Pl(e,p1).getImmediate();return{getId:()=>Kq(t),getToken:i=>Xq(t,i)}};function nB(){Kr(new kr(p1,eB,"PUBLIC")),Kr(new kr(Zq,tB,"PRIVATE"))}nB();Yn(QC,b0);Yn(QC,b0,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zw="analytics",rB="firebase_id",sB="origin",iB=60*1e3,oB="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",S0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn=new xf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aB={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ir=new ua("analytics","Analytics",aB);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lB(n){if(!n.startsWith(S0)){const e=Ir.create("invalid-gtag-resource",{gtagURL:n});return Dn.warn(e.message),""}return n}function g1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function cB(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function uB(n,e){const t=cB("firebase-js-sdk-policy",{createScriptURL:lB}),r=document.createElement("script"),i=`${S0}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function dB(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function hB(n,e,t,r,i,a){const l=r[i];try{if(l)await e[l];else{const f=(await g1(t)).find(m=>m.measurementId===i);f&&await e[f.appId]}}catch(d){Dn.error(d)}n("config",i,a)}async function fB(n,e,t,r,i){try{let a=[];if(i&&i.send_to){let l=i.send_to;Array.isArray(l)||(l=[l]);const d=await g1(t);for(const f of l){const m=d.find(b=>b.measurementId===f),v=m&&e[m.appId];if(v)a.push(v);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",r,i||{})}catch(a){Dn.error(a)}}function mB(n,e,t,r){async function i(a,...l){try{if(a==="event"){const[d,f]=l;await fB(n,e,t,d,f)}else if(a==="config"){const[d,f]=l;await hB(n,e,t,r,d,f)}else if(a==="consent"){const[d,f]=l;n("consent",d,f)}else if(a==="get"){const[d,f,m]=l;n("get",d,f,m)}else if(a==="set"){const[d]=l;n("set",d)}else n(a,...l)}catch(d){Dn.error(d)}}return i}function pB(n,e,t,r,i){let a=function(...l){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(a=window[i]),window[i]=mB(a,n,e,t),{gtagCore:a,wrappedGtag:window[i]}}function gB(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(S0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yB=30,vB=1e3;class xB{constructor(e={},t=vB){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const y1=new xB;function _B(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function bB(n){var l;const{appId:e,apiKey:t}=n,r={method:"GET",headers:_B(t)},i=oB.replace("{app-id}",e),a=await fetch(i,r);if(a.status!==200&&a.status!==304){let d="";try{const f=await a.json();(l=f.error)!=null&&l.message&&(d=f.error.message)}catch{}throw Ir.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function TB(n,e=y1,t){const{appId:r,apiKey:i,measurementId:a}=n.options;if(!r)throw Ir.create("no-app-id");if(!i){if(a)return{measurementId:a,appId:r};throw Ir.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new SB;return setTimeout(async()=>{d.abort()},iB),v1({appId:r,apiKey:i,measurementId:a},l,d,e)}async function v1(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=y1){var d;const{appId:a,measurementId:l}=n;try{await EB(r,e)}catch(f){if(l)return Dn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:l};throw f}try{const f=await bB(n);return i.deleteThrottleMetadata(a),f}catch(f){const m=f;if(!wB(m)){if(i.deleteThrottleMetadata(a),l)return Dn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:a,measurementId:l};throw f}const v=Number((d=m==null?void 0:m.customData)==null?void 0:d.httpStatus)===503?cE(t,i.intervalMillis,yB):cE(t,i.intervalMillis),b={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return i.setThrottleMetadata(a,b),Dn.debug(`Calling attemptFetch again in ${v} millis`),v1(n,b,r,i)}}function EB(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),a=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(a),r(Ir.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wB(n){if(!(n instanceof Mr)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class SB{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function AB(n,e,t,r,i){if(i&&i.global){n("event",t,r);return}else{const a=await e,l={...r,send_to:a};n("event",t,l)}}async function NB(n,e,t,r){if(r&&r.global){const i={};for(const a of Object.keys(t))i[`user_properties.${a}`]=t[a];return n("set",i),Promise.resolve()}else{const i=await e;n("config",i,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CB(){if(IA())try{await RA()}catch(n){return Dn.warn(Ir.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Dn.warn(Ir.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function IB(n,e,t,r,i,a,l){const d=TB(n);d.then(T=>{t[T.measurementId]=T.appId,n.options.measurementId&&T.measurementId!==n.options.measurementId&&Dn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${T.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(T=>Dn.error(T)),e.push(d);const f=CB().then(T=>{if(T)return r.getId()}),[m,v]=await Promise.all([d,f]);gB(a)||uB(a,m.measurementId),i("js",new Date);const b=(l==null?void 0:l.config)??{};return b[sB]="firebase",b.update=!0,v!=null&&(b[rB]=v),i("config",m.measurementId,b),m.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RB{constructor(e){this.app=e}_delete(){return delete vl[this.app.options.appId],Promise.resolve()}}let vl={},$w=[];const Jw={};let dg="dataLayer",kB="gtag",Yw,A0,Kw=!1;function DB(){const n=[];if(CA()&&n.push("This is a browser extension environment."),aO()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Ir.create("invalid-analytics-context",{errorInfo:e});Dn.warn(t.message)}}function MB(n,e,t){DB();const r=n.options.appId;if(!r)throw Ir.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Dn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ir.create("no-api-key");if(vl[r]!=null)throw Ir.create("already-exists",{id:r});if(!Kw){dB(dg);const{wrappedGtag:a,gtagCore:l}=pB(vl,$w,Jw,dg,kB);A0=a,Yw=l,Kw=!0}return vl[r]=IB(n,$w,Jw,e,Yw,dg,t),new RB(n)}function PB(n,e,t){n=nn(n),NB(A0,vl[n.app.options.appId],e,t).catch(r=>Dn.error(r))}function LB(n,e,t,r){n=nn(n),AB(A0,vl[n.app.options.appId],e,t,r).catch(i=>Dn.error(i))}const Xw="@firebase/analytics",Ww="0.10.19";function VB(){Kr(new kr(zw,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return MB(r,i,t)},"PUBLIC")),Kr(new kr("analytics-internal",n,"PRIVATE")),Yn(Xw,Ww),Yn(Xw,Ww,"esm2020");function n(e){try{const t=e.getProvider(zw).getImmediate();return{logEvent:(r,i,a)=>LB(t,r,i,a),setUserProperties:(r,i)=>PB(t,r,i)}}catch(t){throw Ir.create("interop-component-reg-failed",{reason:t})}}}VB();const UB={apiKey:"your_api_key_here",authDomain:"your_project.firebaseapp.com",projectId:"your_project_id",storageBucket:"your_project.appspot.com",messagingSenderId:"your_sender_id",appId:"your_app_id",measurementId:"your_measurement_id"},N0=PA(UB),fh=bj(N0);q8(N0);mq(N0);new ni;const au=class au{static async syncToCloud(){try{const e=await nt.getUnsyncedPrayers();if(e.length===0)return console.log(" No prayers to sync"),{uploaded:0,errors:0};const t=[];let r=0;for(const i of e)try{await this.uploadPrayerToCloud(i),t.push(i.id)}catch(a){console.error(`Failed to sync prayer ${i.id}:`,a),r++}return t.length>0&&await nt.markPrayersAsSynced(t),console.log(` Synced ${t.length} prayers to cloud (${r} errors)`),{uploaded:t.length,errors:r}}catch(e){return console.error("Failed to sync prayers to cloud:",e),{uploaded:0,errors:1}}}static async uploadPrayerToCloud(e){const t={authorId:e.authorId,authorName:e.isAnonymous?"Anonymous":e.authorName,churchId:e.churchId,content:e.content,category:e.category,isAnswered:e.isAnswered,isAnonymous:e.isAnonymous,isPublic:e.isPublic,createdAt:wt.fromMillis(e.createdAt),updatedAt:wt.fromMillis(e.updatedAt),prayedCount:0,prayedBy:[]};await Oj(ig(fh,this.COLLECTION_NAME),t)}static async fetchCommunityPrayers(e=50,t){try{const r=[uh("isPublic","==",!0),yw("createdAt","desc"),vw(e)];t&&r.splice(0,0,uh("churchId","==",t));const i=gw(ig(fh,this.COLLECTION_NAME),...r);return(await Vj(i)).docs.map(l=>({id:l.id,...l.data(),createdAt:l.data().createdAt,updatedAt:l.data().updatedAt}))}catch(r){return console.error("Failed to fetch community prayers:",r),[]}}static async addHeartToCloudPrayer(e,t){try{const r=lC(fh,this.COLLECTION_NAME,e);await Uj(r,{prayedCount:Bj(1),prayedBy:qj(t)}),console.log(` Added heart to cloud prayer ${e}`)}catch(r){throw console.error("Failed to add heart to cloud prayer:",r),r}}static startRealtimeSync(e,t){if(this.listener){console.log("Real-time sync already active");return}const r=[uh("isPublic","==",!0),yw("createdAt","desc"),vw(50)];t&&r.splice(0,0,uh("churchId","==",t));const i=gw(ig(fh,this.COLLECTION_NAME),...r);this.listener=jj(i,a=>{const l=a.docs.map(d=>({id:d.id,...d.data()}));console.log(` Real-time update: ${l.length} community prayers`),e(l)},a=>{console.error("Real-time sync error:",a)}),console.log(" Started real-time prayer sync")}static stopRealtimeSync(){this.listener&&(this.listener(),this.listener=null,console.log(" Stopped real-time prayer sync"))}static startAutoSync(e=5){if(this.syncInterval){console.log("Auto-sync already running");return}this.syncToCloud(),this.syncInterval=window.setInterval(()=>{console.log(" Auto-syncing prayers..."),this.syncToCloud()},e*60*1e3),console.log(` Started auto-sync (every ${e} minutes)`)}static stopAutoSync(){this.syncInterval&&(clearInterval(this.syncInterval),this.syncInterval=null,console.log(" Stopped auto-sync"))}static async getPrayerStats(e){try{const t=await nt.getMyPrayerRequests(e);return{totalPrayers:t.length,totalPrayedFor:t.reduce((r,i)=>r+i.prayedCount,0),answeredPrayers:t.filter(r=>r.isAnswered).length}}catch(t){return console.error("Failed to get prayer stats:",t),{totalPrayers:0,totalPrayedFor:0,answeredPrayers:0}}}static async mergeCloudAndLocalPrayers(e,t){try{const r=await nt.getAllPrayerRequests(),a=(await this.fetchCommunityPrayers(50,t)).filter(d=>d.authorId!==e).map(d=>({id:d.id,authorId:d.authorId,authorName:d.authorName,churchId:d.churchId,content:d.content,category:d.category,isAnswered:d.isAnswered,isAnonymous:d.isAnonymous,isPublic:d.isPublic,createdAt:d.createdAt.toMillis(),updatedAt:d.updatedAt.toMillis(),syncedToCloud:!0}));return[...r,...a].sort((d,f)=>f.createdAt-d.createdAt)}catch(r){return console.error("Failed to merge prayers:",r),await nt.getAllPrayerRequests()}}};au.COLLECTION_NAME="communityPrayers",au.syncInterval=null,au.listener=null;let eo=au;const Ns=Tu()(yf((n,e)=>({id:"user-1",name:"Alex Johnson",email:"alex.johnson@example.com",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80",role:"member",subscriptionTier:"free",churchId:"church-1",churchCode:"GRACE2024",churchName:"Grace Community Church",isAuthenticated:!0,updateUser:t=>n(r=>({...r,...t})),joinChurch:(t,r,i)=>n({churchCode:t,churchName:r,churchId:i,role:"member"}),leaveChurch:()=>n({churchCode:null,churchName:null,churchId:null,role:"guest"}),setRole:t=>n({role:t}),setSubscription:t=>n({subscriptionTier:t}),can:t=>O3(e().role,t),logout:()=>n({isAuthenticated:!1,role:"guest",churchId:null,churchCode:null,churchName:null})}),{name:"user-storage"})),OB=["Healing","Guidance","Family","Praise","Other"],jB=()=>{const{user:n}=Ns(),e=(n==null?void 0:n.id)||"guest",t=(n==null?void 0:n.name)||"Guest",[r,i]=j.useState([]),[a,l]=j.useState("community"),[d,f]=j.useState(!1),[m,v]=j.useState(new Set),[b,T]=j.useState(!0),[S,I]=j.useState(!1),[D,N]=j.useState(""),[U,B]=j.useState("Other"),[F,Q]=j.useState(!1),[J,re]=j.useState(!0);j.useEffect(()=>((async()=>{try{await nt.initialize(),await k(),((n==null?void 0:n.subscriptionTier)==="premium"||(n==null?void 0:n.subscriptionTier)==="basic")&&(eo.startAutoSync(5),eo.startRealtimeSync(()=>k(),n==null?void 0:n.churchId))}catch(ae){console.error("Failed to initialize prayer journal:",ae)}finally{T(!1)}})(),()=>{eo.stopAutoSync(),eo.stopRealtimeSync()}),[n]);const k=async()=>{try{const ae=(await nt.getAllPrayerRequests()).map(_e=>({..._e,isMine:_e.authorId===e}));for(const _e of ae){const he=await nt.getHeartsForPrayer(_e.id);_e.heartsDetails=he,he.some(qe=>qe.userId===e)&&v(qe=>new Set(qe).add(_e.id))}i(ae)}catch(G){console.error("Failed to load prayers:",G)}},M=async()=>{I(!0);try{const G=await eo.syncToCloud();G.uploaded>0?(alert(` Synced ${G.uploaded} prayer${G.uploaded>1?"s":""} to community`),await k()):alert("All prayers are up to date!")}catch{alert("Failed to sync prayers. Please try again.")}finally{I(!1)}},R=a==="community"?r:r.filter(G=>G.isMine),L=async()=>{if(D.trim())try{const G=Date.now(),ae={id:`${G}-${Math.random()}`,authorId:e,authorName:F?"Anonymous":t,churchId:n==null?void 0:n.churchId,content:D,category:U,isAnswered:!1,isAnonymous:F,isPublic:J,createdAt:G,updatedAt:G,syncedToCloud:!1};await nt.addPrayerRequest(ae),J&&((n==null?void 0:n.subscriptionTier)==="premium"||(n==null?void 0:n.subscriptionTier)==="basic")&&eo.syncToCloud(),N(""),B("Other"),Q(!1),re(!0),f(!1),l("personal"),await k()}catch(G){console.error("Failed to add prayer:",G),alert("Failed to add prayer. Please try again.")}},O=async G=>{if(!m.has(G))try{const ae={id:`${Date.now()}-${Math.random()}`,prayerRequestId:G,userId:e,userName:t,userAvatar:n==null?void 0:n.avatar,createdAt:Date.now()};await nt.addPrayerHeart(ae),v(_e=>new Set(_e).add(G)),await k()}catch(ae){console.error("Failed to add prayer heart:",ae)}},H=async G=>{try{const ae=r.find(_e=>_e.id===G);if(!ae)return;await nt.updatePrayerRequest(G,{isAnswered:!ae.isAnswered}),await k()}catch(ae){console.error("Failed to update prayer:",ae)}},V=async G=>{if(confirm("Delete this prayer request?"))try{await nt.deletePrayerRequest(G),await k()}catch(ae){console.error("Failed to delete prayer:",ae)}},Ae=G=>{switch(G){case"Healing":return"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300";case"Praise":return"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300";case"Guidance":return"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300";default:return"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}},$e=G=>{const _e=Date.now()-G,he=Math.floor(_e/1e3),qe=Math.floor(he/60),z=Math.floor(qe/60),ie=Math.floor(z/24);return he<60?"Just now":qe<60?`${qe}m ago`:z<24?`${z}h ago`:ie<7?`${ie}d ago`:new Date(G).toLocaleDateString()};return h.jsxs("div",{className:"h-full flex flex-col relative bg-background-light dark:bg-background-dark",children:[h.jsxs("div",{className:"bg-white dark:bg-[#101a22] pt-4 pb-0 px-4 sticky top-0 z-10 shadow-sm",children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Prayer Journal"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Carry each others burdens."})]}),h.jsxs("div",{className:"flex gap-2",children:[((n==null?void 0:n.subscriptionTier)==="premium"||(n==null?void 0:n.subscriptionTier)==="basic")&&h.jsx("button",{onClick:M,disabled:S,className:"w-10 h-10 rounded-full bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600 dark:text-green-400 hover:bg-green-100 dark:hover:bg-green-900/30 transition-colors disabled:opacity-50",title:"Sync to cloud",children:h.jsx("span",{className:`material-symbols-outlined text-[20px] ${S?"animate-spin":""}`,children:S?"sync":"cloud_upload"})}),h.jsx("div",{className:"w-10 h-10 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-600 dark:text-red-400",children:h.jsx(Yp,{className:"w-5 h-5 fill-current"})}),h.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-indigo-600 dark:text-indigo-400 text-[20px]",children:"hands_home_work"})})]})]}),h.jsxs("div",{className:"flex gap-6 border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>l("community"),className:`pb-3 text-sm font-bold border-b-2 transition-colors ${a==="community"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"Community"}),h.jsx("button",{onClick:()=>l("personal"),className:`pb-3 text-sm font-bold border-b-2 transition-colors ${a==="personal"?"border-indigo-500 text-indigo-600 dark:text-indigo-400":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:"My Journal"})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto px-4 py-4 pb-24 space-y-4",children:b?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-indigo-500 border-t-transparent rounded-full animate-spin mb-4"}),h.jsx("p",{className:"text-gray-500 font-medium",children:"Loading prayers..."})]}):R.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[h.jsx(Yp,{className:"w-16 h-16 text-gray-300 mb-4"}),h.jsx("p",{className:"text-gray-500 font-medium",children:"No prayers found in this view."})]}):R.map(G=>h.jsxs("div",{className:`bg-white dark:bg-card-dark p-5 rounded-2xl shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border transition-all ${G.isAnswered?"border-green-200 dark:border-green-900/50 bg-green-50/30 dark:bg-green-900/10":"border-slate-100 dark:border-slate-800"}`,children:[h.jsxs("div",{className:"flex justify-between items-start mb-3",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold shadow-sm ${G.isAnonymous?"bg-slate-100 dark:bg-slate-700 text-slate-500":"bg-gradient-to-br from-indigo-500 to-blue-600 text-white"}`,children:G.isAnonymous?h.jsx(T3,{className:"w-5 h-5"}):G.authorName[0]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"font-bold text-slate-800 dark:text-white",children:G.authorName}),G.isAnswered&&h.jsxs("span",{className:"flex items-center gap-1 text-[10px] uppercase font-bold text-green-600 bg-green-100 dark:bg-green-900/40 dark:text-green-400 px-1.5 py-0.5 rounded-full",children:[h.jsx(ZT,{className:"w-3 h-3"})," Answered"]})]}),h.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[h.jsx("span",{className:"text-xs text-slate-400",children:$e(G.createdAt)}),h.jsx("span",{className:"text-[6px] text-slate-300",children:""}),h.jsx("span",{className:`text-[10px] font-medium px-1.5 rounded ${Ae(G.category)}`,children:G.category||"General"})]})]})]}),G.isMine?h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:()=>H(G.id),className:`p-2 rounded-full transition-colors ${G.isAnswered?"bg-green-500 text-white shadow-md":"bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-green-600"}`,title:"Mark as Answered",children:h.jsx(ZT,{className:"w-5 h-5"})}),h.jsx("button",{onClick:()=>V(G.id),className:"p-2 rounded-full bg-slate-100 dark:bg-slate-800 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",title:"Delete Request",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"delete"})})]}):h.jsx("button",{onClick:()=>O(G.id),className:`p-2 rounded-full transition-all active:scale-90 ${m.has(G.id)?"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400":"bg-slate-50 dark:bg-slate-800 text-slate-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20"}`,children:h.jsx(Yp,{className:`w-5 h-5 ${m.has(G.id)?"fill-current":""}`})})]}),h.jsx("p",{className:`text-sm leading-relaxed mb-4 ${G.isAnswered?"text-slate-600 dark:text-slate-300":"text-slate-700 dark:text-slate-200"}`,children:G.content}),h.jsx("div",{className:"flex items-center gap-4 border-t border-slate-50 dark:border-slate-800 pt-3",children:G.heartsDetails&&G.heartsDetails.length>0?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex -space-x-2",title:G.heartsDetails.map(ae=>ae.userName).join(", "),children:[G.heartsDetails.slice(0,3).map(ae=>h.jsx("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-card-dark bg-gradient-to-br from-red-400 to-pink-500 flex items-center justify-center text-[10px] font-bold text-white shadow-sm",title:ae.userName,children:ae.userName[0].toUpperCase()},ae.id)),G.heartsDetails.length>3&&h.jsxs("div",{className:"w-7 h-7 rounded-full border-2 border-white dark:border-card-dark bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-[9px] font-bold text-slate-600 dark:text-slate-300 shadow-sm",children:["+",G.heartsDetails.length-3]})]}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:[G.heartsDetails.length," ",G.heartsDetails.length===1?"person":"people"," prayed"]}),h.jsxs("div",{className:"text-[10px] text-slate-400 dark:text-slate-500",children:[G.heartsDetails.slice(0,2).map(ae=>ae.userName).join(", "),G.heartsDetails.length>2&&` and ${G.heartsDetails.length-2} more`]})]})]}):h.jsx("span",{className:"text-xs text-slate-400 dark:text-slate-500",children:"No one has prayed yet. Be the first! "})})]},G.id))}),h.jsx("button",{onClick:()=>f(!0),className:"fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-blue-600 text-white rounded-2xl shadow-lg shadow-blue-300/50 flex items-center justify-center transition-transform active:scale-95 z-20",children:h.jsx(Ey,{className:"w-8 h-8"})}),d&&h.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center sm:p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:()=>f(!1)}),h.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1e293b] rounded-t-3xl sm:rounded-3xl shadow-2xl animate-slideUp overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"New Prayer Request"}),h.jsx("button",{onClick:()=>f(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),h.jsxs("div",{className:"p-6 space-y-6 overflow-y-auto",children:[h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Category"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:OB.map(G=>h.jsx("button",{onClick:()=>B(G),className:`px-4 py-2 rounded-xl text-sm font-bold transition-all ${U===G?"bg-primary text-white shadow-md scale-105":"bg-gray-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 hover:bg-gray-200 dark:hover:bg-slate-700"}`,children:G},G))})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Request"}),h.jsx("textarea",{value:D,onChange:G=>N(G.target.value),placeholder:"Share what's on your heart...",className:"w-full h-32 p-4 bg-gray-50 dark:bg-slate-800 rounded-2xl border-none focus:ring-2 focus:ring-primary text-slate-900 dark:text-white resize-none placeholder-slate-400",autoFocus:!0})]}),h.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-slate-800 rounded-2xl cursor-pointer",onClick:()=>Q(!F),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${F?"bg-slate-200 dark:bg-slate-700 text-slate-600":"bg-blue-100 dark:bg-blue-900/30 text-primary"}`,children:F?h.jsx(t3,{className:"w-5 h-5"}):h.jsx(XU,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:F?"Post Anonymously":"Public Post"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:F?"Your name will be hidden":"Visible to community"})]})]}),h.jsx("div",{className:`w-12 h-7 rounded-full transition-colors relative ${F?"bg-slate-400":"bg-primary"}`,children:h.jsx("div",{className:`absolute top-1 w-5 h-5 bg-white rounded-full shadow-sm transition-all ${F?"left-6":"left-1"}`})})]})]}),h.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-[#1e293b] pb-safe",children:h.jsx("button",{onClick:L,disabled:!D.trim(),className:"w-full py-4 bg-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-2xl shadow-lg shadow-blue-200 dark:shadow-none transition-all active:scale-[0.98]",children:"Share Prayer Request"})})]})]})]})},FB=()=>{const n=xn(),{user:e}=Ns(),[t,r]=j.useState([]),[i,a]=j.useState([]),[l,d]=j.useState(!0),[f,m]=j.useState(""),[v,b]=j.useState("desc"),[T,S]=j.useState(null),[I,D]=j.useState(""),[N,U]=j.useState(null),[B,F]=j.useState({}),[Q,J]=j.useState(!1),[re,k]=j.useState(new Set),[M,R]=j.useState(!1),[L,O]=j.useState(null),[H,V]=j.useState(!1);j.useEffect(()=>{Ae()},[]),j.useEffect(()=>{$e()},[t,f,v]);const Ae=async()=>{try{d(!0),await nt.initialize();const ge=(await nt.getAllVerseData()).filter(De=>De.note&&De.note.trim()!=="");r(ge)}catch(de){console.error("Failed to load notes:",de)}finally{d(!1)}},$e=()=>{let de=[...t];if(f.trim()){const ge=f.toLowerCase();de=de.filter(De=>De.note.toLowerCase().includes(ge)||De.book.toLowerCase().includes(ge)||`${De.book} ${De.chapter}:${De.verse}`.toLowerCase().includes(ge))}de.sort((ge,De)=>{const jt=ge.updatedAt||ge.createdAt,Gt=De.updatedAt||De.createdAt;return v==="desc"?Gt-jt:jt-Gt}),a(de)},G=async de=>{if(confirm("Delete this note?"))try{const ge={...de,note:""};await nt.saveVerseData(ge),await Ae()}catch(ge){console.error("Failed to delete note:",ge),alert("Failed to delete note")}},ae=de=>{S(de),D(de.note)},_e=async()=>{if(T)try{const de={...T,note:I,updatedAt:Date.now()};await nt.saveVerseData(de),S(null),D(""),await Ae()}catch(de){console.error("Failed to save note:",de),alert("Failed to save note")}},he=async de=>{if(!(e!=null&&e.subscriptionTier)||e.subscriptionTier==="free"){alert("AI summarization is available for Premium and Basic subscribers only. Please upgrade your subscription.");return}try{U(de.id);const ge=await Ph.summarizeText(de.note);F(De=>({...De,[de.id]:ge}))}catch(ge){console.error("Failed to summarize note:",ge),alert("Failed to generate summary")}finally{U(null)}},qe=()=>{J(!Q),k(new Set)},z=de=>{const ge=new Set(re);ge.has(de)?ge.delete(de):ge.add(de),k(ge)},ie=async()=>{if(re.size===0){alert("Please select at least one note to summarize");return}if(!(e!=null&&e.subscriptionTier)||e.subscriptionTier==="free"){alert("AI summarization is available for Premium and Basic subscribers only. Please upgrade your subscription.");return}try{R(!0);const ge=t.filter(jt=>re.has(jt.id)).map(jt=>`${jt.book} ${jt.chapter}:${jt.verse}
${jt.note}`).join(`

---

`),De=await Ph.summarizeText(ge);O(De),V(!0)}catch(de){console.error("Failed to summarize notes:",de),alert("Failed to generate summary")}finally{R(!1)}},pe=async()=>{if(L)try{const de=Date.now(),ge={id:`summary-${de}`,book:"Summary",chapter:0,verse:0,note:`AI Summary of ${re.size} notes:

${L}`,highlight:"yellow",bookmarked:!1,createdAt:de,updatedAt:de};await nt.saveVerseData(ge),V(!1),O(null),k(new Set),J(!1),await Ae(),alert("Summary saved as a new note!")}catch(de){console.error("Failed to save summary:",de),alert("Failed to save summary")}},ve=()=>{V(!1),O(null),k(new Set),J(!1)},ke=de=>{n(`/bible?book=${de.book}&chapter=${de.chapter}&verse=${de.verse}`)},Le=de=>{const ge=new Date(de),jt=new Date().getTime()-ge.getTime(),Gt=Math.floor(jt/(1e3*60*60*24));return Gt===0?"Today":Gt===1?"Yesterday":Gt<7?`${Gt} days ago`:ge.toLocaleDateString()};return h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark",children:[h.jsx("div",{className:"bg-white dark:bg-[#101a22] sticky top-0 z-10 shadow-sm",children:h.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-4",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:"Bible Notes"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:Q&&re.size>0?`${re.size} selected`:`${i.length} ${i.length===1?"note":"notes"}`})]}),h.jsxs("div",{className:"flex gap-2",children:[((e==null?void 0:e.subscriptionTier)==="premium"||(e==null?void 0:e.subscriptionTier)==="basic")&&h.jsx("button",{onClick:qe,className:`px-3 py-2 rounded-xl font-medium text-sm transition-colors ${Q?"bg-primary text-white":"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:Q?"Cancel":"Select"}),h.jsx("button",{onClick:()=>b(de=>de==="desc"?"asc":"desc"),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",title:`Sort ${v==="desc"?"oldest first":"newest first"}`,children:v==="desc"?h.jsx(AU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"}):h.jsx(RU,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(d3,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),h.jsx("input",{type:"text",placeholder:"Search notes or references...",value:f,onChange:de=>m(de.target.value),className:"w-full pl-10 pr-4 py-2 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary"})]}),Q&&re.size>0&&h.jsxs("button",{onClick:ie,disabled:M,className:"w-full mt-3 py-3 px-4 rounded-xl bg-yellow-500 hover:bg-yellow-600 text-white font-semibold flex items-center justify-center gap-2 transition-colors disabled:opacity-50",children:[h.jsx(Yc,{className:`w-5 h-5 ${M?"animate-pulse":""}`}),M?"Summarizing...":`Summarize ${re.size} ${re.size===1?"Note":"Notes"}`]})]})}),h.jsx("div",{className:"max-w-4xl mx-auto px-4 py-6",children:l?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[h.jsx("div",{className:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),h.jsx("p",{className:"text-gray-500 font-medium",children:"Loading notes..."})]}):i.length===0?h.jsxs("div",{className:"flex flex-col items-center justify-center py-20 opacity-50",children:[h.jsx(Jp,{className:"w-16 h-16 text-gray-300 mb-4"}),h.jsx("p",{className:"text-gray-500 font-medium text-center",children:f?"No notes found matching your search":"No notes yet. Start adding notes to your Bible verses!"})]}):h.jsx("div",{className:"space-y-4",children:i.map(de=>h.jsxs("div",{className:`bg-white dark:bg-card-dark rounded-2xl border p-5 shadow-sm hover:shadow-md transition-all ${re.has(de.id)?"border-primary ring-2 ring-primary/20":"border-gray-200 dark:border-gray-700"}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-3",children:[h.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[Q&&h.jsx("button",{onClick:()=>z(de.id),className:"mt-1 flex-shrink-0",children:re.has(de.id)?h.jsx(g3,{className:"w-5 h-5 text-primary"}):h.jsx(yA,{className:"w-5 h-5 text-gray-400"})}),h.jsxs("div",{className:"flex-1",children:[h.jsxs("button",{onClick:()=>!Q&&ke(de),className:"text-primary font-bold hover:underline flex items-center gap-2 group",disabled:Q,children:[h.jsx(Jp,{className:"w-4 h-4 group-hover:text-primary-dark"}),de.book," ",de.chapter,":",de.verse]}),h.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Le(de.updatedAt||de.createdAt)})]})]}),!Q&&h.jsxs("div",{className:"flex gap-1",children:[((e==null?void 0:e.subscriptionTier)==="premium"||(e==null?void 0:e.subscriptionTier)==="basic")&&h.jsx("button",{onClick:()=>he(de),disabled:N===de.id,className:"p-2 rounded-full hover:bg-yellow-50 dark:hover:bg-yellow-900/20 text-yellow-600 dark:text-yellow-400 transition-colors disabled:opacity-50",title:"AI Summarize",children:h.jsx(Yc,{className:`w-4 h-4 ${N===de.id?"animate-pulse":""}`})}),h.jsx("button",{onClick:()=>ae(de),className:"p-2 rounded-full hover:bg-blue-50 dark:hover:bg-blue-900/20 text-blue-600 dark:text-blue-400 transition-colors",title:"Edit note",children:h.jsx(Rg,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>G(de),className:"p-2 rounded-full hover:bg-red-50 dark:hover:bg-red-900/20 text-red-600 dark:text-red-400 transition-colors",title:"Delete note",children:h.jsx(kg,{className:"w-4 h-4"})})]})]}),h.jsx("p",{className:"text-gray-700 dark:text-gray-200 leading-relaxed whitespace-pre-wrap mb-3",children:de.note}),B[de.id]&&h.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.jsx(Yc,{className:"w-4 h-4 text-yellow-600 dark:text-yellow-400"}),h.jsx("span",{className:"text-xs font-bold uppercase text-yellow-700 dark:text-yellow-400",children:"AI Summary"})]}),h.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 leading-relaxed",children:B[de.id]})]}),de.highlight&&h.jsx("div",{className:"mt-3",children:h.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${de.highlight==="yellow"?"bg-yellow-100 text-yellow-700 dark:bg-yellow-900/30 dark:text-yellow-300":de.highlight==="green"?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-300":de.highlight==="blue"?"bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300":de.highlight==="red"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-300":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-300"}`,children:[h.jsx("span",{className:"w-2 h-2 rounded-full",style:{backgroundColor:de.highlight}}),"Highlighted"]})})]},de.id))})}),T&&h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50",onClick:()=>S(null),children:h.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 rounded-t-3xl shadow-2xl max-h-[80vh] animate-slideUp",onClick:de=>de.stopPropagation(),children:[h.jsx("div",{className:"flex justify-center pt-3 pb-2",children:h.jsx("div",{className:"w-12 h-1.5 bg-gray-300 dark:bg-gray-600 rounded-full"})}),h.jsxs("div",{className:"px-6 pb-6 overflow-y-auto max-h-[calc(80vh-40px)]",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Edit Note"}),h.jsxs("p",{className:"text-sm text-primary font-semibold",children:[T.book," ",T.chapter,":",T.verse]})]}),h.jsx("button",{onClick:()=>S(null),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[20px] text-gray-500",children:"close"})})]}),h.jsx("textarea",{value:I,onChange:de=>D(de.target.value),placeholder:"Write your note here...",className:"w-full h-48 p-4 rounded-xl border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary resize-none",autoFocus:!0}),h.jsxs("div",{className:"flex gap-3 mt-4",children:[h.jsx("button",{onClick:_e,className:"flex-1 py-3 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-primary-dark transition-colors",children:"Save Changes"}),h.jsx("button",{onClick:()=>S(null),className:"px-4 py-3 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"})]})]})]})}),H&&L&&h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:ve,children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-2xl max-w-2xl w-full p-6 animate-fadeIn",onClick:de=>de.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-yellow-100 dark:bg-yellow-900/30 flex items-center justify-center",children:h.jsx(Yc,{className:"w-6 h-6 text-yellow-600 dark:text-yellow-400"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"AI Summary Generated"}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Summary of ",re.size," ",re.size===1?"note":"notes"]})]})]}),h.jsx("div",{className:"p-4 rounded-xl bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 mb-6",children:h.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed whitespace-pre-wrap",children:L})}),h.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"Would you like to save this summary as a new note?"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:pe,className:"flex-1 py-3 px-4 rounded-xl bg-primary text-white font-semibold hover:bg-primary-dark transition-colors flex items-center justify-center gap-2",children:[h.jsx(Jp,{className:"w-4 h-4"}),"Save as Note"]}),h.jsx("button",{onClick:ve,className:"flex-1 py-3 px-4 rounded-xl border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 font-semibold hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Discard"})]})]})})]})},qB=[{id:"3",title:"Sunday Worship Service",date:"Sunday, Oct 14",time:"10:00 AM - 11:30 AM",location:"Main Sanctuary",type:"Service",description:"Join us for our weekly Sunday worship service. We will have a time of praise and worship followed by a sermon from Pastor John. Children's church is available for ages 4-10.",image:"https://images.unsplash.com/photo-1438232992991-995b7058bbb3?q=80&w=2073&auto=format&fit=crop"},{id:"2",title:"Youth Group Meetup",date:"Wednesday, Oct 17",time:"6:00 PM - 8:00 PM",location:"The Loft",type:"Youth",description:"Calling all high schoolers! Come hang out for games, pizza, and a short devotional. Bring a friend!",image:"https://images.unsplash.com/photo-1523580494863-6f3031224c94?q=80&w=2070&auto=format&fit=crop"},{id:"1",title:"Wednesday Night Bible Study",date:"Wednesday, Oct 24",time:"7:00 PM",location:"Main Hall",type:"Community",description:"Deep dive into the book of Romans. Open to all adults.",image:"https://images.unsplash.com/photo-1507434965515-61970f2bd7c6?q=80&w=2070&auto=format&fit=crop"},{id:"ann-1",title:"Church Picnic",date:"Saturday, Oct 20",time:"2:00 PM - 5:00 PM",location:"Central Park",type:"Community",description:"Join us for a fun afternoon of food, games, and fellowship at Central Park. We'll be at Pavilion 4 near the playground. Burgers and hot dogs will be provided; please bring a side dish or dessert to share! Don't forget your lawn chairs.",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCTKwmERj_lTYjmJ3cUDiA8SAfubaFghrFdxKPxEBGJn3DSoDRWz56l2FOk_S9RwLdlMl8uiGGV25DilweThaldzga77peCjkJgXNKVOtffFB1r-dBYLgesXxy_Vd1vxibk_8SMm0snwEdXF9oZMLSKy-le-ICoDcGKU10D0dq4vxVOyZargc5U6L2DE9Yx-X8sgGZdmpeclMyN5cHCxIO3Z-XAXXv8ck4zP15nd7-gRFe_y1ro9Fw0q-KaUnhaDJCHm55FgRLuSzz1"},{id:"ann-2",title:'New Series: "Hope"',date:"Starts Sunday, Oct 21",time:"9:00 AM & 11:00 AM",location:"Main Sanctuary",type:"Series",description:"In a world that often feels chaotic, where do we find our anchor? Join us for our new 4-week sermon series exploring the book of 1 Peter. We will discover how to cultivate a living hope that endures through every season of life.",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCMDXbQHPRD32aAhzMX9M6ggDIWKTG-lSWcZ5yOibyVuDw2MCGL1ZnV2q5ik8JeDcHz748_iopXNTaf2nhXmda4NX7Fv5ILAc1IUUuXyZhZemJjuAE1XHZ_kn4SjHva669YS28DchYGtxBj9lYMr9VlVLSjQ2Y9-XvEc30rOJZX3kmWOUr6fwLuW4qxc6s1xeuAGD4Et8VoiOtLNk7EabX2JunqIDsYzwst3E1ZBoHaOg2bzc82576THMIpB84zUifS_7yogi72a8FI"},{id:"ann-3",title:"Food Drive",date:"Entire Month of October",time:"Drop-off: 9AM - 5PM (Mon-Fri)",location:"Church Lobby",type:"Outreach",description:"We are partnering with the local food bank to feed families in our community this Thanksgiving. We are collecting canned goods, dry pasta, rice, and non-perishable items. Donation bins are located in the main lobby.",image:"https://images.unsplash.com/photo-1544427920-c49ccfb85579?q=80&w=1000&auto=format&fit=crop"}],BB=()=>{const{id:n}=mS(),e=xn(),[t,r]=j.useState(!1),[i,a]=j.useState(!1),l=qB.find(f=>f.id===n),d=()=>{a(!0),setTimeout(()=>{r(f=>!f),a(!1)},800)};return l?h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-24 relative z-50",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>e(-1),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1 truncate",children:l.title}),h.jsx("button",{className:"p-2 -mr-2 text-slate-400 hover:text-primary transition-colors",children:h.jsx("span",{className:"material-symbols-outlined",children:"share"})})]}),h.jsxs("div",{className:"w-full h-64 bg-slate-200 relative",children:[h.jsx("img",{src:l.image,alt:l.title,className:"w-full h-full object-cover"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),h.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[h.jsx("span",{className:"inline-block px-3 py-1 rounded-full bg-primary text-white text-xs font-bold uppercase tracking-wider mb-2 shadow-sm",children:l.type}),h.jsx("h2",{className:"text-2xl font-bold text-white shadow-sm leading-tight",children:l.title})]})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{className:"flex flex-col gap-4 bg-white dark:bg-card-dark p-4 rounded-2xl shadow-sm border border-slate-100 dark:border-slate-800",children:[h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-primary shrink-0",children:h.jsx("span",{className:"material-symbols-outlined",children:"calendar_month"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:l.date}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:l.time})]})]}),h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-500 shrink-0",children:h.jsx("span",{className:"material-symbols-outlined",children:"location_on"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white",children:l.location}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"123 Church St, Cityville"})]})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white mb-2",children:"About"}),h.jsx("p",{className:"text-slate-600 dark:text-slate-300 leading-relaxed text-[15px]",children:l.description})]}),h.jsx("div",{className:"h-40 bg-slate-100 dark:bg-slate-800 rounded-xl flex items-center justify-center border border-slate-200 dark:border-slate-700",children:h.jsxs("div",{className:"flex flex-col items-center gap-2 text-slate-400",children:[h.jsx("span",{className:"material-symbols-outlined text-3xl",children:"map"}),h.jsx("span",{className:"text-xs font-medium",children:"Map View"})]})})]}),h.jsxs("div",{className:"fixed bottom-0 left-0 w-full p-4 bg-white dark:bg-[#101a22] border-t border-slate-100 dark:border-slate-800 pb-safe z-20",children:[h.jsx("button",{onClick:d,disabled:i,className:`w-full py-4 font-bold rounded-xl shadow-lg transition-all active:scale-95 flex items-center justify-center gap-2
                ${t?"bg-green-100 text-green-700 hover:bg-green-200 border-2 border-green-500/20":"bg-primary hover:bg-blue-600 text-white"}
             `,children:i?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"material-symbols-outlined text-[20px] animate-spin",children:"refresh"}),h.jsx("span",{children:"Updating..."})]}):t?h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"material-symbols-outlined text-[20px] filled",children:"check_circle"}),h.jsx("span",{children:"RSVP Confirmed"})]}):h.jsxs(h.Fragment,{children:[h.jsx("span",{children:"RSVP Now"}),h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"arrow_forward"})]})}),t&&!i&&h.jsx("p",{className:"text-center mt-2 text-xs text-slate-400 animate-fadeIn",children:"Tap again to cancel"})]})]}):h.jsxs("div",{className:"flex flex-col items-center justify-center h-screen p-4 bg-background-light dark:bg-background-dark",children:[h.jsx("h2",{className:"text-xl font-bold mb-2 text-slate-800 dark:text-white",children:"Event not found"}),h.jsx("button",{onClick:()=>e(-1),className:"text-primary font-medium",children:"Go Back"})]})},HB=()=>{const n=xn(),{name:e,email:t,avatar:r,updateUser:i}=Ns(),[a,l]=j.useState(!1),[d,f]=j.useState(e),[m,v]=j.useState(t),[b,T]=j.useState(!1),S=j.useRef(null),I=()=>{T(!0),setTimeout(()=>{i({name:d,email:m}),l(!1),T(!1)},800)},D=()=>{f(e),v(t),l(!1)},N=()=>{a&&S.current&&S.current.click()};return h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>n(-1),className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1 text-center pr-8",children:"My Profile"})]}),h.jsxs("div",{className:"p-6 flex flex-col items-center",children:[h.jsxs("div",{className:"relative mb-8 group",children:[h.jsxs("div",{className:`w-32 h-32 rounded-full overflow-hidden border-4 border-white dark:border-slate-800 shadow-xl ${a?"cursor-pointer":""}`,onClick:N,children:[h.jsx("img",{src:r,alt:"Profile",className:"w-full h-full object-cover"}),a&&h.jsx("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-white text-3xl",children:"camera_alt"})})]}),h.jsx("input",{type:"file",ref:S,className:"hidden"}),!a&&h.jsx("div",{className:"absolute bottom-1 right-1 w-8 h-8 bg-primary rounded-full flex items-center justify-center border-2 border-white dark:border-slate-800 text-white shadow-sm",children:h.jsx("span",{className:"material-symbols-outlined text-[16px]",children:"verified"})})]}),h.jsxs("div",{className:"w-full max-w-md space-y-6 bg-white dark:bg-card-dark p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Full Name"}),a?h.jsx("input",{type:"text",value:d,onChange:U=>f(U.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white font-medium"}):h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:e})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold uppercase tracking-wider text-slate-400",children:"Email Address"}),a?h.jsx("input",{type:"email",value:m,onChange:U=>v(U.target.value),className:"w-full px-4 py-3 rounded-xl bg-gray-50 dark:bg-slate-800 border border-gray-200 dark:border-gray-700 focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white font-medium"}):h.jsx("div",{className:"flex items-center gap-3",children:h.jsx("p",{className:"text-base text-slate-600 dark:text-slate-300",children:t})})]})]}),h.jsxs("div",{className:"w-full max-w-md mt-8",children:[a?h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:D,className:"flex-1 py-3.5 rounded-xl bg-gray-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300 font-bold hover:bg-gray-200 dark:hover:bg-slate-700 transition-colors",children:"Cancel"}),h.jsxs("button",{onClick:I,disabled:b,className:"flex-1 py-3.5 rounded-xl bg-primary text-white font-bold hover:bg-blue-600 transition-colors flex items-center justify-center gap-2",children:[b&&h.jsx("span",{className:"material-symbols-outlined text-[18px] animate-spin",children:"refresh"}),b?"Saving...":"Save Changes"]})]}):h.jsx("button",{onClick:()=>l(!0),className:"w-full py-3.5 rounded-xl bg-white dark:bg-card-dark border border-gray-200 dark:border-gray-700 text-primary font-bold hover:bg-gray-50 dark:hover:bg-slate-800 transition-colors shadow-sm",children:"Edit Profile"}),!a&&h.jsx("button",{className:"w-full mt-4 py-3.5 rounded-xl text-red-500 font-medium hover:bg-red-50 dark:hover:bg-red-900/10 transition-colors text-sm",children:"Sign Out"})]})]})]})},GB=()=>{const n=xn(),{downloadedVersions:e,addDownloadedVersion:t,removeDownloadedVersion:r}=xA(),{role:i,subscriptionTier:a,churchName:l,can:d}=Ns(),[f,m]=j.useState({}),v=S=>{m(N=>({...N,[S]:0}));let I=0;const D=setInterval(()=>{I+=Math.floor(Math.random()*15)+5,I>=100&&(I=100,clearInterval(D),setTimeout(()=>{t(S),m(N=>{const U={...N};return delete U[S],U})},500)),m(N=>({...N,[S]:I}))},200)},b=S=>{confirm("Remove this version from offline storage?")&&r(S)},T=e.reduce((S,I)=>{const D=Zc.find(N=>N.id===I);return S+(D?parseFloat(D.size.split(" ")[0]):0)},0);return h.jsxs("div",{className:"bg-background-light dark:bg-background-dark min-h-screen pb-safe",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),n(-1)},className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1 text-center pr-8",children:"Settings"})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3 px-1",children:"Account"}),h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[h.jsxs(it,{to:"/subscription",onClick:()=>Qe.impact({style:ze.Light}),className:"p-4 flex items-center justify-between border-b border-gray-50 dark:border-gray-800",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-50 dark:bg-yellow-900/20 flex items-center justify-center text-yellow-600",children:h.jsx(gA,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium block",children:"Subscription"}),h.jsxs("span",{className:"text-xs text-slate-500 capitalize",children:[a," Plan"]})]})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/join-church",onClick:()=>Qe.impact({style:ze.Light}),className:"p-4 flex items-center justify-between border-b border-gray-50 dark:border-gray-800",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-primary",children:h.jsx(FU,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium block",children:"My Church"}),h.jsx("span",{className:"text-xs text-slate-500",children:l||"Not joined"})]})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/settings/backup",onClick:()=>Qe.impact({style:ze.Light}),className:"p-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600",children:h.jsx("span",{className:"material-symbols-outlined",children:"backup"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium block",children:"Backup & Restore"}),h.jsx("span",{className:"text-xs text-slate-500",children:"Export your notes and highlights"})]})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]})]})]}),d("manage_announcements")&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3 px-1",children:"Church Management"}),h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[h.jsxs(it,{to:"/admin",onClick:()=>Qe.impact({style:ze.Light}),className:"p-4 flex items-center justify-between border-b border-gray-50 dark:border-gray-800",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center text-indigo-600",children:h.jsx(Ig,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium block",children:"Dashboard"}),h.jsx("span",{className:"text-xs text-slate-500",children:"Manage announcements & events"})]})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]}),d("view_members")&&h.jsxs(it,{to:"/admin",onClick:()=>Qe.impact({style:ze.Light}),className:"p-4 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-green-50 dark:bg-green-900/20 flex items-center justify-center text-green-600",children:h.jsx(vA,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium block",children:"Members"}),h.jsx("span",{className:"text-xs text-slate-500",children:"View church members"})]})]}),h.jsx("span",{className:"material-symbols-outlined text-slate-400",children:"chevron_right"})]})]}),h.jsxs("div",{className:"mt-3 flex items-center gap-2 px-1",children:[h.jsx(f3,{className:"w-4 h-4 text-primary"}),h.jsxs("span",{className:"text-xs text-slate-500",children:["You are signed in as ",h.jsx("span",{className:"font-bold text-primary capitalize",children:i})]})]})]}),h.jsxs("div",{className:"bg-white dark:bg-card-dark p-6 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center text-primary",children:h.jsx("span",{className:"material-symbols-outlined",children:"cloud_download"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Offline Storage"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Manage your downloaded content"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between text-xs font-medium text-slate-600 dark:text-slate-300",children:[h.jsxs("span",{children:["Used: ",T.toFixed(1)," MB"]}),h.jsx("span",{children:"Available: 24 GB"})]}),h.jsx("div",{className:"h-2 w-full bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${Math.min(T/100*100,100)}%`}})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3 px-1",children:"Bible Versions"}),h.jsx("div",{className:"bg-white dark:bg-card-dark rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:Zc.map((S,I)=>{const D=e.includes(S.id),N=f[S.id]!==void 0,U=f[S.id]||0;return h.jsxs("div",{className:`p-4 flex items-center justify-between ${I!==Zc.length-1?"border-b border-gray-50 dark:border-gray-800":""}`,children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("h4",{className:"font-bold text-slate-900 dark:text-white",children:S.short}),D&&h.jsx("span",{className:"px-1.5 py-0.5 rounded text-[9px] font-bold bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400",children:"OFFLINE"})]}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:[S.name,"  ",S.size]})]}),h.jsx("div",{className:"w-32 flex justify-end",children:N?h.jsxs("div",{className:"w-full flex flex-col items-end gap-1",children:[h.jsxs("span",{className:"text-[10px] font-bold text-primary",children:[U,"%"]}),h.jsx("div",{className:"w-full h-1.5 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-primary transition-all duration-200",style:{width:`${U}%`}})})]}):D?h.jsx("button",{onClick:()=>b(S.id),className:"p-2 rounded-full text-slate-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 transition-all group",children:h.jsx("span",{className:"material-symbols-outlined filled group-hover:unfilled",children:"check_circle"})}):h.jsx("button",{onClick:()=>v(S.id),className:"p-2 rounded-full bg-gray-50 dark:bg-slate-800 text-primary hover:bg-primary hover:text-white transition-all shadow-sm",children:h.jsx("span",{className:"material-symbols-outlined",children:"download"})})})]},S.id)})})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3 px-1",children:"General"}),h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl shadow-sm border border-gray-100 dark:border-gray-800 overflow-hidden",children:[h.jsxs("div",{className:"p-4 flex items-center justify-between border-b border-gray-50 dark:border-gray-800",children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:"Dark Mode"}),h.jsx("button",{className:"w-12 h-6 bg-gray-200 dark:bg-primary rounded-full relative transition-colors",children:h.jsx("div",{className:"absolute right-1 top-1 w-4 h-4 bg-white rounded-full shadow-sm"})})]}),h.jsxs("div",{className:"p-4 flex items-center justify-between",children:[h.jsx("span",{className:"text-slate-700 dark:text-slate-200 font-medium",children:"Notifications"}),h.jsx("button",{className:"w-12 h-6 bg-primary rounded-full relative transition-colors",children:h.jsx("div",{className:"absolute right-1 top-1 w-4 h-4 bg-white rounded-full shadow-sm"})})]})]})]})]})]})};function zB(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return new Proxy({},{get(r,i){return(a,l,d)=>{const f=n.Capacitor.Plugins[t];if(f===void 0){d(new Error(`Capacitor plugin ${t} not found`));return}if(typeof f[i]!="function"){d(new Error(`Method ${i} not found in Capacitor plugin ${t}`));return}(async()=>{try{const m=await f[i](a);l(m)}catch(m){d(m)}})()}}})}})}function $B(n){n.CapacitorUtils.Synapse=new Proxy({},{get(e,t){return n.cordova.plugins[t]}})}function JB(n=!1){typeof window>"u"||(window.CapacitorUtils=window.CapacitorUtils||{},window.Capacitor!==void 0&&!n?zB(window):window.cordova!==void 0&&$B(window))}var rf;(function(n){n.Documents="DOCUMENTS",n.Data="DATA",n.Library="LIBRARY",n.Cache="CACHE",n.External="EXTERNAL",n.ExternalStorage="EXTERNAL_STORAGE",n.ExternalCache="EXTERNAL_CACHE",n.LibraryNoCloud="LIBRARY_NO_CLOUD",n.Temporary="TEMPORARY"})(rf||(rf={}));var sf;(function(n){n.UTF8="utf8",n.ASCII="ascii",n.UTF16="utf16"})(sf||(sf={}));const Qw=aa("Filesystem",{web:()=>cf(()=>import("./web-d2JyGGE9.js"),[]).then(n=>new n.FilesystemWeb)});JB();const YB=aa("Share",{web:()=>cf(()=>import("./web-CfisvdKj.js"),[]).then(n=>new n.ShareWeb)}),of=class of{static async exportData(){const e=localStorage.getItem("bible_user_data"),t=localStorage.getItem("bible_text_highlights"),r=localStorage.getItem("bible_chapter_notes");return{version:this.BACKUP_VERSION,exportDate:Date.now(),userData:e?JSON.parse(e):{},textHighlights:t?JSON.parse(t):[],chapterNotes:r?JSON.parse(r):[]}}static async importData(e){if(!e.version||!e.exportDate)throw new Error("Invalid backup file format");e.userData&&localStorage.setItem("bible_user_data",JSON.stringify(e.userData)),e.textHighlights&&localStorage.setItem("bible_text_highlights",JSON.stringify(e.textHighlights)),e.chapterNotes&&localStorage.setItem("bible_chapter_notes",JSON.stringify(e.chapterNotes))}static async saveToDevice(){try{const e=await this.exportData(),t=JSON.stringify(e,null,2),i=`biblenotelm_backup_${new Date().toISOString().replace(/[:.]/g,"-").split("T")[0]}.json`;if(_l.isNativePlatform())return{success:!0,path:(await Qw.writeFile({path:i,data:t,directory:rf.Documents,encoding:sf.UTF8})).uri};{const a=new Blob([t],{type:"application/json"}),l=URL.createObjectURL(a),d=document.createElement("a");return d.href=l,d.download=i,d.click(),URL.revokeObjectURL(l),{success:!0,path:i}}}catch(e){return console.error("Failed to save backup:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static async shareBackup(){try{const e=await this.exportData(),t=JSON.stringify(e,null,2),i=`biblenotelm_backup_${new Date().toISOString().replace(/[:.]/g,"-").split("T")[0]}.json`;if(_l.isNativePlatform()){const a=await Qw.writeFile({path:i,data:t,directory:rf.Cache,encoding:sf.UTF8});return await YB.share({title:"Bible Note LM Backup",text:"My Bible notes, highlights, and bookmarks",url:a.uri,dialogTitle:"Share backup to..."}),{success:!0}}else return await this.saveToDevice()}catch(e){return console.error("Failed to share backup:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}static async loadFromDevice(e){try{const t=JSON.parse(e);return await this.importData(t),{success:!0}}catch(t){return console.error("Failed to load backup:",t),{success:!1,error:t instanceof Error?t.message:"Invalid backup file"}}}static async getBackupStats(){var t,r;const e=await this.exportData();return{totalVerseData:Object.keys(e.userData||{}).length,totalHighlights:((t=e.textHighlights)==null?void 0:t.length)||0,totalChapterNotes:((r=e.chapterNotes)==null?void 0:r.length)||0,lastExportDate:e.exportDate}}static async clearAllData(){confirm("Are you sure you want to delete ALL your notes, highlights, and bookmarks? This cannot be undone!")&&(localStorage.removeItem("bible_user_data"),localStorage.removeItem("bible_text_highlights"),localStorage.removeItem("bible_chapter_notes"))}};of.BACKUP_VERSION="1.0.0",of.BACKUP_FILENAME="biblenotelm_backup.json";let Ko=of;const KB=()=>{const n=xn(),[e,t]=j.useState(!1),[r,i]=j.useState({totalVerseData:0,totalHighlights:0,totalChapterNotes:0}),[a,l]=j.useState(!1);j.useEffect(()=>{d()},[]);const d=async()=>{const T=await Ko.getBackupStats();i(T)},f=async()=>{t(!0);const T=await Ko.saveToDevice();t(!1),T.success?alert(` Backup saved successfully!

File: ${T.path}`):alert(` Failed to save backup: ${T.error}`)},m=async()=>{t(!0);const T=await Ko.shareBackup();t(!1),!T.success&&T.error&&alert(` Failed to share backup: ${T.error}`)},v=async T=>{var D;const S=(D=T.target.files)==null?void 0:D[0];if(!S)return;t(!0);const I=new FileReader;I.onload=async N=>{var F;const U=(F=N.target)==null?void 0:F.result,B=await Ko.loadFromDevice(U);B.success?(alert(` Backup restored successfully!

Please refresh the app to see your restored data.`),window.location.reload()):alert(` Failed to restore backup: ${B.error}`),t(!1)},I.onerror=()=>{alert(" Failed to read file"),t(!1)},I.readAsText(S)},b=async()=>{await Ko.clearAllData(),await d()};return h.jsxs("div",{className:"flex flex-col h-full bg-white dark:bg-[#101a22]",children:[h.jsx("header",{className:"sticky top-0 z-30 bg-white dark:bg-[#101a22] border-b border-gray-100 dark:border-gray-800 pt-safe",children:h.jsxs("div",{className:"flex items-center gap-3 px-4 h-16",children:[h.jsx("button",{onClick:()=>n(-1),className:"p-2 -ml-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-gray-600 dark:text-gray-300",children:"arrow_back"})}),h.jsx("h1",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Settings & Backup"})]})}),h.jsx("main",{className:"flex-1 overflow-y-auto",children:h.jsxs("div",{className:"max-w-2xl mx-auto p-6 space-y-6",children:[h.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/20 dark:to-blue-800/20 rounded-2xl p-6 border border-blue-200 dark:border-blue-700",children:[h.jsxs("h2",{className:"text-lg font-bold text-blue-900 dark:text-blue-100 mb-4 flex items-center gap-2",children:[h.jsx("span",{className:"material-symbols-outlined",children:"assessment"}),"Your Bible Study Data"]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:r.totalVerseData}),h.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Verse Notes"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:r.totalHighlights}),h.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Highlights"})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:r.totalChapterNotes}),h.jsx("div",{className:"text-xs text-blue-700 dark:text-blue-300 mt-1",children:"Chapter Notes"})]})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Backup & Restore"}),h.jsxs("div",{className:"space-y-3",children:[h.jsxs("button",{onClick:f,disabled:e,className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-green-600 dark:text-green-400",children:"download"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Export to Device"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Save backup file to your device"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs("button",{onClick:m,disabled:e,className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-blue-600 dark:text-blue-400",children:"share"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Share Backup"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Send to email, Drive, or other apps"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs("label",{className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors cursor-pointer",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-purple-100 dark:bg-purple-900/30 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-purple-600 dark:text-purple-400",children:"upload"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:"Import Backup"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Restore from backup file"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"}),h.jsx("input",{type:"file",accept:".json",onChange:v,className:"hidden",disabled:e})]})]})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Premium Features"}),h.jsx("div",{className:"bg-gradient-to-br from-amber-50 to-orange-100 dark:from-amber-900/20 dark:to-orange-800/20 rounded-2xl p-6 border border-amber-200 dark:border-amber-700",children:h.jsxs("div",{className:"flex items-start gap-4",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-amber-500 flex items-center justify-center flex-shrink-0",children:h.jsx("span",{className:"material-symbols-outlined text-white filled",children:"workspace_premium"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"font-bold text-amber-900 dark:text-amber-100 mb-2",children:"Automatic Cloud Sync"}),h.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200 mb-4",children:"Never lose your notes! Get automatic backup to Google Drive with version history and multi-device sync."}),h.jsx("button",{className:"px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white font-bold rounded-xl transition-colors shadow-sm",children:"Coming Soon"})]})]})})]}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider mb-3",children:"Danger Zone"}),h.jsxs("button",{onClick:b,className:"w-full flex items-center gap-4 p-4 bg-white dark:bg-gray-800 rounded-xl border-2 border-red-200 dark:border-red-800 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[h.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:h.jsx("span",{className:"material-symbols-outlined text-red-600 dark:text-red-400",children:"delete_forever"})}),h.jsxs("div",{className:"flex-1 text-left",children:[h.jsx("h3",{className:"font-bold text-red-600 dark:text-red-400",children:"Clear All Data"}),h.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Delete all notes, highlights, and bookmarks"})]})]})]})]})}),e&&h.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center",children:h.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 shadow-2xl",children:[h.jsx("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),h.jsx("p",{className:"text-slate-900 dark:text-white font-medium",children:"Processing..."})]})})]})},Zw={id:"church-1",name:"Grace Community Church",code:"GRACE2024",logo:"https://images.unsplash.com/photo-1438232992991-995b7058bbb3?w=200",address:"123 Faith Street, Hope City",adminIds:["user-1"],pastorIds:["pastor-1"],memberIds:["user-1","user-2","user-3"],createdAt:new Date().toISOString()},XB=[{id:"ann-1",churchId:"church-1",title:"Church Picnic",content:"Join us for our annual church picnic at Central Park. Food, games, and fellowship for the whole family!",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCTKwmERj_lTYjmJ3cUDiA8SAfubaFghrFdxKPxEBGJn3DSoDRWz56l2FOk_S9RwLdlMl8uiGGV25DilweThaldzga77peCjkJgXNKVOtffFB1r-dBYLgesXxy_Vd1vxibk_8SMm0snwEdXF9oZMLSKy-le-ICoDcGKU10D0dq4vxVOyZargc5U6L2DE9Yx-X8sgGZdmpeclMyN5cHCxIO3Z-XAXXv8ck4zP15nd7-gRFe_y1ro9Fw0q-KaUnhaDJCHm55FgRLuSzz1",category:"Community",startDate:"2025-01-04",endDate:"2025-01-04",isActive:!0,createdBy:"user-1",createdAt:new Date().toISOString()},{id:"ann-2",churchId:"church-1",title:'New Series: "Hope"',content:"Starting this Sunday, join Pastor James for a powerful new sermon series on finding hope in uncertain times.",image:"https://lh3.googleusercontent.com/aida-public/AB6AXuCMDXbQHPRD32aAhzMX9M6ggDIWKTG-lSWcZ5yOibyVuDw2MCGL1ZnV2q5ik8JeDcHz748_iopXNTaf2nhXmda4NX7Fv5ILAc1IUUuXyZhZemJjuAE1XHZ_kn4SjHva669YS28DchYGtxBj9lYMr9VlVLSjQ2Y9-XvEc30rOJZX3kmWOUr6fwLuW4qxc6s1xeuAGD4Et8VoiOtLNk7EabX2JunqIDsYzwst3E1ZBoHaOg2bzc82576THMIpB84zUifS_7yogi72a8FI",category:"Series",startDate:"2025-01-05",isActive:!0,createdBy:"pastor-1",createdAt:new Date().toISOString()},{id:"ann-3",churchId:"church-1",title:"Volunteer Signup",content:"We need volunteers for children's ministry. Training provided!",category:"General",startDate:"2025-01-01",isActive:!0,createdBy:"user-1",createdAt:new Date().toISOString()}],WB=[{id:"1",title:"Sunday Service",date:"Sun, Dec 29",time:"9:00 AM & 11:00 AM",location:"Main Sanctuary",type:"Service"},{id:"2",title:"Youth Group",date:"Wed, Jan 1",time:"7:00 PM",location:"Youth Center",type:"Youth"},{id:"3",title:"Community Outreach",date:"Sat, Jan 4",time:"10:00 AM",location:"Downtown",type:"Outreach"}],x1=Tu()(yf((n,e)=>({churches:[Zw],currentChurch:Zw,announcements:XB,events:WB,setCurrentChurch:t=>n({currentChurch:t}),createChurch:t=>{const r={...t,id:`church-${Date.now()}`,createdAt:new Date().toISOString()};return n(i=>({churches:[...i.churches,r],currentChurch:r})),r},updateChurch:(t,r)=>n(i=>{var a;return{churches:i.churches.map(l=>l.id===t?{...l,...r}:l),currentChurch:((a=i.currentChurch)==null?void 0:a.id)===t?{...i.currentChurch,...r}:i.currentChurch}}),addAnnouncement:t=>n(r=>({announcements:[{...t,id:`ann-${Date.now()}`,createdAt:new Date().toISOString()},...r.announcements]})),updateAnnouncement:(t,r)=>n(i=>({announcements:i.announcements.map(a=>a.id===t?{...a,...r}:a)})),deleteAnnouncement:t=>n(r=>({announcements:r.announcements.filter(i=>i.id!==t)})),toggleAnnouncementActive:t=>n(r=>({announcements:r.announcements.map(i=>i.id===t?{...i,isActive:!i.isActive}:i)})),addEvent:t=>n(r=>({events:[...r.events,{...t,id:`event-${Date.now()}`}]})),updateEvent:(t,r)=>n(i=>({events:i.events.map(a=>a.id===t?{...a,...r}:a)})),deleteEvent:t=>n(r=>({events:r.events.filter(i=>i.id!==t)})),validateChurchCode:t=>e().churches.find(r=>r.code.toUpperCase()===t.toUpperCase())||null}),{name:"church-storage"})),QB=["General","Community","Youth","Series","Urgent"],ZB=()=>{const n=xn(),{role:e,churchName:t,can:r}=Ns(),{announcements:i,events:a,currentChurch:l,addAnnouncement:d,updateAnnouncement:f,deleteAnnouncement:m,toggleAnnouncementActive:v,deleteEvent:b}=x1(),[T,S]=j.useState("announcements"),[I,D]=j.useState(!1),[N,U]=j.useState(null),[B,F]=j.useState(""),[Q,J]=j.useState(""),[re,k]=j.useState("General"),[M,R]=j.useState(""),[L,O]=j.useState(""),H=i.filter(he=>he.churchId===(l==null?void 0:l.id)),V=he=>{Qe.impact({style:ze.Light}),S(he)},Ae=()=>{Qe.impact({style:ze.Light}),U(null),F(""),J(""),k("General"),R(""),O(new Date().toISOString().split("T")[0]),D(!0)},$e=he=>{Qe.impact({style:ze.Light}),U(he),F(he.title),J(he.content),k(he.category),R(he.image||""),O(he.startDate),D(!0)},G=()=>{!B.trim()||!Q.trim()||(Qe.impact({style:ze.Medium}),N?f(N.id,{title:B,content:Q,category:re,image:M||void 0,startDate:L}):d({churchId:(l==null?void 0:l.id)||"",title:B,content:Q,category:re,image:M||void 0,startDate:L,isActive:!0,createdBy:"user-1"}),D(!1))},ae=he=>{confirm("Are you sure you want to delete this announcement?")&&(Qe.impact({style:ze.Medium}),m(he))},_e=he=>{Qe.impact({style:ze.Light}),v(he)};return r("manage_announcements")?h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark pb-24",children:[h.jsxs("div",{className:"sticky top-0 z-10 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsxs("div",{className:"flex items-center gap-3 p-4",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),n(-1)},className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Church Dashboard"}),h.jsx("p",{className:"text-xs text-slate-500",children:t})]}),h.jsx("span",{className:"px-2 py-1 bg-primary/10 text-primary text-xs font-bold rounded-full capitalize",children:e})]}),h.jsxs("div",{className:"flex px-4 gap-6 border-t border-gray-50 dark:border-gray-800",children:[h.jsxs("button",{onClick:()=>V("announcements"),className:`py-3 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="announcements"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[h.jsx(Ig,{className:"w-4 h-4"}),"Announcements"]}),h.jsxs("button",{onClick:()=>V("events"),className:`py-3 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="events"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[h.jsx(VU,{className:"w-4 h-4"}),"Events"]}),r("view_members")&&h.jsxs("button",{onClick:()=>V("members"),className:`py-3 text-sm font-bold border-b-2 transition-colors flex items-center gap-2 ${T==="members"?"border-primary text-primary":"border-transparent text-slate-500 hover:text-slate-700 dark:text-slate-400"}`,children:[h.jsx(vA,{className:"w-4 h-4"}),"Members"]})]})]}),h.jsxs("div",{className:"p-4",children:[T==="announcements"&&h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[h.jsxs("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:[h.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:H.filter(he=>he.isActive).length}),h.jsx("p",{className:"text-xs text-slate-500",children:"Active"})]}),h.jsxs("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:[h.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:H.length}),h.jsx("p",{className:"text-xs text-slate-500",children:"Total"})]})]}),h.jsxs("div",{className:"space-y-3",children:[H.map(he=>h.jsx("div",{className:`bg-white dark:bg-card-dark p-4 rounded-xl border transition-all ${he.isActive?"border-gray-100 dark:border-gray-800":"border-gray-200 dark:border-gray-700 opacity-60"}`,children:h.jsxs("div",{className:"flex items-start justify-between gap-3",children:[h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded ${he.category==="Urgent"?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-primary/10 text-primary"}`,children:he.category}),!he.isActive&&h.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded bg-gray-100 text-gray-500",children:"Hidden"})]}),h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:he.title}),h.jsx("p",{className:"text-sm text-slate-500 line-clamp-2 mt-1",children:he.content}),h.jsxs("p",{className:"text-xs text-slate-400 mt-2",children:["Starts: ",he.startDate]})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("button",{onClick:()=>_e(he.id),className:`p-2 rounded-lg transition-colors ${he.isActive?"bg-green-50 text-green-600 dark:bg-green-900/20":"bg-gray-100 text-gray-400 dark:bg-gray-800"}`,children:he.isActive?h.jsx(YU,{className:"w-4 h-4"}):h.jsx($U,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>$e(he),className:"p-2 rounded-lg bg-blue-50 text-primary dark:bg-blue-900/20",children:h.jsx(Rg,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>ae(he.id),className:"p-2 rounded-lg bg-red-50 text-red-600 dark:bg-red-900/20",children:h.jsx(kg,{className:"w-4 h-4"})})]})]})},he.id)),H.length===0&&h.jsxs("div",{className:"text-center py-12",children:[h.jsx(Ig,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),h.jsx("p",{className:"text-slate-500",children:"No announcements yet"})]})]})]}),T==="events"&&h.jsx("div",{className:"space-y-3",children:a.map(he=>h.jsx("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[10px] font-bold px-2 py-0.5 rounded bg-primary/10 text-primary mb-1 inline-block",children:he.type}),h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:he.title}),h.jsxs("p",{className:"text-sm text-slate-500",children:[he.date,"  ",he.time]}),h.jsx("p",{className:"text-xs text-slate-400",children:he.location})]}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{className:"p-2 rounded-lg bg-blue-50 text-primary dark:bg-blue-900/20",children:h.jsx(Rg,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>b(he.id),className:"p-2 rounded-lg bg-red-50 text-red-600 dark:bg-red-900/20",children:h.jsx(kg,{className:"w-4 h-4"})})]})]})},he.id))}),T==="members"&&h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:[h.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:(l==null?void 0:l.memberIds.length)||0}),h.jsx("p",{className:"text-sm text-slate-500",children:"Total Members"})]}),h.jsxs("div",{className:"bg-white dark:bg-card-dark p-4 rounded-xl border border-gray-100 dark:border-gray-800",children:[h.jsx("p",{className:"text-sm font-bold text-slate-900 dark:text-white mb-2",children:"Church Code"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("code",{className:"flex-1 px-3 py-2 bg-gray-100 dark:bg-slate-800 rounded-lg font-mono text-primary",children:l==null?void 0:l.code}),h.jsx("button",{onClick:()=>{navigator.clipboard.writeText((l==null?void 0:l.code)||""),Qe.impact({style:ze.Light})},className:"p-2 bg-primary text-white rounded-lg",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"content_copy"})})]}),h.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Share this code with members to join your church"})]})]})]}),T==="announcements"&&h.jsx("button",{onClick:Ae,className:"fixed bottom-24 right-4 w-14 h-14 bg-primary hover:bg-blue-600 text-white rounded-2xl shadow-lg shadow-blue-300/50 flex items-center justify-center transition-transform active:scale-95 z-20",children:h.jsx(Ey,{className:"w-8 h-8"})}),I&&h.jsxs("div",{className:"fixed inset-0 z-[60] flex items-end sm:items-center justify-center sm:p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm animate-fadeIn",onClick:()=>D(!1)}),h.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-[#1e293b] rounded-t-3xl sm:rounded-3xl shadow-2xl animate-slideUp overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-bold text-slate-900 dark:text-white",children:N?"Edit Announcement":"New Announcement"}),h.jsx("button",{onClick:()=>D(!1),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:h.jsx("span",{className:"material-symbols-outlined text-slate-500",children:"close"})})]}),h.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Title"}),h.jsx("input",{type:"text",value:B,onChange:he=>F(he.target.value),placeholder:"Announcement title...",className:"w-full mt-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-primary text-slate-900 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Category"}),h.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:QB.map(he=>h.jsx("button",{onClick:()=>k(he),className:`px-3 py-1.5 rounded-lg text-sm font-bold transition-all ${re===he?"bg-primary text-white":"bg-gray-100 dark:bg-slate-800 text-slate-600 dark:text-slate-300"}`,children:he},he))})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Content"}),h.jsx("textarea",{value:Q,onChange:he=>J(he.target.value),placeholder:"Write your announcement...",className:"w-full mt-2 h-24 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-primary text-slate-900 dark:text-white resize-none"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Image URL (optional)"}),h.jsx("input",{type:"url",value:M,onChange:he=>R(he.target.value),placeholder:"https://...",className:"w-full mt-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-primary text-slate-900 dark:text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider",children:"Start Date"}),h.jsx("input",{type:"date",value:L,onChange:he=>O(he.target.value),className:"w-full mt-2 p-3 bg-gray-50 dark:bg-slate-800 rounded-xl border-none focus:ring-2 focus:ring-primary text-slate-900 dark:text-white"})]})]}),h.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-white dark:bg-[#1e293b] pb-safe",children:h.jsx("button",{onClick:G,disabled:!B.trim()||!Q.trim(),className:"w-full py-4 bg-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-2xl shadow-lg shadow-blue-200 dark:shadow-none transition-all active:scale-[0.98]",children:N?"Save Changes":"Create Announcement"})})]})]})]}):h.jsx("div",{className:"min-h-screen bg-background-light dark:bg-background-dark flex items-center justify-center p-4",children:h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"material-symbols-outlined text-6xl text-gray-300 mb-4",children:"lock"}),h.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:"Access Denied"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-4",children:"You don't have permission to access the dashboard."}),h.jsx("button",{onClick:()=>n("/"),className:"px-6 py-3 bg-primary text-white font-bold rounded-xl",children:"Go Home"})]})})},e7=()=>{const n=xn(),{joinChurch:e,churchId:t,churchName:r,leaveChurch:i}=Ns(),{validateChurchCode:a}=x1(),[l,d]=j.useState(""),[f,m]=j.useState(""),[v,b]=j.useState(!1),T=()=>{if(!l.trim()){m("Please enter a church code");return}const I=a(l.trim());I?(Qe.impact({style:ze.Medium}),e(I.code,I.name,I.id),b(!0),m(""),setTimeout(()=>n("/"),1500)):(Qe.impact({style:ze.Heavy}),m("Invalid church code. Please check and try again."))},S=()=>{confirm("Are you sure you want to leave this church? You will lose access to church-specific content.")&&(Qe.impact({style:ze.Medium}),i(),n("/"))};return t&&r?h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark pb-24",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),n(-1)},className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1",children:"My Church"})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{className:"bg-white dark:bg-card-dark rounded-2xl p-6 border border-gray-100 dark:border-gray-800 text-center",children:[h.jsx("div",{className:"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"material-symbols-outlined text-primary text-4xl",children:"church"})}),h.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:r}),h.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"You're a member of this church"}),h.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-slate-800 rounded-xl",children:[h.jsx("p",{className:"text-xs text-slate-400 mb-1",children:"Church Code"}),h.jsx("p",{className:"font-mono text-lg font-bold text-primary",children:Ns.getState().churchCode})]})]}),h.jsx("button",{onClick:S,className:"w-full py-4 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 font-bold rounded-xl transition-all active:scale-[0.98]",children:"Leave Church"}),h.jsx("p",{className:"text-xs text-slate-400 text-center",children:"Leaving will remove your access to church announcements, events, and prayer requests."})]})]}):h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark pb-24",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),n(-1)},className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1",children:"Join a Church"})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-2xl p-6 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-primary/20 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsx("span",{className:"material-symbols-outlined text-primary text-3xl",children:"group_add"})}),h.jsx("h2",{className:"text-lg font-bold text-slate-900 dark:text-white",children:"Connect with Your Church"}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mt-2",children:"Enter the church code provided by your pastor or church admin to access church announcements, events, and community features."})]}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("label",{className:"text-sm font-bold text-slate-700 dark:text-slate-300",children:"Church Code"}),h.jsx("input",{type:"text",value:l,onChange:I=>{d(I.target.value.toUpperCase()),m("")},placeholder:"Enter code (e.g., GRACE2024)",className:"w-full p-4 bg-white dark:bg-slate-800 rounded-xl border-2 border-gray-200 dark:border-gray-700 focus:border-primary focus:ring-0 text-slate-900 dark:text-white font-mono text-lg text-center tracking-wider uppercase",maxLength:20}),f&&h.jsx("p",{className:"text-sm text-red-600 dark:text-red-400 text-center",children:f}),v&&h.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[h.jsx("span",{className:"material-symbols-outlined",children:"check_circle"}),h.jsx("p",{className:"text-sm font-medium",children:"Successfully joined!"})]})]}),h.jsx("button",{onClick:T,disabled:!l.trim()||v,className:"w-full py-4 bg-primary hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed text-white font-bold rounded-xl shadow-lg shadow-blue-200 dark:shadow-none transition-all active:scale-[0.98]",children:v?"Redirecting...":"Join Church"}),h.jsxs("p",{className:"text-xs text-slate-400 text-center",children:["Demo code: ",h.jsx("span",{className:"font-mono font-bold",children:"GRACE2024"})]})]})]})},t7=[{id:"free",name:"Free",price:"$0",period:"forever",icon:h.jsx(x3,{className:"w-6 h-6"}),features:[{text:"Read Bible offline",included:!0},{text:"Join church community",included:!0},{text:"View announcements & events",included:!0},{text:"Submit prayer requests",included:!0},{text:"Record sermons",included:!1},{text:"AI sermon summaries",included:!1},{text:"Personal notes & highlights",included:!1}]},{id:"basic",name:"Basic",price:"$4.99",period:"/month",icon:h.jsx(S3,{className:"w-6 h-6"}),features:[{text:"Everything in Free",included:!0},{text:"Record sermons (5/month)",included:!0},{text:"Basic AI summaries",included:!0},{text:"Personal notes",included:!0},{text:"Unlimited recordings",included:!1},{text:"Advanced AI features",included:!1},{text:"Priority support",included:!1}]},{id:"premium",name:"Premium",price:"$9.99",period:"/month",icon:h.jsx(gA,{className:"w-6 h-6"}),popular:!0,features:[{text:"Everything in Basic",included:!0},{text:"Unlimited sermon recordings",included:!0},{text:"Advanced AI summaries & insights",included:!0},{text:"Export notes & transcripts",included:!0},{text:"Cloud backup & sync",included:!0},{text:"Priority support",included:!0},{text:"Early access to features",included:!0}]}],n7=()=>{const n=xn(),{subscriptionTier:e,setSubscription:t}=Ns(),r=i=>{Qe.impact({style:ze.Medium}),(i==="free"||confirm(`Subscribe to ${i} plan? (Demo - no actual payment)`))&&(t(i),n(-1))};return h.jsxs("div",{className:"min-h-screen bg-background-light dark:bg-background-dark pb-24",children:[h.jsxs("div",{className:"sticky top-0 z-10 flex items-center gap-3 p-4 bg-white/95 dark:bg-[#101a22]/95 backdrop-blur-md border-b border-gray-100 dark:border-gray-800",children:[h.jsx("button",{onClick:()=>{Qe.impact({style:ze.Light}),n(-1)},className:"p-2 -ml-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-slate-700 dark:text-white",children:"arrow_back"})}),h.jsx("h1",{className:"text-lg font-bold text-slate-900 dark:text-white flex-1",children:"Subscription"})]}),h.jsxs("div",{className:"p-4 space-y-6",children:[h.jsxs("div",{className:"bg-gradient-to-r from-primary to-blue-600 rounded-2xl p-4 text-white",children:[h.jsx("p",{className:"text-sm opacity-80",children:"Current Plan"}),h.jsx("p",{className:"text-xl font-bold capitalize",children:e})]}),h.jsx("div",{className:"space-y-4",children:t7.map(i=>h.jsxs("div",{className:`relative bg-white dark:bg-card-dark rounded-2xl p-5 border-2 transition-all ${e===i.id?"border-primary shadow-lg shadow-primary/20":"border-gray-100 dark:border-gray-800"}`,children:[i.popular&&h.jsx("span",{className:"absolute -top-3 right-4 px-3 py-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold rounded-full",children:"Most Popular"}),h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${i.id==="premium"?"bg-gradient-to-br from-yellow-400 to-orange-500 text-white":i.id==="basic"?"bg-primary/10 text-primary":"bg-gray-100 dark:bg-slate-800 text-slate-500"}`,children:i.icon}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white",children:i.name}),h.jsxs("p",{className:"text-sm text-slate-500",children:[h.jsx("span",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:i.price}),i.period]})]})]}),h.jsx("ul",{className:"space-y-2 mb-4",children:i.features.map((a,l)=>h.jsxs("li",{className:`flex items-center gap-2 text-sm ${a.included?"text-slate-700 dark:text-slate-300":"text-slate-400 line-through"}`,children:[h.jsx(OU,{className:`w-4 h-4 ${a.included?"text-green-500":"text-gray-300"}`}),a.text]},l))}),h.jsx("button",{onClick:()=>r(i.id),disabled:e===i.id,className:`w-full py-3 font-bold rounded-xl transition-all active:scale-[0.98] ${e===i.id?"bg-gray-100 dark:bg-slate-800 text-slate-400 cursor-default":i.popular?"bg-gradient-to-r from-primary to-blue-600 text-white shadow-lg":"bg-primary/10 text-primary hover:bg-primary/20"}`,children:e===i.id?"Current Plan":"Select Plan"})]},i.id))}),h.jsx("p",{className:"text-xs text-slate-400 text-center px-4",children:"Cancel anytime. Subscriptions help us maintain and improve BibleNoteLM."})]})]})},r7=()=>h.jsxs("section",{className:"py-4",children:[h.jsxs("div",{className:"flex items-center justify-between px-4 mb-3",children:[h.jsx("h2",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight",children:"Announcements"}),h.jsx("span",{className:"text-xs text-primary font-medium",children:"Swipe for more"})]}),h.jsxs("div",{className:"flex overflow-x-auto gap-4 px-4 pb-4 hide-scrollbar snap-x snap-mandatory scroll-smooth",children:[h.jsxs(it,{to:"/events/ann-1",className:"snap-start shrink-0 w-[280px] h-[160px] relative rounded-xl overflow-hidden group shadow-md transition-all",children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCTKwmERj_lTYjmJ3cUDiA8SAfubaFghrFdxKPxEBGJn3DSoDRWz56l2FOk_S9RwLdlMl8uiGGV25DilweThaldzga77peCjkJgXNKVOtffFB1r-dBYLgesXxy_Vd1vxibk_8SMm0snwEdXF9oZMLSKy-le-ICoDcGKU10D0dq4vxVOyZargc5U6L2DE9Yx-X8sgGZdmpeclMyN5cHCxIO3Z-XAXXv8ck4zP15nd7-gRFe_y1ro9Fw0q-KaUnhaDJCHm55FgRLuSzz1")'}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 p-4 w-full",children:[h.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-[10px] font-bold bg-primary text-white mb-2 shadow-sm",children:"Community"}),h.jsx("h3",{className:"text-white text-base font-bold leading-tight shadow-sm",children:"Church Picnic"}),h.jsx("p",{className:"text-white/90 text-xs mt-1 font-medium",children:"Sat, 2pm  Central Park"})]})]}),h.jsxs(it,{to:"/events/ann-2",className:"snap-start shrink-0 w-[280px] h-[160px] relative rounded-xl overflow-hidden group shadow-md transition-all",children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuCMDXbQHPRD32aAhzMX9M6ggDIWKTG-lSWcZ5yOibyVuDw2MCGL1ZnV2q5ik8JeDcHz748_iopXNTaf2nhXmda4NX7Fv5ILAc1IUUuXyZhZemJjuAE1XHZ_kn4SjHva669YS28DchYGtxBj9lYMr9VlVLSjQ2Y9-XvEc30rOJZX3kmWOUr6fwLuW4qxc6s1xeuAGD4Et8VoiOtLNk7EabX2JunqIDsYzwst3E1ZBoHaOg2bzc82576THMIpB84zUifS_7yogi72a8FI")'}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 p-4 w-full",children:[h.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-[10px] font-bold bg-purple-500 text-white mb-2 shadow-sm",children:"Series"}),h.jsx("h3",{className:"text-white text-base font-bold leading-tight shadow-sm",children:'New Series: "Hope"'}),h.jsx("p",{className:"text-white/90 text-xs mt-1 font-medium",children:"Starts Sunday  9am & 11am"})]})]}),h.jsxs(it,{to:"/events/ann-3",className:"snap-start shrink-0 w-[280px] h-[160px] relative rounded-xl overflow-hidden group shadow-md transition-all",children:[h.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-700 group-hover:scale-110",style:{backgroundImage:'url("https://images.unsplash.com/photo-1544427920-c49ccfb85579?q=80&w=1000&auto=format&fit=crop")'}}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent"}),h.jsxs("div",{className:"absolute bottom-0 left-0 p-4 w-full",children:[h.jsx("span",{className:"inline-block px-2 py-0.5 rounded text-[10px] font-bold bg-orange-500 text-white mb-2 shadow-sm",children:"Outreach"}),h.jsx("h3",{className:"text-white text-base font-bold leading-tight shadow-sm",children:"Food Drive"}),h.jsx("p",{className:"text-white/90 text-xs mt-1 font-medium",children:"Collecting canned goods all month"})]})]}),h.jsx("div",{className:"w-2 shrink-0"})]})]}),s7=()=>{const{can:n,subscriptionTier:e}=Ns(),t=n("record_sermon")||e!=="free",r=n("manage_announcements");return h.jsxs("section",{className:"px-4 py-2",children:[h.jsx("h2",{className:"text-[#111518] dark:text-white text-lg font-bold leading-tight mb-3",children:"Quick Actions"}),h.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 hide-scrollbar",children:[t?h.jsxs(it,{to:"/sermons",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/30 transition-all active:scale-95",children:[h.jsxs("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-primary dark:bg-slate-700 dark:text-blue-400 group-hover:bg-primary group-hover:text-white transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"mic"}),h.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center border border-white dark:border-slate-800",title:"AI Powered",children:h.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-900",children:"auto_awesome"})})]}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Record Sermon"})]}):h.jsxs(it,{to:"/subscription",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-yellow-400/30 transition-all active:scale-95",children:[h.jsxs("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-yellow-50 text-yellow-600 dark:bg-yellow-900/20 dark:text-yellow-400 group-hover:bg-yellow-400 group-hover:text-white transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"mic"}),h.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center border border-white dark:border-slate-800",children:h.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-900",children:"lock"})})]}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Record Sermon"})]}),h.jsxs(it,{to:"/bible",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/30 transition-all active:scale-95",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-primary dark:bg-slate-700 dark:text-blue-400 group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"menu_book"})}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Read Bible"})]}),h.jsxs(it,{to:"/prayers",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/30 transition-all active:scale-95",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-primary dark:bg-slate-700 dark:text-blue-400 group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"edit_note"})}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Prayer Journal"})]}),h.jsxs(it,{to:"/notes",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/30 transition-all active:scale-95",children:[h.jsxs("div",{className:"relative flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-primary dark:bg-slate-700 dark:text-blue-400 group-hover:bg-primary group-hover:text-white transition-colors",children:[h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"note_stack"}),(e==="premium"||e==="basic")&&h.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center border border-white dark:border-slate-800",title:"AI Powered",children:h.jsx("span",{className:"material-symbols-outlined text-[10px] text-yellow-900",children:"auto_awesome"})})]}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Bible Notes"})]}),h.jsxs(it,{to:"/sermons/history",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-primary/30 transition-all active:scale-95",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-blue-50 text-primary dark:bg-slate-700 dark:text-blue-400 group-hover:bg-primary group-hover:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"history"})}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Sermon Library"})]}),r&&h.jsxs(it,{to:"/admin",onClick:()=>Qe.impact({style:ze.Light}),className:"shrink-0 w-[110px] group flex flex-col items-center gap-3 p-4 rounded-xl bg-white dark:bg-slate-800 shadow-[0_2px_8px_rgba(0,0,0,0.04)] dark:shadow-none border border-gray-100 dark:border-gray-700 hover:border-indigo-400/30 transition-all active:scale-95",children:[h.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-full bg-indigo-50 text-indigo-600 dark:bg-indigo-900/20 dark:text-indigo-400 group-hover:bg-indigo-600 group-hover:text-white transition-colors",children:h.jsx("span",{className:"material-symbols-outlined text-[24px]",children:"dashboard"})}),h.jsx("span",{className:"text-xs font-medium text-center text-gray-700 dark:text-gray-300 leading-tight",children:"Dashboard"})]}),h.jsx("div",{className:"w-1 shrink-0"})]})]})},i7=()=>h.jsxs("div",{className:"w-full",children:[h.jsx(pU,{}),h.jsx(s7,{}),h.jsx(vU,{}),h.jsx(r7,{})]}),o7=()=>{const{name:n,avatar:e,email:t}=Ns();return h.jsxs("div",{className:"px-4 py-6 pb-20",children:[h.jsx("h2",{className:"text-2xl font-bold mb-4 dark:text-white",children:"More"}),h.jsxs(it,{to:"/profile",className:"flex items-center gap-4 p-4 mb-6 bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 hover:border-primary/50 transition-colors",children:[h.jsx("div",{className:"w-14 h-14 rounded-full overflow-hidden border-2 border-primary/20",children:h.jsx("img",{src:e,alt:n,className:"w-full h-full object-cover"})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("h3",{className:"font-bold text-slate-900 dark:text-white truncate",children:n}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate",children:t})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs(it,{to:"/prayers",className:"block p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-slate-700 flex items-center justify-center text-primary dark:text-blue-400",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"edit_note"})}),h.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Prayer Journal"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/notes",className:"block p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-slate-700 flex items-center justify-center text-primary dark:text-blue-400",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"note_stack"})}),h.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Bible Notes"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/sermons",className:"block p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-slate-700 flex items-center justify-center text-primary dark:text-blue-400",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"mic"})}),h.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Sermon Recorder"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/sermons/history",className:"block p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-slate-700 flex items-center justify-center text-primary dark:text-blue-400",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"history"})}),h.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Sermon Library"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]}),h.jsxs(it,{to:"/settings",className:"block p-4 bg-white dark:bg-slate-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-50 dark:bg-slate-700 flex items-center justify-center text-primary dark:text-blue-400",children:h.jsx("span",{className:"material-symbols-outlined text-[20px]",children:"settings"})}),h.jsx("span",{className:"font-medium text-slate-700 dark:text-slate-200",children:"Settings"})]}),h.jsx("span",{className:"material-symbols-outlined text-gray-400",children:"chevron_right"})]})]})]})},a7=()=>h.jsx(Ik,{children:h.jsx(n2,{children:h.jsxs(sk,{children:[h.jsx(pn,{path:"/",element:h.jsx(i7,{})}),h.jsx(pn,{path:"/sermons",element:h.jsx("div",{className:"px-4 py-6",children:h.jsx(P3,{})})}),h.jsx(pn,{path:"/sermons/history",element:h.jsx(L3,{})}),h.jsx(pn,{path:"/sermons/history/:id",element:h.jsx(V3,{})}),h.jsx(pn,{path:"/bible",element:h.jsx("div",{className:"h-[calc(100vh-8rem)]",children:h.jsx(B3,{})})}),h.jsx(pn,{path:"/events",element:h.jsx(xU,{})}),h.jsx(pn,{path:"/events/:id",element:h.jsx(BB,{})}),h.jsx(pn,{path:"/prayers",element:h.jsx("div",{className:"h-[calc(100vh-8rem)] px-4 py-6",children:h.jsx(jB,{})})}),h.jsx(pn,{path:"/notes",element:h.jsx(FB,{})}),h.jsx(pn,{path:"/profile",element:h.jsx(HB,{})}),h.jsx(pn,{path:"/settings",element:h.jsx(GB,{})}),h.jsx(pn,{path:"/settings/backup",element:h.jsx(KB,{})}),h.jsx(pn,{path:"/admin",element:h.jsx(ZB,{})}),h.jsx(pn,{path:"/join-church",element:h.jsx(e7,{})}),h.jsx(pn,{path:"/subscription",element:h.jsx(n7,{})}),h.jsx(pn,{path:"/more",element:h.jsx(o7,{})})]})})}),_1=document.getElementById("root");if(!_1)throw new Error("Could not find root element to mount to");const l7=aR.createRoot(_1);l7.render(h.jsx($c.StrictMode,{children:h.jsx(a7,{})}));export{sf as E,ze as I,pb as N,hy as W,Kk as b};
//# sourceMappingURL=index-3kHJRntp.js.map
